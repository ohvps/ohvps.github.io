<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>POST /erisim-belirteci -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 -&gt; v1.0.2 | (ÖHVPS) API İLKE VE KURALLARI</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content=" ">
    
    <link rel="preload" href="/assets/css/0.styles.1aca20b5.css" as="style"><link rel="preload" href="/assets/js/app.5f8c0c8f.js" as="script"><link rel="preload" href="/assets/js/8.7b64f4e3.js" as="script"><link rel="preload" href="/assets/js/5.84780e47.js" as="script"><link rel="preload" href="/assets/js/4.1766b0b6.js" as="script"><link rel="preload" href="/assets/js/69.8c3bf5ab.js" as="script"><link rel="prefetch" href="/assets/js/1.6b17d2a6.js"><link rel="prefetch" href="/assets/js/10.61fb8c6a.js"><link rel="prefetch" href="/assets/js/11.b37b85af.js"><link rel="prefetch" href="/assets/js/12.0b38e123.js"><link rel="prefetch" href="/assets/js/15.5a058b57.js"><link rel="prefetch" href="/assets/js/16.91c4212c.js"><link rel="prefetch" href="/assets/js/17.c4b13a13.js"><link rel="prefetch" href="/assets/js/18.210b0469.js"><link rel="prefetch" href="/assets/js/19.06aec1d2.js"><link rel="prefetch" href="/assets/js/2.c8d641d2.js"><link rel="prefetch" href="/assets/js/20.7eb8d2c4.js"><link rel="prefetch" href="/assets/js/21.91f2ccb0.js"><link rel="prefetch" href="/assets/js/22.3d8c8cae.js"><link rel="prefetch" href="/assets/js/23.50b3d8db.js"><link rel="prefetch" href="/assets/js/24.738aca8c.js"><link rel="prefetch" href="/assets/js/25.0ca69243.js"><link rel="prefetch" href="/assets/js/26.604f5b5b.js"><link rel="prefetch" href="/assets/js/27.cb91be27.js"><link rel="prefetch" href="/assets/js/28.d258e352.js"><link rel="prefetch" href="/assets/js/29.e783404b.js"><link rel="prefetch" href="/assets/js/3.ff672b5c.js"><link rel="prefetch" href="/assets/js/30.0be8295d.js"><link rel="prefetch" href="/assets/js/31.948c20cc.js"><link rel="prefetch" href="/assets/js/32.24e340ae.js"><link rel="prefetch" href="/assets/js/33.2b5eda4e.js"><link rel="prefetch" href="/assets/js/34.85a50388.js"><link rel="prefetch" href="/assets/js/35.8511d0c6.js"><link rel="prefetch" href="/assets/js/36.2a4e0383.js"><link rel="prefetch" href="/assets/js/37.bf01f58b.js"><link rel="prefetch" href="/assets/js/38.4954f89c.js"><link rel="prefetch" href="/assets/js/39.349b12f5.js"><link rel="prefetch" href="/assets/js/40.3a23d959.js"><link rel="prefetch" href="/assets/js/41.8fd7fa01.js"><link rel="prefetch" href="/assets/js/42.52656ed7.js"><link rel="prefetch" href="/assets/js/43.5ea393b6.js"><link rel="prefetch" href="/assets/js/44.717ee2b5.js"><link rel="prefetch" href="/assets/js/45.4a949f59.js"><link rel="prefetch" href="/assets/js/46.bbed8e6a.js"><link rel="prefetch" href="/assets/js/47.e7f746c3.js"><link rel="prefetch" href="/assets/js/48.c5c3409f.js"><link rel="prefetch" href="/assets/js/49.1312d83e.js"><link rel="prefetch" href="/assets/js/50.7040ca70.js"><link rel="prefetch" href="/assets/js/51.26ee4fb0.js"><link rel="prefetch" href="/assets/js/52.ae39195f.js"><link rel="prefetch" href="/assets/js/53.76982f19.js"><link rel="prefetch" href="/assets/js/54.d726fb02.js"><link rel="prefetch" href="/assets/js/55.9e9b007b.js"><link rel="prefetch" href="/assets/js/56.086404f5.js"><link rel="prefetch" href="/assets/js/57.e28085fb.js"><link rel="prefetch" href="/assets/js/58.c872a125.js"><link rel="prefetch" href="/assets/js/59.60a3b2a0.js"><link rel="prefetch" href="/assets/js/6.9fa1c45f.js"><link rel="prefetch" href="/assets/js/60.26235382.js"><link rel="prefetch" href="/assets/js/61.3d809330.js"><link rel="prefetch" href="/assets/js/62.ea4500e7.js"><link rel="prefetch" href="/assets/js/63.6bfc0a5f.js"><link rel="prefetch" href="/assets/js/64.017c8e24.js"><link rel="prefetch" href="/assets/js/65.e11efd89.js"><link rel="prefetch" href="/assets/js/66.1678d5ff.js"><link rel="prefetch" href="/assets/js/67.3f710527.js"><link rel="prefetch" href="/assets/js/68.e05f71fd.js"><link rel="prefetch" href="/assets/js/7.deb19429.js"><link rel="prefetch" href="/assets/js/70.d40cd8ec.js"><link rel="prefetch" href="/assets/js/71.a4c31afc.js"><link rel="prefetch" href="/assets/js/72.b7bddb1e.js"><link rel="prefetch" href="/assets/js/73.c49e6bd5.js"><link rel="prefetch" href="/assets/js/74.42936e10.js"><link rel="prefetch" href="/assets/js/75.ce14d49d.js"><link rel="prefetch" href="/assets/js/76.7b0b94d3.js"><link rel="prefetch" href="/assets/js/77.02823039.js"><link rel="prefetch" href="/assets/js/78.9c917df4.js"><link rel="prefetch" href="/assets/js/79.22e7002e.js"><link rel="prefetch" href="/assets/js/80.33d749d2.js"><link rel="prefetch" href="/assets/js/81.22c41972.js"><link rel="prefetch" href="/assets/js/82.31ae8989.js"><link rel="prefetch" href="/assets/js/83.d1313d6d.js"><link rel="prefetch" href="/assets/js/84.57605139.js"><link rel="prefetch" href="/assets/js/85.bc509a47.js"><link rel="prefetch" href="/assets/js/86.cc00737a.js"><link rel="prefetch" href="/assets/js/9.2dbb112c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.288f53b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1aca20b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/TCMB_logo.svg.png" alt="(ÖHVPS) API İLKE VE KURALLARI" class="logo"> <span class="site-name can-hide">(ÖHVPS) API İLKE VE KURALLARI</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/v1.1.0/contents/tanim-ve-kisitlamalar" class="sidebar-heading clickable"><span>SÜRÜM 1.1.0 - Aktif Sürüm</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/dijital-cuzdan.html" class="sidebar-link">Dijital Cüzdanlardan TR Karekod ile Ödeme</a></li><li><a href="/surum-yonetimi.html" class="sidebar-link">Sürüm Yönetimi</a></li><li><a href="/uyum-tarihleri.html" class="sidebar-link">ÖHVPS Uyum Tarihleri</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.0.1/contents/tanim-ve-kisitlamalar" class="sidebar-heading clickable"><span>SÜRÜM 1.0.1</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.0.2/contents/tanim-ve-kisitlamalar" class="sidebar-heading clickable open"><span>SÜRÜM 1.0.2</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/v1.0.2/contents/tanim-ve-kisitlamalar.html" class="sidebar-link">1. Tanımlar ve Kısıtlamalar</a></li><li><a href="/v1.0.2/contents/kapsam-ve-dayanak.html" class="sidebar-link">2. Kapsam ve Dayanak</a></li><li><a href="/v1.0.2/contents/temel-prensipler.html" class="sidebar-link">3. Temel Prensipler</a></li><li><a href="/v1.0.2/contents/riza-durumlari.html" class="sidebar-link">4. Rıza Durumları</a></li><li><a href="/v1.0.2/contents/gkd.html" class="sidebar-link">5. Güçlü Kimlik Doğrulama</a></li><li><a href="/v1.0.2/contents/odeme-emri-baslatma-hizmeti.html" class="sidebar-link">6. Ödeme Emri Başlatma Hizmeti</a></li><li><a href="/v1.0.2/contents/hesap-bilgisi-hizmeti.html" class="sidebar-link">7. Hesap Bilgisi Hizmeti</a></li><li><a href="/v1.0.2/contents/hhs-yos-api.html" class="sidebar-link">8. HHS ve YÖS API</a></li><li><a href="/v1.0.2/contents/erisim-belirteci.html" aria-current="page" class="active sidebar-link">9. Erişim Belirteci API</a></li><li><a href="/v1.0.2/contents/ekler.html" class="sidebar-link">10. Ekler</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="post-erisim-belirteci"><a href="#post-erisim-belirteci" class="header-anchor">#</a> POST /erisim-belirteci</h1> <p><strong>İSTEK:</strong></p> <p>YÖS erisim-belirteci erişim adresini 2 amaçla kullanır:</p> <ol><li><p>Bir önceki adımdan aldığı rizaNo, rizaTip (ödeme emri başlatma hizmetinde “O”, hesap bilgisi hizmetinde “H”) ve GKD sonrası dönülen yetKod bilgilerini kullanarak HHS nezdinde ErisimBelirteci nesnesi oluşturmak üzere istekte bulunur. YÖS’ün istekte bulunabilmesi için GKD adımının başarılı bir şekilde tamamlanması rizaDrm bilgisinin ‘yetkilendirildi’ olması gerekir. Erişim Belirteci nesnesi ile rızası nesnesi (Ödeme Emri Rızası veya Hesap Bilgisi Rızası) arasındaki ilişki rıza numarası üzerinden sağlanır.</p></li> <li><p>Aldığı erişim belirtecinin Geçerlilik Süresinin dolduğu durumda, yenileme belirteci karşılığında yeni bir erişim belirteci alması gerekmektedir.</p></li></ol> <p>POST /erisim-belirteci isteğinin (REQUEST) gövdesinde (BODY)  “ErisimBelirteciIstegi” nesnesi (Tablo-23) kullanılır. İstek başarıyla sonuçlanırsa HHS kaynak sunucusunda “ErisimBelirteci” nesnesi (Tablo 24) oluşturulur veya (Yenileme Belirteci için) güncellenir. Rıza durumu “Yetki Kullanıldı” olarak güncellenir.</p> <p>Erişim Belirteci POST işlemi sonucunda HTTP 200 dönülmesi gerekmektedir.</p> <p><strong>Tablo 23: “ErisimBelirteciIstegi” nesnesi</strong></p> <table><thead><tr><th>Alan Adı</th> <th>JSON Alan Adı</th> <th>Format:Veri modeli İsmi</th> <th>Zorunlu / Koşullu /  İsteğe bağlı</th> <th>Açıklama</th></tr></thead> <tbody><tr><td>RızaNo</td> <td>rizaNo</td> <td>AN1..128</td> <td>Z</td> <td>Rıza nesnesinin oluşturulması esnasında HHS kaynak sunucusu tarafından atanan biricik tanımlayıcı</td></tr> <tr><td>Rıza Tipi</td> <td>rizaTip</td> <td>AN1</td> <td>Z</td> <td><strong>O veya H (TR.OHVPS.DataCode.RizaTip)</strong></td></tr> <tr><td>Yetki Tipi</td> <td>yetTip</td> <td>AN1..50</td> <td>Z</td> <td>“yet_kod” yada “yenileme_belirteci” değerini alabilir. <strong>(TR.OHVPS.DataCode.YetTip)</strong></td></tr> <tr><td>Yetki Kodu</td> <td>yetKod</td> <td>AN1..255</td> <td>K</td> <td>GKD işleminden dönen yetkilendirme kodudur. Tek kullanımlık olup, aynı yetKod ile birden fazla token alınamaz. yetKod Parametresinin yaşam ömrü 5 dakika olmalıdır.<br>yetTip = “yet_kod” ise zorunludur.</td></tr> <tr><td>Yenilenme Belirteci</td> <td>yenilemeBelirteci</td> <td>AN1..4096</td> <td>K</td> <td>Erişim belirtecinin yenilenmesi amacıyla kullanılır.<br>yetTip = “yenileme_belirteci” ise kullanımı zorunludur.</td></tr></tbody></table> <p><strong>BAŞARILI YANIT:</strong></p> <p>POST işleminin RESPONSE gövdesini (BODY) oluşturan “erisimBelirteci” nesnesinde (Tablo-19) bulunan erişim belirteci değeri ödeme emrinin başlatılması esnasında kullanılır.</p> <p><strong>Tablo 24: &quot;ErisimBelirteci&quot; nesnesi</strong></p> <table><thead><tr><th>Alan Adı</th> <th>JSON Alan Adı</th> <th>Format:Veri modeli İsmi</th> <th>Zorunlu / Koşullu /  İsteğe bağlı</th> <th>Açıklama</th></tr></thead> <tbody><tr><td>Erişim Belirteci</td> <td>erisimBelirteci</td> <td>AN1..4096</td> <td>Z</td> <td>Yetkilendirme Kodu karşılığında HHS tarafından dönülen ve sonraki hesap bilgisi ve ödeme emri servislerine erişimde kullanılan bilgidir.</td></tr> <tr><td>Geçerlilik Süresi</td> <td>gecerlilikSuresi</td> <td>N1..9</td> <td>Z</td> <td>Erişim Belirtecini saniye cinsinden geçerlilik süresidir.<br> Erişim belirteci geçerli olduğu son tarih ;<br>Hesap Bilgisi Rızası için en fazla 30 gün olmalıdır. Erişimin Geçerli Olduğu Son Tarih(erisimIzniSonTrh); Erişim Belirteci Geçerlilik Süresi'nden küçük ise Erişimin Geçerli Olduğu Son Tarih değeri ile sınırlıdır.<br>Ödeme Başlatma Rızası için 5 dakika olmalıdır.</td></tr> <tr><td>Yenileme Belirteci</td> <td>yenilemeBelirteci</td> <td>AN1..4096</td> <td>Z</td> <td>Erişim belirtecinin yenilenmesi amacıyla kullanılır.</td></tr> <tr><td>Yenileme Belirteci Geçerlik Süresi</td> <td>yenilemeBelirteciGecerlilikSuresi</td> <td>N1..9</td> <td>Z</td> <td>Yenileme belirtecinin saniye cinsinden geçerlilik süresidir.<br>Yenileme belirtecinin geçerli olduğu son tarih ;<br>Hesap Bilgisi için Erişimin Geçerli Olduğu Son Tarih ile sınırlı olmalıdır.<br>Bu tarih geldiği zaman Hesap Bilgisi Rıza Durumunu ”Yetki Sonlandırıldı” statüsüne çekilmesi gerekir.<br>Ödeme Başlatma için Rıza Oluşturma Zamanından 15 gün sonrası olmalıdır.<br><br>15 gün süresi sorgulama servislerinin çağrımını destekleyecek şekilde uzun tutulmuştur. İleri vadeli işlemler bu kapsamda değildir. <br>Ödeme emri 5 dakika içinde gerçekleştirilmelidir. Gerçekleşmediğinde 4.2.8 bölümünde aktarılan rıza statü güncellemesi yapılmalıdır.</td></tr></tbody></table> <p>erisim-belirteci erisim noktasından elde edilen erisimBelirteci, ilişkilendirildiği nesne veya işlem için gönderilen POST isteği başlığında x-access-token alanında iletilir.</p> <p>Yenilenme Belirteci (refreshToken) kullanılarak Erişim Belirteci (accessToken) alındığında, dönen yanıttaki Yenileme Belirteci Geçerlik Süresi (yenilemeBelirteciGecerlilikSuresi) geçen süre eksiltilerek, kalan zamanın saniye cinsinden hesaplanmasıyla iletilmelidir.</p> <p>Yenileme Belirteci ile Erişim Belirteci güncellendiğinde, HHS'den dönen yenilemeBelirteci değeri değişebilir, YÖS bu güncel anahtarı saklamalı ve sonraki erisimBelirteci isteğini yenilenmiş olan yenilemeBelirteci ile yapmalıdır.</p> <p>Erişim Belirteci API çağrımı sırasında rıza durumları kontrol edilmelidir. Bu kontrollerin nasıl yapılması gerektiği 4-Rıza Durumları bölümünde aktarılmıştır.</p> <p>Yenileme belirteci karşılığında yeni bir erişim belirteci alınması sırasında hata alınması durumunda, HHS'nin döndüğü hata yanıtında httpCode = 401 ve errorCode = &quot;TR.OHVPS.Connection.InvalidToken&quot; geldiği durumda, YÖS tarafından HHS'ye ilgili rıza için sistemsel olarak iptal isteği gönderilmelidir.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v1.0.2/contents/hhs-yos-api.html" class="prev">
        8. HHS ve YÖS API
      </a></span> <span class="next"><a href="/v1.0.2/contents/ekler.html">
        10. Ekler
      </a>
      →
    </span></p></div> <div class="footer-wrapper"><footer class="page-edit footer"><div class="footer-info"><p style="padding-right:15px;">© Tüm hakları saklıdır.</p></div></footer></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5f8c0c8f.js" defer></script><script src="/assets/js/8.7b64f4e3.js" defer></script><script src="/assets/js/5.84780e47.js" defer></script><script src="/assets/js/4.1766b0b6.js" defer></script><script src="/assets/js/69.8c3bf5ab.js" defer></script>
  </body>
</html>
