(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(e){function n(n){for(var a,t,d=n[0],s=n[1],m=n[2],o=0,k=[];o<d.length;o++)t=d[o],Object.prototype.hasOwnProperty.call(r,t)&&r[t]&&k.push(r[t][0]),r[t]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(n);k.length;)k.shift()();return l.push.apply(l,m||[]),i()}function i(){for(var e,n=0;n<l.length;n++){for(var i=l[n],a=!0,d=1;d<i.length;d++){var s=i[d];0!==r[s]&&(a=!1)}a&&(l.splice(n--,1),e=t(t.s=i[0]))}return e}var a={},r={13:0},l=[];function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.e=function(e){var n=[],i=r[e];if(0!==i)if(i)n.push(i[2]);else{var a=new Promise((function(n,a){i=r[e]=[n,a]}));n.push(i[2]=a);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,t.nc&&d.setAttribute("nonce",t.nc),d.src=function(e){return t.p+"assets/js/"+({14:"vendors~docsearch"}[e]||e)+"."+{1:"6b17d2a6",2:"c8d641d2",3:"ff672b5c",4:"1766b0b6",5:"84780e47",6:"9fa1c45f",7:"deb19429",8:"7b64f4e3",9:"2dbb112c",10:"61fb8c6a",11:"b37b85af",12:"0b38e123",14:"288f53b8",15:"4060773c",16:"67379bb4",17:"99537319",18:"f0fe7e1b",19:"06aec1d2",20:"7eb8d2c4",21:"91f2ccb0",22:"d9e6737f",23:"50b3d8db",24:"a793b228",25:"13d5029c",26:"d3d8bc6b",27:"cb91be27",28:"d258e352",29:"634f29b7",30:"0be8295d",31:"948c20cc",32:"24e340ae",33:"2b5eda4e",34:"85a50388",35:"8511d0c6",36:"2a4e0383",37:"b2806343",38:"2488afda",39:"f92b78fb",40:"ba15b75d",41:"1867599e",42:"9962bd55",43:"a19a1b62",44:"a8af0e55",45:"4a949f59",46:"bbed8e6a",47:"e7f746c3",48:"c5c3409f",49:"1312d83e",50:"24e98922",51:"26ee4fb0",52:"ae39195f",53:"76982f19",54:"2773ffe3",55:"9e9b007b",56:"6340c864",57:"e28085fb",58:"c872a125",59:"60a3b2a0",60:"1126f577",61:"9cb8351b",62:"ea4500e7",63:"507b729a",64:"017c8e24",65:"e11efd89",66:"8f55cd69",67:"149ffcbd",68:"b9e21411",69:"8c3bf5ab",70:"bf739471",71:"a4c31afc",72:"50f6e777",73:"58a5310e",74:"a5dc32a9",75:"ce14d49d",76:"41ba6514",77:"174a2412",78:"ac674ed9",79:"54ed7ed4",80:"02994e1f",81:"22c41972",82:"0cdd47da",83:"d1313d6d",84:"57605139",85:"bc509a47",86:"cc00737a"}[e]+".js"}(e);var s=new Error;l=function(n){d.onerror=d.onload=null,clearTimeout(m);var i=r[e];if(0!==i){if(i){var a=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+l+")",s.name="ChunkLoadError",s.type=a,s.request=l,i[1](s)}r[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(n)},t.m=e,t.c=a,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(n){return e[n]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t.oe=function(e){throw console.error(e),e};var d=window.webpackJsonp=window.webpackJsonp||[],s=d.push.bind(d);d.push=n,d=d.slice();for(var m=0;m<d.length;m++)n(d[m]);var u=s;l.push([115,0]),i()}([function(e,n,i){"use strict";i.r(n),i.d(n,"EffectScope",(function(){return hn})),i.d(n,"computed",(function(){return sn})),i.d(n,"customRef",(function(){return en})),i.d(n,"default",(function(){return Xa})),i.d(n,"defineAsyncComponent",(function(){return Pi})),i.d(n,"defineComponent",(function(){return Li})),i.d(n,"del",(function(){return Ee})),i.d(n,"effectScope",(function(){return Sn})),i.d(n,"getCurrentInstance",(function(){return ke})),i.d(n,"getCurrentScope",(function(){return vn})),i.d(n,"h",(function(){return yi})),i.d(n,"inject",(function(){return An})),i.d(n,"isProxy",(function(){return Fe})),i.d(n,"isReactive",(function(){return _e})),i.d(n,"isReadonly",(function(){return xe})),i.d(n,"isRef",(function(){return Le})),i.d(n,"isShallow",(function(){return Ve})),i.d(n,"markRaw",(function(){return je})),i.d(n,"mergeDefaults",(function(){return si})),i.d(n,"nextTick",(function(){return Bi})),i.d(n,"onActivated",(function(){return Zi})),i.d(n,"onBeforeMount",(function(){return Ni})),i.d(n,"onBeforeUnmount",(function(){return Gi})),i.d(n,"onBeforeUpdate",(function(){return Di})),i.d(n,"onDeactivated",(function(){return Mi})),i.d(n,"onErrorCaptured",(function(){return wi})),i.d(n,"onMounted",(function(){return Ii})),i.d(n,"onRenderTracked",(function(){return Vi})),i.d(n,"onRenderTriggered",(function(){return xi})),i.d(n,"onScopeDispose",(function(){return fn})),i.d(n,"onServerPrefetch",(function(){return _i})),i.d(n,"onUnmounted",(function(){return Ci})),i.d(n,"onUpdated",(function(){return Ei})),i.d(n,"provide",(function(){return zn})),i.d(n,"proxyRefs",(function(){return Xe})),i.d(n,"reactive",(function(){return Ce})),i.d(n,"readonly",(function(){return rn})),i.d(n,"ref",(function(){return Ue})),i.d(n,"set",(function(){return De})),i.d(n,"shallowReactive",(function(){return Ze})),i.d(n,"shallowReadonly",(function(){return dn})),i.d(n,"shallowRef",(function(){return $e})),i.d(n,"toRaw",(function(){return we})),i.d(n,"toRef",(function(){return an})),i.d(n,"toRefs",(function(){return nn})),i.d(n,"triggerRef",(function(){return qe})),i.d(n,"unref",(function(){return We})),i.d(n,"useAttrs",(function(){return li})),i.d(n,"useCssModule",(function(){return Yi})),i.d(n,"useCssVars",(function(){return Ri})),i.d(n,"useListeners",(function(){return ti})),i.d(n,"useSlots",(function(){return ri})),i.d(n,"version",(function(){return ji})),i.d(n,"watch",(function(){return gn})),i.d(n,"watchEffect",(function(){return kn})),i.d(n,"watchPostEffect",(function(){return yn})),i.d(n,"watchSyncEffect",(function(){return cn}));
/*!
 * Vue.js v2.7.16
 * (c) 2014-2023 Evan You
 * Released under the MIT License.
 */
var a=Object.freeze({}),r=Array.isArray;function l(e){return null==e}function t(e){return null!=e}function d(e){return!0===e}function s(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function m(e){return"function"==typeof e}function u(e){return null!==e&&"object"==typeof e}var o=Object.prototype.toString;function k(e){return"[object Object]"===o.call(e)}function y(e){return"[object RegExp]"===o.call(e)}function c(e){var n=parseFloat(String(e));return n>=0&&Math.floor(n)===n&&isFinite(e)}function b(e){return t(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||k(e)&&e.toString===o?JSON.stringify(e,g,2):String(e)}function g(e,n){return n&&n.__v_isRef?n.value:n}function H(e){var n=parseFloat(e);return isNaN(n)?e:n}function h(e,n){for(var i=Object.create(null),a=e.split(","),r=0;r<a.length;r++)i[a[r]]=!0;return n?function(e){return i[e.toLowerCase()]}:function(e){return i[e]}}h("slot,component",!0);var S=h("key,ref,slot,slot-scope,is");function v(e,n){var i=e.length;if(i){if(n===e[i-1])return void(e.length=i-1);var a=e.indexOf(n);if(a>-1)return e.splice(a,1)}}var f=Object.prototype.hasOwnProperty;function z(e,n){return f.call(e,n)}function K(e){var n=Object.create(null);return function(i){return n[i]||(n[i]=e(i))}}var A=/-(\w)/g,T=K((function(e){return e.replace(A,(function(e,n){return n?n.toUpperCase():""}))})),B=K((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),Y=/\B([A-Z])/g,R=K((function(e){return e.replace(Y,"-$1").toLowerCase()}));var P=Function.prototype.bind?function(e,n){return e.bind(n)}:function(e,n){function i(i){var a=arguments.length;return a?a>1?e.apply(n,arguments):e.call(n,i):e.call(n)}return i._length=e.length,i};function O(e,n){n=n||0;for(var i=e.length-n,a=new Array(i);i--;)a[i]=e[i+n];return a}function N(e,n){for(var i in n)e[i]=n[i];return e}function I(e){for(var n={},i=0;i<e.length;i++)e[i]&&N(n,e[i]);return n}function D(e,n,i){}var E=function(e,n,i){return!1},G=function(e){return e};function C(e,n){if(e===n)return!0;var i=u(e),a=u(n);if(!i||!a)return!i&&!a&&String(e)===String(n);try{var r=Array.isArray(e),l=Array.isArray(n);if(r&&l)return e.length===n.length&&e.every((function(e,i){return C(e,n[i])}));if(e instanceof Date&&n instanceof Date)return e.getTime()===n.getTime();if(r||l)return!1;var t=Object.keys(e),d=Object.keys(n);return t.length===d.length&&t.every((function(i){return C(e[i],n[i])}))}catch(e){return!1}}function Z(e,n){for(var i=0;i<e.length;i++)if(C(e[i],n))return i;return-1}function M(e){var n=!1;return function(){n||(n=!0,e.apply(this,arguments))}}function _(e,n){return e===n?0===e&&1/e!=1/n:e==e||n==n}var V=["component","directive","filter"],x=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:E,isReservedAttr:E,isUnknownElement:E,getTagNamespace:D,parsePlatformTagName:G,mustUseProp:E,async:!0,_lifecycleHooks:x},w=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function j(e){var n=(e+"").charCodeAt(0);return 36===n||95===n}function L(e,n,i,a){Object.defineProperty(e,n,{value:i,enumerable:!!a,writable:!0,configurable:!0})}var U=new RegExp("[^".concat(w.source,".$_\\d]"));var $="__proto__"in{},J="undefined"!=typeof window,q=J&&window.navigator.userAgent.toLowerCase(),W=q&&/msie|trident/.test(q),X=q&&q.indexOf("msie 9.0")>0,Q=q&&q.indexOf("edge/")>0;q&&q.indexOf("android");var ee=q&&/iphone|ipad|ipod|ios/.test(q);q&&/chrome\/\d+/.test(q),q&&/phantomjs/.test(q);var ne,ie=q&&q.match(/firefox\/(\d+)/),ae={}.watch,re=!1;if(J)try{var le={};Object.defineProperty(le,"passive",{get:function(){re=!0}}),window.addEventListener("test-passive",null,le)}catch(e){}var te=function(){return void 0===ne&&(ne=!J&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),ne},de=J&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function se(e){return"function"==typeof e&&/native code/.test(e.toString())}var me,ue="undefined"!=typeof Symbol&&se(Symbol)&&"undefined"!=typeof Reflect&&se(Reflect.ownKeys);me="undefined"!=typeof Set&&se(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var oe=null;function ke(){return oe&&{proxy:oe}}function ye(e){void 0===e&&(e=null),e||oe&&oe._scope.off(),oe=e,e&&e._scope.on()}var ce=function(){function e(e,n,i,a,r,l,t,d){this.tag=e,this.data=n,this.children=i,this.text=a,this.elm=r,this.ns=void 0,this.context=l,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=t,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=d,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),be=function(e){void 0===e&&(e="");var n=new ce;return n.text=e,n.isComment=!0,n};function pe(e){return new ce(void 0,void 0,void 0,String(e))}function ge(e){var n=new ce(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return n.ns=e.ns,n.isStatic=e.isStatic,n.key=e.key,n.isComment=e.isComment,n.fnContext=e.fnContext,n.fnOptions=e.fnOptions,n.fnScopeId=e.fnScopeId,n.asyncMeta=e.asyncMeta,n.isCloned=!0,n}"function"==typeof SuppressedError&&SuppressedError;var He=0,he=[],Se=function(){function e(){this._pending=!1,this.id=He++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,he.push(this))},e.prototype.depend=function(n){e.target&&e.target.addDep(this)},e.prototype.notify=function(e){var n=this.subs.filter((function(e){return e}));for(var i=0,a=n.length;i<a;i++){0,n[i].update()}},e}();Se.target=null;var ve=[];function fe(e){ve.push(e),Se.target=e}function ze(){ve.pop(),Se.target=ve[ve.length-1]}var Ke=Array.prototype,Ae=Object.create(Ke);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var n=Ke[e];L(Ae,e,(function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var r,l=n.apply(this,i),t=this.__ob__;switch(e){case"push":case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&t.observeArray(r),t.dep.notify(),l}))}));var Te=Object.getOwnPropertyNames(Ae),Be={},Ye=!0;function Re(e){Ye=e}var Pe={notify:D,depend:D,addSub:D,removeSub:D},Oe=function(){function e(e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!1),this.value=e,this.shallow=n,this.mock=i,this.dep=i?Pe:new Se,this.vmCount=0,L(e,"__ob__",this),r(e)){if(!i)if($)e.__proto__=Ae;else for(var a=0,l=Te.length;a<l;a++){L(e,d=Te[a],Ae[d])}n||this.observeArray(e)}else{var t=Object.keys(e);for(a=0;a<t.length;a++){var d;Ie(e,d=t[a],Be,void 0,n,i)}}}return e.prototype.observeArray=function(e){for(var n=0,i=e.length;n<i;n++)Ne(e[n],!1,this.mock)},e}();function Ne(e,n,i){return e&&z(e,"__ob__")&&e.__ob__ instanceof Oe?e.__ob__:!Ye||!i&&te()||!r(e)&&!k(e)||!Object.isExtensible(e)||e.__v_skip||Le(e)||e instanceof ce?void 0:new Oe(e,n,i)}function Ie(e,n,i,a,l,t,d){void 0===d&&(d=!1);var s=new Se,m=Object.getOwnPropertyDescriptor(e,n);if(!m||!1!==m.configurable){var u=m&&m.get,o=m&&m.set;u&&!o||i!==Be&&2!==arguments.length||(i=e[n]);var k=l?i&&i.__ob__:Ne(i,!1,t);return Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var n=u?u.call(e):i;return Se.target&&(s.depend(),k&&(k.dep.depend(),r(n)&&Ge(n))),Le(n)&&!l?n.value:n},set:function(n){var a=u?u.call(e):i;if(_(a,n)){if(o)o.call(e,n);else{if(u)return;if(!l&&Le(a)&&!Le(n))return void(a.value=n);i=n}k=l?n&&n.__ob__:Ne(n,!1,t),s.notify()}}}),s}}function De(e,n,i){if(!xe(e)){var a=e.__ob__;return r(e)&&c(n)?(e.length=Math.max(e.length,n),e.splice(n,1,i),a&&!a.shallow&&a.mock&&Ne(i,!1,!0),i):n in e&&!(n in Object.prototype)?(e[n]=i,i):e._isVue||a&&a.vmCount?i:a?(Ie(a.value,n,i,void 0,a.shallow,a.mock),a.dep.notify(),i):(e[n]=i,i)}}function Ee(e,n){if(r(e)&&c(n))e.splice(n,1);else{var i=e.__ob__;e._isVue||i&&i.vmCount||xe(e)||z(e,n)&&(delete e[n],i&&i.dep.notify())}}function Ge(e){for(var n=void 0,i=0,a=e.length;i<a;i++)(n=e[i])&&n.__ob__&&n.__ob__.dep.depend(),r(n)&&Ge(n)}function Ce(e){return Me(e,!1),e}function Ze(e){return Me(e,!0),L(e,"__v_isShallow",!0),e}function Me(e,n){if(!xe(e)){Ne(e,n,te());0}}function _e(e){return xe(e)?_e(e.__v_raw):!(!e||!e.__ob__)}function Ve(e){return!(!e||!e.__v_isShallow)}function xe(e){return!(!e||!e.__v_isReadonly)}function Fe(e){return _e(e)||xe(e)}function we(e){var n=e&&e.__v_raw;return n?we(n):e}function je(e){return Object.isExtensible(e)&&L(e,"__v_skip",!0),e}function Le(e){return!(!e||!0!==e.__v_isRef)}function Ue(e){return Je(e,!1)}function $e(e){return Je(e,!0)}function Je(e,n){if(Le(e))return e;var i={};return L(i,"__v_isRef",!0),L(i,"__v_isShallow",n),L(i,"dep",Ie(i,"value",e,null,n,te())),i}function qe(e){e.dep&&e.dep.notify()}function We(e){return Le(e)?e.value:e}function Xe(e){if(_e(e))return e;for(var n={},i=Object.keys(e),a=0;a<i.length;a++)Qe(n,e,i[a]);return n}function Qe(e,n,i){Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:function(){var e=n[i];if(Le(e))return e.value;var a=e&&e.__ob__;return a&&a.dep.depend(),e},set:function(e){var a=n[i];Le(a)&&!Le(e)?a.value=e:n[i]=e}})}function en(e){var n=new Se,i=e((function(){n.depend()}),(function(){n.notify()})),a=i.get,r=i.set,l={get value(){return a()},set value(e){r(e)}};return L(l,"__v_isRef",!0),l}function nn(e){var n=r(e)?new Array(e.length):{};for(var i in e)n[i]=an(e,i);return n}function an(e,n,i){var a=e[n];if(Le(a))return a;var r={get value(){var a=e[n];return void 0===a?i:a},set value(i){e[n]=i}};return L(r,"__v_isRef",!0),r}function rn(e){return ln(e,!1)}function ln(e,n){if(!k(e))return e;if(xe(e))return e;var i=n?"__v_rawToShallowReadonly":"__v_rawToReadonly",a=e[i];if(a)return a;var r=Object.create(Object.getPrototypeOf(e));L(e,i,r),L(r,"__v_isReadonly",!0),L(r,"__v_raw",e),Le(e)&&L(r,"__v_isRef",!0),(n||Ve(e))&&L(r,"__v_isShallow",!0);for(var l=Object.keys(e),t=0;t<l.length;t++)tn(r,e,l[t],n);return r}function tn(e,n,i,a){Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:function(){var e=n[i];return a||!k(e)?e:rn(e)},set:function(){}})}function dn(e){return ln(e,!0)}function sn(e,n){var i,a,r=m(e);r?(i=e,a=D):(i=e.get,a=e.set);var l=te()?null:new Wi(oe,i,D,{lazy:!0});var t={effect:l,get value(){return l?(l.dirty&&l.evaluate(),Se.target&&l.depend(),l.value):i()},set value(e){a(e)}};return L(t,"__v_isRef",!0),L(t,"__v_isReadonly",r),t}var mn="".concat("watcher"," callback"),un="".concat("watcher"," getter"),on="".concat("watcher"," cleanup");function kn(e,n){return Hn(e,null,n)}function yn(e,n){return Hn(e,null,{flush:"post"})}function cn(e,n){return Hn(e,null,{flush:"sync"})}var bn,pn={};function gn(e,n,i){return Hn(e,n,i)}function Hn(e,n,i){var l=void 0===i?a:i,t=l.immediate,d=l.deep,s=l.flush,u=void 0===s?"pre":s;l.onTrack,l.onTrigger;var o,k,y=oe,c=function(e,n,i){void 0===i&&(i=null);var a=bi(e,null,i,y,n);return d&&a&&a.__ob__&&a.__ob__.dep.depend(),a},b=!1,p=!1;if(Le(e)?(o=function(){return e.value},b=Ve(e)):_e(e)?(o=function(){return e.__ob__.dep.depend(),e},d=!0):r(e)?(p=!0,b=e.some((function(e){return _e(e)||Ve(e)})),o=function(){return e.map((function(e){return Le(e)?e.value:_e(e)?(e.__ob__.dep.depend(),$i(e)):m(e)?c(e,un):void 0}))}):o=m(e)?n?function(){return c(e,un)}:function(){if(!y||!y._isDestroyed)return k&&k(),c(e,"watcher",[H])}:D,n&&d){var g=o;o=function(){return $i(g())}}var H=function(e){k=h.onStop=function(){c(e,on)}};if(te())return H=D,n?t&&c(n,mn,[o(),p?[]:void 0,H]):o(),D;var h=new Wi(oe,o,D,{lazy:!0});h.noRecurse=!n;var S=p?[]:pn;return h.run=function(){if(h.active)if(n){var e=h.get();(d||b||(p?e.some((function(e,n){return _(e,S[n])})):_(e,S)))&&(k&&k(),c(n,mn,[e,S===pn?void 0:S,H]),S=e)}else h.get()},"sync"===u?h.update=h.run:"post"===u?(h.post=!0,h.update=function(){return Ha(h)}):h.update=function(){if(y&&y===oe&&!y._isMounted){var e=y._preWatchers||(y._preWatchers=[]);e.indexOf(h)<0&&e.push(h)}else Ha(h)},n?t?h.run():S=h.get():"post"===u&&y?y.$once("hook:mounted",(function(){return h.get()})):h.get(),function(){h.teardown()}}var hn=function(){function e(e){void 0===e&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=bn,!e&&bn&&(this.index=(bn.scopes||(bn.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var n=bn;try{return bn=this,e()}finally{bn=n}}else 0},e.prototype.on=function(){bn=this},e.prototype.off=function(){bn=this.parent},e.prototype.stop=function(e){if(this.active){var n=void 0,i=void 0;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].teardown();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){var a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this.active=!1}},e}();function Sn(e){return new hn(e)}function vn(){return bn}function fn(e){bn&&bn.cleanups.push(e)}function zn(e,n){oe&&(Kn(oe)[e]=n)}function Kn(e){var n=e._provided,i=e.$parent&&e.$parent._provided;return i===n?e._provided=Object.create(i):n}function An(e,n,i){void 0===i&&(i=!1);var a=oe;if(a){var r=a.$parent&&a.$parent._provided;if(r&&e in r)return r[e];if(arguments.length>1)return i&&m(n)?n.call(a):n}else 0}var Tn=K((function(e){var n="&"===e.charAt(0),i="~"===(e=n?e.slice(1):e).charAt(0),a="!"===(e=i?e.slice(1):e).charAt(0);return{name:e=a?e.slice(1):e,once:i,capture:a,passive:n}}));function Bn(e,n){function i(){var e=i.fns;if(!r(e))return bi(e,null,arguments,n,"v-on handler");for(var a=e.slice(),l=0;l<a.length;l++)bi(a[l],null,arguments,n,"v-on handler")}return i.fns=e,i}function Yn(e,n,i,a,r,t){var s,m,u,o;for(s in e)m=e[s],u=n[s],o=Tn(s),l(m)||(l(u)?(l(m.fns)&&(m=e[s]=Bn(m,t)),d(o.once)&&(m=e[s]=r(o.name,m,o.capture)),i(o.name,m,o.capture,o.passive,o.params)):m!==u&&(u.fns=m,e[s]=u));for(s in n)l(e[s])&&a((o=Tn(s)).name,n[s],o.capture)}function Rn(e,n,i){var a;e instanceof ce&&(e=e.data.hook||(e.data.hook={}));var r=e[n];function s(){i.apply(this,arguments),v(a.fns,s)}l(r)?a=Bn([s]):t(r.fns)&&d(r.merged)?(a=r).fns.push(s):a=Bn([r,s]),a.merged=!0,e[n]=a}function Pn(e,n,i,a,r){if(t(n)){if(z(n,i))return e[i]=n[i],r||delete n[i],!0;if(z(n,a))return e[i]=n[a],r||delete n[a],!0}return!1}function On(e){return s(e)?[pe(e)]:r(e)?function e(n,i){var a,m,u,o,k=[];for(a=0;a<n.length;a++)l(m=n[a])||"boolean"==typeof m||(u=k.length-1,o=k[u],r(m)?m.length>0&&(Nn((m=e(m,"".concat(i||"","_").concat(a)))[0])&&Nn(o)&&(k[u]=pe(o.text+m[0].text),m.shift()),k.push.apply(k,m)):s(m)?Nn(o)?k[u]=pe(o.text+m):""!==m&&k.push(pe(m)):Nn(m)&&Nn(o)?k[u]=pe(o.text+m.text):(d(n._isVList)&&t(m.tag)&&l(m.key)&&t(i)&&(m.key="__vlist".concat(i,"_").concat(a,"__")),k.push(m)));return k}(e):void 0}function Nn(e){return t(e)&&t(e.text)&&!1===e.isComment}function In(e,n){var i,a,l,d,s=null;if(r(e)||"string"==typeof e)for(s=new Array(e.length),i=0,a=e.length;i<a;i++)s[i]=n(e[i],i);else if("number"==typeof e)for(s=new Array(e),i=0;i<e;i++)s[i]=n(i+1,i);else if(u(e))if(ue&&e[Symbol.iterator]){s=[];for(var m=e[Symbol.iterator](),o=m.next();!o.done;)s.push(n(o.value,s.length)),o=m.next()}else for(l=Object.keys(e),s=new Array(l.length),i=0,a=l.length;i<a;i++)d=l[i],s[i]=n(e[d],d,i);return t(s)||(s=[]),s._isVList=!0,s}function Dn(e,n,i,a){var r,l=this.$scopedSlots[e];l?(i=i||{},a&&(i=N(N({},a),i)),r=l(i)||(m(n)?n():n)):r=this.$slots[e]||(m(n)?n():n);var t=i&&i.slot;return t?this.$createElement("template",{slot:t},r):r}function En(e){return Ga(this.$options,"filters",e,!0)||G}function Gn(e,n){return r(e)?-1===e.indexOf(n):e!==n}function Cn(e,n,i,a,r){var l=F.keyCodes[n]||i;return r&&a&&!F.keyCodes[n]?Gn(r,a):l?Gn(l,e):a?R(a)!==n:void 0===e}function Zn(e,n,i,a,l){if(i)if(u(i)){r(i)&&(i=I(i));var t=void 0,d=function(r){if("class"===r||"style"===r||S(r))t=e;else{var d=e.attrs&&e.attrs.type;t=a||F.mustUseProp(n,d,r)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var s=T(r),m=R(r);s in t||m in t||(t[r]=i[r],l&&((e.on||(e.on={}))["update:".concat(r)]=function(e){i[r]=e}))};for(var s in i)d(s)}else;return e}function Mn(e,n){var i=this._staticTrees||(this._staticTrees=[]),a=i[e];return a&&!n||Vn(a=i[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),"__static__".concat(e),!1),a}function _n(e,n,i){return Vn(e,"__once__".concat(n).concat(i?"_".concat(i):""),!0),e}function Vn(e,n,i){if(r(e))for(var a=0;a<e.length;a++)e[a]&&"string"!=typeof e[a]&&xn(e[a],"".concat(n,"_").concat(a),i);else xn(e,n,i)}function xn(e,n,i){e.isStatic=!0,e.key=n,e.isOnce=i}function Fn(e,n){if(n)if(k(n)){var i=e.on=e.on?N({},e.on):{};for(var a in n){var r=i[a],l=n[a];i[a]=r?[].concat(r,l):l}}else;return e}function wn(e,n,i,a){n=n||{$stable:!i};for(var l=0;l<e.length;l++){var t=e[l];r(t)?wn(t,n,i):t&&(t.proxy&&(t.fn.proxy=!0),n[t.key]=t.fn)}return a&&(n.$key=a),n}function jn(e,n){for(var i=0;i<n.length;i+=2){var a=n[i];"string"==typeof a&&a&&(e[n[i]]=n[i+1])}return e}function Ln(e,n){return"string"==typeof e?n+e:e}function Un(e){e._o=_n,e._n=H,e._s=p,e._l=In,e._t=Dn,e._q=C,e._i=Z,e._m=Mn,e._f=En,e._k=Cn,e._b=Zn,e._v=pe,e._e=be,e._u=wn,e._g=Fn,e._d=jn,e._p=Ln}function $n(e,n){if(!e||!e.length)return{};for(var i={},a=0,r=e.length;a<r;a++){var l=e[a],t=l.data;if(t&&t.attrs&&t.attrs.slot&&delete t.attrs.slot,l.context!==n&&l.fnContext!==n||!t||null==t.slot)(i.default||(i.default=[])).push(l);else{var d=t.slot,s=i[d]||(i[d]=[]);"template"===l.tag?s.push.apply(s,l.children||[]):s.push(l)}}for(var m in i)i[m].every(Jn)&&delete i[m];return i}function Jn(e){return e.isComment&&!e.asyncFactory||" "===e.text}function qn(e){return e.isComment&&e.asyncFactory}function Wn(e,n,i,r){var l,t=Object.keys(i).length>0,d=n?!!n.$stable:!t,s=n&&n.$key;if(n){if(n._normalized)return n._normalized;if(d&&r&&r!==a&&s===r.$key&&!t&&!r.$hasNormal)return r;for(var m in l={},n)n[m]&&"$"!==m[0]&&(l[m]=Xn(e,i,m,n[m]))}else l={};for(var u in i)u in l||(l[u]=Qn(i,u));return n&&Object.isExtensible(n)&&(n._normalized=l),L(l,"$stable",d),L(l,"$key",s),L(l,"$hasNormal",t),l}function Xn(e,n,i,a){var l=function(){var n=oe;ye(e);var i=arguments.length?a.apply(null,arguments):a({}),l=(i=i&&"object"==typeof i&&!r(i)?[i]:On(i))&&i[0];return ye(n),i&&(!l||1===i.length&&l.isComment&&!qn(l))?void 0:i};return a.proxy&&Object.defineProperty(n,i,{get:l,enumerable:!0,configurable:!0}),l}function Qn(e,n){return function(){return e[n]}}function ei(e){return{get attrs(){if(!e._attrsProxy){var n=e._attrsProxy={};L(n,"_v_attr_proxy",!0),ni(n,e.$attrs,a,e,"$attrs")}return e._attrsProxy},get listeners(){e._listenersProxy||ni(e._listenersProxy={},e.$listeners,a,e,"$listeners");return e._listenersProxy},get slots(){return function(e){e._slotsProxy||ai(e._slotsProxy={},e.$scopedSlots);return e._slotsProxy}(e)},emit:P(e.$emit,e),expose:function(n){n&&Object.keys(n).forEach((function(i){return Qe(e,n,i)}))}}}function ni(e,n,i,a,r){var l=!1;for(var t in n)t in e?n[t]!==i[t]&&(l=!0):(l=!0,ii(e,t,a,r));for(var t in e)t in n||(l=!0,delete e[t]);return l}function ii(e,n,i,a){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){return i[a][n]}})}function ai(e,n){for(var i in n)e[i]=n[i];for(var i in e)i in n||delete e[i]}function ri(){return di().slots}function li(){return di().attrs}function ti(){return di().listeners}function di(){var e=oe;return e._setupContext||(e._setupContext=ei(e))}function si(e,n){var i=r(e)?e.reduce((function(e,n){return e[n]={},e}),{}):e;for(var a in n){var l=i[a];l?r(l)||m(l)?i[a]={type:l,default:n[a]}:l.default=n[a]:null===l&&(i[a]={default:n[a]})}return i}var mi=null;function ui(e,n){return(e.__esModule||ue&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?n.extend(e):e}function oi(e){if(r(e))for(var n=0;n<e.length;n++){var i=e[n];if(t(i)&&(t(i.componentOptions)||qn(i)))return i}}function ki(e,n,i,a,o,k){return(r(i)||s(i))&&(o=a,a=i,i=void 0),d(k)&&(o=2),function(e,n,i,a,s){if(t(i)&&t(i.__ob__))return be();t(i)&&t(i.is)&&(n=i.is);if(!n)return be();0;r(a)&&m(a[0])&&((i=i||{}).scopedSlots={default:a[0]},a.length=0);2===s?a=On(a):1===s&&(a=function(e){for(var n=0;n<e.length;n++)if(r(e[n]))return Array.prototype.concat.apply([],e);return e}(a));var o,k;if("string"==typeof n){var y=void 0;k=e.$vnode&&e.$vnode.ns||F.getTagNamespace(n),o=F.isReservedTag(n)?new ce(F.parsePlatformTagName(n),i,a,void 0,void 0,e):i&&i.pre||!t(y=Ga(e.$options,"components",n))?new ce(n,i,a,void 0,void 0,e):Ta(y,i,e,a,n)}else o=Ta(n,i,e,a);return r(o)?o:t(o)?(t(k)&&function e(n,i,a){n.ns=i,"foreignObject"===n.tag&&(i=void 0,a=!0);if(t(n.children))for(var r=0,s=n.children.length;r<s;r++){var m=n.children[r];t(m.tag)&&(l(m.ns)||d(a)&&"svg"!==m.tag)&&e(m,i,a)}}(o,k),t(i)&&function(e){u(e.style)&&$i(e.style);u(e.class)&&$i(e.class)}(i),o):be()}(e,n,i,a,o)}function yi(e,n,i){return ki(oe,e,n,i,2,!0)}function ci(e,n,i){fe();try{if(n)for(var a=n;a=a.$parent;){var r=a.$options.errorCaptured;if(r)for(var l=0;l<r.length;l++)try{if(!1===r[l].call(a,e,n,i))return}catch(e){pi(e,a,"errorCaptured hook")}}pi(e,n,i)}finally{ze()}}function bi(e,n,i,a,r){var l;try{(l=i?e.apply(n,i):e.call(n))&&!l._isVue&&b(l)&&!l._handled&&(l.catch((function(e){return ci(e,a,r+" (Promise/async)")})),l._handled=!0)}catch(e){ci(e,a,r)}return l}function pi(e,n,i){if(F.errorHandler)try{return F.errorHandler.call(null,e,n,i)}catch(n){n!==e&&gi(n,null,"config.errorHandler")}gi(e,n,i)}function gi(e,n,i){if(!J||"undefined"==typeof console)throw e;console.error(e)}var Hi,hi=!1,Si=[],vi=!1;function fi(){vi=!1;var e=Si.slice(0);Si.length=0;for(var n=0;n<e.length;n++)e[n]()}if("undefined"!=typeof Promise&&se(Promise)){var zi=Promise.resolve();Hi=function(){zi.then(fi),ee&&setTimeout(D)},hi=!0}else if(W||"undefined"==typeof MutationObserver||!se(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Hi="undefined"!=typeof setImmediate&&se(setImmediate)?function(){setImmediate(fi)}:function(){setTimeout(fi,0)};else{var Ki=1,Ai=new MutationObserver(fi),Ti=document.createTextNode(String(Ki));Ai.observe(Ti,{characterData:!0}),Hi=function(){Ki=(Ki+1)%2,Ti.data=String(Ki)},hi=!0}function Bi(e,n){var i;if(Si.push((function(){if(e)try{e.call(n)}catch(e){ci(e,n,"nextTick")}else i&&i(n)})),vi||(vi=!0,Hi()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){i=e}))}function Yi(e){if(void 0===e&&(e="$style"),!oe)return a;var n=oe[e];return n||a}function Ri(e){if(J){var n=oe;n&&yn((function(){var i=n.$el,a=e(n,n._setupProxy);if(i&&1===i.nodeType){var r=i.style;for(var l in a)r.setProperty("--".concat(l),a[l])}}))}}function Pi(e){m(e)&&(e={loader:e});var n=e.loader,i=e.loadingComponent,a=e.errorComponent,r=e.delay,l=void 0===r?200:r,t=e.timeout,d=(e.suspensible,e.onError);var s=null,u=0,o=function(){var e;return s||(e=s=n().catch((function(e){if(e=e instanceof Error?e:new Error(String(e)),d)return new Promise((function(n,i){d(e,(function(){return n((u++,s=null,o()))}),(function(){return i(e)}),u+1)}));throw e})).then((function(n){return e!==s&&s?s:(n&&(n.__esModule||"Module"===n[Symbol.toStringTag])&&(n=n.default),n)})))};return function(){return{component:o(),delay:l,timeout:t,error:a,loading:i}}}function Oi(e){return function(n,i){if(void 0===i&&(i=oe),i)return function(e,n,i){var a=e.$options;a[n]=Na(a[n],i)}(i,e,n)}}var Ni=Oi("beforeMount"),Ii=Oi("mounted"),Di=Oi("beforeUpdate"),Ei=Oi("updated"),Gi=Oi("beforeDestroy"),Ci=Oi("destroyed"),Zi=Oi("activated"),Mi=Oi("deactivated"),_i=Oi("serverPrefetch"),Vi=Oi("renderTracked"),xi=Oi("renderTriggered"),Fi=Oi("errorCaptured");function wi(e,n){void 0===n&&(n=oe),Fi(e,n)}var ji="2.7.16";function Li(e){return e}var Ui=new me;function $i(e){return function e(n,i){var a,l,t=r(n);if(!t&&!u(n)||n.__v_skip||Object.isFrozen(n)||n instanceof ce)return;if(n.__ob__){var d=n.__ob__.dep.id;if(i.has(d))return;i.add(d)}if(t)for(a=n.length;a--;)e(n[a],i);else if(Le(n))e(n.value,i);else for(l=Object.keys(n),a=l.length;a--;)e(n[l[a]],i)}(e,Ui),Ui.clear(),e}var Ji,qi=0,Wi=function(){function e(e,n,i,a,r){var l,t;l=this,void 0===(t=bn&&!bn._vm?bn:e?e._scope:void 0)&&(t=bn),t&&t.active&&t.effects.push(l),(this.vm=e)&&r&&(e._watcher=this),a?(this.deep=!!a.deep,this.user=!!a.user,this.lazy=!!a.lazy,this.sync=!!a.sync,this.before=a.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++qi,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new me,this.newDepIds=new me,this.expression="",m(n)?this.getter=n:(this.getter=function(e){if(!U.test(e)){var n=e.split(".");return function(e){for(var i=0;i<n.length;i++){if(!e)return;e=e[n[i]]}return e}}}(n),this.getter||(this.getter=D)),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){var e;fe(this);var n=this.vm;try{e=this.getter.call(n,n)}catch(e){if(!this.user)throw e;ci(e,n,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&$i(e),ze(),this.cleanupDeps()}return e},e.prototype.addDep=function(e){var n=e.id;this.newDepIds.has(n)||(this.newDepIds.add(n),this.newDeps.push(e),this.depIds.has(n)||e.addSub(this))},e.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var n=this.deps[e];this.newDepIds.has(n.id)||n.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Ha(this)},e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var n=this.value;if(this.value=e,this.user){var i='callback for watcher "'.concat(this.expression,'"');bi(this.cb,this.vm,[e,n],this.vm,i)}else this.cb.call(this.vm,e,n)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&v(this.vm._scope.effects,this),this.active){for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}();function Xi(e,n){Ji.$on(e,n)}function Qi(e,n){Ji.$off(e,n)}function ea(e,n){var i=Ji;return function a(){var r=n.apply(null,arguments);null!==r&&i.$off(e,a)}}function na(e,n,i){Ji=e,Yn(n,i||{},Xi,Qi,ea,e),Ji=void 0}var ia=null;function aa(e){var n=ia;return ia=e,function(){ia=n}}function ra(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function la(e,n){if(n){if(e._directInactive=!1,ra(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var i=0;i<e.$children.length;i++)la(e.$children[i]);ta(e,"activated")}}function ta(e,n,i,a){void 0===a&&(a=!0),fe();var r=oe,l=vn();a&&ye(e);var t=e.$options[n],d="".concat(n," hook");if(t)for(var s=0,m=t.length;s<m;s++)bi(t[s],e,i||null,e,d);e._hasHookEvent&&e.$emit("hook:"+n),a&&(ye(r),l&&l.on()),ze()}var da=[],sa=[],ma={},ua=!1,oa=!1,ka=0;var ya=0,ca=Date.now;if(J&&!W){var ba=window.performance;ba&&"function"==typeof ba.now&&ca()>document.createEvent("Event").timeStamp&&(ca=function(){return ba.now()})}var pa=function(e,n){if(e.post){if(!n.post)return 1}else if(n.post)return-1;return e.id-n.id};function ga(){var e,n;for(ya=ca(),oa=!0,da.sort(pa),ka=0;ka<da.length;ka++)(e=da[ka]).before&&e.before(),n=e.id,ma[n]=null,e.run();var i=sa.slice(),a=da.slice();ka=da.length=sa.length=0,ma={},ua=oa=!1,function(e){for(var n=0;n<e.length;n++)e[n]._inactive=!0,la(e[n],!0)}(i),function(e){var n=e.length;for(;n--;){var i=e[n],a=i.vm;a&&a._watcher===i&&a._isMounted&&!a._isDestroyed&&ta(a,"updated")}}(a),function(){for(var e=0;e<he.length;e++){var n=he[e];n.subs=n.subs.filter((function(e){return e})),n._pending=!1}he.length=0}(),de&&F.devtools&&de.emit("flush")}function Ha(e){var n=e.id;if(null==ma[n]&&(e!==Se.target||!e.noRecurse)){if(ma[n]=!0,oa){for(var i=da.length-1;i>ka&&da[i].id>e.id;)i--;da.splice(i+1,0,e)}else da.push(e);ua||(ua=!0,Bi(ga))}}function ha(e,n){if(e){for(var i=Object.create(null),a=ue?Reflect.ownKeys(e):Object.keys(e),r=0;r<a.length;r++){var l=a[r];if("__ob__"!==l){var t=e[l].from;if(t in n._provided)i[l]=n._provided[t];else if("default"in e[l]){var d=e[l].default;i[l]=m(d)?d.call(n):d}else 0}}return i}}function Sa(e,n,i,l,t){var s,m=this,u=t.options;z(l,"_uid")?(s=Object.create(l))._original=l:(s=l,l=l._original);var o=d(u._compiled),k=!o;this.data=e,this.props=n,this.children=i,this.parent=l,this.listeners=e.on||a,this.injections=ha(u.inject,l),this.slots=function(){return m.$slots||Wn(l,e.scopedSlots,m.$slots=$n(i,l)),m.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Wn(l,e.scopedSlots,this.slots())}}),o&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Wn(l,e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,n,i,a){var t=ki(s,e,n,i,a,k);return t&&!r(t)&&(t.fnScopeId=u._scopeId,t.fnContext=l),t}:this._c=function(e,n,i,a){return ki(s,e,n,i,a,k)}}function va(e,n,i,a,r){var l=ge(e);return l.fnContext=i,l.fnOptions=a,n.slot&&((l.data||(l.data={})).slot=n.slot),l}function fa(e,n){for(var i in n)e[T(i)]=n[i]}function za(e){return e.name||e.__name||e._componentTag}Un(Sa.prototype);var Ka={init:function(e,n){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var i=e;Ka.prepatch(i,i)}else{(e.componentInstance=function(e,n){var i={_isComponent:!0,_parentVnode:e,parent:n},a=e.data.inlineTemplate;t(a)&&(i.render=a.render,i.staticRenderFns=a.staticRenderFns);return new e.componentOptions.Ctor(i)}(e,ia)).$mount(n?e.elm:void 0,n)}},prepatch:function(e,n){var i=n.componentOptions;!function(e,n,i,r,l){var t=r.data.scopedSlots,d=e.$scopedSlots,s=!!(t&&!t.$stable||d!==a&&!d.$stable||t&&e.$scopedSlots.$key!==t.$key||!t&&e.$scopedSlots.$key),m=!!(l||e.$options._renderChildren||s),u=e.$vnode;e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=l;var o=r.data.attrs||a;e._attrsProxy&&ni(e._attrsProxy,o,u.data&&u.data.attrs||a,e,"$attrs")&&(m=!0),e.$attrs=o,i=i||a;var k=e.$options._parentListeners;if(e._listenersProxy&&ni(e._listenersProxy,i,k||a,e,"$listeners"),e.$listeners=e.$options._parentListeners=i,na(e,i,k),n&&e.$options.props){Re(!1);for(var y=e._props,c=e.$options._propKeys||[],b=0;b<c.length;b++){var p=c[b],g=e.$options.props;y[p]=Ca(p,g,n,e)}Re(!0),e.$options.propsData=n}m&&(e.$slots=$n(l,r.context),e.$forceUpdate())}(n.componentInstance=e.componentInstance,i.propsData,i.listeners,n,i.children)},insert:function(e){var n,i=e.context,a=e.componentInstance;a._isMounted||(a._isMounted=!0,ta(a,"mounted")),e.data.keepAlive&&(i._isMounted?((n=a)._inactive=!1,sa.push(n)):la(a,!0))},destroy:function(e){var n=e.componentInstance;n._isDestroyed||(e.data.keepAlive?function e(n,i){if(!(i&&(n._directInactive=!0,ra(n))||n._inactive)){n._inactive=!0;for(var a=0;a<n.$children.length;a++)e(n.$children[a]);ta(n,"deactivated")}}(n,!0):n.$destroy())}},Aa=Object.keys(Ka);function Ta(e,n,i,s,m){if(!l(e)){var o=i.$options._base;if(u(e)&&(e=o.extend(e)),"function"==typeof e){var k;if(l(e.cid)&&void 0===(e=function(e,n){if(d(e.error)&&t(e.errorComp))return e.errorComp;if(t(e.resolved))return e.resolved;var i=mi;if(i&&t(e.owners)&&-1===e.owners.indexOf(i)&&e.owners.push(i),d(e.loading)&&t(e.loadingComp))return e.loadingComp;if(i&&!t(e.owners)){var a=e.owners=[i],r=!0,s=null,m=null;i.$on("hook:destroyed",(function(){return v(a,i)}));var o=function(e){for(var n=0,i=a.length;n<i;n++)a[n].$forceUpdate();e&&(a.length=0,null!==s&&(clearTimeout(s),s=null),null!==m&&(clearTimeout(m),m=null))},k=M((function(i){e.resolved=ui(i,n),r?a.length=0:o(!0)})),y=M((function(n){t(e.errorComp)&&(e.error=!0,o(!0))})),c=e(k,y);return u(c)&&(b(c)?l(e.resolved)&&c.then(k,y):b(c.component)&&(c.component.then(k,y),t(c.error)&&(e.errorComp=ui(c.error,n)),t(c.loading)&&(e.loadingComp=ui(c.loading,n),0===c.delay?e.loading=!0:s=setTimeout((function(){s=null,l(e.resolved)&&l(e.error)&&(e.loading=!0,o(!1))}),c.delay||200)),t(c.timeout)&&(m=setTimeout((function(){m=null,l(e.resolved)&&y(null)}),c.timeout)))),r=!1,e.loading?e.loadingComp:e.resolved}}(k=e,o)))return function(e,n,i,a,r){var l=be();return l.asyncFactory=e,l.asyncMeta={data:n,context:i,children:a,tag:r},l}(k,n,i,s,m);n=n||{},Wa(e),t(n.model)&&function(e,n){var i=e.model&&e.model.prop||"value",a=e.model&&e.model.event||"input";(n.attrs||(n.attrs={}))[i]=n.model.value;var l=n.on||(n.on={}),d=l[a],s=n.model.callback;t(d)?(r(d)?-1===d.indexOf(s):d!==s)&&(l[a]=[s].concat(d)):l[a]=s}(e.options,n);var y=function(e,n,i){var a=n.options.props;if(!l(a)){var r={},d=e.attrs,s=e.props;if(t(d)||t(s))for(var m in a){var u=R(m);Pn(r,s,m,u,!0)||Pn(r,d,m,u,!1)}return r}}(n,e);if(d(e.options.functional))return function(e,n,i,l,d){var s=e.options,m={},u=s.props;if(t(u))for(var o in u)m[o]=Ca(o,u,n||a);else t(i.attrs)&&fa(m,i.attrs),t(i.props)&&fa(m,i.props);var k=new Sa(i,m,d,l,e),y=s.render.call(null,k._c,k);if(y instanceof ce)return va(y,i,k.parent,s,k);if(r(y)){for(var c=On(y)||[],b=new Array(c.length),p=0;p<c.length;p++)b[p]=va(c[p],i,k.parent,s,k);return b}}(e,y,n,i,s);var c=n.on;if(n.on=n.nativeOn,d(e.options.abstract)){var p=n.slot;n={},p&&(n.slot=p)}!function(e){for(var n=e.hook||(e.hook={}),i=0;i<Aa.length;i++){var a=Aa[i],r=n[a],l=Ka[a];r===l||r&&r._merged||(n[a]=r?Ba(l,r):l)}}(n);var g=za(e.options)||m;return new ce("vue-component-".concat(e.cid).concat(g?"-".concat(g):""),n,void 0,void 0,void 0,i,{Ctor:e,propsData:y,listeners:c,tag:m,children:s},k)}}}function Ba(e,n){var i=function(i,a){e(i,a),n(i,a)};return i._merged=!0,i}var Ya=D,Ra=F.optionMergeStrategies;function Pa(e,n,i){if(void 0===i&&(i=!0),!n)return e;for(var a,r,l,t=ue?Reflect.ownKeys(n):Object.keys(n),d=0;d<t.length;d++)"__ob__"!==(a=t[d])&&(r=e[a],l=n[a],i&&z(e,a)?r!==l&&k(r)&&k(l)&&Pa(r,l):De(e,a,l));return e}function Oa(e,n,i){return i?function(){var a=m(n)?n.call(i,i):n,r=m(e)?e.call(i,i):e;return a?Pa(a,r):r}:n?e?function(){return Pa(m(n)?n.call(this,this):n,m(e)?e.call(this,this):e)}:n:e}function Na(e,n){var i=n?e?e.concat(n):r(n)?n:[n]:e;return i?function(e){for(var n=[],i=0;i<e.length;i++)-1===n.indexOf(e[i])&&n.push(e[i]);return n}(i):i}function Ia(e,n,i,a){var r=Object.create(e||null);return n?N(r,n):r}Ra.data=function(e,n,i){return i?Oa(e,n,i):n&&"function"!=typeof n?e:Oa(e,n)},x.forEach((function(e){Ra[e]=Na})),V.forEach((function(e){Ra[e+"s"]=Ia})),Ra.watch=function(e,n,i,a){if(e===ae&&(e=void 0),n===ae&&(n=void 0),!n)return Object.create(e||null);if(!e)return n;var l={};for(var t in N(l,e),n){var d=l[t],s=n[t];d&&!r(d)&&(d=[d]),l[t]=d?d.concat(s):r(s)?s:[s]}return l},Ra.props=Ra.methods=Ra.inject=Ra.computed=function(e,n,i,a){if(!e)return n;var r=Object.create(null);return N(r,e),n&&N(r,n),r},Ra.provide=function(e,n){return e?function(){var i=Object.create(null);return Pa(i,m(e)?e.call(this):e),n&&Pa(i,m(n)?n.call(this):n,!1),i}:n};var Da=function(e,n){return void 0===n?e:n};function Ea(e,n,i){if(m(n)&&(n=n.options),function(e,n){var i=e.props;if(i){var a,l,t={};if(r(i))for(a=i.length;a--;)"string"==typeof(l=i[a])&&(t[T(l)]={type:null});else if(k(i))for(var d in i)l=i[d],t[T(d)]=k(l)?l:{type:l};else 0;e.props=t}}(n),function(e,n){var i=e.inject;if(i){var a=e.inject={};if(r(i))for(var l=0;l<i.length;l++)a[i[l]]={from:i[l]};else if(k(i))for(var t in i){var d=i[t];a[t]=k(d)?N({from:t},d):{from:d}}else 0}}(n),function(e){var n=e.directives;if(n)for(var i in n){var a=n[i];m(a)&&(n[i]={bind:a,update:a})}}(n),!n._base&&(n.extends&&(e=Ea(e,n.extends,i)),n.mixins))for(var a=0,l=n.mixins.length;a<l;a++)e=Ea(e,n.mixins[a],i);var t,d={};for(t in e)s(t);for(t in n)z(e,t)||s(t);function s(a){var r=Ra[a]||Da;d[a]=r(e[a],n[a],i,a)}return d}function Ga(e,n,i,a){if("string"==typeof i){var r=e[n];if(z(r,i))return r[i];var l=T(i);if(z(r,l))return r[l];var t=B(l);return z(r,t)?r[t]:r[i]||r[l]||r[t]}}function Ca(e,n,i,a){var r=n[e],l=!z(i,e),t=i[e],d=Va(Boolean,r.type);if(d>-1)if(l&&!z(r,"default"))t=!1;else if(""===t||t===R(e)){var s=Va(String,r.type);(s<0||d<s)&&(t=!0)}if(void 0===t){t=function(e,n,i){if(!z(n,"default"))return;var a=n.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[i]&&void 0!==e._props[i])return e._props[i];return m(a)&&"Function"!==Ma(n.type)?a.call(e):a}(a,r,e);var u=Ye;Re(!0),Ne(t),Re(u)}return t}var Za=/^\s*function (\w+)/;function Ma(e){var n=e&&e.toString().match(Za);return n?n[1]:""}function _a(e,n){return Ma(e)===Ma(n)}function Va(e,n){if(!r(n))return _a(n,e)?0:-1;for(var i=0,a=n.length;i<a;i++)if(_a(n[i],e))return i;return-1}var xa={enumerable:!0,configurable:!0,get:D,set:D};function Fa(e,n,i){xa.get=function(){return this[n][i]},xa.set=function(e){this[n][i]=e},Object.defineProperty(e,i,xa)}function wa(e){var n=e.$options;if(n.props&&function(e,n){var i=e.$options.propsData||{},a=e._props=Ze({}),r=e.$options._propKeys=[];e.$parent&&Re(!1);var l=function(l){r.push(l);var t=Ca(l,n,i,e);Ie(a,l,t,void 0,!0),l in e||Fa(e,"_props",l)};for(var t in n)l(t);Re(!0)}(e,n.props),function(e){var n=e.$options,i=n.setup;if(i){var a=e._setupContext=ei(e);ye(e),fe();var r=bi(i,null,[e._props||Ze({}),a],e,"setup");if(ze(),ye(),m(r))n.render=r;else if(u(r))if(e._setupState=r,r.__sfc){var l=e._setupProxy={};for(var t in r)"__sfc"!==t&&Qe(l,r,t)}else for(var t in r)j(t)||Qe(e,r,t);else 0}}(e),n.methods&&function(e,n){e.$options.props;for(var i in n)e[i]="function"!=typeof n[i]?D:P(n[i],e)}(e,n.methods),n.data)!function(e){var n=e.$options.data;k(n=e._data=m(n)?function(e,n){fe();try{return e.call(n,n)}catch(e){return ci(e,n,"data()"),{}}finally{ze()}}(n,e):n||{})||(n={});var i=Object.keys(n),a=e.$options.props,r=(e.$options.methods,i.length);for(;r--;){var l=i[r];0,a&&z(a,l)||j(l)||Fa(e,"_data",l)}var t=Ne(n);t&&t.vmCount++}(e);else{var i=Ne(e._data={});i&&i.vmCount++}n.computed&&function(e,n){var i=e._computedWatchers=Object.create(null),a=te();for(var r in n){var l=n[r],t=m(l)?l:l.get;0,a||(i[r]=new Wi(e,t||D,D,ja)),r in e||La(e,r,l)}}(e,n.computed),n.watch&&n.watch!==ae&&function(e,n){for(var i in n){var a=n[i];if(r(a))for(var l=0;l<a.length;l++)Ja(e,i,a[l]);else Ja(e,i,a)}}(e,n.watch)}var ja={lazy:!0};function La(e,n,i){var a=!te();m(i)?(xa.get=a?Ua(n):$a(i),xa.set=D):(xa.get=i.get?a&&!1!==i.cache?Ua(n):$a(i.get):D,xa.set=i.set||D),Object.defineProperty(e,n,xa)}function Ua(e){return function(){var n=this._computedWatchers&&this._computedWatchers[e];if(n)return n.dirty&&n.evaluate(),Se.target&&n.depend(),n.value}}function $a(e){return function(){return e.call(this,this)}}function Ja(e,n,i,a){return k(i)&&(a=i,i=i.handler),"string"==typeof i&&(i=e[i]),e.$watch(n,i,a)}var qa=0;function Wa(e){var n=e.options;if(e.super){var i=Wa(e.super);if(i!==e.superOptions){e.superOptions=i;var a=function(e){var n,i=e.options,a=e.sealedOptions;for(var r in i)i[r]!==a[r]&&(n||(n={}),n[r]=i[r]);return n}(e);a&&N(e.extendOptions,a),(n=e.options=Ea(i,e.extendOptions)).name&&(n.components[n.name]=e)}}return n}function Xa(e){this._init(e)}function Qa(e){e.cid=0;var n=1;e.extend=function(e){e=e||{};var i=this,a=i.cid,r=e._Ctor||(e._Ctor={});if(r[a])return r[a];var l=za(e)||za(i.options);var t=function(e){this._init(e)};return(t.prototype=Object.create(i.prototype)).constructor=t,t.cid=n++,t.options=Ea(i.options,e),t.super=i,t.options.props&&function(e){var n=e.options.props;for(var i in n)Fa(e.prototype,"_props",i)}(t),t.options.computed&&function(e){var n=e.options.computed;for(var i in n)La(e.prototype,i,n[i])}(t),t.extend=i.extend,t.mixin=i.mixin,t.use=i.use,V.forEach((function(e){t[e]=i[e]})),l&&(t.options.components[l]=t),t.superOptions=i.options,t.extendOptions=e,t.sealedOptions=N({},t.options),r[a]=t,t}}function er(e){return e&&(za(e.Ctor.options)||e.tag)}function nr(e,n){return r(e)?e.indexOf(n)>-1:"string"==typeof e?e.split(",").indexOf(n)>-1:!!y(e)&&e.test(n)}function ir(e,n){var i=e.cache,a=e.keys,r=e._vnode,l=e.$vnode;for(var t in i){var d=i[t];if(d){var s=d.name;s&&!n(s)&&ar(i,t,a,r)}}l.componentOptions.children=void 0}function ar(e,n,i,a){var r=e[n];!r||a&&r.tag===a.tag||r.componentInstance.$destroy(),e[n]=null,v(i,n)}!function(e){e.prototype._init=function(e){var n=this;n._uid=qa++,n._isVue=!0,n.__v_skip=!0,n._scope=new hn(!0),n._scope.parent=void 0,n._scope._vm=!0,e&&e._isComponent?function(e,n){var i=e.$options=Object.create(e.constructor.options),a=n._parentVnode;i.parent=n.parent,i._parentVnode=a;var r=a.componentOptions;i.propsData=r.propsData,i._parentListeners=r.listeners,i._renderChildren=r.children,i._componentTag=r.tag,n.render&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns)}(n,e):n.$options=Ea(Wa(n.constructor),e||{},n),n._renderProxy=n,n._self=n,function(e){var n=e.$options,i=n.parent;if(i&&!n.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(e)}e.$parent=i,e.$root=i?i.$root:e,e.$children=[],e.$refs={},e._provided=i?i._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(n),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var n=e.$options._parentListeners;n&&na(e,n)}(n),function(e){e._vnode=null,e._staticTrees=null;var n=e.$options,i=e.$vnode=n._parentVnode,r=i&&i.context;e.$slots=$n(n._renderChildren,r),e.$scopedSlots=i?Wn(e.$parent,i.data.scopedSlots,e.$slots):a,e._c=function(n,i,a,r){return ki(e,n,i,a,r,!1)},e.$createElement=function(n,i,a,r){return ki(e,n,i,a,r,!0)};var l=i&&i.data;Ie(e,"$attrs",l&&l.attrs||a,null,!0),Ie(e,"$listeners",n._parentListeners||a,null,!0)}(n),ta(n,"beforeCreate",void 0,!1),function(e){var n=ha(e.$options.inject,e);n&&(Re(!1),Object.keys(n).forEach((function(i){Ie(e,i,n[i])})),Re(!0))}(n),wa(n),function(e){var n=e.$options.provide;if(n){var i=m(n)?n.call(e):n;if(!u(i))return;for(var a=Kn(e),r=ue?Reflect.ownKeys(i):Object.keys(i),l=0;l<r.length;l++){var t=r[l];Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(i,t))}}}(n),ta(n,"created"),n.$options.el&&n.$mount(n.$options.el)}}(Xa),function(e){var n={get:function(){return this._data}},i={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",n),Object.defineProperty(e.prototype,"$props",i),e.prototype.$set=De,e.prototype.$delete=Ee,e.prototype.$watch=function(e,n,i){if(k(n))return Ja(this,e,n,i);(i=i||{}).user=!0;var a=new Wi(this,e,n,i);if(i.immediate){var r='callback for immediate watcher "'.concat(a.expression,'"');fe(),bi(n,this,[a.value],this,r),ze()}return function(){a.teardown()}}}(Xa),function(e){var n=/^hook:/;e.prototype.$on=function(e,i){var a=this;if(r(e))for(var l=0,t=e.length;l<t;l++)a.$on(e[l],i);else(a._events[e]||(a._events[e]=[])).push(i),n.test(e)&&(a._hasHookEvent=!0);return a},e.prototype.$once=function(e,n){var i=this;function a(){i.$off(e,a),n.apply(i,arguments)}return a.fn=n,i.$on(e,a),i},e.prototype.$off=function(e,n){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(r(e)){for(var a=0,l=e.length;a<l;a++)i.$off(e[a],n);return i}var t,d=i._events[e];if(!d)return i;if(!n)return i._events[e]=null,i;for(var s=d.length;s--;)if((t=d[s])===n||t.fn===n){d.splice(s,1);break}return i},e.prototype.$emit=function(e){var n=this,i=n._events[e];if(i){i=i.length>1?O(i):i;for(var a=O(arguments,1),r='event handler for "'.concat(e,'"'),l=0,t=i.length;l<t;l++)bi(i[l],n,a,n,r)}return n}}(Xa),function(e){e.prototype._update=function(e,n){var i=this,a=i.$el,r=i._vnode,l=aa(i);i._vnode=e,i.$el=r?i.__patch__(r,e):i.__patch__(i.$el,e,n,!1),l(),a&&(a.__vue__=null),i.$el&&(i.$el.__vue__=i);for(var t=i;t&&t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode;)t.$parent.$el=t.$el,t=t.$parent},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){ta(e,"beforeDestroy"),e._isBeingDestroyed=!0;var n=e.$parent;!n||n._isBeingDestroyed||e.$options.abstract||v(n.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),ta(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(Xa),function(e){Un(e.prototype),e.prototype.$nextTick=function(e){return Bi(e,this)},e.prototype._render=function(){var e=this,n=e.$options,i=n.render,a=n._parentVnode;a&&e._isMounted&&(e.$scopedSlots=Wn(e.$parent,a.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&ai(e._slotsProxy,e.$scopedSlots)),e.$vnode=a;var l,t=oe,d=mi;try{ye(e),mi=e,l=i.call(e._renderProxy,e.$createElement)}catch(n){ci(n,e,"render"),l=e._vnode}finally{mi=d,ye(t)}return r(l)&&1===l.length&&(l=l[0]),l instanceof ce||(l=be()),l.parent=a,l}}(Xa);var rr=[String,RegExp,Array],lr={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:rr,exclude:rr,max:[String,Number]},methods:{cacheVNode:function(){var e=this.cache,n=this.keys,i=this.vnodeToCache,a=this.keyToCache;if(i){var r=i.tag,l=i.componentInstance,t=i.componentOptions;e[a]={name:er(t),tag:r,componentInstance:l},n.push(a),this.max&&n.length>parseInt(this.max)&&ar(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)ar(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(n){ir(e,(function(e){return nr(n,e)}))})),this.$watch("exclude",(function(n){ir(e,(function(e){return!nr(n,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,n=oi(e),i=n&&n.componentOptions;if(i){var a=er(i),r=this.include,l=this.exclude;if(r&&(!a||!nr(r,a))||l&&a&&nr(l,a))return n;var t=this.cache,d=this.keys,s=null==n.key?i.Ctor.cid+(i.tag?"::".concat(i.tag):""):n.key;t[s]?(n.componentInstance=t[s].componentInstance,v(d,s),d.push(s)):(this.vnodeToCache=n,this.keyToCache=s),n.data.keepAlive=!0}return n||e&&e[0]}}};!function(e){var n={get:function(){return F}};Object.defineProperty(e,"config",n),e.util={warn:Ya,extend:N,mergeOptions:Ea,defineReactive:Ie},e.set=De,e.delete=Ee,e.nextTick=Bi,e.observable=function(e){return Ne(e),e},e.options=Object.create(null),V.forEach((function(n){e.options[n+"s"]=Object.create(null)})),e.options._base=e,N(e.options.components,lr),function(e){e.use=function(e){var n=this._installedPlugins||(this._installedPlugins=[]);if(n.indexOf(e)>-1)return this;var i=O(arguments,1);return i.unshift(this),m(e.install)?e.install.apply(e,i):m(e)&&e.apply(null,i),n.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Ea(this.options,e),this}}(e),Qa(e),function(e){V.forEach((function(n){e[n]=function(e,i){return i?("component"===n&&k(i)&&(i.name=i.name||e,i=this.options._base.extend(i)),"directive"===n&&m(i)&&(i={bind:i,update:i}),this.options[n+"s"][e]=i,i):this.options[n+"s"][e]}}))}(e)}(Xa),Object.defineProperty(Xa.prototype,"$isServer",{get:te}),Object.defineProperty(Xa.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Xa,"FunctionalRenderContext",{value:Sa}),Xa.version=ji;var tr=h("style,class"),dr=h("input,textarea,option,select,progress"),sr=h("contenteditable,draggable,spellcheck"),mr=h("events,caret,typing,plaintext-only"),ur=h("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),or="http://www.w3.org/1999/xlink",kr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},yr=function(e){return kr(e)?e.slice(6,e.length):""},cr=function(e){return null==e||!1===e};function br(e){for(var n=e.data,i=e,a=e;t(a.componentInstance);)(a=a.componentInstance._vnode)&&a.data&&(n=pr(a.data,n));for(;t(i=i.parent);)i&&i.data&&(n=pr(n,i.data));return function(e,n){if(t(e)||t(n))return gr(e,Hr(n));return""}(n.staticClass,n.class)}function pr(e,n){return{staticClass:gr(e.staticClass,n.staticClass),class:t(e.class)?[e.class,n.class]:n.class}}function gr(e,n){return e?n?e+" "+n:e:n||""}function Hr(e){return Array.isArray(e)?function(e){for(var n,i="",a=0,r=e.length;a<r;a++)t(n=Hr(e[a]))&&""!==n&&(i&&(i+=" "),i+=n);return i}(e):u(e)?function(e){var n="";for(var i in e)e[i]&&(n&&(n+=" "),n+=i);return n}(e):"string"==typeof e?e:""}var hr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Sr=h("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),vr=h("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),fr=function(e){return Sr(e)||vr(e)};var zr=Object.create(null);var Kr=h("text,number,password,search,email,tel,url");var Ar=Object.freeze({__proto__:null,createElement:function(e,n){var i=document.createElement(e);return"select"!==e||n.data&&n.data.attrs&&void 0!==n.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i},createElementNS:function(e,n){return document.createElementNS(hr[e],n)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,n,i){e.insertBefore(n,i)},removeChild:function(e,n){e.removeChild(n)},appendChild:function(e,n){e.appendChild(n)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,n){e.textContent=n},setStyleScope:function(e,n){e.setAttribute(n,"")}}),Tr={create:function(e,n){Br(n)},update:function(e,n){e.data.ref!==n.data.ref&&(Br(e,!0),Br(n))},destroy:function(e){Br(e,!0)}};function Br(e,n){var i=e.data.ref;if(t(i)){var a=e.context,l=e.componentInstance||e.elm,d=n?null:l,s=n?void 0:l;if(m(i))bi(i,a,[d],a,"template ref function");else{var u=e.data.refInFor,o="string"==typeof i||"number"==typeof i,k=Le(i),y=a.$refs;if(o||k)if(u){var c=o?y[i]:i.value;n?r(c)&&v(c,l):r(c)?c.includes(l)||c.push(l):o?(y[i]=[l],Yr(a,i,y[i])):i.value=[l]}else if(o){if(n&&y[i]!==l)return;y[i]=s,Yr(a,i,d)}else if(k){if(n&&i.value!==l)return;i.value=d}else 0}}}function Yr(e,n,i){var a=e._setupState;a&&z(a,n)&&(Le(a[n])?a[n].value=i:a[n]=i)}var Rr=new ce("",{},[]),Pr=["create","activate","update","remove","destroy"];function Or(e,n){return e.key===n.key&&e.asyncFactory===n.asyncFactory&&(e.tag===n.tag&&e.isComment===n.isComment&&t(e.data)===t(n.data)&&function(e,n){if("input"!==e.tag)return!0;var i,a=t(i=e.data)&&t(i=i.attrs)&&i.type,r=t(i=n.data)&&t(i=i.attrs)&&i.type;return a===r||Kr(a)&&Kr(r)}(e,n)||d(e.isAsyncPlaceholder)&&l(n.asyncFactory.error))}function Nr(e,n,i){var a,r,l={};for(a=n;a<=i;++a)t(r=e[a].key)&&(l[r]=a);return l}var Ir={create:Dr,update:Dr,destroy:function(e){Dr(e,Rr)}};function Dr(e,n){(e.data.directives||n.data.directives)&&function(e,n){var i,a,r,l=e===Rr,t=n===Rr,d=Gr(e.data.directives,e.context),s=Gr(n.data.directives,n.context),m=[],u=[];for(i in s)a=d[i],r=s[i],a?(r.oldValue=a.value,r.oldArg=a.arg,Zr(r,"update",n,e),r.def&&r.def.componentUpdated&&u.push(r)):(Zr(r,"bind",n,e),r.def&&r.def.inserted&&m.push(r));if(m.length){var o=function(){for(var i=0;i<m.length;i++)Zr(m[i],"inserted",n,e)};l?Rn(n,"insert",o):o()}u.length&&Rn(n,"postpatch",(function(){for(var i=0;i<u.length;i++)Zr(u[i],"componentUpdated",n,e)}));if(!l)for(i in d)s[i]||Zr(d[i],"unbind",e,e,t)}(e,n)}var Er=Object.create(null);function Gr(e,n){var i,a,r=Object.create(null);if(!e)return r;for(i=0;i<e.length;i++){if((a=e[i]).modifiers||(a.modifiers=Er),r[Cr(a)]=a,n._setupState&&n._setupState.__sfc){var l=a.def||Ga(n,"_setupState","v-"+a.name);a.def="function"==typeof l?{bind:l,update:l}:l}a.def=a.def||Ga(n.$options,"directives",a.name)}return r}function Cr(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function Zr(e,n,i,a,r){var l=e.def&&e.def[n];if(l)try{l(i.elm,e,i,a,r)}catch(a){ci(a,i.context,"directive ".concat(e.name," ").concat(n," hook"))}}var Mr=[Tr,Ir];function _r(e,n){var i=n.componentOptions;if(!(t(i)&&!1===i.Ctor.options.inheritAttrs||l(e.data.attrs)&&l(n.data.attrs))){var a,r,s=n.elm,m=e.data.attrs||{},u=n.data.attrs||{};for(a in(t(u.__ob__)||d(u._v_attr_proxy))&&(u=n.data.attrs=N({},u)),u)r=u[a],m[a]!==r&&Vr(s,a,r,n.data.pre);for(a in(W||Q)&&u.value!==m.value&&Vr(s,"value",u.value),m)l(u[a])&&(kr(a)?s.removeAttributeNS(or,yr(a)):sr(a)||s.removeAttribute(a))}}function Vr(e,n,i,a){a||e.tagName.indexOf("-")>-1?xr(e,n,i):ur(n)?cr(i)?e.removeAttribute(n):(i="allowfullscreen"===n&&"EMBED"===e.tagName?"true":n,e.setAttribute(n,i)):sr(n)?e.setAttribute(n,function(e,n){return cr(n)||"false"===n?"false":"contenteditable"===e&&mr(n)?n:"true"}(n,i)):kr(n)?cr(i)?e.removeAttributeNS(or,yr(n)):e.setAttributeNS(or,n,i):xr(e,n,i)}function xr(e,n,i){if(cr(i))e.removeAttribute(n);else{if(W&&!X&&"TEXTAREA"===e.tagName&&"placeholder"===n&&""!==i&&!e.__ieph){var a=function(n){n.stopImmediatePropagation(),e.removeEventListener("input",a)};e.addEventListener("input",a),e.__ieph=!0}e.setAttribute(n,i)}}var Fr={create:_r,update:_r};function wr(e,n){var i=n.elm,a=n.data,r=e.data;if(!(l(a.staticClass)&&l(a.class)&&(l(r)||l(r.staticClass)&&l(r.class)))){var d=br(n),s=i._transitionClasses;t(s)&&(d=gr(d,Hr(s))),d!==i._prevClass&&(i.setAttribute("class",d),i._prevClass=d)}}var jr,Lr={create:wr,update:wr};function Ur(e,n,i){var a=jr;return function r(){var l=n.apply(null,arguments);null!==l&&qr(e,r,i,a)}}var $r=hi&&!(ie&&Number(ie[1])<=53);function Jr(e,n,i,a){if($r){var r=ya,l=n;n=l._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return l.apply(this,arguments)}}jr.addEventListener(e,n,re?{capture:i,passive:a}:i)}function qr(e,n,i,a){(a||jr).removeEventListener(e,n._wrapper||n,i)}function Wr(e,n){if(!l(e.data.on)||!l(n.data.on)){var i=n.data.on||{},a=e.data.on||{};jr=n.elm||e.elm,function(e){if(t(e.__r)){var n=W?"change":"input";e[n]=[].concat(e.__r,e[n]||[]),delete e.__r}t(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(i),Yn(i,a,Jr,qr,Ur,n.context),jr=void 0}}var Xr,Qr={create:Wr,update:Wr,destroy:function(e){return Wr(e,Rr)}};function el(e,n){if(!l(e.data.domProps)||!l(n.data.domProps)){var i,a,r=n.elm,s=e.data.domProps||{},m=n.data.domProps||{};for(i in(t(m.__ob__)||d(m._v_attr_proxy))&&(m=n.data.domProps=N({},m)),s)i in m||(r[i]="");for(i in m){if(a=m[i],"textContent"===i||"innerHTML"===i){if(n.children&&(n.children.length=0),a===s[i])continue;1===r.childNodes.length&&r.removeChild(r.childNodes[0])}if("value"===i&&"PROGRESS"!==r.tagName){r._value=a;var u=l(a)?"":String(a);nl(r,u)&&(r.value=u)}else if("innerHTML"===i&&vr(r.tagName)&&l(r.innerHTML)){(Xr=Xr||document.createElement("div")).innerHTML="<svg>".concat(a,"</svg>");for(var o=Xr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}else if(a!==s[i])try{r[i]=a}catch(e){}}}}function nl(e,n){return!e.composing&&("OPTION"===e.tagName||function(e,n){var i=!0;try{i=document.activeElement!==e}catch(e){}return i&&e.value!==n}(e,n)||function(e,n){var i=e.value,a=e._vModifiers;if(t(a)){if(a.number)return H(i)!==H(n);if(a.trim)return i.trim()!==n.trim()}return i!==n}(e,n))}var il={create:el,update:el},al=K((function(e){var n={},i=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var a=e.split(i);a.length>1&&(n[a[0].trim()]=a[1].trim())}})),n}));function rl(e){var n=ll(e.style);return e.staticStyle?N(e.staticStyle,n):n}function ll(e){return Array.isArray(e)?I(e):"string"==typeof e?al(e):e}var tl,dl=/^--/,sl=/\s*!important$/,ml=function(e,n,i){if(dl.test(n))e.style.setProperty(n,i);else if(sl.test(i))e.style.setProperty(R(n),i.replace(sl,""),"important");else{var a=ol(n);if(Array.isArray(i))for(var r=0,l=i.length;r<l;r++)e.style[a]=i[r];else e.style[a]=i}},ul=["Webkit","Moz","ms"],ol=K((function(e){if(tl=tl||document.createElement("div").style,"filter"!==(e=T(e))&&e in tl)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<ul.length;i++){var a=ul[i]+n;if(a in tl)return a}}));function kl(e,n){var i=n.data,a=e.data;if(!(l(i.staticStyle)&&l(i.style)&&l(a.staticStyle)&&l(a.style))){var r,d,s=n.elm,m=a.staticStyle,u=a.normalizedStyle||a.style||{},o=m||u,k=ll(n.data.style)||{};n.data.normalizedStyle=t(k.__ob__)?N({},k):k;var y=function(e,n){var i,a={};if(n)for(var r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(i=rl(r.data))&&N(a,i);(i=rl(e.data))&&N(a,i);for(var l=e;l=l.parent;)l.data&&(i=rl(l.data))&&N(a,i);return a}(n,!0);for(d in o)l(y[d])&&ml(s,d,"");for(d in y)r=y[d],ml(s,d,null==r?"":r)}}var yl={create:kl,update:kl},cl=/\s+/;function bl(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split(cl).forEach((function(n){return e.classList.add(n)})):e.classList.add(n);else{var i=" ".concat(e.getAttribute("class")||""," ");i.indexOf(" "+n+" ")<0&&e.setAttribute("class",(i+n).trim())}}function pl(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split(cl).forEach((function(n){return e.classList.remove(n)})):e.classList.remove(n),e.classList.length||e.removeAttribute("class");else{for(var i=" ".concat(e.getAttribute("class")||""," "),a=" "+n+" ";i.indexOf(a)>=0;)i=i.replace(a," ");(i=i.trim())?e.setAttribute("class",i):e.removeAttribute("class")}}function gl(e){if(e){if("object"==typeof e){var n={};return!1!==e.css&&N(n,Hl(e.name||"v")),N(n,e),n}return"string"==typeof e?Hl(e):void 0}}var Hl=K((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),hl=J&&!X,Sl="transition",vl="transitionend",fl="animation",zl="animationend";hl&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Sl="WebkitTransition",vl="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(fl="WebkitAnimation",zl="webkitAnimationEnd"));var Kl=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Al(e){Kl((function(){Kl(e)}))}function Tl(e,n){var i=e._transitionClasses||(e._transitionClasses=[]);i.indexOf(n)<0&&(i.push(n),bl(e,n))}function Bl(e,n){e._transitionClasses&&v(e._transitionClasses,n),pl(e,n)}function Yl(e,n,i){var a=Pl(e,n),r=a.type,l=a.timeout,t=a.propCount;if(!r)return i();var d="transition"===r?vl:zl,s=0,m=function(){e.removeEventListener(d,u),i()},u=function(n){n.target===e&&++s>=t&&m()};setTimeout((function(){s<t&&m()}),l+1),e.addEventListener(d,u)}var Rl=/\b(transform|all)(,|$)/;function Pl(e,n){var i,a=window.getComputedStyle(e),r=(a[Sl+"Delay"]||"").split(", "),l=(a[Sl+"Duration"]||"").split(", "),t=Ol(r,l),d=(a[fl+"Delay"]||"").split(", "),s=(a[fl+"Duration"]||"").split(", "),m=Ol(d,s),u=0,o=0;return"transition"===n?t>0&&(i="transition",u=t,o=l.length):"animation"===n?m>0&&(i="animation",u=m,o=s.length):o=(i=(u=Math.max(t,m))>0?t>m?"transition":"animation":null)?"transition"===i?l.length:s.length:0,{type:i,timeout:u,propCount:o,hasTransform:"transition"===i&&Rl.test(a[Sl+"Property"])}}function Ol(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max.apply(null,n.map((function(n,i){return Nl(n)+Nl(e[i])})))}function Nl(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Il(e,n){var i=e.elm;t(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var a=gl(e.data.transition);if(!l(a)&&!t(i._enterCb)&&1===i.nodeType){for(var r=a.css,d=a.type,s=a.enterClass,o=a.enterToClass,k=a.enterActiveClass,y=a.appearClass,c=a.appearToClass,b=a.appearActiveClass,p=a.beforeEnter,g=a.enter,h=a.afterEnter,S=a.enterCancelled,v=a.beforeAppear,f=a.appear,z=a.afterAppear,K=a.appearCancelled,A=a.duration,T=ia,B=ia.$vnode;B&&B.parent;)T=B.context,B=B.parent;var Y=!T._isMounted||!e.isRootInsert;if(!Y||f||""===f){var R=Y&&y?y:s,P=Y&&b?b:k,O=Y&&c?c:o,N=Y&&v||p,I=Y&&m(f)?f:g,D=Y&&z||h,E=Y&&K||S,G=H(u(A)?A.enter:A);0;var C=!1!==r&&!X,Z=Gl(I),_=i._enterCb=M((function(){C&&(Bl(i,O),Bl(i,P)),_.cancelled?(C&&Bl(i,R),E&&E(i)):D&&D(i),i._enterCb=null}));e.data.show||Rn(e,"insert",(function(){var n=i.parentNode,a=n&&n._pending&&n._pending[e.key];a&&a.tag===e.tag&&a.elm._leaveCb&&a.elm._leaveCb(),I&&I(i,_)})),N&&N(i),C&&(Tl(i,R),Tl(i,P),Al((function(){Bl(i,R),_.cancelled||(Tl(i,O),Z||(El(G)?setTimeout(_,G):Yl(i,d,_)))}))),e.data.show&&(n&&n(),I&&I(i,_)),C||Z||_()}}}function Dl(e,n){var i=e.elm;t(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var a=gl(e.data.transition);if(l(a)||1!==i.nodeType)return n();if(!t(i._leaveCb)){var r=a.css,d=a.type,s=a.leaveClass,m=a.leaveToClass,o=a.leaveActiveClass,k=a.beforeLeave,y=a.leave,c=a.afterLeave,b=a.leaveCancelled,p=a.delayLeave,g=a.duration,h=!1!==r&&!X,S=Gl(y),v=H(u(g)?g.leave:g);0;var f=i._leaveCb=M((function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),h&&(Bl(i,m),Bl(i,o)),f.cancelled?(h&&Bl(i,s),b&&b(i)):(n(),c&&c(i)),i._leaveCb=null}));p?p(z):z()}function z(){f.cancelled||(!e.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),k&&k(i),h&&(Tl(i,s),Tl(i,o),Al((function(){Bl(i,s),f.cancelled||(Tl(i,m),S||(El(v)?setTimeout(f,v):Yl(i,d,f)))}))),y&&y(i,f),h||S||f())}}function El(e){return"number"==typeof e&&!isNaN(e)}function Gl(e){if(l(e))return!1;var n=e.fns;return t(n)?Gl(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function Cl(e,n){!0!==n.data.show&&Il(n)}var Zl=function(e){var n,i,a={},m=e.modules,u=e.nodeOps;for(n=0;n<Pr.length;++n)for(a[Pr[n]]=[],i=0;i<m.length;++i)t(m[i][Pr[n]])&&a[Pr[n]].push(m[i][Pr[n]]);function o(e){var n=u.parentNode(e);t(n)&&u.removeChild(n,e)}function k(e,n,i,r,l,s,m){if(t(e.elm)&&t(s)&&(e=s[m]=ge(e)),e.isRootInsert=!l,!function(e,n,i,r){var l=e.data;if(t(l)){var s=t(e.componentInstance)&&l.keepAlive;if(t(l=l.hook)&&t(l=l.init)&&l(e,!1),t(e.componentInstance))return y(e,n),c(i,e.elm,r),d(s)&&function(e,n,i,r){var l,d=e;for(;d.componentInstance;)if(d=d.componentInstance._vnode,t(l=d.data)&&t(l=l.transition)){for(l=0;l<a.activate.length;++l)a.activate[l](Rr,d);n.push(d);break}c(i,e.elm,r)}(e,n,i,r),!0}}(e,n,i,r)){var o=e.data,k=e.children,p=e.tag;t(p)?(e.elm=e.ns?u.createElementNS(e.ns,p):u.createElement(p,e),H(e),b(e,k,n),t(o)&&g(e,n),c(i,e.elm,r)):d(e.isComment)?(e.elm=u.createComment(e.text),c(i,e.elm,r)):(e.elm=u.createTextNode(e.text),c(i,e.elm,r))}}function y(e,n){t(e.data.pendingInsert)&&(n.push.apply(n,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,p(e)?(g(e,n),H(e)):(Br(e),n.push(e))}function c(e,n,i){t(e)&&(t(i)?u.parentNode(i)===e&&u.insertBefore(e,n,i):u.appendChild(e,n))}function b(e,n,i){if(r(n)){0;for(var a=0;a<n.length;++a)k(n[a],i,e.elm,null,!0,n,a)}else s(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function p(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return t(e.tag)}function g(e,i){for(var r=0;r<a.create.length;++r)a.create[r](Rr,e);t(n=e.data.hook)&&(t(n.create)&&n.create(Rr,e),t(n.insert)&&i.push(e))}function H(e){var n;if(t(n=e.fnScopeId))u.setStyleScope(e.elm,n);else for(var i=e;i;)t(n=i.context)&&t(n=n.$options._scopeId)&&u.setStyleScope(e.elm,n),i=i.parent;t(n=ia)&&n!==e.context&&n!==e.fnContext&&t(n=n.$options._scopeId)&&u.setStyleScope(e.elm,n)}function S(e,n,i,a,r,l){for(;a<=r;++a)k(i[a],l,e,n,!1,i,a)}function v(e){var n,i,r=e.data;if(t(r))for(t(n=r.hook)&&t(n=n.destroy)&&n(e),n=0;n<a.destroy.length;++n)a.destroy[n](e);if(t(n=e.children))for(i=0;i<e.children.length;++i)v(e.children[i])}function f(e,n,i){for(;n<=i;++n){var a=e[n];t(a)&&(t(a.tag)?(z(a),v(a)):o(a.elm))}}function z(e,n){if(t(n)||t(e.data)){var i,r=a.remove.length+1;for(t(n)?n.listeners+=r:n=function(e,n){function i(){0==--i.listeners&&o(e)}return i.listeners=n,i}(e.elm,r),t(i=e.componentInstance)&&t(i=i._vnode)&&t(i.data)&&z(i,n),i=0;i<a.remove.length;++i)a.remove[i](e,n);t(i=e.data.hook)&&t(i=i.remove)?i(e,n):n()}else o(e.elm)}function K(e,n,i,a){for(var r=i;r<a;r++){var l=n[r];if(t(l)&&Or(e,l))return r}}function A(e,n,i,r,s,m){if(e!==n){t(n.elm)&&t(r)&&(n=r[s]=ge(n));var o=n.elm=e.elm;if(d(e.isAsyncPlaceholder))t(n.asyncFactory.resolved)?Y(e.elm,n,i):n.isAsyncPlaceholder=!0;else if(d(n.isStatic)&&d(e.isStatic)&&n.key===e.key&&(d(n.isCloned)||d(n.isOnce)))n.componentInstance=e.componentInstance;else{var y,c=n.data;t(c)&&t(y=c.hook)&&t(y=y.prepatch)&&y(e,n);var b=e.children,g=n.children;if(t(c)&&p(n)){for(y=0;y<a.update.length;++y)a.update[y](e,n);t(y=c.hook)&&t(y=y.update)&&y(e,n)}l(n.text)?t(b)&&t(g)?b!==g&&function(e,n,i,a,r){var d,s,m,o=0,y=0,c=n.length-1,b=n[0],p=n[c],g=i.length-1,H=i[0],h=i[g],v=!r;for(0;o<=c&&y<=g;)l(b)?b=n[++o]:l(p)?p=n[--c]:Or(b,H)?(A(b,H,a,i,y),b=n[++o],H=i[++y]):Or(p,h)?(A(p,h,a,i,g),p=n[--c],h=i[--g]):Or(b,h)?(A(b,h,a,i,g),v&&u.insertBefore(e,b.elm,u.nextSibling(p.elm)),b=n[++o],h=i[--g]):Or(p,H)?(A(p,H,a,i,y),v&&u.insertBefore(e,p.elm,b.elm),p=n[--c],H=i[++y]):(l(d)&&(d=Nr(n,o,c)),l(s=t(H.key)?d[H.key]:K(H,n,o,c))?k(H,a,e,b.elm,!1,i,y):Or(m=n[s],H)?(A(m,H,a,i,y),n[s]=void 0,v&&u.insertBefore(e,m.elm,b.elm)):k(H,a,e,b.elm,!1,i,y),H=i[++y]);o>c?S(e,l(i[g+1])?null:i[g+1].elm,i,y,g,a):y>g&&f(n,o,c)}(o,b,g,i,m):t(g)?(t(e.text)&&u.setTextContent(o,""),S(o,null,g,0,g.length-1,i)):t(b)?f(b,0,b.length-1):t(e.text)&&u.setTextContent(o,""):e.text!==n.text&&u.setTextContent(o,n.text),t(c)&&t(y=c.hook)&&t(y=y.postpatch)&&y(e,n)}}}function T(e,n,i){if(d(i)&&t(e.parent))e.parent.data.pendingInsert=n;else for(var a=0;a<n.length;++a)n[a].data.hook.insert(n[a])}var B=h("attrs,class,staticClass,staticStyle,key");function Y(e,n,i,a){var r,l=n.tag,s=n.data,m=n.children;if(a=a||s&&s.pre,n.elm=e,d(n.isComment)&&t(n.asyncFactory))return n.isAsyncPlaceholder=!0,!0;if(t(s)&&(t(r=s.hook)&&t(r=r.init)&&r(n,!0),t(r=n.componentInstance)))return y(n,i),!0;if(t(l)){if(t(m))if(e.hasChildNodes())if(t(r=s)&&t(r=r.domProps)&&t(r=r.innerHTML)){if(r!==e.innerHTML)return!1}else{for(var u=!0,o=e.firstChild,k=0;k<m.length;k++){if(!o||!Y(o,m[k],i,a)){u=!1;break}o=o.nextSibling}if(!u||o)return!1}else b(n,m,i);if(t(s)){var c=!1;for(var p in s)if(!B(p)){c=!0,g(n,i);break}!c&&s.class&&$i(s.class)}}else e.data!==n.text&&(e.data=n.text);return!0}return function(e,n,i,r){if(!l(n)){var s,m=!1,o=[];if(l(e))m=!0,k(n,o);else{var y=t(e.nodeType);if(!y&&Or(e,n))A(e,n,o,null,null,r);else{if(y){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),i=!0),d(i)&&Y(e,n,o))return T(n,o,!0),e;s=e,e=new ce(u.tagName(s).toLowerCase(),{},[],void 0,s)}var c=e.elm,b=u.parentNode(c);if(k(n,o,c._leaveCb?null:b,u.nextSibling(c)),t(n.parent))for(var g=n.parent,H=p(n);g;){for(var h=0;h<a.destroy.length;++h)a.destroy[h](g);if(g.elm=n.elm,H){for(var S=0;S<a.create.length;++S)a.create[S](Rr,g);var z=g.data.hook.insert;if(z.merged)for(var K=z.fns.slice(1),B=0;B<K.length;B++)K[B]()}else Br(g);g=g.parent}t(b)?f([e],0,0):t(e.tag)&&v(e)}}return T(n,o,m),n.elm}t(e)&&v(e)}}({nodeOps:Ar,modules:[Fr,Lr,Qr,il,yl,J?{create:Cl,activate:Cl,remove:function(e,n){!0!==e.data.show?Dl(e,n):n()}}:{}].concat(Mr)});X&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Ll(e,"input")}));var Ml={inserted:function(e,n,i,a){"select"===i.tag?(a.elm&&!a.elm._vOptions?Rn(i,"postpatch",(function(){Ml.componentUpdated(e,n,i)})):_l(e,n,i.context),e._vOptions=[].map.call(e.options,Fl)):("textarea"===i.tag||Kr(e.type))&&(e._vModifiers=n.modifiers,n.modifiers.lazy||(e.addEventListener("compositionstart",wl),e.addEventListener("compositionend",jl),e.addEventListener("change",jl),X&&(e.vmodel=!0)))},componentUpdated:function(e,n,i){if("select"===i.tag){_l(e,n,i.context);var a=e._vOptions,r=e._vOptions=[].map.call(e.options,Fl);if(r.some((function(e,n){return!C(e,a[n])})))(e.multiple?n.value.some((function(e){return xl(e,r)})):n.value!==n.oldValue&&xl(n.value,r))&&Ll(e,"change")}}};function _l(e,n,i){Vl(e,n,i),(W||Q)&&setTimeout((function(){Vl(e,n,i)}),0)}function Vl(e,n,i){var a=n.value,r=e.multiple;if(!r||Array.isArray(a)){for(var l,t,d=0,s=e.options.length;d<s;d++)if(t=e.options[d],r)l=Z(a,Fl(t))>-1,t.selected!==l&&(t.selected=l);else if(C(Fl(t),a))return void(e.selectedIndex!==d&&(e.selectedIndex=d));r||(e.selectedIndex=-1)}}function xl(e,n){return n.every((function(n){return!C(n,e)}))}function Fl(e){return"_value"in e?e._value:e.value}function wl(e){e.target.composing=!0}function jl(e){e.target.composing&&(e.target.composing=!1,Ll(e.target,"input"))}function Ll(e,n){var i=document.createEvent("HTMLEvents");i.initEvent(n,!0,!0),e.dispatchEvent(i)}function Ul(e){return!e.componentInstance||e.data&&e.data.transition?e:Ul(e.componentInstance._vnode)}var $l={model:Ml,show:{bind:function(e,n,i){var a=n.value,r=(i=Ul(i)).data&&i.data.transition,l=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;a&&r?(i.data.show=!0,Il(i,(function(){e.style.display=l}))):e.style.display=a?l:"none"},update:function(e,n,i){var a=n.value;!a!=!n.oldValue&&((i=Ul(i)).data&&i.data.transition?(i.data.show=!0,a?Il(i,(function(){e.style.display=e.__vOriginalDisplay})):Dl(i,(function(){e.style.display="none"}))):e.style.display=a?e.__vOriginalDisplay:"none")},unbind:function(e,n,i,a,r){r||(e.style.display=e.__vOriginalDisplay)}}},Jl={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ql(e){var n=e&&e.componentOptions;return n&&n.Ctor.options.abstract?ql(oi(n.children)):e}function Wl(e){var n={},i=e.$options;for(var a in i.propsData)n[a]=e[a];var r=i._parentListeners;for(var a in r)n[T(a)]=r[a];return n}function Xl(e,n){if(/\d-keep-alive$/.test(n.tag))return e("keep-alive",{props:n.componentOptions.propsData})}var Ql=function(e){return e.tag||qn(e)},et=function(e){return"show"===e.name},nt={name:"transition",props:Jl,abstract:!0,render:function(e){var n=this,i=this.$slots.default;if(i&&(i=i.filter(Ql)).length){0;var a=this.mode;0;var r=i[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return r;var l=ql(r);if(!l)return r;if(this._leaving)return Xl(e,r);var t="__transition-".concat(this._uid,"-");l.key=null==l.key?l.isComment?t+"comment":t+l.tag:s(l.key)?0===String(l.key).indexOf(t)?l.key:t+l.key:l.key;var d=(l.data||(l.data={})).transition=Wl(this),m=this._vnode,u=ql(m);if(l.data.directives&&l.data.directives.some(et)&&(l.data.show=!0),u&&u.data&&!function(e,n){return n.key===e.key&&n.tag===e.tag}(l,u)&&!qn(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var o=u.data.transition=N({},d);if("out-in"===a)return this._leaving=!0,Rn(o,"afterLeave",(function(){n._leaving=!1,n.$forceUpdate()})),Xl(e,r);if("in-out"===a){if(qn(l))return m;var k,y=function(){k()};Rn(d,"afterEnter",y),Rn(d,"enterCancelled",y),Rn(o,"delayLeave",(function(e){k=e}))}}return r}}},it=N({tag:String,moveClass:String},Jl);function at(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function rt(e){e.data.newPos=e.elm.getBoundingClientRect()}function lt(e){var n=e.data.pos,i=e.data.newPos,a=n.left-i.left,r=n.top-i.top;if(a||r){e.data.moved=!0;var l=e.elm.style;l.transform=l.WebkitTransform="translate(".concat(a,"px,").concat(r,"px)"),l.transitionDuration="0s"}}delete it.mode;var tt={Transition:nt,TransitionGroup:{props:it,beforeMount:function(){var e=this,n=this._update;this._update=function(i,a){var r=aa(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),n.call(e,i,a)}},render:function(e){for(var n=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),a=this.prevChildren=this.children,r=this.$slots.default||[],l=this.children=[],t=Wl(this),d=0;d<r.length;d++){if((u=r[d]).tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))l.push(u),i[u.key]=u,(u.data||(u.data={})).transition=t;else;}if(a){var s=[],m=[];for(d=0;d<a.length;d++){var u;(u=a[d]).data.transition=t,u.data.pos=u.elm.getBoundingClientRect(),i[u.key]?s.push(u):m.push(u)}this.kept=e(n,null,s),this.removed=m}return e(n,null,l)},updated:function(){var e=this.prevChildren,n=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,n)&&(e.forEach(at),e.forEach(rt),e.forEach(lt),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var i=e.elm,a=i.style;Tl(i,n),a.transform=a.WebkitTransform=a.transitionDuration="",i.addEventListener(vl,i._moveCb=function e(a){a&&a.target!==i||a&&!/transform$/.test(a.propertyName)||(i.removeEventListener(vl,e),i._moveCb=null,Bl(i,n))})}})))},methods:{hasMove:function(e,n){if(!hl)return!1;if(this._hasMove)return this._hasMove;var i=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){pl(i,e)})),bl(i,n),i.style.display="none",this.$el.appendChild(i);var a=Pl(i);return this.$el.removeChild(i),this._hasMove=a.hasTransform}}}};Xa.config.mustUseProp=function(e,n,i){return"value"===i&&dr(e)&&"button"!==n||"selected"===i&&"option"===e||"checked"===i&&"input"===e||"muted"===i&&"video"===e},Xa.config.isReservedTag=fr,Xa.config.isReservedAttr=tr,Xa.config.getTagNamespace=function(e){return vr(e)?"svg":"math"===e?"math":void 0},Xa.config.isUnknownElement=function(e){if(!J)return!0;if(fr(e))return!1;if(e=e.toLowerCase(),null!=zr[e])return zr[e];var n=document.createElement(e);return e.indexOf("-")>-1?zr[e]=n.constructor===window.HTMLUnknownElement||n.constructor===window.HTMLElement:zr[e]=/HTMLUnknownElement/.test(n.toString())},N(Xa.options.directives,$l),N(Xa.options.components,tt),Xa.prototype.__patch__=J?Zl:D,Xa.prototype.$mount=function(e,n){return function(e,n,i){var a;e.$el=n,e.$options.render||(e.$options.render=be),ta(e,"beforeMount"),a=function(){e._update(e._render(),i)},new Wi(e,a,D,{before:function(){e._isMounted&&!e._isDestroyed&&ta(e,"beforeUpdate")}},!0),i=!1;var r=e._preWatchers;if(r)for(var l=0;l<r.length;l++)r[l].run();return null==e.$vnode&&(e._isMounted=!0,ta(e,"mounted")),e}(this,e=e&&J?function(e){if("string"==typeof e){var n=document.querySelector(e);return n||document.createElement("div")}return e}(e):void 0,n)},J&&setTimeout((function(){F.devtools&&de&&de.emit("init",Xa)}),0)},function(e,n,i){"use strict";var a=function(e){return e&&e.Math===Math&&e};e.exports=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof global&&global)||a("object"==typeof this&&this)||function(){return this}()||Function("return this")()},function(e,n,i){"use strict";var a="object"==typeof document&&document.all;e.exports=void 0===a&&void 0!==a?function(e){return"function"==typeof e||e===a}:function(e){return"function"==typeof e}},function(e,n,i){"use strict";var a=i(33),r=Function.prototype,l=r.call,t=a&&r.bind.bind(l,l);e.exports=a?t:function(e){return function(){return l.apply(e,arguments)}}},function(e,n,i){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,i){"use strict";var a=i(4);e.exports=!a((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,n){var i=Array.isArray;e.exports=i},function(e,n,i){var a=i(66),r="object"==typeof self&&self&&self.Object===Object&&self,l=a||r||Function("return this")();e.exports=l},function(e,n,i){"use strict";var a=i(3),r=i(29),l=a({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,n){return l(r(e),n)}},function(e,n,i){"use strict";var a=i(2);e.exports=function(e){return"object"==typeof e?null!==e:a(e)}},function(e,n,i){var a=i(160),r=i(163);e.exports=function(e,n){var i=r(e,n);return a(i)?i:void 0}},function(e,n){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,n,i){"use strict";var a=i(5),r=i(16),l=i(32);e.exports=a?function(e,n,i){return r.f(e,n,l(1,i))}:function(e,n,i){return e[n]=i,e}},function(e,n,i){var a=i(14),r=i(145),l=i(146),t=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":t&&t in Object(e)?r(e):l(e)}},function(e,n,i){var a=i(7).Symbol;e.exports=a},function(e,n,i){"use strict";function a(e,n,i,a,r,l,t,d){var s,m="function"==typeof e?e.options:e;if(n&&(m.render=n,m.staticRenderFns=i,m._compiled=!0),a&&(m.functional=!0),l&&(m._scopeId="data-v-"+l),t?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(t)},m._ssrRegister=s):r&&(s=d?function(){r.call(this,(m.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(m.functional){m._injectStyles=s;var u=m.render;m.render=function(e,n){return s.call(n),u(e,n)}}else{var o=m.beforeCreate;m.beforeCreate=o?[].concat(o,s):[s]}return{exports:e,options:m}}i.d(n,"a",(function(){return a}))},function(e,n,i){"use strict";var a=i(5),r=i(64),l=i(104),t=i(28),d=i(58),s=TypeError,m=Object.defineProperty,u=Object.getOwnPropertyDescriptor;n.f=a?l?function(e,n,i){if(t(e),n=d(n),t(i),"function"==typeof e&&"prototype"===n&&"value"in i&&"writable"in i&&!i.writable){var a=u(e,n);a&&a.writable&&(e[n]=i.value,i={configurable:"configurable"in i?i.configurable:a.configurable,enumerable:"enumerable"in i?i.enumerable:a.enumerable,writable:!1})}return m(e,n,i)}:m:function(e,n,i){if(t(e),n=d(n),t(i),r)try{return m(e,n,i)}catch(e){}if("get"in i||"set"in i)throw new s("Accessors not supported");return"value"in i&&(e[n]=i.value),e}},function(e,n,i){"use strict";var a=i(3),r=a({}.toString),l=a("".slice);e.exports=function(e){return l(r(e),8,-1)}},function(e,n,i){var a=i(150),r=i(151),l=i(152),t=i(153),d=i(154);function s(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var a=e[n];this.set(a[0],a[1])}}s.prototype.clear=a,s.prototype.delete=r,s.prototype.get=l,s.prototype.has=t,s.prototype.set=d,e.exports=s},function(e,n,i){var a=i(68);e.exports=function(e,n){for(var i=e.length;i--;)if(a(e[i][0],n))return i;return-1}},function(e,n,i){var a=i(10)(Object,"create");e.exports=a},function(e,n,i){var a=i(172);e.exports=function(e,n){var i=e.__data__;return a(n)?i["string"==typeof n?"string":"hash"]:i.map}},function(e,n,i){var a=i(44);e.exports=function(e){if("string"==typeof e||a(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(e,n,i){var a,r;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(r="function"==typeof(a=function(){var e,n,i={version:"0.2.0"},a=i.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function r(e,n,i){return e<n?n:e>i?i:e}function l(e){return 100*(-1+e)}i.configure=function(e){var n,i;for(n in e)void 0!==(i=e[n])&&e.hasOwnProperty(n)&&(a[n]=i);return this},i.status=null,i.set=function(e){var n=i.isStarted();e=r(e,a.minimum,1),i.status=1===e?null:e;var s=i.render(!n),m=s.querySelector(a.barSelector),u=a.speed,o=a.easing;return s.offsetWidth,t((function(n){""===a.positionUsing&&(a.positionUsing=i.getPositioningCSS()),d(m,function(e,n,i){var r;return(r="translate3d"===a.positionUsing?{transform:"translate3d("+l(e)+"%,0,0)"}:"translate"===a.positionUsing?{transform:"translate("+l(e)+"%,0)"}:{"margin-left":l(e)+"%"}).transition="all "+n+"ms "+i,r}(e,u,o)),1===e?(d(s,{transition:"none",opacity:1}),s.offsetWidth,setTimeout((function(){d(s,{transition:"all "+u+"ms linear",opacity:0}),setTimeout((function(){i.remove(),n()}),u)}),u)):setTimeout(n,u)})),this},i.isStarted=function(){return"number"==typeof i.status},i.start=function(){i.status||i.set(0);var e=function(){setTimeout((function(){i.status&&(i.trickle(),e())}),a.trickleSpeed)};return a.trickle&&e(),this},i.done=function(e){return e||i.status?i.inc(.3+.5*Math.random()).set(1):this},i.inc=function(e){var n=i.status;return n?("number"!=typeof e&&(e=(1-n)*r(Math.random()*n,.1,.95)),n=r(n+e,0,.994),i.set(n)):i.start()},i.trickle=function(){return i.inc(Math.random()*a.trickleRate)},e=0,n=0,i.promise=function(a){return a&&"resolved"!==a.state()?(0===n&&i.start(),e++,n++,a.always((function(){0==--n?(e=0,i.done()):i.set((e-n)/e)})),this):this},i.render=function(e){if(i.isRendered())return document.getElementById("nprogress");m(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=a.template;var r,t=n.querySelector(a.barSelector),s=e?"-100":l(i.status||0),u=document.querySelector(a.parent);return d(t,{transition:"all 0 linear",transform:"translate3d("+s+"%,0,0)"}),a.showSpinner||(r=n.querySelector(a.spinnerSelector))&&k(r),u!=document.body&&m(u,"nprogress-custom-parent"),u.appendChild(n),n},i.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(a.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&k(e)},i.isRendered=function(){return!!document.getElementById("nprogress")},i.getPositioningCSS=function(){var e=document.body.style,n="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return n+"Perspective"in e?"translate3d":n+"Transform"in e?"translate":"margin"};var t=function(){var e=[];function n(){var i=e.shift();i&&i(n)}return function(i){e.push(i),1==e.length&&n()}}(),d=function(){var e=["Webkit","O","Moz","ms"],n={};function i(i){return i=i.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,n){return n.toUpperCase()})),n[i]||(n[i]=function(n){var i=document.body.style;if(n in i)return n;for(var a,r=e.length,l=n.charAt(0).toUpperCase()+n.slice(1);r--;)if((a=e[r]+l)in i)return a;return n}(i))}function a(e,n,a){n=i(n),e.style[n]=a}return function(e,n){var i,r,l=arguments;if(2==l.length)for(i in n)void 0!==(r=n[i])&&n.hasOwnProperty(i)&&a(e,i,r);else a(e,l[1],l[2])}}();function s(e,n){return("string"==typeof e?e:o(e)).indexOf(" "+n+" ")>=0}function m(e,n){var i=o(e),a=i+n;s(i,n)||(e.className=a.substring(1))}function u(e,n){var i,a=o(e);s(e,n)&&(i=a.replace(" "+n+" "," "),e.className=i.substring(1,i.length-1))}function o(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function k(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return i})?a.call(n,i,n,e):a)||(e.exports=r)},function(e,n,i){"use strict";var a=i(1),r=i(57).f,l=i(12),t=i(92),d=i(36),s=i(55),m=i(129);e.exports=function(e,n){var i,u,o,k,y,c=e.target,b=e.global,p=e.stat;if(i=b?a:p?a[c]||d(c,{}):(a[c]||{}).prototype)for(u in n){if(k=n[u],o=e.dontCallGetSet?(y=r(i,u))&&y.value:i[u],!m(b?u:c+(p?".":"#")+u,e.forced)&&void 0!==o){if(typeof k==typeof o)continue;s(k,o)}(e.sham||o&&o.sham)&&l(k,"sham",!0),t(i,u,k,e)}}},function(e,n,i){"use strict";var a=i(1),r=i(63),l=i(8),t=i(53),d=i(61),s=i(60),m=a.Symbol,u=r("wks"),o=s?m.for||m:m&&m.withoutSetter||t;e.exports=function(e){return l(u,e)||(u[e]=d&&l(m,e)?m[e]:o("Symbol."+e)),u[e]}},function(e,n,i){"use strict";var a=i(127);e.exports=function(e){return a(e.length)}},function(e,n,i){"use strict";var a=i(33),r=Function.prototype.call;e.exports=a?r.bind(r):function(){return r.apply(r,arguments)}},function(e,n,i){"use strict";var a=i(9),r=String,l=TypeError;e.exports=function(e){if(a(e))return e;throw new l(r(e)+" is not an object")}},function(e,n,i){"use strict";var a=i(48),r=Object;e.exports=function(e){return r(a(e))}},function(e,n,i){"use strict";var a=i(1),r=i(2),l=function(e){return r(e)?e:void 0};e.exports=function(e,n){return arguments.length<2?l(a[e]):a[e]&&a[e][n]}},function(e,n,i){"use strict";var a=i(2),r=i(94),l=TypeError;e.exports=function(e){if(a(e))return e;throw new l(r(e)+" is not a function")}},function(e,n,i){"use strict";e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,i){"use strict";var a=i(4);e.exports=!a((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},function(e,n,i){"use strict";var a=i(52),r=i(48);e.exports=function(e){return a(r(e))}},function(e,n,i){"use strict";var a=i(1),r=i(36),l=a["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=l},function(e,n,i){"use strict";var a=i(1),r=Object.defineProperty;e.exports=function(e,n){try{r(a,e,{value:n,configurable:!0,writable:!0})}catch(i){a[e]=n}return n}},function(e,n,i){var a=i(144),r=i(11),l=Object.prototype,t=l.hasOwnProperty,d=l.propertyIsEnumerable,s=a(function(){return arguments}())?a:function(e){return r(e)&&t.call(e,"callee")&&!d.call(e,"callee")};e.exports=s},function(e,n,i){var a=i(10)(i(7),"Map");e.exports=a},function(e,n){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},function(e,n,i){var a=i(164),r=i(171),l=i(173),t=i(174),d=i(175);function s(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var a=e[n];this.set(a[0],a[1])}}s.prototype.clear=a,s.prototype.delete=r,s.prototype.get=l,s.prototype.has=t,s.prototype.set=d,e.exports=s},function(e,n){e.exports=function(e){var n=-1,i=Array(e.size);return e.forEach((function(e){i[++n]=e})),i}},function(e,n){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,n,i){var a=i(6),r=i(44),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t=/^\w*$/;e.exports=function(e,n){if(a(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!r(e))||(t.test(e)||!l.test(e)||null!=n&&e in Object(n))}},function(e,n,i){var a=i(13),r=i(11);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==a(e)}},function(e,n){e.exports=function(e){return e}},function(e,n,i){"use strict";var a=i(126);e.exports=function(e){var n=+e;return n!=n||0===n?0:a(n)}},function(e,n,i){"use strict";var a=i(3);e.exports=a({}.isPrototypeOf)},function(e,n,i){"use strict";var a=i(49),r=TypeError;e.exports=function(e){if(a(e))throw new r("Can't call method on "+e);return e}},function(e,n,i){"use strict";e.exports=function(e){return null==e}},function(e,n,i){"use strict";e.exports=!1},function(e,n,i){"use strict";var a=i(136),r=i(28),l=i(137);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,i={};try{(e=a(Object.prototype,"__proto__","set"))(i,[]),n=i instanceof Array}catch(e){}return function(i,a){return r(i),l(a),n?e(i,a):i.__proto__=a,i}}():void 0)},function(e,n,i){"use strict";var a=i(3),r=i(4),l=i(17),t=Object,d=a("".split);e.exports=r((function(){return!t("z").propertyIsEnumerable(0)}))?function(e){return"String"===l(e)?d(e,""):t(e)}:t},function(e,n,i){"use strict";var a=i(3),r=0,l=Math.random(),t=a(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+t(++r+l,36)}},function(e,n,i){"use strict";e.exports={}},function(e,n,i){"use strict";var a=i(8),r=i(122),l=i(57),t=i(16);e.exports=function(e,n,i){for(var d=r(n),s=t.f,m=l.f,u=0;u<d.length;u++){var o=d[u];a(e,o)||i&&a(i,o)||s(e,o,m(n,o))}}},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n,i){"use strict";var a=i(5),r=i(27),l=i(116),t=i(32),d=i(34),s=i(58),m=i(8),u=i(64),o=Object.getOwnPropertyDescriptor;n.f=a?o:function(e,n){if(e=d(e),n=s(n),u)try{return o(e,n)}catch(e){}if(m(e,n))return t(!r(l.f,e,n),e[n])}},function(e,n,i){"use strict";var a=i(102),r=i(59);e.exports=function(e){var n=a(e,"string");return r(n)?n:n+""}},function(e,n,i){"use strict";var a=i(30),r=i(2),l=i(47),t=i(60),d=Object;e.exports=t?function(e){return"symbol"==typeof e}:function(e){var n=a("Symbol");return r(n)&&l(n.prototype,d(e))}},function(e,n,i){"use strict";var a=i(61);e.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,n,i){"use strict";var a=i(62),r=i(4),l=i(1).String;e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol("symbol detection");return!l(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&a&&a<41}))},function(e,n,i){"use strict";var a,r,l=i(1),t=i(117),d=l.process,s=l.Deno,m=d&&d.versions||s&&s.version,u=m&&m.v8;u&&(r=(a=u.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!r&&t&&(!(a=t.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=t.match(/Chrome\/(\d+)/))&&(r=+a[1]),e.exports=r},function(e,n,i){"use strict";var a=i(50),r=i(35);(e.exports=function(e,n){return r[e]||(r[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.35.0",mode:a?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.35.0/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,n,i){"use strict";var a=i(5),r=i(4),l=i(103);e.exports=!a&&!r((function(){return 7!==Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},function(e,n){e.exports=function(e,n){for(var i=-1,a=n.length,r=e.length;++i<a;)e[r+i]=n[i];return e}},function(e,n){var i="object"==typeof global&&global&&global.Object===Object&&global;e.exports=i},function(e,n,i){var a=i(18),r=i(155),l=i(156),t=i(157),d=i(158),s=i(159);function m(e){var n=this.__data__=new a(e);this.size=n.size}m.prototype.clear=r,m.prototype.delete=l,m.prototype.get=t,m.prototype.has=d,m.prototype.set=s,e.exports=m},function(e,n){e.exports=function(e,n){return e===n||e!=e&&n!=n}},function(e,n,i){var a=i(13),r=i(39);e.exports=function(e){if(!r(e))return!1;var n=a(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},function(e,n){var i=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,n,i){var a=i(176),r=i(11);e.exports=function e(n,i,l,t,d){return n===i||(null==n||null==i||!r(n)&&!r(i)?n!=n&&i!=i:a(n,i,l,t,e,d))}},function(e,n,i){var a=i(73),r=i(179),l=i(74);e.exports=function(e,n,i,t,d,s){var m=1&i,u=e.length,o=n.length;if(u!=o&&!(m&&o>u))return!1;var k=s.get(e),y=s.get(n);if(k&&y)return k==n&&y==e;var c=-1,b=!0,p=2&i?new a:void 0;for(s.set(e,n),s.set(n,e);++c<u;){var g=e[c],H=n[c];if(t)var h=m?t(H,g,c,n,e,s):t(g,H,c,e,n,s);if(void 0!==h){if(h)continue;b=!1;break}if(p){if(!r(n,(function(e,n){if(!l(p,n)&&(g===e||d(g,e,i,t,s)))return p.push(n)}))){b=!1;break}}else if(g!==H&&!d(g,H,i,t,s)){b=!1;break}}return s.delete(e),s.delete(n),b}},function(e,n,i){var a=i(40),r=i(177),l=i(178);function t(e){var n=-1,i=null==e?0:e.length;for(this.__data__=new a;++n<i;)this.add(e[n])}t.prototype.add=t.prototype.push=r,t.prototype.has=l,e.exports=t},function(e,n){e.exports=function(e,n){return e.has(n)}},function(e,n,i){var a=i(189),r=i(195),l=i(79);e.exports=function(e){return l(e)?a(e):r(e)}},function(e,n,i){(function(e){var a=i(7),r=i(191),l=n&&!n.nodeType&&n,t=l&&"object"==typeof e&&e&&!e.nodeType&&e,d=t&&t.exports===l?a.Buffer:void 0,s=(d?d.isBuffer:void 0)||r;e.exports=s}).call(this,i(56)(e))},function(e,n){var i=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var a=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==a||"symbol"!=a&&i.test(e))&&e>-1&&e%1==0&&e<n}},function(e,n,i){var a=i(192),r=i(193),l=i(194),t=l&&l.isTypedArray,d=t?r(t):a;e.exports=d},function(e,n,i){var a=i(69),r=i(42);e.exports=function(e){return null!=e&&r(e.length)&&!a(e)}},function(e,n,i){var a=i(10)(i(7),"Set");e.exports=a},function(e,n,i){var a=i(39);e.exports=function(e){return e==e&&!a(e)}},function(e,n){e.exports=function(e,n){return function(i){return null!=i&&(i[e]===n&&(void 0!==n||e in Object(i)))}}},function(e,n,i){var a=i(84),r=i(22);e.exports=function(e,n){for(var i=0,l=(n=a(n,e)).length;null!=e&&i<l;)e=e[r(n[i++])];return i&&i==l?e:void 0}},function(e,n,i){var a=i(6),r=i(43),l=i(205),t=i(208);e.exports=function(e,n){return a(e)?e:r(e,n)?[e]:l(t(e))}},function(e,n,i){},function(e,n,i){},function(e,n,i){var a=i(142),r=i(147),l=i(217),t=i(225),d=i(234),s=i(113),m=l((function(e){var n=s(e);return d(n)&&(n=void 0),t(a(e,1,d,!0),r(n,2))}));e.exports=m},function(e,n,i){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var a=/["'&<>]/;e.exports=function(e){var n,i=""+e,r=a.exec(i);if(!r)return i;var l="",t=0,d=0;for(t=r.index;t<i.length;t++){switch(i.charCodeAt(t)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}d!==t&&(l+=i.substring(d,t)),d=t+1,l+=n}return d!==t?l+i.substring(d,t):l}},function(e,n){var i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,l=/^0o[0-7]+$/i,t=parseInt,d="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,m=d||s||Function("return this")(),u=Object.prototype.toString,o=Math.max,k=Math.min,y=function(){return m.Date.now()};function c(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(c(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=c(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var d=r.test(e);return d||l.test(e)?t(e.slice(2),d?2:8):a.test(e)?NaN:+e}e.exports=function(e,n,i){var a,r,l,t,d,s,m=0,u=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function H(n){var i=a,l=r;return a=r=void 0,m=n,t=e.apply(l,i)}function h(e){return m=e,d=setTimeout(v,n),u?H(e):t}function S(e){var i=e-s;return void 0===s||i>=n||i<0||p&&e-m>=l}function v(){var e=y();if(S(e))return f(e);d=setTimeout(v,function(e){var i=n-(e-s);return p?k(i,l-(e-m)):i}(e))}function f(e){return d=void 0,g&&a?H(e):(a=r=void 0,t)}function z(){var e=y(),i=S(e);if(a=arguments,r=this,s=e,i){if(void 0===d)return h(s);if(p)return d=setTimeout(v,n),H(s)}return void 0===d&&(d=setTimeout(v,n)),t}return n=b(n)||0,c(i)&&(u=!!i.leading,l=(p="maxWait"in i)?o(b(i.maxWait)||0,n):l,g="trailing"in i?!!i.trailing:g),z.cancel=function(){void 0!==d&&clearTimeout(d),m=0,a=s=r=d=void 0},z.flush=function(){return void 0===d?t:f(y())},z}},function(e,n,i){"use strict";var a=i(24),r=i(29),l=i(26),t=i(133),d=i(135);a({target:"Array",proto:!0,arity:1,forced:i(4)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var n=r(this),i=l(n),a=arguments.length;d(i+a);for(var s=0;s<a;s++)n[i]=arguments[s],i++;return t(n,i),i}})},function(e,n,i){"use strict";var a=i(95),r=String;e.exports=function(e){if("Symbol"===a(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}},function(e,n,i){"use strict";var a=i(2),r=i(16),l=i(101),t=i(36);e.exports=function(e,n,i,d){d||(d={});var s=d.enumerable,m=void 0!==d.name?d.name:n;if(a(i)&&l(i,m,d),d.global)s?e[n]=i:t(n,i);else{try{d.unsafe?e[n]&&(s=!0):delete e[n]}catch(e){}s?e[n]=i:r.f(e,n,{value:i,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return e}},function(e,n,i){"use strict";var a=i(31),r=i(49);e.exports=function(e,n){var i=e[n];return r(i)?void 0:a(i)}},function(e,n,i){"use strict";var a=String;e.exports=function(e){try{return a(e)}catch(e){return"Object"}}},function(e,n,i){"use strict";var a=i(140),r=i(2),l=i(17),t=i(25)("toStringTag"),d=Object,s="Arguments"===l(function(){return arguments}());e.exports=a?l:function(e){var n,i,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,n){try{return e[n]}catch(e){}}(n=d(e),t))?i:s?l(n):"Object"===(a=l(n))&&r(n.callee)?"Arguments":a}},function(e,n,i){"use strict";var a=i(24),r=i(130).left,l=i(131),t=i(62);a({target:"Array",proto:!0,forced:!i(132)&&t>79&&t<83||!l("reduce")},{reduce:function(e){var n=arguments.length;return r(this,e,n,n>1?arguments[1]:void 0)}})},function(e,n,i){"use strict";var a=i(63),r=i(53),l=a("keys");e.exports=function(e){return l[e]||(l[e]=r(e))}},function(e,n,i){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n,i){"use strict";var a=i(24),r=i(1),l=i(107),t=i(108),d=r.WebAssembly,s=7!==new Error("e",{cause:7}).cause,m=function(e,n){var i={};i[e]=t(e,n,s),a({global:!0,constructor:!0,arity:1,forced:s},i)},u=function(e,n){if(d&&d[e]){var i={};i[e]=t("WebAssembly."+e,n,s),a({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:s},i)}};m("Error",(function(e){return function(n){return l(e,this,arguments)}})),m("EvalError",(function(e){return function(n){return l(e,this,arguments)}})),m("RangeError",(function(e){return function(n){return l(e,this,arguments)}})),m("ReferenceError",(function(e){return function(n){return l(e,this,arguments)}})),m("SyntaxError",(function(e){return function(n){return l(e,this,arguments)}})),m("TypeError",(function(e){return function(n){return l(e,this,arguments)}})),m("URIError",(function(e){return function(n){return l(e,this,arguments)}})),u("CompileError",(function(e){return function(n){return l(e,this,arguments)}})),u("LinkError",(function(e){return function(n){return l(e,this,arguments)}})),u("RuntimeError",(function(e){return function(n){return l(e,this,arguments)}}))},function(e,n,i){"use strict";var a=i(91);e.exports=function(e,n){return void 0===e?arguments.length<2?"":n:a(e)}},function(e,n,i){"use strict";var a=i(3),r=i(4),l=i(2),t=i(8),d=i(5),s=i(119).CONFIGURABLE,m=i(120),u=i(105),o=u.enforce,k=u.get,y=String,c=Object.defineProperty,b=a("".slice),p=a("".replace),g=a([].join),H=d&&!r((function(){return 8!==c((function(){}),"length",{value:8}).length})),h=String(String).split("String"),S=e.exports=function(e,n,i){"Symbol("===b(y(n),0,7)&&(n="["+p(y(n),/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(n="get "+n),i&&i.setter&&(n="set "+n),(!t(e,"name")||s&&e.name!==n)&&(d?c(e,"name",{value:n,configurable:!0}):e.name=n),H&&i&&t(i,"arity")&&e.length!==i.arity&&c(e,"length",{value:i.arity});try{i&&t(i,"constructor")&&i.constructor?d&&c(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var a=o(e);return t(a,"source")||(a.source=g(h,"string"==typeof n?n:"")),e};Function.prototype.toString=S((function(){return l(this)&&k(this).source||m(this)}),"toString")},function(e,n,i){"use strict";var a=i(27),r=i(9),l=i(59),t=i(93),d=i(118),s=i(25),m=TypeError,u=s("toPrimitive");e.exports=function(e,n){if(!r(e)||l(e))return e;var i,s=t(e,u);if(s){if(void 0===n&&(n="default"),i=a(s,e,n),!r(i)||l(i))return i;throw new m("Can't convert object to primitive value")}return void 0===n&&(n="number"),d(e,n)}},function(e,n,i){"use strict";var a=i(1),r=i(9),l=a.document,t=r(l)&&r(l.createElement);e.exports=function(e){return t?l.createElement(e):{}}},function(e,n,i){"use strict";var a=i(5),r=i(4);e.exports=a&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(e,n,i){"use strict";var a,r,l,t=i(121),d=i(1),s=i(9),m=i(12),u=i(8),o=i(35),k=i(97),y=i(54),c=d.TypeError,b=d.WeakMap;if(t||o.state){var p=o.state||(o.state=new b);p.get=p.get,p.has=p.has,p.set=p.set,a=function(e,n){if(p.has(e))throw new c("Object already initialized");return n.facade=e,p.set(e,n),n},r=function(e){return p.get(e)||{}},l=function(e){return p.has(e)}}else{var g=k("state");y[g]=!0,a=function(e,n){if(u(e,g))throw new c("Object already initialized");return n.facade=e,m(e,g,n),n},r=function(e){return u(e,g)?e[g]:{}},l=function(e){return u(e,g)}}e.exports={set:a,get:r,has:l,enforce:function(e){return l(e)?r(e):a(e,{})},getterFor:function(e){return function(n){var i;if(!s(n)||(i=r(n)).type!==e)throw new c("Incompatible receiver, "+e+" required");return i}}}},function(e,n,i){"use strict";var a=i(3),r=i(8),l=i(34),t=i(124).indexOf,d=i(54),s=a([].push);e.exports=function(e,n){var i,a=l(e),m=0,u=[];for(i in a)!r(d,i)&&r(a,i)&&s(u,i);for(;n.length>m;)r(a,i=n[m++])&&(~t(u,i)||s(u,i));return u}},function(e,n,i){"use strict";var a=i(33),r=Function.prototype,l=r.apply,t=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(a?t.bind(l):function(){return t.apply(l,arguments)})},function(e,n,i){"use strict";var a=i(30),r=i(8),l=i(12),t=i(47),d=i(51),s=i(55),m=i(139),u=i(109),o=i(100),k=i(110),y=i(111),c=i(5),b=i(50);e.exports=function(e,n,i,p){var g=p?2:1,H=e.split("."),h=H[H.length-1],S=a.apply(null,H);if(S){var v=S.prototype;if(!b&&r(v,"cause")&&delete v.cause,!i)return S;var f=a("Error"),z=n((function(e,n){var i=o(p?n:e,void 0),a=p?new S(e):new S;return void 0!==i&&l(a,"message",i),y(a,z,a.stack,2),this&&t(v,this)&&u(a,this,z),arguments.length>g&&k(a,arguments[g]),a}));if(z.prototype=v,"Error"!==h?d?d(z,f):s(z,f,{name:!0}):c&&"stackTraceLimit"in S&&(m(z,S,"stackTraceLimit"),m(z,S,"prepareStackTrace")),s(z,S),!b)try{v.name!==h&&l(v,"name",h),v.constructor=z}catch(e){}return z}}},function(e,n,i){"use strict";var a=i(2),r=i(9),l=i(51);e.exports=function(e,n,i){var t,d;return l&&a(t=n.constructor)&&t!==i&&r(d=t.prototype)&&d!==i.prototype&&l(e,d),e}},function(e,n,i){"use strict";var a=i(9),r=i(12);e.exports=function(e,n){a(n)&&"cause"in n&&r(e,"cause",n.cause)}},function(e,n,i){"use strict";var a=i(12),r=i(112),l=i(141),t=Error.captureStackTrace;e.exports=function(e,n,i,d){l&&(t?t(e,n):a(e,"stack",r(i,d)))}},function(e,n,i){"use strict";var a=i(3),r=Error,l=a("".replace),t=String(new r("zxcasd").stack),d=/\n\s*at [^:]*:[^\n]*/,s=d.test(t);e.exports=function(e,n){if(s&&"string"==typeof e&&!r.prepareStackTrace)for(;n--;)e=l(e,d,"");return e}},function(e,n){e.exports=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}},function(e,n,i){var a=i(83);e.exports=function(e,n,i){var r=null==e?void 0:a(e,n);return void 0===r?i:r}},function(e,n,i){e.exports=i(239)},function(e,n,i){"use strict";var a={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,l=r&&!a.call({1:2},1);n.f=l?function(e){var n=r(this,e);return!!n&&n.enumerable}:a},function(e,n,i){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},function(e,n,i){"use strict";var a=i(27),r=i(2),l=i(9),t=TypeError;e.exports=function(e,n){var i,d;if("string"===n&&r(i=e.toString)&&!l(d=a(i,e)))return d;if(r(i=e.valueOf)&&!l(d=a(i,e)))return d;if("string"!==n&&r(i=e.toString)&&!l(d=a(i,e)))return d;throw new t("Can't convert object to primitive value")}},function(e,n,i){"use strict";var a=i(5),r=i(8),l=Function.prototype,t=a&&Object.getOwnPropertyDescriptor,d=r(l,"name"),s=d&&"something"===function(){}.name,m=d&&(!a||a&&t(l,"name").configurable);e.exports={EXISTS:d,PROPER:s,CONFIGURABLE:m}},function(e,n,i){"use strict";var a=i(3),r=i(2),l=i(35),t=a(Function.toString);r(l.inspectSource)||(l.inspectSource=function(e){return t(e)}),e.exports=l.inspectSource},function(e,n,i){"use strict";var a=i(1),r=i(2),l=a.WeakMap;e.exports=r(l)&&/native code/.test(String(l))},function(e,n,i){"use strict";var a=i(30),r=i(3),l=i(123),t=i(128),d=i(28),s=r([].concat);e.exports=a("Reflect","ownKeys")||function(e){var n=l.f(d(e)),i=t.f;return i?s(n,i(e)):n}},function(e,n,i){"use strict";var a=i(106),r=i(98).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return a(e,r)}},function(e,n,i){"use strict";var a=i(34),r=i(125),l=i(26),t=function(e){return function(n,i,t){var d,s=a(n),m=l(s),u=r(t,m);if(e&&i!=i){for(;m>u;)if((d=s[u++])!=d)return!0}else for(;m>u;u++)if((e||u in s)&&s[u]===i)return e||u||0;return!e&&-1}};e.exports={includes:t(!0),indexOf:t(!1)}},function(e,n,i){"use strict";var a=i(46),r=Math.max,l=Math.min;e.exports=function(e,n){var i=a(e);return i<0?r(i+n,0):l(i,n)}},function(e,n,i){"use strict";var a=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:a)(n)}},function(e,n,i){"use strict";var a=i(46),r=Math.min;e.exports=function(e){return e>0?r(a(e),9007199254740991):0}},function(e,n,i){"use strict";n.f=Object.getOwnPropertySymbols},function(e,n,i){"use strict";var a=i(4),r=i(2),l=/#|\.prototype\./,t=function(e,n){var i=s[d(e)];return i===u||i!==m&&(r(n)?a(n):!!n)},d=t.normalize=function(e){return String(e).replace(l,".").toLowerCase()},s=t.data={},m=t.NATIVE="N",u=t.POLYFILL="P";e.exports=t},function(e,n,i){"use strict";var a=i(31),r=i(29),l=i(52),t=i(26),d=TypeError,s=function(e){return function(n,i,s,m){var u=r(n),o=l(u),k=t(u);a(i);var y=e?k-1:0,c=e?-1:1;if(s<2)for(;;){if(y in o){m=o[y],y+=c;break}if(y+=c,e?y<0:k<=y)throw new d("Reduce of empty array with no initial value")}for(;e?y>=0:k>y;y+=c)y in o&&(m=i(m,o[y],y,u));return m}};e.exports={left:s(!1),right:s(!0)}},function(e,n,i){"use strict";var a=i(4);e.exports=function(e,n){var i=[][e];return!!i&&a((function(){i.call(null,n||function(){return 1},1)}))}},function(e,n,i){"use strict";var a=i(1),r=i(17);e.exports="process"===r(a.process)},function(e,n,i){"use strict";var a=i(5),r=i(134),l=TypeError,t=Object.getOwnPropertyDescriptor,d=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=d?function(e,n){if(r(e)&&!t(e,"length").writable)throw new l("Cannot set read only .length");return e.length=n}:function(e,n){return e.length=n}},function(e,n,i){"use strict";var a=i(17);e.exports=Array.isArray||function(e){return"Array"===a(e)}},function(e,n,i){"use strict";var a=TypeError;e.exports=function(e){if(e>9007199254740991)throw a("Maximum allowed index exceeded");return e}},function(e,n,i){"use strict";var a=i(3),r=i(31);e.exports=function(e,n,i){try{return a(r(Object.getOwnPropertyDescriptor(e,n)[i]))}catch(e){}}},function(e,n,i){"use strict";var a=i(138),r=String,l=TypeError;e.exports=function(e){if(a(e))return e;throw new l("Can't set "+r(e)+" as a prototype")}},function(e,n,i){"use strict";var a=i(9);e.exports=function(e){return a(e)||null===e}},function(e,n,i){"use strict";var a=i(16).f;e.exports=function(e,n,i){i in e||a(e,i,{configurable:!0,get:function(){return n[i]},set:function(e){n[i]=e}})}},function(e,n,i){"use strict";var a={};a[i(25)("toStringTag")]="z",e.exports="[object z]"===String(a)},function(e,n,i){"use strict";var a=i(4),r=i(32);e.exports=!a((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",r(1,7)),7!==e.stack)}))},function(e,n,i){var a=i(65),r=i(143);e.exports=function e(n,i,l,t,d){var s=-1,m=n.length;for(l||(l=r),d||(d=[]);++s<m;){var u=n[s];i>0&&l(u)?i>1?e(u,i-1,l,t,d):a(d,u):t||(d[d.length]=u)}return d}},function(e,n,i){var a=i(14),r=i(37),l=i(6),t=a?a.isConcatSpreadable:void 0;e.exports=function(e){return l(e)||r(e)||!!(t&&e&&e[t])}},function(e,n,i){var a=i(13),r=i(11);e.exports=function(e){return r(e)&&"[object Arguments]"==a(e)}},function(e,n,i){var a=i(14),r=Object.prototype,l=r.hasOwnProperty,t=r.toString,d=a?a.toStringTag:void 0;e.exports=function(e){var n=l.call(e,d),i=e[d];try{e[d]=void 0;var a=!0}catch(e){}var r=t.call(e);return a&&(n?e[d]=i:delete e[d]),r}},function(e,n){var i=Object.prototype.toString;e.exports=function(e){return i.call(e)}},function(e,n,i){var a=i(148),r=i(204),l=i(45),t=i(6),d=i(214);e.exports=function(e){return"function"==typeof e?e:null==e?l:"object"==typeof e?t(e)?r(e[0],e[1]):a(e):d(e)}},function(e,n,i){var a=i(149),r=i(203),l=i(82);e.exports=function(e){var n=r(e);return 1==n.length&&n[0][2]?l(n[0][0],n[0][1]):function(i){return i===e||a(i,e,n)}}},function(e,n,i){var a=i(67),r=i(71);e.exports=function(e,n,i,l){var t=i.length,d=t,s=!l;if(null==e)return!d;for(e=Object(e);t--;){var m=i[t];if(s&&m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++t<d;){var u=(m=i[t])[0],o=e[u],k=m[1];if(s&&m[2]){if(void 0===o&&!(u in e))return!1}else{var y=new a;if(l)var c=l(o,k,u,e,n,y);if(!(void 0===c?r(k,o,3,l,y):c))return!1}}return!0}},function(e,n){e.exports=function(){this.__data__=[],this.size=0}},function(e,n,i){var a=i(19),r=Array.prototype.splice;e.exports=function(e){var n=this.__data__,i=a(n,e);return!(i<0)&&(i==n.length-1?n.pop():r.call(n,i,1),--this.size,!0)}},function(e,n,i){var a=i(19);e.exports=function(e){var n=this.__data__,i=a(n,e);return i<0?void 0:n[i][1]}},function(e,n,i){var a=i(19);e.exports=function(e){return a(this.__data__,e)>-1}},function(e,n,i){var a=i(19);e.exports=function(e,n){var i=this.__data__,r=a(i,e);return r<0?(++this.size,i.push([e,n])):i[r][1]=n,this}},function(e,n,i){var a=i(18);e.exports=function(){this.__data__=new a,this.size=0}},function(e,n){e.exports=function(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}},function(e,n){e.exports=function(e){return this.__data__.get(e)}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n,i){var a=i(18),r=i(38),l=i(40);e.exports=function(e,n){var i=this.__data__;if(i instanceof a){var t=i.__data__;if(!r||t.length<199)return t.push([e,n]),this.size=++i.size,this;i=this.__data__=new l(t)}return i.set(e,n),this.size=i.size,this}},function(e,n,i){var a=i(69),r=i(161),l=i(39),t=i(70),d=/^\[object .+?Constructor\]$/,s=Function.prototype,m=Object.prototype,u=s.toString,o=m.hasOwnProperty,k=RegExp("^"+u.call(o).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!l(e)||r(e))&&(a(e)?k:d).test(t(e))}},function(e,n,i){var a,r=i(162),l=(a=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";e.exports=function(e){return!!l&&l in e}},function(e,n,i){var a=i(7)["__core-js_shared__"];e.exports=a},function(e,n){e.exports=function(e,n){return null==e?void 0:e[n]}},function(e,n,i){var a=i(165),r=i(18),l=i(38);e.exports=function(){this.size=0,this.__data__={hash:new a,map:new(l||r),string:new a}}},function(e,n,i){var a=i(166),r=i(167),l=i(168),t=i(169),d=i(170);function s(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var a=e[n];this.set(a[0],a[1])}}s.prototype.clear=a,s.prototype.delete=r,s.prototype.get=l,s.prototype.has=t,s.prototype.set=d,e.exports=s},function(e,n,i){var a=i(20);e.exports=function(){this.__data__=a?a(null):{},this.size=0}},function(e,n){e.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(e,n,i){var a=i(20),r=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;if(a){var i=n[e];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(n,e)?n[e]:void 0}},function(e,n,i){var a=i(20),r=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;return a?void 0!==n[e]:r.call(n,e)}},function(e,n,i){var a=i(20);e.exports=function(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=a&&void 0===n?"__lodash_hash_undefined__":n,this}},function(e,n,i){var a=i(21);e.exports=function(e){var n=a(this,e).delete(e);return this.size-=n?1:0,n}},function(e,n){e.exports=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}},function(e,n,i){var a=i(21);e.exports=function(e){return a(this,e).get(e)}},function(e,n,i){var a=i(21);e.exports=function(e){return a(this,e).has(e)}},function(e,n,i){var a=i(21);e.exports=function(e,n){var i=a(this,e),r=i.size;return i.set(e,n),this.size+=i.size==r?0:1,this}},function(e,n,i){var a=i(67),r=i(72),l=i(180),t=i(183),d=i(199),s=i(6),m=i(76),u=i(78),o="[object Object]",k=Object.prototype.hasOwnProperty;e.exports=function(e,n,i,y,c,b){var p=s(e),g=s(n),H=p?"[object Array]":d(e),h=g?"[object Array]":d(n),S=(H="[object Arguments]"==H?o:H)==o,v=(h="[object Arguments]"==h?o:h)==o,f=H==h;if(f&&m(e)){if(!m(n))return!1;p=!0,S=!1}if(f&&!S)return b||(b=new a),p||u(e)?r(e,n,i,y,c,b):l(e,n,H,i,y,c,b);if(!(1&i)){var z=S&&k.call(e,"__wrapped__"),K=v&&k.call(n,"__wrapped__");if(z||K){var A=z?e.value():e,T=K?n.value():n;return b||(b=new a),c(A,T,i,y,b)}}return!!f&&(b||(b=new a),t(e,n,i,y,c,b))}},function(e,n){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n){e.exports=function(e,n){for(var i=-1,a=null==e?0:e.length;++i<a;)if(n(e[i],i,e))return!0;return!1}},function(e,n,i){var a=i(14),r=i(181),l=i(68),t=i(72),d=i(182),s=i(41),m=a?a.prototype:void 0,u=m?m.valueOf:void 0;e.exports=function(e,n,i,a,m,o,k){switch(i){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=n.byteLength||!o(new r(e),new r(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return l(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var y=d;case"[object Set]":var c=1&a;if(y||(y=s),e.size!=n.size&&!c)return!1;var b=k.get(e);if(b)return b==n;a|=2,k.set(e,n);var p=t(y(e),y(n),a,m,o,k);return k.delete(e),p;case"[object Symbol]":if(u)return u.call(e)==u.call(n)}return!1}},function(e,n,i){var a=i(7).Uint8Array;e.exports=a},function(e,n){e.exports=function(e){var n=-1,i=Array(e.size);return e.forEach((function(e,a){i[++n]=[a,e]})),i}},function(e,n,i){var a=i(184),r=Object.prototype.hasOwnProperty;e.exports=function(e,n,i,l,t,d){var s=1&i,m=a(e),u=m.length;if(u!=a(n).length&&!s)return!1;for(var o=u;o--;){var k=m[o];if(!(s?k in n:r.call(n,k)))return!1}var y=d.get(e),c=d.get(n);if(y&&c)return y==n&&c==e;var b=!0;d.set(e,n),d.set(n,e);for(var p=s;++o<u;){var g=e[k=m[o]],H=n[k];if(l)var h=s?l(H,g,k,n,e,d):l(g,H,k,e,n,d);if(!(void 0===h?g===H||t(g,H,i,l,d):h)){b=!1;break}p||(p="constructor"==k)}if(b&&!p){var S=e.constructor,v=n.constructor;S==v||!("constructor"in e)||!("constructor"in n)||"function"==typeof S&&S instanceof S&&"function"==typeof v&&v instanceof v||(b=!1)}return d.delete(e),d.delete(n),b}},function(e,n,i){var a=i(185),r=i(186),l=i(75);e.exports=function(e){return a(e,l,r)}},function(e,n,i){var a=i(65),r=i(6);e.exports=function(e,n,i){var l=n(e);return r(e)?l:a(l,i(e))}},function(e,n,i){var a=i(187),r=i(188),l=Object.prototype.propertyIsEnumerable,t=Object.getOwnPropertySymbols,d=t?function(e){return null==e?[]:(e=Object(e),a(t(e),(function(n){return l.call(e,n)})))}:r;e.exports=d},function(e,n){e.exports=function(e,n){for(var i=-1,a=null==e?0:e.length,r=0,l=[];++i<a;){var t=e[i];n(t,i,e)&&(l[r++]=t)}return l}},function(e,n){e.exports=function(){return[]}},function(e,n,i){var a=i(190),r=i(37),l=i(6),t=i(76),d=i(77),s=i(78),m=Object.prototype.hasOwnProperty;e.exports=function(e,n){var i=l(e),u=!i&&r(e),o=!i&&!u&&t(e),k=!i&&!u&&!o&&s(e),y=i||u||o||k,c=y?a(e.length,String):[],b=c.length;for(var p in e)!n&&!m.call(e,p)||y&&("length"==p||o&&("offset"==p||"parent"==p)||k&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||d(p,b))||c.push(p);return c}},function(e,n){e.exports=function(e,n){for(var i=-1,a=Array(e);++i<e;)a[i]=n(i);return a}},function(e,n){e.exports=function(){return!1}},function(e,n,i){var a=i(13),r=i(42),l=i(11),t={};t["[object Float32Array]"]=t["[object Float64Array]"]=t["[object Int8Array]"]=t["[object Int16Array]"]=t["[object Int32Array]"]=t["[object Uint8Array]"]=t["[object Uint8ClampedArray]"]=t["[object Uint16Array]"]=t["[object Uint32Array]"]=!0,t["[object Arguments]"]=t["[object Array]"]=t["[object ArrayBuffer]"]=t["[object Boolean]"]=t["[object DataView]"]=t["[object Date]"]=t["[object Error]"]=t["[object Function]"]=t["[object Map]"]=t["[object Number]"]=t["[object Object]"]=t["[object RegExp]"]=t["[object Set]"]=t["[object String]"]=t["[object WeakMap]"]=!1,e.exports=function(e){return l(e)&&r(e.length)&&!!t[a(e)]}},function(e,n){e.exports=function(e){return function(n){return e(n)}}},function(e,n,i){(function(e){var a=i(66),r=n&&!n.nodeType&&n,l=r&&"object"==typeof e&&e&&!e.nodeType&&e,t=l&&l.exports===r&&a.process,d=function(){try{var e=l&&l.require&&l.require("util").types;return e||t&&t.binding&&t.binding("util")}catch(e){}}();e.exports=d}).call(this,i(56)(e))},function(e,n,i){var a=i(196),r=i(197),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(!a(e))return r(e);var n=[];for(var i in Object(e))l.call(e,i)&&"constructor"!=i&&n.push(i);return n}},function(e,n){var i=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||i)}},function(e,n,i){var a=i(198)(Object.keys,Object);e.exports=a},function(e,n){e.exports=function(e,n){return function(i){return e(n(i))}}},function(e,n,i){var a=i(200),r=i(38),l=i(201),t=i(80),d=i(202),s=i(13),m=i(70),u=m(a),o=m(r),k=m(l),y=m(t),c=m(d),b=s;(a&&"[object DataView]"!=b(new a(new ArrayBuffer(1)))||r&&"[object Map]"!=b(new r)||l&&"[object Promise]"!=b(l.resolve())||t&&"[object Set]"!=b(new t)||d&&"[object WeakMap]"!=b(new d))&&(b=function(e){var n=s(e),i="[object Object]"==n?e.constructor:void 0,a=i?m(i):"";if(a)switch(a){case u:return"[object DataView]";case o:return"[object Map]";case k:return"[object Promise]";case y:return"[object Set]";case c:return"[object WeakMap]"}return n}),e.exports=b},function(e,n,i){var a=i(10)(i(7),"DataView");e.exports=a},function(e,n,i){var a=i(10)(i(7),"Promise");e.exports=a},function(e,n,i){var a=i(10)(i(7),"WeakMap");e.exports=a},function(e,n,i){var a=i(81),r=i(75);e.exports=function(e){for(var n=r(e),i=n.length;i--;){var l=n[i],t=e[l];n[i]=[l,t,a(t)]}return n}},function(e,n,i){var a=i(71),r=i(114),l=i(211),t=i(43),d=i(81),s=i(82),m=i(22);e.exports=function(e,n){return t(e)&&d(n)?s(m(e),n):function(i){var t=r(i,e);return void 0===t&&t===n?l(i,e):a(n,t,3)}}},function(e,n,i){var a=i(206),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,t=a((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(r,(function(e,i,a,r){n.push(a?r.replace(l,"$1"):i||e)})),n}));e.exports=t},function(e,n,i){var a=i(207);e.exports=function(e){var n=a(e,(function(e){return 500===i.size&&i.clear(),e})),i=n.cache;return n}},function(e,n,i){var a=i(40);function r(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var i=function(){var a=arguments,r=n?n.apply(this,a):a[0],l=i.cache;if(l.has(r))return l.get(r);var t=e.apply(this,a);return i.cache=l.set(r,t)||l,t};return i.cache=new(r.Cache||a),i}r.Cache=a,e.exports=r},function(e,n,i){var a=i(209);e.exports=function(e){return null==e?"":a(e)}},function(e,n,i){var a=i(14),r=i(210),l=i(6),t=i(44),d=a?a.prototype:void 0,s=d?d.toString:void 0;e.exports=function e(n){if("string"==typeof n)return n;if(l(n))return r(n,e)+"";if(t(n))return s?s.call(n):"";var i=n+"";return"0"==i&&1/n==-1/0?"-0":i}},function(e,n){e.exports=function(e,n){for(var i=-1,a=null==e?0:e.length,r=Array(a);++i<a;)r[i]=n(e[i],i,e);return r}},function(e,n,i){var a=i(212),r=i(213);e.exports=function(e,n){return null!=e&&r(e,n,a)}},function(e,n){e.exports=function(e,n){return null!=e&&n in Object(e)}},function(e,n,i){var a=i(84),r=i(37),l=i(6),t=i(77),d=i(42),s=i(22);e.exports=function(e,n,i){for(var m=-1,u=(n=a(n,e)).length,o=!1;++m<u;){var k=s(n[m]);if(!(o=null!=e&&i(e,k)))break;e=e[k]}return o||++m!=u?o:!!(u=null==e?0:e.length)&&d(u)&&t(k,u)&&(l(e)||r(e))}},function(e,n,i){var a=i(215),r=i(216),l=i(43),t=i(22);e.exports=function(e){return l(e)?a(t(e)):r(e)}},function(e,n){e.exports=function(e){return function(n){return null==n?void 0:n[e]}}},function(e,n,i){var a=i(83);e.exports=function(e){return function(n){return a(n,e)}}},function(e,n,i){var a=i(45),r=i(218),l=i(220);e.exports=function(e,n){return l(r(e,n,a),e+"")}},function(e,n,i){var a=i(219),r=Math.max;e.exports=function(e,n,i){return n=r(void 0===n?e.length-1:n,0),function(){for(var l=arguments,t=-1,d=r(l.length-n,0),s=Array(d);++t<d;)s[t]=l[n+t];t=-1;for(var m=Array(n+1);++t<n;)m[t]=l[t];return m[n]=i(s),a(e,this,m)}}},function(e,n){e.exports=function(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}},function(e,n,i){var a=i(221),r=i(224)(a);e.exports=r},function(e,n,i){var a=i(222),r=i(223),l=i(45),t=r?function(e,n){return r(e,"toString",{configurable:!0,enumerable:!1,value:a(n),writable:!0})}:l;e.exports=t},function(e,n){e.exports=function(e){return function(){return e}}},function(e,n,i){var a=i(10),r=function(){try{var e=a(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,n){var i=Date.now;e.exports=function(e){var n=0,a=0;return function(){var r=i(),l=16-(r-a);if(a=r,l>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},function(e,n,i){var a=i(73),r=i(226),l=i(231),t=i(74),d=i(232),s=i(41);e.exports=function(e,n,i){var m=-1,u=r,o=e.length,k=!0,y=[],c=y;if(i)k=!1,u=l;else if(o>=200){var b=n?null:d(e);if(b)return s(b);k=!1,u=t,c=new a}else c=n?[]:y;e:for(;++m<o;){var p=e[m],g=n?n(p):p;if(p=i||0!==p?p:0,k&&g==g){for(var H=c.length;H--;)if(c[H]===g)continue e;n&&c.push(g),y.push(p)}else u(c,g,i)||(c!==y&&c.push(g),y.push(p))}return y}},function(e,n,i){var a=i(227);e.exports=function(e,n){return!!(null==e?0:e.length)&&a(e,n,0)>-1}},function(e,n,i){var a=i(228),r=i(229),l=i(230);e.exports=function(e,n,i){return n==n?l(e,n,i):a(e,r,i)}},function(e,n){e.exports=function(e,n,i,a){for(var r=e.length,l=i+(a?1:-1);a?l--:++l<r;)if(n(e[l],l,e))return l;return-1}},function(e,n){e.exports=function(e){return e!=e}},function(e,n){e.exports=function(e,n,i){for(var a=i-1,r=e.length;++a<r;)if(e[a]===n)return a;return-1}},function(e,n){e.exports=function(e,n,i){for(var a=-1,r=null==e?0:e.length;++a<r;)if(i(n,e[a]))return!0;return!1}},function(e,n,i){var a=i(80),r=i(233),l=i(41),t=a&&1/l(new a([,-0]))[1]==1/0?function(e){return new a(e)}:r;e.exports=t},function(e,n){e.exports=function(){}},function(e,n,i){var a=i(79),r=i(11);e.exports=function(e){return r(e)&&a(e)}},function(e,n,i){},function(e,n,i){},function(e,n,i){"use strict";i(85)},function(e,n,i){"use strict";i(86)},function(e,n,i){"use strict";i.r(n);var a=i(0);
/*!
  * vue-router v3.6.5
  * (c) 2022 Evan You
  * @license MIT
  */function r(e,n){for(var i in n)e[i]=n[i];return e}var l=/[!'()*]/g,t=function(e){return"%"+e.charCodeAt(0).toString(16)},d=/%2C/g,s=function(e){return encodeURIComponent(e).replace(l,t).replace(d,",")};function m(e){try{return decodeURIComponent(e)}catch(e){0}return e}var u=function(e){return null==e||"object"==typeof e?e:String(e)};function o(e){var n={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var i=e.replace(/\+/g," ").split("="),a=m(i.shift()),r=i.length>0?m(i.join("=")):null;void 0===n[a]?n[a]=r:Array.isArray(n[a])?n[a].push(r):n[a]=[n[a],r]})),n):n}function k(e){var n=e?Object.keys(e).map((function(n){var i=e[n];if(void 0===i)return"";if(null===i)return s(n);if(Array.isArray(i)){var a=[];return i.forEach((function(e){void 0!==e&&(null===e?a.push(s(n)):a.push(s(n)+"="+s(e)))})),a.join("&")}return s(n)+"="+s(i)})).filter((function(e){return e.length>0})).join("&"):null;return n?"?"+n:""}var y=/\/?$/;function c(e,n,i,a){var r=a&&a.options.stringifyQuery,l=n.query||{};try{l=b(l)}catch(e){}var t={name:n.name||e&&e.name,meta:e&&e.meta||{},path:n.path||"/",hash:n.hash||"",query:l,params:n.params||{},fullPath:H(n,r),matched:e?g(e):[]};return i&&(t.redirectedFrom=H(i,r)),Object.freeze(t)}function b(e){if(Array.isArray(e))return e.map(b);if(e&&"object"==typeof e){var n={};for(var i in e)n[i]=b(e[i]);return n}return e}var p=c(null,{path:"/"});function g(e){for(var n=[];e;)n.unshift(e),e=e.parent;return n}function H(e,n){var i=e.path,a=e.query;void 0===a&&(a={});var r=e.hash;return void 0===r&&(r=""),(i||"/")+(n||k)(a)+r}function h(e,n,i){return n===p?e===n:!!n&&(e.path&&n.path?e.path.replace(y,"")===n.path.replace(y,"")&&(i||e.hash===n.hash&&S(e.query,n.query)):!(!e.name||!n.name)&&(e.name===n.name&&(i||e.hash===n.hash&&S(e.query,n.query)&&S(e.params,n.params))))}function S(e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!e||!n)return e===n;var i=Object.keys(e).sort(),a=Object.keys(n).sort();return i.length===a.length&&i.every((function(i,r){var l=e[i];if(a[r]!==i)return!1;var t=n[i];return null==l||null==t?l===t:"object"==typeof l&&"object"==typeof t?S(l,t):String(l)===String(t)}))}function v(e){for(var n=0;n<e.matched.length;n++){var i=e.matched[n];for(var a in i.instances){var r=i.instances[a],l=i.enteredCbs[a];if(r&&l){delete i.enteredCbs[a];for(var t=0;t<l.length;t++)r._isBeingDestroyed||l[t](r)}}}}var f={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,n){var i=n.props,a=n.children,l=n.parent,t=n.data;t.routerView=!0;for(var d=l.$createElement,s=i.name,m=l.$route,u=l._routerViewCache||(l._routerViewCache={}),o=0,k=!1;l&&l._routerRoot!==l;){var y=l.$vnode?l.$vnode.data:{};y.routerView&&o++,y.keepAlive&&l._directInactive&&l._inactive&&(k=!0),l=l.$parent}if(t.routerViewDepth=o,k){var c=u[s],b=c&&c.component;return b?(c.configProps&&z(b,t,c.route,c.configProps),d(b,t,a)):d()}var p=m.matched[o],g=p&&p.components[s];if(!p||!g)return u[s]=null,d();u[s]={component:g},t.registerRouteInstance=function(e,n){var i=p.instances[s];(n&&i!==e||!n&&i===e)&&(p.instances[s]=n)},(t.hook||(t.hook={})).prepatch=function(e,n){p.instances[s]=n.componentInstance},t.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==p.instances[s]&&(p.instances[s]=e.componentInstance),v(m)};var H=p.props&&p.props[s];return H&&(r(u[s],{route:m,configProps:H}),z(g,t,m,H)),d(g,t,a)}};function z(e,n,i,a){var l=n.props=function(e,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(e);case"boolean":return n?e.params:void 0;default:0}}(i,a);if(l){l=n.props=r({},l);var t=n.attrs=n.attrs||{};for(var d in l)e.props&&d in e.props||(t[d]=l[d],delete l[d])}}function K(e,n,i){var a=e.charAt(0);if("/"===a)return e;if("?"===a||"#"===a)return n+e;var r=n.split("/");i&&r[r.length-1]||r.pop();for(var l=e.replace(/^\//,"").split("/"),t=0;t<l.length;t++){var d=l[t];".."===d?r.pop():"."!==d&&r.push(d)}return""!==r[0]&&r.unshift(""),r.join("/")}function A(e){return e.replace(/\/(?:\s*\/)+/g,"/")}var T=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},B=V,Y=I,R=function(e,n){return E(I(e,n),n)},P=E,O=_,N=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function I(e,n){for(var i,a=[],r=0,l=0,t="",d=n&&n.delimiter||"/";null!=(i=N.exec(e));){var s=i[0],m=i[1],u=i.index;if(t+=e.slice(l,u),l=u+s.length,m)t+=m[1];else{var o=e[l],k=i[2],y=i[3],c=i[4],b=i[5],p=i[6],g=i[7];t&&(a.push(t),t="");var H=null!=k&&null!=o&&o!==k,h="+"===p||"*"===p,S="?"===p||"*"===p,v=i[2]||d,f=c||b;a.push({name:y||r++,prefix:k||"",delimiter:v,optional:S,repeat:h,partial:H,asterisk:!!g,pattern:f?C(f):g?".*":"[^"+G(v)+"]+?"})}}return l<e.length&&(t+=e.substr(l)),t&&a.push(t),a}function D(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function E(e,n){for(var i=new Array(e.length),a=0;a<e.length;a++)"object"==typeof e[a]&&(i[a]=new RegExp("^(?:"+e[a].pattern+")$",M(n)));return function(n,a){for(var r="",l=n||{},t=(a||{}).pretty?D:encodeURIComponent,d=0;d<e.length;d++){var s=e[d];if("string"!=typeof s){var m,u=l[s.name];if(null==u){if(s.optional){s.partial&&(r+=s.prefix);continue}throw new TypeError('Expected "'+s.name+'" to be defined')}if(T(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var o=0;o<u.length;o++){if(m=t(u[o]),!i[d].test(m))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received `'+JSON.stringify(m)+"`");r+=(0===o?s.prefix:s.delimiter)+m}}else{if(m=s.asterisk?encodeURI(u).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):t(u),!i[d].test(m))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+m+'"');r+=s.prefix+m}}else r+=s}return r}}function G(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function C(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Z(e,n){return e.keys=n,e}function M(e){return e&&e.sensitive?"":"i"}function _(e,n,i){T(n)||(i=n||i,n=[]);for(var a=(i=i||{}).strict,r=!1!==i.end,l="",t=0;t<e.length;t++){var d=e[t];if("string"==typeof d)l+=G(d);else{var s=G(d.prefix),m="(?:"+d.pattern+")";n.push(d),d.repeat&&(m+="(?:"+s+m+")*"),l+=m=d.optional?d.partial?s+"("+m+")?":"(?:"+s+"("+m+"))?":s+"("+m+")"}}var u=G(i.delimiter||"/"),o=l.slice(-u.length)===u;return a||(l=(o?l.slice(0,-u.length):l)+"(?:"+u+"(?=$))?"),l+=r?"$":a&&o?"":"(?="+u+"|$)",Z(new RegExp("^"+l,M(i)),n)}function V(e,n,i){return T(n)||(i=n||i,n=[]),i=i||{},e instanceof RegExp?function(e,n){var i=e.source.match(/\((?!\?)/g);if(i)for(var a=0;a<i.length;a++)n.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Z(e,n)}(e,n):T(e)?function(e,n,i){for(var a=[],r=0;r<e.length;r++)a.push(V(e[r],n,i).source);return Z(new RegExp("(?:"+a.join("|")+")",M(i)),n)}(e,n,i):function(e,n,i){return _(I(e,i),n,i)}(e,n,i)}B.parse=Y,B.compile=R,B.tokensToFunction=P,B.tokensToRegExp=O;var x=Object.create(null);function F(e,n,i){n=n||{};try{var a=x[e]||(x[e]=B.compile(e));return"string"==typeof n.pathMatch&&(n[0]=n.pathMatch),a(n,{pretty:!0})}catch(e){return""}finally{delete n[0]}}function w(e,n,i,a){var l="string"==typeof e?{path:e}:e;if(l._normalized)return l;if(l.name){var t=(l=r({},e)).params;return t&&"object"==typeof t&&(l.params=r({},t)),l}if(!l.path&&l.params&&n){(l=r({},l))._normalized=!0;var d=r(r({},n.params),l.params);if(n.name)l.name=n.name,l.params=d;else if(n.matched.length){var s=n.matched[n.matched.length-1].path;l.path=F(s,d,n.path)}else 0;return l}var m=function(e){var n="",i="",a=e.indexOf("#");a>=0&&(n=e.slice(a),e=e.slice(0,a));var r=e.indexOf("?");return r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),{path:e,query:i,hash:n}}(l.path||""),k=n&&n.path||"/",y=m.path?K(m.path,k,i||l.append):k,c=function(e,n,i){void 0===n&&(n={});var a,r=i||o;try{a=r(e||"")}catch(e){a={}}for(var l in n){var t=n[l];a[l]=Array.isArray(t)?t.map(u):u(t)}return a}(m.query,l.query,a&&a.options.parseQuery),b=l.hash||m.hash;return b&&"#"!==b.charAt(0)&&(b="#"+b),{_normalized:!0,path:y,query:c,hash:b}}var j,L=function(){},U={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(e){var n=this,i=this.$router,a=this.$route,l=i.resolve(this.to,a,this.append),t=l.location,d=l.route,s=l.href,m={},u=i.options.linkActiveClass,o=i.options.linkExactActiveClass,k=null==u?"router-link-active":u,b=null==o?"router-link-exact-active":o,p=null==this.activeClass?k:this.activeClass,g=null==this.exactActiveClass?b:this.exactActiveClass,H=d.redirectedFrom?c(null,w(d.redirectedFrom),null,i):d;m[g]=h(a,H,this.exactPath),m[p]=this.exact||this.exactPath?m[g]:function(e,n){return 0===e.path.replace(y,"/").indexOf(n.path.replace(y,"/"))&&(!n.hash||e.hash===n.hash)&&function(e,n){for(var i in n)if(!(i in e))return!1;return!0}(e.query,n.query)}(a,H);var S=m[g]?this.ariaCurrentValue:null,v=function(e){$(e)&&(n.replace?i.replace(t,L):i.push(t,L))},f={click:$};Array.isArray(this.event)?this.event.forEach((function(e){f[e]=v})):f[this.event]=v;var z={class:m},K=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:d,navigate:v,isActive:m[p],isExactActive:m[g]});if(K){if(1===K.length)return K[0];if(K.length>1||!K.length)return 0===K.length?e():e("span",{},K)}if("a"===this.tag)z.on=f,z.attrs={href:s,"aria-current":S};else{var A=function e(n){var i;if(n)for(var a=0;a<n.length;a++){if("a"===(i=n[a]).tag)return i;if(i.children&&(i=e(i.children)))return i}}(this.$slots.default);if(A){A.isStatic=!1;var T=A.data=r({},A.data);for(var B in T.on=T.on||{},T.on){var Y=T.on[B];B in f&&(T.on[B]=Array.isArray(Y)?Y:[Y])}for(var R in f)R in T.on?T.on[R].push(f[R]):T.on[R]=v;var P=A.data.attrs=r({},A.data.attrs);P.href=s,P["aria-current"]=S}else z.on=f}return e(this.tag,z,this.$slots.default)}};function $(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}var J="undefined"!=typeof window;function q(e,n,i,a,r){var l=n||[],t=i||Object.create(null),d=a||Object.create(null);e.forEach((function(e){!function e(n,i,a,r,l,t){var d=r.path,s=r.name;0;var m=r.pathToRegexpOptions||{},u=function(e,n,i){i||(e=e.replace(/\/$/,""));if("/"===e[0])return e;if(null==n)return e;return A(n.path+"/"+e)}(d,l,m.strict);"boolean"==typeof r.caseSensitive&&(m.sensitive=r.caseSensitive);var o={path:u,regex:W(u,m),components:r.components||{default:r.component},alias:r.alias?"string"==typeof r.alias?[r.alias]:r.alias:[],instances:{},enteredCbs:{},name:s,parent:l,matchAs:t,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};r.children&&r.children.forEach((function(r){var l=t?A(t+"/"+r.path):void 0;e(n,i,a,r,o,l)}));i[o.path]||(n.push(o.path),i[o.path]=o);if(void 0!==r.alias)for(var k=Array.isArray(r.alias)?r.alias:[r.alias],y=0;y<k.length;++y){0;var c={path:k[y],children:r.children};e(n,i,a,c,l,o.path||"/")}s&&(a[s]||(a[s]=o))}(l,t,d,e,r)}));for(var s=0,m=l.length;s<m;s++)"*"===l[s]&&(l.push(l.splice(s,1)[0]),m--,s--);return{pathList:l,pathMap:t,nameMap:d}}function W(e,n){return B(e,[],n)}function X(e,n){var i=q(e),a=i.pathList,r=i.pathMap,l=i.nameMap;function t(e,i,t){var d=w(e,i,!1,n),m=d.name;if(m){var u=l[m];if(!u)return s(null,d);var o=u.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!=typeof d.params&&(d.params={}),i&&"object"==typeof i.params)for(var k in i.params)!(k in d.params)&&o.indexOf(k)>-1&&(d.params[k]=i.params[k]);return d.path=F(u.path,d.params),s(u,d,t)}if(d.path){d.params={};for(var y=0;y<a.length;y++){var c=a[y],b=r[c];if(Q(b.regex,d.path,d.params))return s(b,d,t)}}return s(null,d)}function d(e,i){var a=e.redirect,r="function"==typeof a?a(c(e,i,null,n)):a;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return s(null,i);var d=r,m=d.name,u=d.path,o=i.query,k=i.hash,y=i.params;if(o=d.hasOwnProperty("query")?d.query:o,k=d.hasOwnProperty("hash")?d.hash:k,y=d.hasOwnProperty("params")?d.params:y,m){l[m];return t({_normalized:!0,name:m,query:o,hash:k,params:y},void 0,i)}if(u){var b=function(e,n){return K(e,n.parent?n.parent.path:"/",!0)}(u,e);return t({_normalized:!0,path:F(b,y),query:o,hash:k},void 0,i)}return s(null,i)}function s(e,i,a){return e&&e.redirect?d(e,a||i):e&&e.matchAs?function(e,n,i){var a=t({_normalized:!0,path:F(i,n.params)});if(a){var r=a.matched,l=r[r.length-1];return n.params=a.params,s(l,n)}return s(null,n)}(0,i,e.matchAs):c(e,i,a,n)}return{match:t,addRoute:function(e,n){var i="object"!=typeof e?l[e]:void 0;q([n||e],a,r,l,i),i&&i.alias.length&&q(i.alias.map((function(e){return{path:e,children:[n]}})),a,r,l,i)},getRoutes:function(){return a.map((function(e){return r[e]}))},addRoutes:function(e){q(e,a,r,l)}}}function Q(e,n,i){var a=n.match(e);if(!a)return!1;if(!i)return!0;for(var r=1,l=a.length;r<l;++r){var t=e.keys[r-1];t&&(i[t.name||"pathMatch"]="string"==typeof a[r]?m(a[r]):a[r])}return!0}var ee=J&&window.performance&&window.performance.now?window.performance:Date;function ne(){return ee.now().toFixed(3)}var ie=ne();function ae(){return ie}function re(e){return ie=e}var le=Object.create(null);function te(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,n=window.location.href.replace(e,""),i=r({},window.history.state);return i.key=ae(),window.history.replaceState(i,"",n),window.addEventListener("popstate",me),function(){window.removeEventListener("popstate",me)}}function de(e,n,i,a){if(e.app){var r=e.options.scrollBehavior;r&&e.app.$nextTick((function(){var l=function(){var e=ae();if(e)return le[e]}(),t=r.call(e,n,i,a?l:null);t&&("function"==typeof t.then?t.then((function(e){ce(e,l)})).catch((function(e){0})):ce(t,l))}))}}function se(){var e=ae();e&&(le[e]={x:window.pageXOffset,y:window.pageYOffset})}function me(e){se(),e.state&&e.state.key&&re(e.state.key)}function ue(e){return ke(e.x)||ke(e.y)}function oe(e){return{x:ke(e.x)?e.x:window.pageXOffset,y:ke(e.y)?e.y:window.pageYOffset}}function ke(e){return"number"==typeof e}var ye=/^#\d/;function ce(e,n){var i,a="object"==typeof e;if(a&&"string"==typeof e.selector){var r=ye.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(r){var l=e.offset&&"object"==typeof e.offset?e.offset:{};n=function(e,n){var i=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{x:a.left-i.left-n.x,y:a.top-i.top-n.y}}(r,l={x:ke((i=l).x)?i.x:0,y:ke(i.y)?i.y:0})}else ue(e)&&(n=oe(e))}else a&&ue(e)&&(n=oe(e));n&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:n.x,top:n.y,behavior:e.behavior}):window.scrollTo(n.x,n.y))}var be,pe=J&&((-1===(be=window.navigator.userAgent).indexOf("Android 2.")&&-1===be.indexOf("Android 4.0")||-1===be.indexOf("Mobile Safari")||-1!==be.indexOf("Chrome")||-1!==be.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function ge(e,n){se();var i=window.history;try{if(n){var a=r({},i.state);a.key=ae(),i.replaceState(a,"",e)}else i.pushState({key:re(ne())},"",e)}catch(i){window.location[n?"replace":"assign"](e)}}function He(e){ge(e,!0)}var he={redirected:2,aborted:4,cancelled:8,duplicated:16};function Se(e,n){return fe(e,n,he.redirected,'Redirected when going from "'+e.fullPath+'" to "'+function(e){if("string"==typeof e)return e;if("path"in e)return e.path;var n={};return ze.forEach((function(i){i in e&&(n[i]=e[i])})),JSON.stringify(n,null,2)}(n)+'" via a navigation guard.')}function ve(e,n){return fe(e,n,he.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+n.fullPath+'" with a new navigation.')}function fe(e,n,i,a){var r=new Error(a);return r._isRouter=!0,r.from=e,r.to=n,r.type=i,r}var ze=["params","query","hash"];function Ke(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function Ae(e,n){return Ke(e)&&e._isRouter&&(null==n||e.type===n)}function Te(e,n,i){var a=function(r){r>=e.length?i():e[r]?n(e[r],(function(){a(r+1)})):a(r+1)};a(0)}function Be(e){return function(n,i,a){var r=!1,l=0,t=null;Ye(e,(function(e,n,i,d){if("function"==typeof e&&void 0===e.cid){r=!0,l++;var s,m=Oe((function(n){var r;((r=n).__esModule||Pe&&"Module"===r[Symbol.toStringTag])&&(n=n.default),e.resolved="function"==typeof n?n:j.extend(n),i.components[d]=n,--l<=0&&a()})),u=Oe((function(e){var n="Failed to resolve async component "+d+": "+e;t||(t=Ke(e)?e:new Error(n),a(t))}));try{s=e(m,u)}catch(e){u(e)}if(s)if("function"==typeof s.then)s.then(m,u);else{var o=s.component;o&&"function"==typeof o.then&&o.then(m,u)}}})),r||a()}}function Ye(e,n){return Re(e.map((function(e){return Object.keys(e.components).map((function(i){return n(e.components[i],e.instances[i],e,i)}))})))}function Re(e){return Array.prototype.concat.apply([],e)}var Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Oe(e){var n=!1;return function(){for(var i=[],a=arguments.length;a--;)i[a]=arguments[a];if(!n)return n=!0,e.apply(this,i)}}var Ne=function(e,n){this.router=e,this.base=function(e){if(!e)if(J){var n=document.querySelector("base");e=(e=n&&n.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";"/"!==e.charAt(0)&&(e="/"+e);return e.replace(/\/$/,"")}(n),this.current=p,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function Ie(e,n,i,a){var r=Ye(e,(function(e,a,r,l){var t=function(e,n){"function"!=typeof e&&(e=j.extend(e));return e.options[n]}(e,n);if(t)return Array.isArray(t)?t.map((function(e){return i(e,a,r,l)})):i(t,a,r,l)}));return Re(a?r.reverse():r)}function De(e,n){if(n)return function(){return e.apply(n,arguments)}}Ne.prototype.listen=function(e){this.cb=e},Ne.prototype.onReady=function(e,n){this.ready?e():(this.readyCbs.push(e),n&&this.readyErrorCbs.push(n))},Ne.prototype.onError=function(e){this.errorCbs.push(e)},Ne.prototype.transitionTo=function(e,n,i){var a,r=this;try{a=this.router.match(e,this.current)}catch(e){throw this.errorCbs.forEach((function(n){n(e)})),e}var l=this.current;this.confirmTransition(a,(function(){r.updateRoute(a),n&&n(a),r.ensureURL(),r.router.afterHooks.forEach((function(e){e&&e(a,l)})),r.ready||(r.ready=!0,r.readyCbs.forEach((function(e){e(a)})))}),(function(e){i&&i(e),e&&!r.ready&&(Ae(e,he.redirected)&&l===p||(r.ready=!0,r.readyErrorCbs.forEach((function(n){n(e)}))))}))},Ne.prototype.confirmTransition=function(e,n,i){var a=this,r=this.current;this.pending=e;var l,t,d=function(e){!Ae(e)&&Ke(e)&&(a.errorCbs.length?a.errorCbs.forEach((function(n){n(e)})):console.error(e)),i&&i(e)},s=e.matched.length-1,m=r.matched.length-1;if(h(e,r)&&s===m&&e.matched[s]===r.matched[m])return this.ensureURL(),e.hash&&de(this.router,r,e,!1),d(((t=fe(l=r,e,he.duplicated,'Avoided redundant navigation to current location: "'+l.fullPath+'".')).name="NavigationDuplicated",t));var u=function(e,n){var i,a=Math.max(e.length,n.length);for(i=0;i<a&&e[i]===n[i];i++);return{updated:n.slice(0,i),activated:n.slice(i),deactivated:e.slice(i)}}(this.current.matched,e.matched),o=u.updated,k=u.deactivated,y=u.activated,c=[].concat(function(e){return Ie(e,"beforeRouteLeave",De,!0)}(k),this.router.beforeHooks,function(e){return Ie(e,"beforeRouteUpdate",De)}(o),y.map((function(e){return e.beforeEnter})),Be(y)),b=function(n,i){if(a.pending!==e)return d(ve(r,e));try{n(e,r,(function(n){!1===n?(a.ensureURL(!0),d(function(e,n){return fe(e,n,he.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+n.fullPath+'" via a navigation guard.')}(r,e))):Ke(n)?(a.ensureURL(!0),d(n)):"string"==typeof n||"object"==typeof n&&("string"==typeof n.path||"string"==typeof n.name)?(d(Se(r,e)),"object"==typeof n&&n.replace?a.replace(n):a.push(n)):i(n)}))}catch(e){d(e)}};Te(c,b,(function(){Te(function(e){return Ie(e,"beforeRouteEnter",(function(e,n,i,a){return function(e,n,i){return function(a,r,l){return e(a,r,(function(e){"function"==typeof e&&(n.enteredCbs[i]||(n.enteredCbs[i]=[]),n.enteredCbs[i].push(e)),l(e)}))}}(e,i,a)}))}(y).concat(a.router.resolveHooks),b,(function(){if(a.pending!==e)return d(ve(r,e));a.pending=null,n(e),a.router.app&&a.router.app.$nextTick((function(){v(e)}))}))}))},Ne.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},Ne.prototype.setupListeners=function(){},Ne.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=p,this.pending=null};var Ee=function(e){function n(n,i){e.call(this,n,i),this._startLocation=Ge(this.base)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router,i=n.options.scrollBehavior,a=pe&&i;a&&this.listeners.push(te());var r=function(){var i=e.current,r=Ge(e.base);e.current===p&&r===e._startLocation||e.transitionTo(r,(function(e){a&&de(n,e,i,!0)}))};window.addEventListener("popstate",r),this.listeners.push((function(){window.removeEventListener("popstate",r)}))}},n.prototype.go=function(e){window.history.go(e)},n.prototype.push=function(e,n,i){var a=this,r=this.current;this.transitionTo(e,(function(e){ge(A(a.base+e.fullPath)),de(a.router,e,r,!1),n&&n(e)}),i)},n.prototype.replace=function(e,n,i){var a=this,r=this.current;this.transitionTo(e,(function(e){He(A(a.base+e.fullPath)),de(a.router,e,r,!1),n&&n(e)}),i)},n.prototype.ensureURL=function(e){if(Ge(this.base)!==this.current.fullPath){var n=A(this.base+this.current.fullPath);e?ge(n):He(n)}},n.prototype.getCurrentLocation=function(){return Ge(this.base)},n}(Ne);function Ge(e){var n=window.location.pathname,i=n.toLowerCase(),a=e.toLowerCase();return!e||i!==a&&0!==i.indexOf(A(a+"/"))||(n=n.slice(e.length)),(n||"/")+window.location.search+window.location.hash}var Ce=function(e){function n(n,i,a){e.call(this,n,i),a&&function(e){var n=Ge(e);if(!/^\/#/.test(n))return window.location.replace(A(e+"/#"+n)),!0}(this.base)||Ze()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router.options.scrollBehavior,i=pe&&n;i&&this.listeners.push(te());var a=function(){var n=e.current;Ze()&&e.transitionTo(Me(),(function(a){i&&de(e.router,a,n,!0),pe||xe(a.fullPath)}))},r=pe?"popstate":"hashchange";window.addEventListener(r,a),this.listeners.push((function(){window.removeEventListener(r,a)}))}},n.prototype.push=function(e,n,i){var a=this,r=this.current;this.transitionTo(e,(function(e){Ve(e.fullPath),de(a.router,e,r,!1),n&&n(e)}),i)},n.prototype.replace=function(e,n,i){var a=this,r=this.current;this.transitionTo(e,(function(e){xe(e.fullPath),de(a.router,e,r,!1),n&&n(e)}),i)},n.prototype.go=function(e){window.history.go(e)},n.prototype.ensureURL=function(e){var n=this.current.fullPath;Me()!==n&&(e?Ve(n):xe(n))},n.prototype.getCurrentLocation=function(){return Me()},n}(Ne);function Ze(){var e=Me();return"/"===e.charAt(0)||(xe("/"+e),!1)}function Me(){var e=window.location.href,n=e.indexOf("#");return n<0?"":e=e.slice(n+1)}function _e(e){var n=window.location.href,i=n.indexOf("#");return(i>=0?n.slice(0,i):n)+"#"+e}function Ve(e){pe?ge(_e(e)):window.location.hash=e}function xe(e){pe?He(_e(e)):window.location.replace(_e(e))}var Fe=function(e){function n(n,i){e.call(this,n,i),this.stack=[],this.index=-1}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.push=function(e,n,i){var a=this;this.transitionTo(e,(function(e){a.stack=a.stack.slice(0,a.index+1).concat(e),a.index++,n&&n(e)}),i)},n.prototype.replace=function(e,n,i){var a=this;this.transitionTo(e,(function(e){a.stack=a.stack.slice(0,a.index).concat(e),n&&n(e)}),i)},n.prototype.go=function(e){var n=this,i=this.index+e;if(!(i<0||i>=this.stack.length)){var a=this.stack[i];this.confirmTransition(a,(function(){var e=n.current;n.index=i,n.updateRoute(a),n.router.afterHooks.forEach((function(n){n&&n(a,e)}))}),(function(e){Ae(e,he.duplicated)&&(n.index=i)}))}},n.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},n.prototype.ensureURL=function(){},n}(Ne),we=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=X(e.routes||[],this);var n=e.mode||"hash";switch(this.fallback="history"===n&&!pe&&!1!==e.fallback,this.fallback&&(n="hash"),J||(n="abstract"),this.mode=n,n){case"history":this.history=new Ee(this,e.base);break;case"hash":this.history=new Ce(this,e.base,this.fallback);break;case"abstract":this.history=new Fe(this,e.base);break;default:0}},je={currentRoute:{configurable:!0}};we.prototype.match=function(e,n,i){return this.matcher.match(e,n,i)},je.currentRoute.get=function(){return this.history&&this.history.current},we.prototype.init=function(e){var n=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var i=n.apps.indexOf(e);i>-1&&n.apps.splice(i,1),n.app===e&&(n.app=n.apps[0]||null),n.app||n.history.teardown()})),!this.app){this.app=e;var i=this.history;if(i instanceof Ee||i instanceof Ce){var a=function(e){i.setupListeners(),function(e){var a=i.current,r=n.options.scrollBehavior;pe&&r&&"fullPath"in e&&de(n,e,a,!1)}(e)};i.transitionTo(i.getCurrentLocation(),a,a)}i.listen((function(e){n.apps.forEach((function(n){n._route=e}))}))}},we.prototype.beforeEach=function(e){return Ue(this.beforeHooks,e)},we.prototype.beforeResolve=function(e){return Ue(this.resolveHooks,e)},we.prototype.afterEach=function(e){return Ue(this.afterHooks,e)},we.prototype.onReady=function(e,n){this.history.onReady(e,n)},we.prototype.onError=function(e){this.history.onError(e)},we.prototype.push=function(e,n,i){var a=this;if(!n&&!i&&"undefined"!=typeof Promise)return new Promise((function(n,i){a.history.push(e,n,i)}));this.history.push(e,n,i)},we.prototype.replace=function(e,n,i){var a=this;if(!n&&!i&&"undefined"!=typeof Promise)return new Promise((function(n,i){a.history.replace(e,n,i)}));this.history.replace(e,n,i)},we.prototype.go=function(e){this.history.go(e)},we.prototype.back=function(){this.go(-1)},we.prototype.forward=function(){this.go(1)},we.prototype.getMatchedComponents=function(e){var n=e?e.matched?e:this.resolve(e).route:this.currentRoute;return n?[].concat.apply([],n.matched.map((function(e){return Object.keys(e.components).map((function(n){return e.components[n]}))}))):[]},we.prototype.resolve=function(e,n,i){var a=w(e,n=n||this.history.current,i,this),r=this.match(a,n),l=r.redirectedFrom||r.fullPath;return{location:a,route:r,href:function(e,n,i){var a="hash"===i?"#"+n:n;return e?A(e+"/"+a):a}(this.history.base,l,this.mode),normalizedTo:a,resolved:r}},we.prototype.getRoutes=function(){return this.matcher.getRoutes()},we.prototype.addRoute=function(e,n){this.matcher.addRoute(e,n),this.history.current!==p&&this.history.transitionTo(this.history.getCurrentLocation())},we.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==p&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(we.prototype,je);var Le=we;function Ue(e,n){return e.push(n),function(){var i=e.indexOf(n);i>-1&&e.splice(i,1)}}we.install=function e(n){if(!e.installed||j!==n){e.installed=!0,j=n;var i=function(e){return void 0!==e},a=function(e,n){var a=e.$options._parentVnode;i(a)&&i(a=a.data)&&i(a=a.registerRouteInstance)&&a(e,n)};n.mixin({beforeCreate:function(){i(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),n.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,a(this,this)},destroyed:function(){a(this)}}),Object.defineProperty(n.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(n.prototype,"$route",{get:function(){return this._routerRoot._route}}),n.component("RouterView",f),n.component("RouterLink",U);var r=n.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}},we.version="3.6.5",we.isNavigationFailure=Ae,we.NavigationFailureType=he,we.START_LOCATION=p,J&&window.Vue&&window.Vue.use(we);i(96);i(90),i(99);var $e={"components/AlgoliaSearchBox":()=>Promise.all([i.e(0),i.e(22)]).then(i.bind(null,625)),"components/DropdownLink":()=>Promise.all([i.e(0),i.e(23)]).then(i.bind(null,410)),"components/DropdownTransition":()=>Promise.all([i.e(0),i.e(48)]).then(i.bind(null,300)),"components/Home":()=>Promise.all([i.e(0),i.e(33)]).then(i.bind(null,517)),"components/NavLink":()=>i.e(52).then(i.bind(null,290)),"components/NavLinks":()=>Promise.all([i.e(0),i.e(21)]).then(i.bind(null,425)),"components/Navbar":()=>Promise.all([i.e(0),i.e(4)]).then(i.bind(null,616)),"components/Page":()=>Promise.all([i.e(0),i.e(20)]).then(i.bind(null,518)),"components/PageEdit":()=>Promise.all([i.e(0),i.e(34)]).then(i.bind(null,440)),"components/PageNav":()=>Promise.all([i.e(0),i.e(27)]).then(i.bind(null,441)),"components/Sidebar":()=>Promise.all([i.e(0),i.e(19)]).then(i.bind(null,519)),"components/SidebarButton":()=>Promise.all([i.e(0),i.e(49)]).then(i.bind(null,521)),"components/SidebarGroup":()=>Promise.all([i.e(0),i.e(7)]).then(i.bind(null,426)),"components/SidebarLink":()=>Promise.all([i.e(0),i.e(36)]).then(i.bind(null,411)),"components/SidebarLinks":()=>Promise.all([i.e(0),i.e(7)]).then(i.bind(null,401)),"global-components/Badge":()=>Promise.all([i.e(0),i.e(9)]).then(i.bind(null,643)),"global-components/CodeBlock":()=>Promise.all([i.e(0),i.e(10)]).then(i.bind(null,626)),"global-components/CodeGroup":()=>Promise.all([i.e(0),i.e(11)]).then(i.bind(null,627)),"layouts/404":()=>i.e(12).then(i.bind(null,628)),"layouts/Layout":()=>Promise.all([i.e(0),i.e(4),i.e(5),i.e(8)]).then(i.bind(null,629)),NotFound:()=>i.e(12).then(i.bind(null,628)),Layout:()=>Promise.all([i.e(0),i.e(4),i.e(5),i.e(8)]).then(i.bind(null,629))},Je={"v-90050004":()=>i.e(59).then(i.bind(null,644)),"v-61b42a93":()=>i.e(60).then(i.bind(null,645)),"v-64dca03d":()=>i.e(53).then(i.bind(null,646)),"v-81b8a67a":()=>i.e(62).then(i.bind(null,647)),"v-48317b86":()=>i.e(54).then(i.bind(null,648)),"v-23bd824f":()=>i.e(63).then(i.bind(null,649)),"v-22024c43":()=>i.e(61).then(i.bind(null,650)),"v-822cf8c6":()=>i.e(64).then(i.bind(null,651)),"v-5b1695dd":()=>i.e(28).then(i.bind(null,652)),"v-4888cd9d":()=>i.e(65).then(i.bind(null,653)),"v-01c649bd":()=>i.e(24).then(i.bind(null,654)),"v-7301a6d1":()=>i.e(66).then(i.bind(null,655)),"v-7e81b77d":()=>i.e(37).then(i.bind(null,656)),"v-1178fa5d":()=>i.e(67).then(i.bind(null,657)),"v-432b5bd6":()=>i.e(68).then(i.bind(null,658)),"v-bc107546":()=>i.e(55).then(i.bind(null,659)),"v-485bbe8d":()=>i.e(69).then(i.bind(null,660)),"v-f0808a06":()=>i.e(29).then(i.bind(null,661)),"v-d80dcb06":()=>i.e(70).then(i.bind(null,662)),"v-0ec6f57d":()=>i.e(71).then(i.bind(null,663)),"v-3539d41d":()=>i.e(38).then(i.bind(null,664)),"v-1be15362":()=>i.e(72).then(i.bind(null,665)),"v-1ef8939d":()=>i.e(25).then(i.bind(null,666)),"v-3e221f7d":()=>i.e(73).then(i.bind(null,667)),"v-03088e53":()=>i.e(74).then(i.bind(null,668)),"v-cc5a0b86":()=>i.e(56).then(i.bind(null,669)),"v-751f6acf":()=>i.e(75).then(i.bind(null,670)),"v-8d4168c6":()=>i.e(57).then(i.bind(null,671)),"v-553c6446":()=>i.e(30).then(i.bind(null,672)),"v-9cc354c6":()=>i.e(76).then(i.bind(null,673)),"v-7e5b51bd":()=>i.e(26).then(i.bind(null,674)),"v-9e25e106":()=>i.e(39).then(i.bind(null,675)),"v-206455c6":()=>i.e(77).then(i.bind(null,676)),"v-e8779b46":()=>i.e(79).then(i.bind(null,677)),"v-3358815e":()=>i.e(78).then(i.bind(null,678)),"v-2fcc3a95":()=>i.e(80).then(i.bind(null,679)),"v-3637769d":()=>i.e(82).then(i.bind(null,680)),"v-3ee390dd":()=>i.e(83).then(i.bind(null,681)),"v-70a6dc4e":()=>i.e(81).then(i.bind(null,682)),"v-6480bcc7":()=>i.e(84).then(i.bind(null,683)),"v-642a7506":()=>i.e(85).then(i.bind(null,684)),"v-68ac6685":()=>i.e(86).then(i.bind(null,685))};function qe(e){const n=Object.create(null);return function(i){return n[i]||(n[i]=e(i))}}const We=/-(\w)/g,Xe=qe(e=>e.replace(We,(e,n)=>n?n.toUpperCase():"")),Qe=/\B([A-Z])/g,en=qe(e=>e.replace(Qe,"-$1").toLowerCase()),nn=qe(e=>e.charAt(0).toUpperCase()+e.slice(1));function an(e,n){if(!n)return;if(e(n))return e(n);return n.includes("-")?e(nn(Xe(n))):e(nn(n))||e(en(n))}const rn=Object.assign({},$e,Je),ln=e=>rn[e],tn=e=>Je[e],dn=e=>$e[e],sn=e=>a.default.component(e);function mn(e){return an(tn,e)}function un(e){return an(dn,e)}function on(e){return an(ln,e)}function kn(e){return an(sn,e)}function yn(...e){return Promise.all(e.filter(e=>e).map(async e=>{if(!kn(e)&&on(e)){const n=await on(e)();a.default.component(e,n.default)}}))}function cn(e,n){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[e]=n)}var bn=i(87),pn=i.n(bn),gn=i(88),Hn=i.n(gn),hn={created(){if(this.siteMeta=this.$site.headTags.filter(([e])=>"meta"===e).map(([e,n])=>n),this.$ssrContext){const n=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(e=n)?e.map(e=>{let n="<meta";return Object.keys(e).forEach(i=>{n+=` ${i}="${Hn()(e[i])}"`}),n+">"}).join("\n    "):"",this.$ssrContext.canonicalLink=vn(this.$canonicalUrl)}var e},mounted(){this.currentMetaTags=[...document.querySelectorAll("meta")],this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta(){document.title=this.$title,document.documentElement.lang=this.$lang;const e=this.getMergedMetaTags();this.currentMetaTags=fn(e,this.currentMetaTags)},getMergedMetaTags(){const e=this.$page.frontmatter.meta||[];return pn()([{name:"description",content:this.$description}],e,this.siteMeta,zn)},updateCanonicalLink(){Sn(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",vn(this.$canonicalUrl))}},watch:{$page(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy(){fn(null,this.currentMetaTags),Sn()}};function Sn(){const e=document.querySelector("link[rel='canonical']");e&&e.remove()}function vn(e=""){return e?`<link href="${e}" rel="canonical" />`:""}function fn(e,n){if(n&&[...n].filter(e=>e.parentNode===document.head).forEach(e=>document.head.removeChild(e)),e)return e.map(e=>{const n=document.createElement("meta");return Object.keys(e).forEach(i=>{n.setAttribute(i,e[i])}),document.head.appendChild(n),n})}function zn(e){for(const n of["name","property","itemprop"])if(e.hasOwnProperty(n))return e[n]+n;return JSON.stringify(e)}var Kn=i(89),An={mounted(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:i.n(Kn)()((function(){this.setActiveHash()}),300),setActiveHash(){const e=[].slice.call(document.querySelectorAll(".sidebar-link")),n=[].slice.call(document.querySelectorAll(".header-anchor")).filter(n=>e.some(e=>e.hash===n.hash)),i=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),r=window.innerHeight+i;for(let e=0;e<n.length;e++){const l=n[e],t=n[e+1],d=0===e&&0===i||i>=l.parentElement.offsetTop+10&&(!t||i<t.parentElement.offsetTop-10),s=decodeURIComponent(this.$route.hash);if(d&&s!==decodeURIComponent(l.hash)){const i=l;if(r===a)for(let i=e+1;i<n.length;i++)if(s===decodeURIComponent(n[i].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(i.hash),()=>{this.$nextTick(()=>{this.$vuepress.$set("disableScrollBehavior",!1)})})}}}},beforeDestroy(){window.removeEventListener("scroll",this.onScroll)}},Tn=i(23),Bn=i.n(Tn),Yn=[hn,An,{mounted(){Bn.a.configure({showSpinner:!1}),this.$router.beforeEach((e,n,i)=>{e.path===n.path||a.default.component(e.name)||Bn.a.start(),i()}),this.$router.afterEach(()=>{Bn.a.done(),this.isSidebarOpen=!1})}}],Rn={name:"GlobalLayout",computed:{layout(){const e=this.getLayout();return cn("layout",e),a.default.component(e)}},methods:{getLayout(){if(this.$page.path){const e=this.$page.frontmatter.layout;return e&&(this.$vuepress.getLayoutAsyncComponent(e)||this.$vuepress.getVueComponent(e))?e:"Layout"}return"NotFound"}}},Pn=i(15),On=Object(Pn.a)(Rn,(function(){return(0,this._self._c)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(e,n,i){switch(n){case"components":e[n]||(e[n]={}),Object.assign(e[n],i);break;case"mixins":e[n]||(e[n]=[]),e[n].push(...i);break;default:throw new Error("Unknown option name.")}}(On,"mixins",Yn);const Nn=[{name:"v-90050004",path:"/",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-90050004").then(i)}},{path:"/index.html",redirect:"/"},{name:"v-61b42a93",path:"/dijital-cuzdan.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-61b42a93").then(i)}},{name:"v-64dca03d",path:"/pages/contact.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-64dca03d").then(i)}},{name:"v-81b8a67a",path:"/uyum-tarihleri.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-81b8a67a").then(i)}},{name:"v-48317b86",path:"/v1.0.1/contents/ekler.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-48317b86").then(i)}},{name:"v-23bd824f",path:"/v1.0.1/contents/erisim-belirteci.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-23bd824f").then(i)}},{name:"v-22024c43",path:"/surum-yonetimi.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-22024c43").then(i)}},{name:"v-822cf8c6",path:"/v1.0.1/contents/gkd.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-822cf8c6").then(i)}},{name:"v-5b1695dd",path:"/v1.0.1/contents/hesap-bilgisi-hizmeti.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-5b1695dd").then(i)}},{name:"v-4888cd9d",path:"/v1.0.1/contents/hhs-yos-api.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-4888cd9d").then(i)}},{name:"v-01c649bd",path:"/v1.0.1/contents/odeme-emri-baslatma-hizmeti.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-01c649bd").then(i)}},{name:"v-7301a6d1",path:"/v1.0.1/contents/riza-durumlari.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-7301a6d1").then(i)}},{name:"v-7e81b77d",path:"/v1.0.1/contents/kapsam-ve-dayanak.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-7e81b77d").then(i)}},{name:"v-1178fa5d",path:"/v1.0.1/contents/tanim-ve-kisitlamalar.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-1178fa5d").then(i)}},{name:"v-432b5bd6",path:"/v1.0.1/contents/temel-prensipler.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-432b5bd6").then(i)}},{name:"v-bc107546",path:"/v1.0.2/contents/ekler.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-bc107546").then(i)}},{name:"v-485bbe8d",path:"/v1.0.2/contents/erisim-belirteci.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-485bbe8d").then(i)}},{name:"v-f0808a06",path:"/v1.0.2/contents/hesap-bilgisi-hizmeti.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-f0808a06").then(i)}},{name:"v-d80dcb06",path:"/v1.0.2/contents/gkd.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-d80dcb06").then(i)}},{name:"v-0ec6f57d",path:"/v1.0.2/contents/hhs-yos-api.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-0ec6f57d").then(i)}},{name:"v-3539d41d",path:"/v1.0.2/contents/kapsam-ve-dayanak.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-3539d41d").then(i)}},{name:"v-1be15362",path:"/v1.0.2/contents/riza-durumlari.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-1be15362").then(i)}},{name:"v-1ef8939d",path:"/v1.0.2/contents/odeme-emri-baslatma-hizmeti.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-1ef8939d").then(i)}},{name:"v-3e221f7d",path:"/v1.0.2/contents/tanim-ve-kisitlamalar.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-3e221f7d").then(i)}},{name:"v-03088e53",path:"/v1.0.2/contents/temel-prensipler.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-03088e53").then(i)}},{name:"v-cc5a0b86",path:"/v1.1.0/contents/ekler.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-cc5a0b86").then(i)}},{name:"v-751f6acf",path:"/v1.1.0/contents/erisim-belirteci.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-751f6acf").then(i)}},{name:"v-8d4168c6",path:"/v1.1.0/contents/gkd.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-8d4168c6").then(i)}},{name:"v-553c6446",path:"/v1.1.0/contents/hesap-bilgisi-hizmeti.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-553c6446").then(i)}},{name:"v-9cc354c6",path:"/v1.1.0/contents/hhs-yos-api.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-9cc354c6").then(i)}},{name:"v-7e5b51bd",path:"/v1.1.0/contents/odeme-emri-baslatma-hizmeti.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-7e5b51bd").then(i)}},{name:"v-9e25e106",path:"/v1.1.0/contents/kapsam-ve-dayanak.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-9e25e106").then(i)}},{name:"v-206455c6",path:"/v1.1.0/contents/olay-bildirim.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-206455c6").then(i)}},{name:"v-e8779b46",path:"/v1.1.0/contents/tanim-ve-kisitlamalar.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-e8779b46").then(i)}},{name:"v-3358815e",path:"/v1.1.0/contents/riza-durumlari.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-3358815e").then(i)}},{name:"v-2fcc3a95",path:"/v1.1.0/contents/temel-prensipler.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-2fcc3a95").then(i)}},{name:"v-3637769d",path:"/v1.1.0/deneyalani/hesap-bilgisi-api.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-3637769d").then(i)}},{name:"v-3ee390dd",path:"/v1.1.0/deneyalani/hhs-yos-api.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-3ee390dd").then(i)}},{name:"v-70a6dc4e",path:"/v1.1.0/deneyalani/genel-bilgiler.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-70a6dc4e").then(i)}},{name:"v-6480bcc7",path:"/v1.1.0/deneyalani/odeme-emri-api.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-6480bcc7").then(i)}},{name:"v-642a7506",path:"/v1.1.0/deneyalani/olay-bildirim-api.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-642a7506").then(i)}},{name:"v-68ac6685",path:"/v1.1.0/deneyalani/test.html",component:On,beforeEnter:(e,n,i)=>{yn("Layout","v-68ac6685").then(i)}},{path:"*",component:On}],In={title:"(HVPS) API LKE VE KURALLARI",description:" ",base:"/",headTags:[],pages:[{title:"DEME HZMETLER VER PAYLAIM SERVSLER (HVPS)",frontmatter:{},regularPath:"/",relativePath:"README.md",key:"v-90050004",path:"/",content:" DEME HZMETLER VER PAYLAIM SERVSLER (HVPS) \n API LKE VE KURALLARI   \n SRM 1.1.0 aktif hale gelmitir. \nSertifikasyon iin geerli olan SRM 1.1.0 olacaktr. \nYS'ler iin sertifikasyon balang tarihi 1 Ocak 2024 olmakla beraber 2023 Aralk ay ierisinde onaya gnderilen sertifikasyon taleplerinin 1.1.0 versiyonu iin iletilmesi beklenmektedir.\n \n https://github.com/ohvps/  adresi zerinden deiiklik aklamalar ve tarihesi incelenebilir. \n \n \n \n SRM 1.1.0 gei tarihleri u ekildedir. \n \n \n Srm Gei Tarihi : 1 Aralk 2023 \n \n \n HHS(1.0.2den 1.1.0a geecek olan ve direkt 1.1.0a gelecek olan) Sertifikasyon Balang Tarihi : 1 Aralk 2023 \n \n \n YS(1.0.2den 1.1.0a geecek olan ve direkt 1.1.0a gelecek olan) Sertifikasyon Balang Tarihi : 1 Ocak 2024 \n \n \n HHS(1.0.2den 1.1.0a geecek olan) Sertifikasyon Biti Tarihi : 23 ubat 2024 \n \n \n HHS(1.0.2den 1.1.0a geecek olan) Yeni Srm retime Gei Son Tarihi: 29 ubat 2024 \n \n \n YS(1.0.2den 1.1.0a geecek olan veya direkt 1.1.0a gelecek olan) Yeni Srm retime Gei Balang Tarihi : 29 ubat 2024 \n \n \n Mevcut durumda teknik gereklilikleri belirlenmi veri paylam hizmetlerini standart olmayan servislerle sunan HHSler (30 Haziran 2024 standart olmayan servislerin kapatlma tarihine uyumlanmas gerekenler) Sertifikasyon Biti Tarihi : 15 Haziran 2024 \n \n \n Mevcut durumda teknik gereklilikleri belirlenmi veri paylam hizmetlerini standart olmayan servislerle sunan HHSler (30 Haziran 2024 standart olmayan servislerin kapatlma tarihine uyumlanmas gerekenler) Standart Uyumlu retime Gei Son Tarihi : 30 Haziran 2024 \n \n \n Dier HHSler (30 Eyll 2024 retime gei zorunluluu olan ve ilk defa sertifikasyona gelecek olan) Sertifikasyon Biti Tarihi : 20 Eyll 2024 \n \n \n Dier HHSler (30 Eyll 2024 retime gei zorunluluu olan ve ilk defa sertifikasyona gelecek olan) retime Gei Tarihi : 30 Eyll 2024 \n \n \n YS(1.0.2den 1.1.0a geecek olan ve 30 Eyll 2024 retime gei uyum tarihi zorunluluu olan) Sertifikasyon Biti Tarihi : 20 Eyll 2024 \n \n \n YS(1.0.2den 1.1.0a geecek olan ve 30 Eyll 2024 retime gei uyum tarihi zorunluluu olan) Yeni Srm retime Gei Son Tarihi : 30 Eyll 2024 \n \n \n Eski Srmn Kaldrlma Tarihi : 31 Ekim 2024 \n \n \n \n retim ortamnda servis sunan HHSlerin 29 ubat 2024 - 30 Eyll 2024 tarihleri arasnda ayn anda ift srm desteklemesi gerekmektedir! \n lk kez retim ortamna 1.1 srm ile geecek HHS'ler, 1.1 srmn destekleyen YS'ler tarafndan listenebileceklerdir. \n YSlerin sadece kendilerinin destekledikleri API srmn destekleyen HHSleri listelemesi gerekmektedir. \n Srm Ynetimi  blmnden tarih bilgilerinin aklamalarna ulalabilir. \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n "},{title:"Dijital Czdanlardan TR Karekod ile deme",frontmatter:{},regularPath:"/dijital-cuzdan.html",relativePath:"dijital-cuzdan.md",key:"v-61b42a93",path:"/dijital-cuzdan.html",headers:[{level:2,title:"1.      Dijital Czdana Kart Ekleme Ak",slug:"_1-dijital-cuzdana-kart-ekleme-aks"},{level:2,title:"2. Uyum Tarihi",slug:"_2-uyum-tarihi"}],content:" Dijital Czdanlardan TR Karekod ile deme \n Dijital czdanlara eklenmi ve czdan sahibi kuruluun kendisinin ihra etmedii, dier Kart karan Kurulular tarafndan ihra edilmi kartlar ile TR Karekod demesi yaplabilmesi iin HHS olarak GETe balanm olan Kart karan Kurulularn,  BKM (Kartl demeler) TR Karekod Teknik lke ve Kurallar Rehberinde  yer alan 5.2 maddelerindeki belirtilen aklar iin BKM Karekod Ynetim Sistemi (KYS) entegrasyonu yapmas gerekmektedir.  \n Bu sayede Kart karan Kurulular, otorizasyon ncesinde ilemin POSta Kart PINi ile dorulanmasn veya mterinin telefonunda ykl olan Kart karan Kurulua ait mobil uygulamaya anlk bildirim gndererek dorulanmasn salayabilecektir. HHS olarak GETe balanm olan Kart karan Kurulular iin de bu dorulama aklarndan en az birini hayata geirmesi zorunludur. \n 1.      Dijital Czdana Kart Ekleme Ak \n Dijital Czdanlardan deme yaplabilmesi iin kullanclarn ilk olarak kart Dijital Czdana eklemesi gerekmektedir. Dijital Czdana eklenecek olan karta ait bilgiler kullanc tarafndan czdana girilmektedir. Kart bilgilerinin Dijital Czdana eklenmesinin ardndan kart hamili iki faktrl dorulama yntemi (GO Gvelin de, 3D Secure  vb.) ile dorulanmas gerekmektedir.  Kart hamilinin iki faktrl dorulanmasnn ardndan kart czdana eklenir ve eklenen bu kartlar ile deme ilemleri yaplabilir. Dijital Czdanlarla yaplabilen ilemler aadaki grselde bilgi amal zetlenmitir. Bu belgede TR Karekod ile yaplan ilemler iin kullanlacak dorulama aklarna yer verilecektir. \n \n \n Dijital czdanlar ile fiziksel maazalarda POS terminali zerinden, e-ticaret sitelerinde ise online kanallar zerinden  deme yapmak mmkndr. \n \n \n Fiziksel demelerde dijital czdan POS terminallerinde gsterilen TR Karekodu okuyarak demeyi gerekletirebilir. kinci bir yntem olarak, mobil telefonun ve dijital czdann NFC teknolojisini desteklemesi durumunda telefonun POS terminaline temassz olarak okutulmas suretiyle deme yaplabilmesi mmkndr. \n \n \n E-ticaret demelerinde web sitesinde gsterilen TR Karekodun dijital czdan ile okutulmas suretiyle deme yaplmas mmkndr. Sanal POS ilemlerinden kastedilen dijital czdanda sakl olan kart ile online kanallar zerinden bir e-ticaret demesinin yaplmasdr. \n 2. Uyum Tarihi \n Dijital czdan sahibi kurulu ile czdana eklenen kart kuruluunun farkl olmas durumunda hem fiziki POSlarda hem de sanal POSlarda TR Karekod ile deme yaplabilmesine ilikin aklar BKM (Kartl demeler) TR Karekod Teknik lke ve Kurallar Rehberinde 5.2. maddelerinde tariflenmitir. \n Bu aklarda; \n \n \n No-CVM (lave dorulama yapmadan) veya  \n \n \n Kart PIN (POS cihaznda kart ifresi girilerek) veya  \n \n \n Anlk Bildirim (mobil telefonda ykl olan kart karan kurulua ait uygulama zerinden ile mteri dorulamas yer almaktadr.) \n \n Anlk Bildirim ile ilgili aklar taslak olarak talep edilen katlmclarla paylalacak olup  BKM (Kartl demeler) TR Karekod Teknik lke ve Kurallar Rehberinde yer alan 5.2 altna ayrca eklenecektir. \n \n \n \n Kurulularn tercihine gre yukarda tariflenmi olan aklardan biri veya tamam kurulular tarafndan desteklenebilir. Kurulularn tercih ettii aklar iin Karekod Ynlendirme Sistemi sertifikasyonlarn tamamlanmas gerekmektedir. Yukarda tariflenmi aklarda grlecei zere kart karan kurulular otorizasyon ncesinde kendi risk deerlendirmesini yaparak No cvm ilave bir dorulama yntemine gerek kalmadan da ilemleri sonlandrlmasn isteyebilmektedir. \n ** Halen HHS olarak GETe balanm olan Kart karan Kurulularn  BKM (Kartl demeler) TR Karekod Teknik lke ve Kurallar Rehberinde  yer alan madde 5.2de tarifli ak/aklar iin Karekod Ynlendirme Sistemi sertifikasyonunun tamamlanarak en ge  30 Haziran 2024  tarihinde retime gemi olmas zorunludur. \n Nezdinde deme hesab bulunduran Kart karan dier tm deme Hizmeti Salayclarn da GETe balant salamalar sonras ilk 6 ay ierisinde KYS sertifikasyonunu tamamlamas gerekmektedir.** \n"},{frontmatter:{},regularPath:"/pages/contact.html",relativePath:"pages/contact.md",key:"v-64dca03d",path:"/pages/contact.html",content:" Trkiye Cumhuriyeti Merkez Bankas\nohvps@tcmb.gov.tr\n \n"},{title:"DEME HZMETLER VER PAYLAIM SERVSLER (HVPS) UYUM TARHLER",frontmatter:{},regularPath:"/uyum-tarihleri.html",relativePath:"uyum-tarihleri.md",key:"v-81b8a67a",path:"/uyum-tarihleri.html",content:" DEME HZMETLER VER PAYLAIM SERVSLER (HVPS) UYUM TARHLER \n Hesap Hizmeti Salayclar ve deme Hizmeti Salayclarn HVPS standartlarna uyumu iin tarihler, deme Hizmetleri ve Elektronik Para hrac ile deme Hizmeti Salayclar Hakknda Ynetmelik ile deme ve Elektronik Para Kurulularnn Bilgi Sistemleri le deme Hizmeti Salayclarnn deme Hizmetleri Alanndaki Veri Paylam Servislerine likin Tebliin Gei Hkmlerinde belirlenmitir: \n \n 6493 Sayl Kanunun Geici 3 nc maddesinin nc fkras uyarnca TCMBye faaliyet izni bavurusunda bulunmu olup faaliyet izni sreci devam edenler ile TCMBden faaliyet izni alm olan Kurululara teknik gereklilikleri belirlenmi veri paylam hizmetleri, standart olmayan servislerle 30 Haziran 2024 tarihine kadar sunulabilir.  (HHSleri ilgilendirmektedir.) \n Nezdinde bulunan deme hesaplar iin mterilerine dorudan evrim ii eriim imkn salamayan deme hizmeti salayclarn 31 Aralk 2025 tarihine kadar teknik sertifikasyonlarn baaryla tamamlayarak GETe balant salamalar gerekmektedir. (HHSleri ilgilendirmektedir.) \n Nezdinde deme hesab bulunduran dier tm deme hizmeti salayclarn (dier HHSler), 30 Eyll 2024e kadar teknik sertifikasyonlarn baaryla tamamlayarak GETe balant salamalar gerekmektedir. (HHSleri ilgilendirmektedir.) \n 6493 Sayl Kanunun Geici 3 nc maddesinin nc fkras uyarnca TCMB faaliyet izni bavurusunda bulunmu olup faaliyet izni deerlendirme sreci devam edenler, teknik gereklilikleri belirlenmi veri paylam hizmetlerini, 30 Haziran 2024 tarihine kadar standart olmayan servisleri kullanarak verebilir. (YSleri ilgilendirmektedir.) \n 5411 sayl Kanun kapsamndaki bankalar ile teknik gereklilikleri belirlenmi veri paylam hizmetlerini sunmak zere TCMBden izin alm olan kurulular (YSler), TCMB deme Sistemlerinde 2020 yl ierisinde gerekletirilen hesaba deme ilemleri asndan, toplam adedine gre ilk on katlmc arasnda yer almayan deme hizmeti salayclar nezdinde bulunan deme hesaplar ile ilgili olarak, teknik gereklilikleri belirlenmi veri paylam servisleri hizmetlerini 30 Haziran 2024 tarihine kadar standart olmayan servisleri kullanarak verebilir. (YSleri ilgilendirmektedir.) \n \n Referanslar: \n 6493 Sayl deme ve Menkul Kymet Mutabakat Sistemleri, deme Hizmetleri ve Elektronik Para Kurulular Hakknda Kanun   \n deme Hizmetleri ve Elektronik Para hrac ile deme Hizmeti Salayclar Hakknda Ynetmelik   \n deme ve Elektronik Para Kurulularnn Bilgi Sistemleri le deme Hizmeti Salayclarnn deme Hizmetleri Alanndaki Veri Paylam Servislerine likin Tebli \n"},{title:"EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar",frontmatter:{},regularPath:"/v1.0.1/contents/ekler.html",relativePath:"v1.0.1/contents/ekler.md",key:"v-48317b86",path:"/v1.0.1/contents/ekler.html",headers:[{level:2,title:"EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar",slug:"ek-1-istek-cevap-mesajlarnda-kullanlacak-nesne-yaplar"},{level:2,title:"EK-2: Sral Veri Trleri",slug:"ek-2-sral-veri-turleri"},{level:2,title:"EK-3: stemci Sertifikalarnn Tanm ve Ynetimi",slug:"ek-3-istemci-sertifikalarnn-tanm-ve-yonetimi"},{level:2,title:"EK-4: Sunucu Sertifikalar",slug:"ek-4-sunucu-sertifikalar"},{level:2,title:"EK-5: Mesaj mzalama Ak",slug:"ek-5-mesaj-imzalama-aks"},{level:3,title:"mzalama Kurallar (YS)",slug:"imzalama-kurallar-yos"},{level:2,title:"EK-6: HHS/YS API Mimarisi",slug:"ek-6-hhs-yos-api-mimarisi"}],content:' EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar \n Ak Bankaclk simlatr uygulamas zerinde swagger dkmanlarnn gncel srmlerine eriim salanabilir. \n EK-2: Sral Veri Trleri \n \n \n \n Kod \n Aklama \n \n \n \n \n TR.OHVPS.DataCode.KimlikTur \n Kod, Tip, Format K , TCKN , N11 M , MNO , AN1..30 (HHSye zel bireysel veya kurum mteri numaras) Y , YKN , N11 P , PNO , AN7..9 \n \n \n TR.OHVPS.DataCode.KurumKimlikTur \n Kod, Tip, Format K , TCKN , N11 M , MNO , AN1..30 (HHSye zel bireysel veya kurum mteri numaras) V , VKN , N10 \n \n \n TR.OHVPS.DataCode.OhkTur \n Kod: B: Bireysel  K: Kurumsal \n \n \n TR.OHVPS.DataCode.KolasTur \n Mterinin sorgulama istedii Kolay Adres Tipi deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr: T: Telefon Numaras E: E-Posta K: TCKN V: VKN Y: YKN P: Pasaport Numaras \n \n \n TR.OHVPS.DataCode.KareKodAksTur \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  01: FAST katlmcsndan dinamik dorulamal hizmet alnan iyeri demesi 02: FAST katlmcsndan statik dorulamal iyeri demesi 03: Kiiden kiiye demeler \n \n \n TR.OHVPS.DataCode.OdemeKaynak \n I: nternet bankaclndan gnderilen demelerde kullanlr. A: Otomatik para makineleri (ATM) ile gnderilen demelerde kullanlr. T: Telefon bankacl ile gnderilen demelerde kullanlr. K: Kiosklar araclyla gnderilen demelerde kullanlr. S: ubeden girilen demelerde kullanlr. M: Mobil uygulamadan gnderilen demelerde kullanlr. D: Yukardakiler dndaki deme kaynaklarndan gnderilen demelerde kullanlr.  O: Ak bankaclk aracl ile gnderilen demelerde kullanlr. \n \n \n TR.OHVPS.DataCode.OdemeAmaci \n demenin Amacna ynelik olarak aadaki deerlerden birini alr: 01: Konut Kiras demesi 02:  yeri Kiras demesi 03: Dier Kira demesi 04: E-Ticaret demesi: Elektronik ticaret ilem amal aktarmlar 05: alan demesi: Maa, harcrah, prim gibi alan demeleri 06: Ticari deme: Ticari iletmelerin birbirlerine, kendi hesaplarna veya mterilerine demeleri, bor, ithalat, ihracat, irket satn alma, vb. kapsamnda demeler 07: Bireysel deme: zel amal (aile bireylerine, hediye, ba, bor, alveri vs.) demeler 08: Yatrm: Mevduat, menkul kymet, dviz, gayr menkul, tat, varlk alm, temett deme, tahsilat vb. gibi yatrm amal demeler 09: Finansal: Kredi, depo, repo, trev, finansal varlk alm/satm vb. demeler 10: Eitim demesi 11: Aidat demesi \n \n \n TR.OHVPS.DataCode.OdemeDurumu \n demenin durumunu gsterir. Alabilecei deerler: 01: Gerekleti (deme ilgili deme sistemine iletildi ve alc hesabna ulat.)  02: Gnderildi (deme ilgili deme sistemine iletildi ancak alc hesabna ulatna dair teyit alnmad.)lemin son durumunun teyidi iin YS sorgulama yapmaldr. 03- Gereklemedi (demenin ilgili deme sistemine iletiminde veya ilenmesi srasnda hata, zaman am, sistemin gn sonu ilemlerine balamas vb. durum olutu ve deme gereeklemedi veya iade edildi.) 04- Onayda bekliyor (deme emri alnd. oklu onay aknn tamamlanmas bekleniyor.) 05- leme Alnd ( deme emri alnd. ) YS tarafndan mteriye gsterilmeyen bir koddur. Bu kod dnldnde YS uygulamasnda HKya deme durumu 02-Gnderildi  olarak gsterilir. lemin son durumunun teyidi iin YS sorgulama yapmaldr. \n \n \n TR.OHVPS.DataCode.IslemAmaci \n demenin Amacna ynelik olarak aadaki deerlerden birini alr: 01: Konut Kiras demesi 02:  yeri Kiras demesi 03: Dier Kira demesi 04: E-Ticaret demesi: Elektronik ticaret ilem amal aktarmlar 05: alan demesi: Maa, harcrah, prim gibi alan demeleri 06: Ticari deme: Ticari iletmelerin birbirlerine, kendi hesaplarna veya mterilerine demeleri, bor, ithalat, ihracat, irket satn alma, vb. kapsamnda demeler 07: Bireysel deme: zel amal (aile bireylerine, hediye, ba, bor, alveri vs.) demeler 08: Yatrm: Mevduat, menkul kymet, dviz, gayr menkul, tat, varlk alm, temett deme, tahsilat vb. gibi yatrm amal demeler 09: Finansal: Kredi, depo, repo, trev, finansal varlk alm/satm vb. demeler 10: Eitim demesi 11: Aidat demesi 12: Dier \n \n \n TR.OHVPS.DataCode.RizaDurumu \n B: Yetki Bekleniyor Y: Yetkilendirildi K: Yetki Kullanld E: Yetki deme Emrine Dnt S: Yetki Sonlandrld I :Yetki Iptal \n \n \n TR.OHVPS.DataCode.GkdTur \n GKD yaplmasn gerekli bulduu durumda HHS, YSn belirledii yntemi dikkate alarak kendi belirledii GKD yntemini bildirir: Y: Ynlendirmeli GKD A: Ayrk GKD \n \n \n TR.OHVPS.DataCode.RizaTip \n H: Hesap Bilgisi Rzas O: deme Emri Rzas \n \n \n TR.OHVPS.DataCode.IzinTur \n 01: Temel Hesap Bilgisi 02: Ayrntl Hesap Bilgisi 03: Bakiye Bilgisi 04: Temel lem (Hesap Hareketleri) Bilgisi 05: Ayrntl lem Bilgisi \n \n \n TR.OHVPS.DataCode.OdemeSistemi \n lemin ynlendirildii deme Sistemine gre aadaki deerlerden birini alabilir: H: Havale F: FAST E: EFT (PS) deerlerinden birini alabilir. \n \n \n TR.OHVPS.DataCode.IslemTuru \n Hesap hareketleri (ilemler) sorgusunda dnlen lem Tr (islTur) parametresi aadaki deerlerden birini alabilir: HAVALE EFT FAST PARA_YATIRMA PARA_CEKME YABANCI_PARA_HAVALE YATIRIM_HESABINA_AKTARIM YATIRIM_HESABINDAN_AKTARIM KURUM_FATURA_ODEMESI CEK SENET SIGORTA_ODEMESI UCRET_KOMISYON_FAIZ SGK_ODEMESI VERGI_ODEMESI DOVIZ_ALIM DOVIZ_SATIM KREDI_ODEMESI KREDI_KULLANIM KK_ODEMESI KK_NAKIT_AVANS SANS_OYUNU UYE_ISYERI_ISLEMLERI HGS_OGS_ISLEMLERI DOGRUDAN_BORCLANDIRMA_SISTEMI DIGER \n \n \n TR.OHVPS.DataCode.HspTur \n Hesabn bireysel veya ticari nitelikte olduunu belirtir: B: Bireysel T: Ticari \n \n \n TR.OHVPS.DataCode.KolasHspTur \n Hesabn bireysel veya ticari nitelikte olduunu belirtir: B: Bireysel T: Ticari \n \n \n TR.OHVPS.DataCode.HspTip \n Hesap eidini belirtir: VADESIZ VADELI KREDILI MEVDUAT HESABI POS CEK YATIRIM \n \n \n TR.OHVPS.DataCode.HspDrm \n Hesabn durumunu belirtir: AKTIF PASIF KAPALI \n \n \n TR.OHVPS.DataCode.YetTip \n Alabilecei deerlere gre hangi belirtecin dneceine karar verilir. yet_kod yenileme_belirteci \n \n \n TR.OHVPS.DataCode.BrcAlc \n lemin hesab borlandrd ya da alacaklandrd bilgisidir. B : Bor A : Alacak \n \n \n TR.OHVPS.DataCode.RizaIptDtyKod \n 01 :Yeni Rza Talebi ile ptal 02 :Kullanc stei ile HHS zerinden ptal 03 :Kullanc stei ile YS zerinden ptal 04 :Sre Am : Yetki Bekleniyor 05 :Sre Am : Yetkilendirildi 06 :Sre Am : Yetki demeye Dnmedi 07 :GKD iptali : Ayn rza no ile mkerrer arm 08 :GKD iptali : Rzano ile TCKN uyumamas 09 :GKD iptali : Uygun rn bulunmuyor 10 :GKD iptali : HHS Ak Bankaclk kanal ileme kapal 11 :GKD iptali : Hesap Yetki Sorunu 12 :GKD iptali : HK HHS mterisi deil 13 :GKD iptali : HK HHS kontrollerini aamad 14 :GKD iptali : Baarsz GKD 15 :GKD iptali : HK istei ile GKDden vazgeildi 16 :GKD iptali : Dier \n \n \n TR.OHVPS.DataCode.PSUInitiated \n E : Evet H : Hayr \n \n \n TR.OHVPS.DataCode.HHSYOSSrlmKrtr \n kod : Kod,unv : Unvan \n \n \n TR.OHVPS.DataCode. SrlmYon \n A: Azalan deerle sralama Y: Artan deerle sralama \n EK-3: stemci Sertifikalarnn Tanm ve Ynetimi \n YS rol ile gelen katlmclar BKM API Geidi eriimlerini kendileri ile BKM tarafndan nden paylalacak olan istemci sertifikalarn kullanarak salayacaklardr. \n Bu sertifikalar BKM bnyesinde oluturulacak ve eriimde bulunacak olan kuruma zel olarak hazrlanacaktr. Hazrlanan istemci sertifikalar gvenli FTP veya e-posta aracl ile nden ilgili kiiler ile paylalacaktr. \n Sertifika dorulama ilemi API Geidi zerinde yaplacak olup, istemci tarafnda web isteinin ilgili sertifika ile ilikilendirilerek oluturulmas gerekecektir. \n Uzun dnemli olarak hazrlanacak olan sertifikalar test, sertifikasyon ve retim ortamlarnda kullanlacaktr. Sertifikalarn ilevsellii ve geerlilii bu aamalarda  snanacaktr. \n BKM API Geidi zmnn test ve retim ortamlar ayrmnda istemci sertifikalar, HHS Listeleme API eriimleri ve  Sertifikasyon balantlar ekil 15-HHS/YS API Mimarisi Diagramnda resmedilmitir. \n OpenSSL ile CSR (Certificate Signing Request) Oluturma \nAadaki komut ile 2048-bit RSA private key ve CSR oluturulur. \nopenssl req -new -newkey rsa:2048 -nodes -keyout PRIVATEKEY.key -out CSR.csr \n CSR ile ilgili detay bilgilerin giriinde; \nOrganization Unit Name (OU) olarak BKM tarafndan size iletilen clientId deeri, \nCommon Name (CN) olarak 4 karakterli yosKod deeri, \nDier alanlar iin de kurum bilgilerinize gre giri yaplr. \n Tm bilgilerin girilmesinden sonra CSR dosyas imzalanmak zere BKM ye iletilir. \n EK-4: Sunucu Sertifikalar \n Sunucu sertifikalarnn endpoint bilgisini (Fqdn) ierecek ve global bir Certification Authority tarafndan imzalanm olarak sunulmas gerekmektedir.\nrnein; entegrasyon formu ierinde yer alan URL bilgisinin (test.xbank.com.tr) sertifika ierisinde tanml olmas ve bu sertifikann global bir CA rnein Verisign tarafndan imzalanm olarak sunulmas gerekmektedir. \n EK-5: Mesaj mzalama Ak \n Dijital imzalama yaps, HVPS APIde gerekletirilen ilemlerin ve tanan verilerin btnlk ve inkr edilemezliini salamak amacyla kurgulanmtr.\nBu kapsamda imzalama ak aadaki gibi olmaldr: \n \n HHS ya da YS ncelikle zel ve ak anahtarlarn oluturmaldr. Bu anahtarlar oluturmak iin aada openssl kullanlarak oluturma rnei paylalmtr.  Bu anahtarlardan zel olan anahtar mesaj imzalamak iin kullanlacak olup, ak anahtar ise mesaj dorulamak amacyla mesajn alcs tarafndan kullanlacaktr. \n \n private_key.pem ve public_key.pem dosyasinin ierikleri kod tarafnda kullanlacaktr. \n --private.pem => zel anahtarn ismi\nopenssl genrsa -out private.pem 2048 \n --public_key.pem => Ak anahtarn ismi\nopenssl rsa -in private.pem -pubout -outform PEM -out public_key.pem \n --private_key.pem => zel anahtarn PCKS8 formatna evrilmesi (Java asndan PCKS8 formatnda olma ihtiyac nedeniyle) openssl pkcs8 -topk8 -inform PEM -in private.pem -out private_key.pem -nocrypt \n \n \n Ak ve zel anahtarlar oluturulduktan sonra Ak Anahtar BKM ile paylalr. BKM bu ak anahtar dier katlmclarn ulaabilmesi ve alabilmesi iin bir Anahtar Deposu yaklam ile bnyesinde tutar. lgili anahtar iletebilmek ve alabilmek iin kullanlacak HHS/YOS API ye eriim detaylar EK-6 blmnde detayl olarak paylalmtr.  Eer kurumun ilgili anahtar iftinin yenilenme durumu sz konusu ise yenilemenin hemen ardndan ak anahtar yeni bir imzalama yaplmadan nce mutlaka BKM ile paylalmaldr. \n \n \n mzal mesaj aacak olan kurum mesaj imzalayan kurumun ak anahtarn her sorguda yeniden almak durumunda deildir. Belirli periyodlarda kendi ortamndaki anahtar yenileyerek sistemi iletebilir. Ancak imzalayan kurum anahtar ifti yenilemesi yaptnda BKM ile ak anahtarn paylasa dahi imzal mesaj dorulayacak taraf eski ak anahtar ile dorulama yapmaya alt iin hata alacaktr. Bu ilk hata durumunda hzlca BKM zerinden yeni anahtar alp mesaj tekrar dorulamay denemelidir. Eer yine hata alyor ise dorulama ilemini hata statsne almaldr. Bu sebeple anahtar yenileyen kurum yeni ak anahtarn yeni bir mesaj imzalama yapmadan nce mutlaka BKM ile paylamaldr. \n mzalama Kurallar (YS) \n Bir YS zerinden balayan ak rnek olarak paylalmtr. \n \n \n YS, mesaj imzalama gerektiren her API isteinin HTTP gvdesini (request body) kendi zel anahtar ile ifreleyerek imza bilgisini oluturur. \n \n \n Ardndan bu imza verisini, gnderecei mesajn istek balnda yer alan X-JWS-Signature alannda gndermelidir. \n \n \n X-JWS-Signature alannda gnderilecek olan bilgi aadaki yntem ile oluturulmaldr. \n \n \n Bu alana yazlacak olan bilgi JWT formatnda oluturulmaldr. \n \n \n Bir JWT, header-payload-signature alanlarndan olumaktadr. \n \n Header alannda JWTyi imzalamak iin kullanlacak algoritma belirtilmelidir.  Standartlar kapsamnda RS256 kullanlacaktr. \n Payload ksmnda zel olarak oluturulacak olan body claim alanna istek gvdesi (request body) verisinin SHA256 hash deeri karl yazlmaldr. \n JSON payload oluturulurken RFC 7519 baz alnmaldr. "iss" (Issuer) Claim, "exp" (Expiration Time) Claim, "iat" (Issued At) Claim, body Claim alanlarnn gnderilmesi zorunludur. ^RFC7519 \na.\t"iss" (Issuer) Claim : Kurumunuza zel bilgidir. \nb.\t"exp" (Expiration Time) Claim: Saniye cinsinden (Unix time) imzann son geerli olduu tarih. \nc.\t"iat" (Issued At) Claim : Saniye cinsinden (Unix time) imzann oluturulduu tarih \nd.\tbody Claim : istek gvdesi (request body) verisinin SHA256 hash deeri karl. \n Signature alannda da zel anahtar ile imzalanm olan imza ierii yer alacaktr. \n \n X-JWS-Signature:   JWS imzasn ieren stbilgi. Bu baln ne zaman belirtilmesi gerektii hususu ilgili endpoint iin belirtilmitir. \n rnek X-JWS-Signature Payload Deeri \n { \n"iss": "https://apigw.bkm.com.tr", \n"exp": 1646832405, \n"iat": 1646746005, \n"body": "c543072f97a761a1d891dc81acc380bc1e6f61ca6541bd93ebfdece338457922" \n} \n \n \n \n \n YS, istei gnderir. Sadece mesajn btnln ve doruluunu teyit amac ile istek gvdesi (request body) SHA256 hash deeri imzalanarak X-JWS-Signature alannda bu imza iletilir. stein gvde (request body) ksm ak ve ifresiz olarak gnderilmektedir. \n \n \n HHS, istei alr, talebi gerekletirmeden nce ald API isteklerinin imzasn dorulamaldr. X-JWS-Signature alanndaki JWT aadaki admlarla dorulanmaldr. \n \n Header ksmndaki algoritmanin RS256 olduu kontrol edilir. \n Gnderen kurumun ak anahtar ile JWT verify (dorulama) ilemi yaplr. \n Yukardaki ilemlerin doruluunun ardndan JWTnin payload ksmndaki body claim alanndaki bilginin, istein gvde verisinin SHA256 hash deerlerinin ayn olduu kontrol edilir. \n \n \n \n Yukardaki ilemler ile doruluu teyit edilmi olan istein talebi gerekletirir. \n \n \n Eer istek dorulanamyor ise gnderen kurumun ak ve zel anahtar ifti yenilenmi olabilir. \n \n \n BKM HHS API  zerinden ilgili kurumun bilgilerini (kurum kodu vs) kullanarak kurumun detay bilgileri eker ve kendi ortamnda yeniler. \n \n \n Ardndan imzay tekrar ak anahtar ile dorulayarak kontroller gerekletirilir. (Eer halen dorulama ilemi baarsz ise bu istek iin hata ak altrlr.  TR.OHVPS.Resource.InvalidSignature  kodu ile hata retilebilir.) \n \n \n mza bilgisinin beklendii (x-jws-signature) servislerde, bu bilginin iletilmedii durumlarda  TR.OHVPS.Resource.MissingSignature  hatas retilebilir. \n \n \n HHS istei iledikten sonra cevab olutururken de yukardaki aklar ile gnderecei cevab imzalamaldr. \n EK-6: HHS/YS API Mimarisi \n HHS/YS API Uygulama Mimarisinde Test ve retim ortamlarnda aadaki alanda yer almaktadr. \n \n ekil 15: HHS/YS API Mimarisi \n'},{title:"POST /erisim-belirteci",frontmatter:{},regularPath:"/v1.0.1/contents/erisim-belirteci.html",relativePath:"v1.0.1/contents/erisim-belirteci.md",key:"v-23bd824f",path:"/v1.0.1/contents/erisim-belirteci.html",content:' POST /erisim-belirteci \n STEK: \n YS erisim-belirteci eriim adresini 2 amala kullanr: \n \n \n Bir nceki admdan ald rizaNo, rizaTip (deme emri balatma hizmetinde O, hesap bilgisi hizmetinde H) ve GKD sonras dnlen yetKod bilgilerini kullanarak HHS nezdinde ErisimBelirteci nesnesi oluturmak zere istekte bulunur. YSn istekte bulunabilmesi iin GKD admnn baarl bir ekilde tamamlanmas rizaDrm bilgisinin yetkilendirildi olmas gerekir. Eriim Belirteci nesnesi ile rzas nesnesi (deme Emri Rzas veya Hesap Bilgisi Rzas) arasndaki iliki rza numaras zerinden salanr. \n \n \n Ald eriim belirtecinin Geerlilik Sresinin dolduu durumda, yenileme belirteci karlnda yeni bir eriim belirteci almas gerekmektedir. \n \n \n POST /erisim-belirteci isteinin (REQUEST) gvdesinde (BODY)  ErisimBelirteciIstegi nesnesi (Tablo-23) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda ErisimBelirteci nesnesi (Tablo 24) oluturulur veya (Yenileme Belirteci iin) gncellenir. Rza durumu Yetki Kullanld olarak gncellenir. \n Tablo 23: ErisimBelirteciIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format:Veri modeli smi \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n RzaNo \n rizaNo \n AN1..128 \n Z \n Rza nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n Rza Tipi \n rizaTip \n AN1 \n Z \n O veya H (TR.OHVPS.DataCode.RizaTip) \n \n \n Yetki Tipi \n yetTip \n AN1..50 \n Z \n yet_kod yada yenileme_belirteci deerini alabilir.  (TR.OHVPS.DataCode.YetTip) \n \n \n Yetki Kodu \n yetKod \n AN1..255 \n K \n GKD ileminden dnen yetkilendirme kodudur. Tek kullanmlk olup, ayn yetKod ile birden fazla token alnamaz. yetKod Parametresinin yaam mr 5 dakika olmaldr. yetTip = yet_kod ise zorunludur. \n \n \n Yenilenme Belirteci \n yenilemeBelirteci \n AN1..4096 \n K \n Eriim belirtecinin yenilenmesi amacyla kullanlr. yetTip = yenileme_belirteci ise kullanm zorunludur. \n \n \n \n BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan erisimBelirteci nesnesinde (Tablo-19) bulunan eriim belirteci deeri deme emrinin balatlmas esnasnda kullanlr. \n Tablo 24: "ErisimBelirteci" nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format:Veri modeli smi \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Eriim Belirteci \n erisimBelirteci \n AN1..4096 \n Z \n Yetkilendirme Kodu karlnda HHS tarafndan dnlen ve sonraki hesap bilgisi ve deme emri servislerine eriimde kullanlan bilgidir. \n \n \n Geerlilik Sresi \n gecerlilikSuresi \n N1..9 \n Z \n Eriim Belirtecini saniye cinsinden geerlilik sresidir.  Eriim belirteci geerli olduu son tarih ; Hesap Bilgisi Rzas iin 30 gn olmaldr. Eriimin Geerli Olduu Son Tarih 30dan kk ise bu sre deeri ile snrldr. deme Balatma Rzas iin 5 dakika olmaldr. \n \n \n Yenileme Belirteci \n yenilemeBelirteci \n AN1..4096 \n Z \n Eriim belirtecinin yenilenmesi amacyla kullanlr. \n \n \n Yenileme Belirteci Geerlik Sresi \n yenilemeBelirteciGecerlilikSuresi \n N1..9 \n Z \n Yenileme belirtecinin saniye cinsinden geerlilik sresidir. Yenileme belirtecinin geerli olduu son tarih ; Hesap Bilgisi iin Eriimin Geerli Olduu Son Tarih ile snrl olmaldr. Bu tarih geldii zaman Hesap Bilgisi Rza Durumunu Yetki Sonlandrld statsne ekilmesi gerekir. deme Balatma iin Rza Oluturma Zamanndan 15 gn sonras olmaldr. 15 gn sresi sorgulama servislerinin armn destekleyecek ekilde uzun tutulmutur. leri vadeli ilemler bu kapsamda deildir.  deme emri 5 dakika iinde gerekletirilmelidir. Gereklemediinde 4.2.8 blmnde aktarlan rza stat gncellemesi yaplmaldr. \n \n \n \n erisim-belirteci erisim noktasndan alnan elde edilen erisimBelirteci ilikilendirilii nesne veya ilem iin gnderilen POST istei balnda x-access-token alannda iletilir.\nYenilenme Belirteci (refreshToken) kullanlarak Eriim Belirteci (accessToken) alndnda, dnen yanttaki Yenileme Belirteci ve Yenileme Belirteci Geerlik Sresi deimez. \n Eriim Belirteci API arm srasnda rza durumlar kontrol edilmelidir. Bu kontrollerin nasl yaplmas gerektii 4-Rza Durumlar blmnde aktarlmtr. \n'},{title:"DEME HZMETLER VER PAYLAIM SERVSLER (HVPS)",frontmatter:{},regularPath:"/surum-yonetimi.html",relativePath:"surum-yonetimi.md",key:"v-22024c43",path:"/surum-yonetimi.html",content:" DEME HZMETLER VER PAYLAIM SERVSLER (HVPS) \n API LKE VE KURALLARI SRM YNETM  \n OHVPS API lke ve Kurallar dokmanndaki srm bilgileri aadaki kurallara gre belirlenmektedir. \n \n \n Srmler 3 basamakl kodla belirlenir. Srm deiiklikleri basamak srasna gre Major deiiklikler, Minr deiiklikler ve Patch deiiklikleri olarak sralanr. rnein  Srm 1.0.0 zerinde yaplacak major deiiklik Srm 2.0.0 olarak ifade edilirken, Minr deiiklik Srm 1.1.0 olarak ifade edilir. Patch deiiklik ise Srm 1.1.1 olarak ifade edilir. \n \n \n Major deiiklikler: \na. Srmn 1. basama proje kapsamndaki major deiiklikleri ifade eder. Bu major deiiklikler ; \n Kredi kart aklar, tekrarl ilem aklar gibi kapsama yeni aklarn eklenmi olmas, \n  Eski hizmetlerin alamaz hale getirilmesi, \n API desenlerinde deiiklik olmas ve geriye ynelik destein sona ermesidir. \nb. Major deiiklikler, ncelikle API standartlarnn taslak srmne eklenir. Paralelinde simlatr gelitirmelerine balanr.  Simlatrde ilgili deiikliin hayata geirilecei tarih ayrca katlmclarla paylalr. \nc. Major deiiklikler snrl bir set ya da tm set ile sertifikasyona tabiidir. \nd. Simlatr tek bir major ya da minr srm destekler. \ne. Simlatrn destekledii srm zerinden sertifikasyon yaplr. \nf. API Standartlarnda major  Srm Gei Tarihinin  duyurusu TCMB tarafndan yaplr. \ng. Katlmclarn  HHS/YS Yeni Srm retime Gei Son Tarihi  yine TCMB tarafndan belirlenir ve duyurulur. Bu tarihe kadar katlmclarn sertifikasyonlarnn tamamlanmas beklenir. \n \n \n Minr deiiklikler:    \na. Srmn 2. basama proje kapsamndaki minr deiiklikleri ifade eder. Bu minr deiiklikler ; \n Kural deiiklikleri, \n API desenlerinde olabilecek opsiyonel alan deiiklikleri, \n Sral veri trlerine yeni deerlerin eklenmesi, \n GKD srecinde deiiklik yaplmas, \n API desenlerinde deiiklik olmas ve geriye ynelik destein devam etmesi, \n Yeni bir endpoint eklenmesidir. \nb. Deiiklik kapsam TCMB tarafndan belirlenir. \nc. Bu basamakta yaplan deiikliklerin tmnn sertifikasyona tabi olmas gerekir. Ancak deiikliin boyutuna gre snrl bir set ya da tm deiiklik seti ile sertifikasyon senaryolar oluturulur. \nd. Geriye dnk destek bittii noktada srm deeri artar. \ne. Major ve minr deiikliklerin srm ynetimi ayn akla iletilir. \n \n \n Patch deiiklikler: \n a. Srmn 3. basama proje kapsamndaki patch deiiklikleri ifade eder. API desenlerinde bir deiiklik yaratmayan i kural deiiklii rnek olabilir. \n b. Patch deiiklikler sonras katlmclarn yeniden sertifikasyon yapmalar gerekmemektedir. \n \n \n lk defa sertifikasyona gelecek kurumlar en son aktif srm ile sertifikasyona gelir. \n \n \n API Endpointlerde yaplacak major ve minor deiiklikler, endpointin pathi ierisinde yer alr. Detayl bilgi  3.5.\tKaynak URI Yol Yaps  adresinde yer alr.  \n \n \n Srm geilerinde kullanlan tarih bilgileri u ekildedir: \n \n \n \n Srm Gei Tarihi  : \n \n Yeni API Standart srmnn yaynland tarih bilgisidir.\n \n API Standartlar taslak srm, gncel srm haline getirilir. \n Simlatrde yaplan gncellemeler development ortamndan, katlmclarn kullanmnda olan Tripsit ortamna aktarlr. \n Tripsit ortamnda katlmclar hem simlatr hem de kendi uygulama testlerine balayabilir. \n \n \n \n Sertifikasyona Balang Tarihi  : \n \n HHS ve YS'ler iin ayr olarak iletilecek tarih bilgisidir. \n \n HHS Yeni Srm retime Gei Son Tarihi / YS Yeni Srm retime Gei Balang Tarihi   : \n \n Bu tarihe kadar HHS'lerin sertifikasyonu tamamlayp baar ile gemesi gerekir. Bu tarihten nce sertifikasyonu tamamlayan HHS'ler retime geer. \n Bu tarih HHS'lerin retime geii iin tanmlanm son tarih olduu iin, bu tarihte tm HHS'ler retime gemi olacaktr. YS'ler bu tarihten itibaren retime geie balar. \n BKM tarafndan yaplmas gerekecek API srm deiiklii varsa bu tarihte yayna alnr.(HHS-YS API gibi) \n \n YS Yeni Srm retime Gei Son Tarihi  : \n \n YS'lerin sertifikasyon sreci, YS Yeni Srm retime Gei Balang Tarihinden, YS Yeni Srm retime Gei Son Tarihine kadar srer. \n Mevcut YS'ler yeni srm en ge bu tarihte retim ortamna alr. \n \n Eski Srmn Kaldrlma Tarihi  : \n \n HHS'ler; HHS Yeni Srm retime Gei Son Tarihi ile Eski Srmn Kaldrlma Tarihi arasnda iki servis srmn de desteklemek zorundadr. \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n "},{title:"5.\tGl Kimlik Dorulama",frontmatter:{},regularPath:"/v1.0.1/contents/gkd.html",relativePath:"v1.0.1/contents/gkd.md",key:"v-822cf8c6",path:"/v1.0.1/contents/gkd.html",headers:[{level:2,title:"5.1.\tYnlendirmeli Gl Kimlik Dorulama",slug:"_5-1-yonlendirmeli-guclu-kimlik-dogrulama"},{level:2,title:"5.2.\tAyrk Gl Kimlik Dorulama",slug:"_5-2-ayrk-guclu-kimlik-dogrulama"},{level:2,title:"5.3.\tYnlendirme/Bildirim Adresleri ve Durum Kodu Parametresi",slug:"_5-3-yonlendirme-bildirim-adresleri-ve-durum-kodu-parametresi"},{level:2,title:"5.4\tHealthcheck API",slug:"_5-4healthcheck-api"},{level:2,title:"5.5  Gl Kimlik Dorulama Kontrolleri",slug:"_5-5-guclu-kimlik-dogrulama-kontrolleri"}],content:" 5.\tGl Kimlik Dorulama \n Mteri iin gl kimlik dorulama, HKnn (mterinin) kimliinin dorulamada kullanlan ve bir bileenin ele geirilmesinin dier bileenin gvenliini tehlikeye atmayaca en az iki bileenden oluan, bu iki bileenin de mterinin bildii, sahip olduu veya biyometrik bir karakteristii olan bileen snflarndan farkl ikisine ait olacak ekilde seildii yntemi tanmlar. \n deme ve Elektronik Para Kurulularnn Bilgi Sistemleri ile deme Hizmeti Salayclarnn deme Hizmetleri Alanndaki Veri Paylam Servislerine likin Tebli uyarnca hesap bilgisi hizmetinde mterinin onaynn alnmas esnasnda ve deme emri balatma hizmetinde her bir deme emri balatma ileminde  HHS tarafndan mteriye gl kimlik dorulama (GKD) uygulanmas esastr.  Buna gre: \n \n \n Hesap bilgisi hizmetinde HKnn onaynn alnmas esnasnda  Tebliin 26 nc maddesinin 1 inci fkras uyarnca  HHS tarafndan HKya GKD uygulanr. \n \n \n deme emri balatma hizmetinde,  Tebliin 26 nc maddesinin 2 nci fkras uyarnca  HHS tarafndan HKya gl kimlik dorulama uygulanr ve ilem dorulama kodu ile HKnn onay alnr. \n \n \n deme emri balatma hizmetinde,  Tebliin 26 nc maddesinin 3 nci fkras uyarnca  HHS tarafndan HKya gl kimlik dorulama uygulanmasna ilikin istisna veya ilave gvenlik nlemleri ibu API lke ve Kurallar belgesinde tanmlanr. \n \n \n HHS, gl kimlik dorulama srecinde HKnin sahip olduu bileen snf olarak SMS OTP ya da SMS ile ilem dorulama kodu kullanabilir. \n \n \n HHS, aadaki hallerde veya  Tebliin 10 uncu maddesinin ikinci fkrasnda  belirtilen risk deerlendirmesi sonucuna gre tek bileen ile kimlik dorulama yapabilir. \n \n demenin gndereni ve alcsnn ayn olmas, \n Daha nce tanmlanm gvenli alclar listesine deme yaplmas, \n HKnin talimatna istinaden gerekletirilen dzenli bir deme olmas. \n \n \n \n Tek bileen ile kimlik dorulama yaplan bu ilemlerle ilgili olarak gerekletirilen ilemin mteri tarafndan yapldn ispat etme ykmll HHSye ait olur. \n \n \n lem Dorulamada  Tebliin 3 nc maddesinin birinci fkras  bendindeki  ilem bilgisi tanmna uygun olarak aadaki bilgiler ile  Tebliin 3 nc maddesinin birinci fkras hh bendinde  tanmlanan ileme zel retilmi ilem dorulama kodu birlikte kullanlr. \n \n Alc Unvan (Kolas aknda maskeli olarak)  (deme emri balatma hizmeti) \n Tutar (deme emri balatma hizmeti) \n Referans bilgisi (8 karakterden kk ise alann tm deeri, byk ise ilk 4 ve son 4 hanesi) \n \n leme ait yukardaki bilgilerden en az biri deitii zaman  Tebliin 3 nc maddesinin birinci fkras hh bendinde  belirtildii gibi yeni bir ilem dorulama kodu retilecek ekilde ak kurgulanmaldr. \n \n \n lem dorulama kodunun gnderilmesinden HHS sorumludur. HHS,  Tebliin 10 uncu maddesinin ikinci fkrasnda  belirtilen risk deerlendirmesi sonucuna gre ilem dorulama kodu kullanmakszn HKnn onayn alabilir. lem dorulama kodu kullanlmayan ilemlerle ilgili olarak gerekletirilen ilemin HK tarafndan yapldn ispat etme ykmll HHSye aittir. \n \n \n HVPS API standart kapsamnda iki adet Gl Kimlik Dorulama (GKD) yntemi kullanlacaktr: \n \n Ynlendirmeli (Redirect) GKD Yntemi \n Ayrk (Decoupled) GKD Yntemi \n \n \n \n HHS asgari olarak tarayc tabanl Ynlendirmeli GKD yntemini desteklemek zorundadr. \n \n \n ereve szleme kapsamnda olmayan tek seferlik deme ilemleri sadece Ynlendirmeli GKD yntemi ile gerekletirilebilir. \n 5.1.\tYnlendirmeli Gl Kimlik Dorulama \n Ynlendirmeli GKD Ynteminde, mteri kimlik dorulama iin YS tarafndan HHS arayzne ynlendirilir. \n Mteri HHSye (uygulama veya web arayz vastasyla) ynlendirildikten sonra mterinin gl kimlik dorulamas adm adm ve dorudan HHS ile mteri arasnda yrtlr. GKDnin tamamlanmasndan sonra mteri tekrar YS uygulamasna ynlendirilir. \n Ynlendirmeli GKD Yntemi iin st dzey rnek i ak aadaki admlardan oluur: \n \n YS, GKD iin HHS tarafndan tanmlanan arayze (tarayc ya da uygulama) ynlendirme yapar. \n Mteri, YS arayznden ayrlr, ynlendirildii HHS arayz zerinde kimlik dorulama ilemlerini gerekletirir. \n GKD tamamlandktan sonra mteri, YS arayzne tekrar ynlendirilir ve ilem sonucu grntlenir. \n \n Ynlendirmeli GKD iin temel gereklilikler unlardr: \n \n deme hizmeti (hesap bilgisi veya deme emri balatma hizmeti) tarayc ya da uygulama tabanl bir ekilde sunulabilir. Bu nedenle,  YS ve HHSlerin Ynlendirmeli GKD iin asgari olarak tarayc tabanl ynlendirme akn desteklemeleri gerekmektedir. \n ereve szleme (S) kapsamnda olmayan tek seferlik deme ilemleri sadece Ynlendirmeli GKD yntemi ile gerekletirilebilir. \n \n Tarayc Tabanl Ynlendirme \n HHSnin web arayzne, \n \n HHSnin mobil uygulamasnn olmad, \n HKnn deme hizmetini (hesap bilgisi veya deme emri balatma hizmeti) sunduu mobil cihazda HHS uygulamasnn ykl olmad, \ndurumlarda ynlendirme yaplr. \n \n YSn mobil uygulamas varsa mobil cihazda uygulamadan taraycya, YSn mobil uygulamas yoksa deme hizmetinin sunduu cihazda (Kiisel Bilgisayar veya Mobil Cihaz) tarayc zerinden ynlendirme yaplr. \n Uygulama Tabanl Ynlendirme \n HKnn deme hizmetini (hesap bilgisi veya deme emri balatma hizmeti) YSn mobil uygulamas ile kullanyorsa, ayn mobil cihazda HHSnin mobil uygulamasnn yklenmi olmas durumunda, HK dorulamasnn HHS mobil uygulamas tarafndan yaplmas iin uygulama tabanl ynlendirme yaplr. Bylece HK, deme hizmetine eriim iin HHSnin mobil kanalna eriim srasnda kulland dorulama yntemini ile dorulanabilir. \n Tablo 5: Ynlendirmeli Gl Kimlik Dorulama Kanallar \n \n \n \n Dorulama Yntemi \n YS Olas Ortam \n HHS Olas Ortam \n \n \n \n \n Tarayc Tabanl Ynlendirme \n Kiisel Bilgisayar (masast, dizst)/Mobil Cihaz \n Kiisel Bilgisayar (masast, dizst) / Mobil Cihaz \n \n \n Uygulama Tabanl Ynlendirme \n Mobil Cihaz \n Mobil Cihaz \n 5.2.\tAyrk Gl Kimlik Dorulama \n Ayrk GKD Yntemi i ak, Ynlendirmeli GKD Ynteminin ilem akna benzer. Fark, HHS'nin, evrimii arayznden bamsz olan herhangi bir uygulama veya cihaz araclyla deme ilemi ayrntlarn ieren bir anlk bildirim (push notification) gndererek mteriden kimlik dorulamas istemesidir. Ayrk GKD Yntemine dayal bir ilem iin (ok basitletirilmi) st dzey rnek bilgi ak u ekildedir: \n \n Mteri, YS arayznde ilemini balatr. \n YS, talebini mteriye ait TCKN, VKN, YKN gibi tekil tanmlayc kimlik numaras bilgisi ierecek ekilde HHSye iletilir. \n HHS tekil tanmlayc bilgisini kullanarak farkl bir cihaz veya uygulama zerinden mteriye anlk bildirim gnderir ve dorulama yaplmasn salar. Bu ekilde HHS kendi mobil uygulamasna eriim iin kullanlan dorulama yntemini aynen kullanabilecektir. \n YS, herhangi bir yere ynlendirme yapmadan ilemin sonucunu bekler, mteri YS arayznden ayrlmaz (arayz ayn kalr). \n Kimlik dorulama sonras, YS arayznde ilem sonucu grntlenir. \n 5.3.\tYnlendirme/Bildirim Adresleri ve Durum Kodu Parametresi \n CSRF Ataklarndan korunmak iin ve YS uygulamasnn bir nceki durumunu restore edebilmesi iin; YS tarafndan iletilen ynlendirme ve bildirim adreslerine , Oauth2 standartlarndaki state parametresine edeer,   durum kodu (drmKod)  parametresinin eklenmesi gerekmektedir. Durum kodu parametresi YS tarafndan retilen, tekil ve kolay tahmin edilemeyen bir deer olmaldr. Rza istei gnderimi aamasnda oluturulmaldr. YS uygulamasnda uygun bir yerde saklanmaldr (cookie, session, local storage gibi) . \n Durum kodu, rza isteindeki ynlendirme adresine parametre olarak eklenir.  GKD sreci sonrasnda yetki kodu ile birlikte bu bilgi, HHS tarafndan YSe iletilir. YS saklad deer ile parametre olarak gelen deerin eitliini kontrol eder. Ayn ise eriim belirteci almak zere ak ilerletir. Farkl ise ilemi keser. \n 5.4\tHealthcheck API \n GET /health \n HHSlerin sunaca bu servis, dzenli olarak BKM tarafndan arlarak servislerin ayakta olup olmadklarnn kontrolnn salanmas planlanmaktadr. \n Baarl yantta Http 200 kodu dnlmelidir. \nBaarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Koullu  / stee Bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir. \n 5.5  Gl Kimlik Dorulama Kontrolleri \n HK, GKD iin HHS uygulamasna ynlendirildiinde, HHSnin eitli kontroller yaparak ilemin doruluunu teyit etmesi gerekmektedir. Yaplmas gereken kontrollere ait temel senaryolar aadaki tabloda belirtilmitir. Bu senaryolar baz alnarak HHSler tarafndan zenginletirilebilir. \n Zorunlu olarak belirtilen hata durumlarnn HHSler tarafndan gereklenmesini ve uygun hata kodlarnn YSe iletilmesi; ileride oluabilecek mutabakatlama sorunlarn ortadan kaldrabilecek, yaplacak raporlamalar kapsamnda sistem ve sre iyiletirmelerine katk salayacak, son kullanc asndan da alnan hataya ynelik bilgilendirici ierik salayacaktr. \n Hata aklamalar; hata koduna uygun ya da uyumlu olmak kaydyla, HHS ve YS tarafndan farkl ekillerde sunulabilir. \n GKD Srasnda yaplmas gereken kontroller \n \n \n \n Rza ptal Detay Kodu \n HHS hata aklamas* \n Ys ekrannda listelenecek rnek mesaj metni* \n rnek Senaryo \n Zorunlu / Opsiyonel \n \n \n \n \n 07 \n Rza durumunun \"Yetkilendirildi\" , \"Yetki Kullanld\" olduu durum \n Yetki Hatas \n HK,  GKD ilemi tamamlandktan sonra  YS ekrannda ileri- geri yaparak ya da HK'nn ynlendirme adresini kopyalayarak taraycya yaptrmas ile tekrar HHS'ye ynlendirir. Bu durumda HHS bu hata mesajn iletir. \n Zorunlu \n \n \n 08 \n Rzano ile kimlik bilgileri uyumazl. \n leminiz gerekletirilememitir. \n YS tarafndan balatlan rza ierisinde yer alan kimlik bilgisi (TCKN) ile HHS'de GKD yaplan HK'nn bilgilerinin uyumad durumda \n Zorunlu \n \n \n 09 \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) \n Gsterilebilecek hesap/kart bulunamamtr. \n HK'nn uygun statl hesabnn olmad durumda \n Zorunlu \n \n \n 10 \n Ak bankaclk kanalnz ileme kapaldr. \n Ak bankaclk kanalnz ileme kapaldr. \n Ak bankacl ayr bir kanal olarak tanmlam HHS'lerde, HK'nn ilemlerini AB kanalna kapatmas durumunda \n Opsiyonel \n \n \n 11 \n Kullancnn HHS'deki hesaplarnda yeterli yetkisinin olmama durumu \n Yetkiniz bulunmamaktadr. \n 1- Kurumsal firma kullanclarnn hesaplar zerinde ilem yetkisinin olmamas durumunda 2- Bireysel ortak hesaplarda hesap kst bulunuyorsa (para kna izin verilmedii durum) \n Zorunlu \n \n \n 12 \n HK'nn ilgili HHS mterisi olmad durum \n Yetkiniz bulunmamaktadr. \n Tek seferlik demelerde rza isteinde HK kimlik bilgileri bulunmamaktadr. Dier aklarda rza isteinde mteri olma kontrol yaplabilir. \n Zorunlu \n \n \n 13 \n HHSnin HK iin yapt kontrollerin baarsz olduu durum \n Yetkiniz bulunmamaktadr \n HHS'nin, HK iin i sistemlerinde yapt kontrollerin baarsz olmas. rnein: Mterinin henz bankaclk hizmet szlemesi gibi Internet ubesi zerinde ilem yapmasn engelleyen eksikleri olmas durumunda veya kurumsal kullancda vekalet sresinin dolmas/eksik dokman olmas durumunda kanal zerinde ilem yapamad durum \n Zorunlu \n \n \n 14 \n Baarsz GKD \n Yetkiniz bulunmamaktadr \n 1-HK'nn GKD iin gerekli 2FA bilgilerini salayamamas   2- HHS risk algsna gre 12 nolu hata kodunu dnmek yerine 14 nolu hata kodunu da YSe dnebilir. \n Zorunlu \n \n \n 15 \n HK istei ile GKDden vazgeildii durum (r: HHS ekrannda yer alan VAZGE butonuna basm olabilir. ) \n Mteri ilemden vazgemitir. \n 1- HHS ekrannda yer alan VAZGE butonuna baslmas durumu (Hem HK login olmadan nce hem de GKD sonras (rza verme ncesi) VAZGE butonu olabilir.)  2-Mteri Banka login ekrannda herhangi bir aksiyon almadan beklemitir ve HHS GKD zaman am sresi 5 dakikadan ksadr. \n Zorunlu \n \n \n 16 \n Dier \n leminiz gerekletirilememitir. \n - \n Opsiyonel \n \n \n \n GKD srasnda iletilen rza no eer HHSnin sisteminde bulunamazsa durumu gncellenecek bir rza no da olmayacaktr. HHS kendi nyznde bu duruma uygun bir mesaj gsterebilir. YSe de Dier hata kodu ile bu durumu iletebilir. \n"},{title:"7.\tHesap Bilgisi Hizmeti",frontmatter:{},regularPath:"/v1.0.1/contents/hesap-bilgisi-hizmeti.html",relativePath:"v1.0.1/contents/hesap-bilgisi-hizmeti.md",key:"v-5b1695dd",path:"/v1.0.1/contents/hesap-bilgisi-hizmeti.html",headers:[{level:2,title:"Genel Bilgiler",slug:"genel-bilgiler"},{level:2,title:"Hesap Bilgisi Hizmeti in Eriim Adresleri",slug:"hesap-bilgisi-hizmeti-icin-erisim-adresleri"},{level:2,title:"ADIM 0: HK'nn hesap bilgilerine eriim iin talepte bulunmas:",slug:"adim-0-ohk-nn-hesap-bilgilerine-erisim-icin-talepte-bulunmas"},{level:2,title:"7.1 ADIM 1: Hesap Bilgisi Rzasnn Hazrlanmas",slug:"_7-1-adim-1-hesap-bilgisi-rzasnn-hazrlanmas"},{level:3,title:"POST /hesap-bilgisi-rizasi",slug:"post-hesap-bilgisi-rizasi"},{level:3,title:"Baarl stek:",slug:"basarl-istek"},{level:3,title:"Baarl Yant:",slug:"basarl-yant"},{level:2,title:"zinler",slug:"izinler"},{level:2,title:"7.2 ADIM 2: Hesap Bilgisi Hizmeti Rzasnn Tesisi",slug:"_7-2-adim-2-hesap-bilgisi-hizmeti-rzasnn-tesisi"},{level:2,title:"7.3 ADIM 2.1: Hesap Bilgisi Rzasnn Sorgulanmas (stee Bal)",slug:"_7-3-adim-2-1-hesap-bilgisi-rzasnn-sorgulanmas-istege-bagl"},{level:2,title:"7.4 ADIM 2.2: Hesap Bilgisi Rzasnn ptali",slug:"_7-4-adim-2-2-hesap-bilgisi-rzasnn-iptali"},{level:2,title:"7.5 ADIM 3: Hesap Bilgilerinin Alnmas",slug:"_7-5-adim-3-hesap-bilgilerinin-alnmas"},{level:2,title:"7.6 ADIM 3.1 ve 3.2: Hesap Bilgilerinin Sorgulanmas",slug:"_7-6-adim-3-1-ve-3-2-hesap-bilgilerinin-sorgulanmas"},{level:2,title:"7.7 ADIM 3.3 ve 3.4: Hesap Bakiyesinin Sorgulanmas",slug:"_7-7-adim-3-3-ve-3-4-hesap-bakiyesinin-sorgulanmas"},{level:2,title:"7.8 ADIM 3.5 ve 3.6: lemlerin Sorgulanmas",slug:"_7-8-adim-3-5-ve-3-6-islemlerin-sorgulanmas"},{level:2,title:"7.9\tHealthcheck API",slug:"_7-9healthcheck-api"},{level:3,title:"Baarl Yant:",slug:"basarl-yant-2"}],content:" 7.\tHesap Bilgisi Hizmeti  \n Genel Bilgiler \n Hesap bilgisi sorgulama iin HBHS tarafndan mteri rzas tesisinin HHS tamamlanm olmas gerekir. Mteri rzas tesisi tamamlandktan sonra, HBHS sorgulamak istedii hesaba ait verileri ilgili eriim adresi zerinden sorgular. \n \n \n ekil 10: Hesap Bilgisi Hizmeti st Dzey Ak \n ekil-10da sunulan hesap bilgisi hizmeti 5 temel aktan oluur: \n 0.\tMterinin hesap bilgilerine eriim iin talepte bulunmas:  HK BHS mobil uygulama ya da web sitesinden hesap bilgilerine eriim ilemini balatr. \n 1.\tHesap Bilgisi mteri rzasnn hazrlanmas: \n HBHS, hesap bilgilerine eriim iin mteri rzas tesisi amacyla HHSdeki hesap bilgisi rzas eriim adresine bir POST isteinde bulunur ve bir hesap bilgisi rzas nesnesi oluturur. HHS hesap bilgisi rzas nesnesi iin biricik tanmlayac dner (RzaNo). Hesap bilgisi rzas, mterinin HBHSnin hesap bilgilerine eriim izin verdii alanlar ierir: \n \n zinler - eriim iin izin verilen veri kmelerinin listesi. \n Eriimin Geerli Olduu Son Tarih - HBHS'nin mterinin hesap bilgilerine eriebilecei istee bal seilebilen son tarih. \n lem Sorgulama Balang Zaman  Mteri rzasnn tesisinden itibaren geriye dnk olarak HBHSnin hesap bilgilerine eriebilecei sreyi \n lem Sorgulama Biti Zaman - Mteri rzasnn tesisinden itibaren ileriye dnk olarak HBHSnin hesap bilgilerine eriebilecei sreyi \n \n 2.\tHesap bilgisi hizmeti mteri rzasnn tesisi: \n HHS, Hesap Bilgisi Rzas servisi ile HK zelinde Yetki bekleniyor statsnde bir rza nesnesi hazrlar. HHS, GKDnin baaryla tamamlanmas sonrasnda hesap bilgisi rzas nesnesinin yetkilendirildiini belirtmek iin Rza Durumunu Rza Yetkilendirildi olarak gnceller. Nesne yetkilendirildikten sonra HHS nesne ile bir eriim belirteci (access token) ilikilendirir, Rza Durumunu Yetki Kullanld yapar ve bu belirteci HBHSye geri dner.  Bylece mteri rza tesisi salanm olur. \n Hesap bilgisi iin mteri rzasna ilikin temel ilkeler unlardr: \n \n 1 HK'nn 1 YS iin 1HHS'de Yetki Bekleniyor, Yetkilendirildi, Yetki Kullanld statsnde 1 rzas olabilir. \n Mteri rzasnn ayrntlar HK ile HBHS arasnda belirlenir. Bu nedenle mteri rzasnn ayrntlar HHS ekrannda deitirilmemelidir. \n HK, hesap eriim izni ayrntlarn yalnzca bir btn olarak yetkilendirebilir veya geri alabilir. \n Mteri rzas tesisi esnasnda, mteri HHS arayznde eriim iin yetkilendirecek hesaplar seer. \n \n 2.1\tHesap bilgisi rzasnn sorgulanmas:  Mteri rzas  GET/hesap-bilgisi-rizasi/{RizaNo}  ars yaplarak sorgulanr. \n 2.2\tHesap bilgisi mteri rzasnn iptali:  Mteri rzas  DELETE/hesap-bilgisi-rizasi/{RizaNo}  ars yaplarak iptal edilir. \n 3.\tHesap bilgilerinin alnmas:  Hesap bilgileri ilgili kaynaa (hesaplar, bakiye, ilemler) GET istei yaplarak gerekletirilir. HBHS, mteri rzasnn tesisinden sonrasnda (geerli bir eriim belirticine sahip olduunda) ncelikle  GET/hesaplar  ars yapacaktr. \n Hesap Bilgisi Hizmeti in Eriim Adresleri \n Etki Alan (Scope) =hesap_bilgisi \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu / stee Bal \n Yetkilendirme Tr \n mzalama \n Parametre \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n hesap-bilgisi-rizasi \n POST \n /hesap-bilgisi-rizasi \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n HesapBilgisiRizasiIstegi \n HesapBilgisiRizasi \n \n \n 2 \n erisim-belirteci  (GKD iin) \n POST \n POST/erisim-belirteci \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n ErisimBelirteciIstegi \n ErisimBelirteci \n \n \n 2.1 \n hesap-bilgisi-rizasi \n GET \n /hesap-bilgisi-rizasi/{RizaNo} \n Z \n stemci Kimlik Bilgileri \n mzal Yant \n \n \n HesapBilgisiRizasi \n \n \n 2.2 \n hesap-bilgisi-rizasi \n DELETE \n /hesap-bilgisi-rizasi/{RizaNo} \n Z \n stemci Kimlik Bilgileri \n \n \n \n \n \n \n 3.1 \n hesaplar \n GET \n /hesaplar \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama \n \n HesapBilgileri(birden ok hesap) \n \n \n 3.2 \n hesaplar \n GET \n /hesaplar/{hspRef} \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n \n \n HesapBilgileri(tek  hesap) \n \n \n 3.3 \n bakiye \n GET \n /hesaplar/{hspRef}/bakiye \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n \n \n BakiyeBilgileri(tek  hesap) \n \n \n 3.4 \n bakiye \n GET \n /bakiye \n  \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama \n \n BakiyeBilgileri(birden ok hesap) \n \n \n 3.5 \n islemler \n GET \n /hesaplar/{hspRef}/ilemler \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama Filtreleme \n \n IslemBilgileri (tek hesap) \n \n \n \n Tablo 11: Hesap Bilgisi Hizmeti in Eriim Adresleri \n ADIM 0: HK'nn hesap bilgilerine eriim iin talepte bulunmas: \n HK, HBHS uygulamasnda (web arayz/mobil uygulama) hesap bilgilerine eriim iin talepte bulunur. \n 7.1 ADIM 1: Hesap Bilgisi Rzasnn Hazrlanmas \n Bu API ars HBHS'nin HHS'de yeni bir HesapBilgisiRizasi nesnesi oluturmasn ve nesneye erimek iin benzersiz bir rza numaras ({RizaNo}) dnlmesini salar. \n API arsnn baaryla sonulanmas iin HBHS'nin istemci kimlik bilgileri yetkisi kullanmas yeterlidir.\nBaaryla oluturulan hesap bilgisi rza kaynann rza durumu Yetki Bekleniyor olarak dzenlenir.\nHK daha nce ald rzaya ilikin eriim tarihleri, izin trlerini ve hesap bilgilerini gncellemek isterse, HBHS nce HHS nezdindeki rzay iptal etmeli ve sonrasnda yeni bir rza talebinde bulunmaldr.\n \n \n ekil 11: Hesap Bilgisi Mteri Rzasnn Hazrlanmas \n \n POST /hesap-bilgisi-rizasi isteinin (REQUEST) gvdesinde (BODY)  HesapBilgisiRizasIstegi nesnesi (Tablo-12) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda HesapBilgisiRizasi (Tablo-13) nesnesi oluturulur. \n  POST /hesap-bilgisi-rizasi \n Baarl stek: \n STEK: \n HBHS, bu API eriim adresinden HHSye yeni bir HesapBilgisiRizasi oluturulmas iin istekte bulunur: \n \n HBHS, HKnn hesap bilgilerine ynelik rza balatma istei olduunu HHSye bildirir. \n HBHS, HKnn, HBHS arayznden verdii rzann (n Onay) bir kopyasnn HHS nezdinde mteri tarafndan onaylanmas iin HHSye gnderilmesini salar. \n HHS; istek mesajnda yer alan alanlarn API dkmannda belirtilen artlar salayacak ekilde zorunluluk ve uzunluk kontrollerini yapar. (Zorunlu) \n HHS; YS API ile alnan HBHS bilgilerinin ierisinde yer alan ynlendirme ve bildirim adresleri ile deme emri rzas nesnesi request mesajnda paylalan adreslerin uyumlu olup olmadnn kontrollerini yapar. (Zorunlu) \n HHS; kimlik bilgileri nesnesinde iletilen kimlik bilgileri ile HKnn HHS mterisi olup olmadnn kontrollerini yapar. Bu kontrol hem bireysel hem de kurumsal HKlar iin yaplmaldr.  (Zorunlu) \n Eriimin Geerli Olduu Son Tarih, lem Sorgulama Balang Zaman, lem Sorgulama Biti Zaman alanlar ile ilgili Tablo 12de belirtilen kontroller yaplmaldr. (Zorunlu) \n HHS, benzersiz RizaNo ile HesapBilgisiRizasi nesnesi oluturur ve HBHSye dner. \n HHS, HesapBilgisiRizasi oluturduu anda durumunu Yetki Bekleniyor olarak dzenler. \n \n Eriimin Geerli Olduu Son Tarih, lem Sorgulama Balang Zaman, lem Sorgulama Biti Zaman alanlarnda zaman aralklar mteri deneyimi penceresinden deerlendirilerek ay cinsinden belirtilmitir. Bu konuda aadaki gibi oluabilecek u rneklere dikkat edilmesi gerekmektedir. \n Bugn : 31.08.2019 \nBugn + 6 Ay : 29.02.2020 \nBugn : 30.08.2020 \nBugn + 6 Ay : 28.02.2021 \n Tablo 12: HesapBilgisiRizasiIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder. Hata durumunda TR.OHVPS.Connection.InvalidASPSP hata kodunu dner. \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda TR.OHVPS.Connection.InvalidTPP hata kodunu dner. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n >Yetkilendirme Yntemi \n yetYntm \n AN1 \n  \n TR.OHVPS.DataCode.GkdTur sral veri tr deerlerinden birini alr.   Yetkilendirme yntemi, HBHS tarafndan belirtilmeyebilir. \n HHS, HBHSnin belirledii yntemi dikkate alarak kendi belirledii yntemi kullanr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunludur.  YS Ynlendirmeli GKD yntemi ile ak destekliyorsa, yetYntm deikeninden bamsz olarak ynlendirme adresini iletmelidir. Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, mteri uygulama / taraycsn bu alanda belirtilen adrese ynlendirir. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunludur.  YS Ayrk GKD yntemi ile ak destekliyorsa, yetYntm deikeninden bamsz olarak bildirim adresini iletmelidir.  Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, ayrk GKD sonras bu alanda belirtilen adrese otorizasyon kodunu (authentication code) iletir. \n \n \n Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n > Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur sral veri tr deerlerinden birini alr.   Kurum adna yaplan(ticari) ilemlerde kurum kullancsnn bilgisi iletilmelidir. \n \n \n \n > Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr.   TR.OHVPS.DataCode.KimlikTur deerine gre uzunluk ve format deiir.   Kurum adna yaplan(ticari) ilemlerde kurum kullancsnn bilgisi iletilmelidir. \n \n \n \n > Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr.  TR.OHVPS.DataCode.KurumKimlikTur sral veri tr deerlerinden birini alr. \n \n \n \n > Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.  TR.OHVPS.DataCode.KurumKimlikTur deerine gre uzunluk ve format deiir. \n \n \n \n > deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur sral veri tr deerlerinden birini alr (B: Bireysel, K:Kurumsal) \n \n \n \n Hesap Bilgisi \n hspBlg \n Kompleks: HesapBilgisi \n Z \n \n \n \n \n >zin Bilgisi \n iznBlg \n Kompleks: IzinBilgisi \n Z \n \n \n \n \n >> zin Tr \n iznTur \n Array[AN2] \n Z \n HK tarafndan HHS nyznde belirlenen izin tipleridir. Bir istekte birden fazla deer bulunabilir, TR.OHVPS.DataCode.IzinTur sral veri tr deerlerinden birini alr. \n \n \n \n >> Eriimin Geerli Olduu Son Tarih \n erisimIzniSonTrh \n ISODateTime \n Z \n Hesap bilgisi rzasnn geerli olduu son tarih.   Mteri YS ekranndan bu deeri belirleyebilir.   Varsaylan deer : Rza verilen tarih + 6 ay   Alabilecei maksimum deer : Rza tarihi + 6 ay    Alabilecei minimum deer : Rza tarihi + 1 gn   rnein 23/09/2021de minimum 24/09/2021 seilebilir. Bu durumda izin 24/09/2021 23:59:59da bitecek ekilde olmaldr. \n Bu alanda bir deer bulunmad durumda HHS hata dnmelidir. \n \n \n >> lem Sorgulama Balang Zaman \n hesapIslemBslZmn \n ISODateTime \n K \n Hesap bilgisi rzas verilmesinden gemie dnk en fazla 12 ay olabilir, daha eski olmamas gerekir.   Varsaylan deeri rza verilen tarih (ilem zaman)  12 aydr.   HK bu alana bir deer girii salamam ise BHS varsaylan deerlerle bu alan doldurarak, HHSye iletir.   Minimum tarihi : Rzann verili tarihi  - 12 ay    Maksimum tarih: Rzann verili tarihi +  12 ay    zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur.  zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ise gnderilmemelidir. \n HK tarafndan izin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ve  lem Sorgulama Balang Zaman BHS tarafndan dolu olarak gnderilmi ise HHS tarafndan ilemin devamna izin verilmez. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmi ise; HHS bu alann alabilecei minimum ve maksimum deerlerin snrlar ierisinde olduunu kontrol eder. \n \n \n >> lem Sorgulama Biti Zaman \n hesapIslemBtsZmn \n ISODateTime \n K \n Hesap bilgisi rzas verilmesinden gelecee dnk en fazla 12 ay sonras olabilir, daha ileri bir tarih olmamas gerekir.   Varsaylan deeri: Rza verilen tarih + 12 aydr.  HK bu alana bir deer girii salamam ise BHS varsaylan deerlerle bu alan doldurarak, HHSye iletir.  Minimum tarihi : Rzann verili tarihi   12 ay  Maksimum tarihi :  Rzann verili tarihi + 12 ay   zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur.  zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ise gnderilmemelidir. Eer dolu gnderilirse HHS tarafndan uygun hata mesaj iletilmelidir. \n HK tarafndan izin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ve lem Sorgulama Biti Zaman BHS tarafndan dolu olarak gnderilmi ise HHS tarafndan ilemin devamna izin verilmez.   zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmi ise; HHS bu alann alabilecei minimum ve maksimum deerlerin snrlar ierisinde olduunu kontrol eder. \n Baarl Yant: \n Tablo 13: HesapBilgisiRizasi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n HesapBilgisiRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n HesapBilgisiRzas nesnesinin oluturulma zaman \n \n \n > Gncellenme Zaman \n gnclZmn \n ISODateTime \n Z \n HesapBilgisiRzas nesnesinin gncellenme zaman \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu sral veri tipini deerlerinden birini alr. rn; hesap bilgi rzasnn tesisine dair ilk istek mesajna dnte B: Yetki Bekleniyor deerini almas beklenir. \n \n \n > Rza Iptal Detay Kodu \n rizaIptDtyKod \n AN2 \n K \n Rza durumunun iptal olduu durumda zorunludur. \n \n \n Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n > Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur sral veri tr deerlerinden birini alr. \n \n \n > Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur deerine gre uzunluk ve format deiir. \n \n \n > Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr.  TR.OHVPS.DataCode.KurumKimlikTur sral veri tr deerlerinden birini alr. \n \n \n > Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.  TR.OHVPS.DataCode.KurumKimlikTur deerine gre uzunluk ve format deiir. \n \n \n > deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur sral veri tr deerlerinden birini alr (B: Bireysel, K:Kurumsal) \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n K \n HHS, HBHSnin belirledii yntemi dikkate alarak kendi belirledii yntemi kullanr.  TR.OHVPS.DataCode.GkdTur sral veri tr deerlerinden birini alr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n HHS, mteri uygulama / taraycsn bu alanda belirtilen YS adresine ynlendirir. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n HHS, ayrk GKD sonras bu alanda belirtilen YS adresine otorizasyon kodunu (authentication code) iletir. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi. \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.  HHS tarafndan maksimum 5 dk iinde ilem tamamlanacak ekil zaman damgas oluturulur. Zaman am olduunda HHSnin GKDye izin vermeyecek ekilde hata mesaj vermesi gerekmektedir. Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n Hesap Bilgisi \n hspBlg \n Kompleks: HesapBilgisi \n Z \n \n \n \n > zin Bilgisi \n iznBlg \n Kompleks: IzinBilgisi \n Z \n \n \n \n >> zin Tr \n iznTur \n Array[AN2] \n Z \n HK tarafndan HBHS nyznde belirlenen izin tipleridir. Bir istekte birden fazla deer bulunabilir, TR.OHVPS.DataCode.IzinTur sral veri tr deerlerinden birini alr. \n \n \n >> Eriimin Geerli Olduu Son Tarih \n erisimIzniSonTrh \n ISODateTime \n Z \n Hesap bilgisi rzasnn geerli olduu son tarih \n \n \n >> lem Sorgulama Balang Zaman \n hesapIslemBslZmn \n ISODateTime \n K \n Hesap hareketlerinin sorgunabilecei balang zaman. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur. \n \n \n >> lem Sorgulama Biti Zaman \n hesapIslemBtsZmn \n ISODateTime \n K \n Hesap hareketlerinin sorgunabilecei biti zaman. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur. \n \n \n > Ayrnt Bilgi \n ayrBlg \n Kompleks: AyrintiBilgi \n  \n \n \n \n > HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n zinler \n Bir hesap bilgisi mteri rzas kayna arsna yant olarak dndrlen verileri snrlamak iin izin kodlar kullanlr: \n \n Temel Hesap Bilgisi \n Ayrntl Hesap Bilgisi \n Bakiye Bilgisi \n Temel lem (Hesap Hareketleri) Bilgisi \n Ayrntl lem Bilgisi \n \n HKya sunulacak seimler ve kurallar aadaki gibi olmaldr. \n \n \n \n Seim \n Kural \n \n \n \n \n Temel Hesap Bilgisi \n HK seimine sunulmamaldr. Deitirilemez ekilde seili gsterilmelidir. \n \n \n Ayrntl Hesap Bilgisi \n HK seim yapabilir. \n \n \n Bakiye Bilgisi \n HK seim yapabilir. \n \n \n Temel lem (Hesap Hareketleri)  Bilgisi \n HK seim yapabilir. \n \n \n Ayrntl lem Bilgisi \n HK seim yapabilir. Ayrntl lem Bilgisi seimi Temel lem Bilgisi seimini kapsar. (Ayrntl lem bilgisi seildiinde Temel lem Bilgisi de seili olmaldr.) \n \n \n \n Aadaki durumlarda, izin kombinasyonlarna izin verilmez. HHS, bu hesap eriim onaylarn 400 (Hatal stek) yant koduyla reddetmelidir: \n \n zin dizisinin herhangi bir izin tr iermemesi durumu, \n zin dizisinde HHS tarafndan desteklenmeyen bir izin kodunun yer almas durumu \n 7.2 ADIM 2: Hesap Bilgisi Hizmeti Rzasnn Tesisi \n \n \n ekil 12: Hesap Bilgisi HK Rzasnn Tesisi \n Rza tesisinin baaryla sonulanmas iin HBHS'nin istemci kimlik bilgileri yetkisi kullanmas ve ardndan mterinin HHS tarafndan ynlendirmeli veya ayrk GKD ile dorulanmas gerekir. HHS'de oluturulan ve rza durumu Yetki Bekleniyor olan bir hesap bilgisi rzas, GKD sonras Yetkilendirildi statsne gncellenir. HBHS, eriim salayaca hesaplar hesap bilgisi rzasnn tesisinden nce seer. \n \n \n Ynlendirmeli dorulama aknda, HBHS HKy HHSye ynlendirir. \n \n \n HBHS tarafndan ynlendirme, bir nceki admdaki RizaNoyu ierir. \n \n \n HHS, HK iin GKD srecini iletir. \n HKy dorularsa, \n \n \n HK HBHS zerinden ilem yaplmasna izin verecei hesap seimini yapar. HBHS zerinden HKnn verdii izin bilgilerini ve eriim izninin biti tarihi bilgilerini, HHS bilgilendirme amal HKya gsterir. \n \n \n HHS hesap bilgisiri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n HHS, HKy olumlu ynlendirme ak ile HBHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=Y&yetKod=xx&rizaNo=yy&rizaTip=H&drmKod=zzz\n \n \n \n HKy dorulayamazsa, \n \n \n HHS, hesap bilgisi rza kaynann durumunu Yetki ptal olarak gnceller. \n \n \n HHS, HKy olumsuz ynlendirme ak ile HBHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=I &rizaNo=yy&rizaTip=H&rizaIptDtyKod=11&drmKod=zzz\n \n \n \n \n \n \n \n Ayrk dorulama aknda, HHS, HKnn hesap bilgisi hizmetini balatt uygulamadan farkl olabilecek bir dorulama uygulamasnda ilemi dorulamasn ister. \n \n Ayrk ak HBHSnin farkl bir kanal kullanarak yetkilendirme istei gndermesiyle balatlr. \n Bu yetkilendirme istei, yetkilendirilecek hesap bilgisi rzasnn eletirilecei HKnn bulunmas iin ilgili veriyi tar. \n HHS, deme hizmeti kullancsn dorular. \n HK verdii izin tipi dahilinde bilgileri paylalacak olan hesaplar seer. \n HHS, hesap bilgisi rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n \n Baarl GKD sonrasnda (rizaDrm=Y) ilgili rza nesnesi iin (belirli bir rizaNo) yetkilendirme kodunun (yetKod) alnmasnn ardndan eriim belirteci eriim adresine POST ars yaplarak yetkilendirme kodu karlnda eriim belirteci ve yenileme belirteci alnr. POST /eriim-belirteci eriim noktas EK-3te aklanmtr. \n Eriim belirteci alndktan sonra; HHS,  hesap bilgisi rzasnn durumunu Yetki Kullanld olarak gnceller. Rza tesisi salanm olur. \n 7.3 ADIM 2.1: Hesap Bilgisi Rzasnn Sorgulanmas (stee Bal) \n GET /hesap-bilgisi-rizasi/{RizaNo} \n HK, HHS zerinden rza iptali yapm olabilir veya HKnn verdii rza sresi dolmu olabilir.  Bu durumlarda HBHS, rza alma akna balamadan nce, daha nce oluturulmu bir HesapBilgisiRizasi kaynann durumunu, istee bal olarak alabilir. \n Servis baarl yantnda Tablo 13de belirtilen HesapBilgisiRizasi nesnesini dnmektedir. \n Durum \nHesapBilgisiRizasi kayna iin kullanlabilecek durum gstergeleri u ekildedir: \n \n Yetki Bekleniyor \n Yetkilendirildi \n Yetki Kullanld \n Yetki Sonlandrld \n Yetki ptal \n 7.4 ADIM 2.2: Hesap Bilgisi Rzasnn ptali \n \n \n \n ekil 13: Hesap Bilgisi Mteri Rzasnn Geri Alnmas \n DELETE /hesap-bilgisi-rizasi/{RizaNo} \n DELETE /hesap-bilgisi-rizasi ars, bir HBHS'nin nceden oluturulmu bir hesap eriim rzasn (yetkili olsun veya olmasn) silmesine izin verir. Mteri, rzasn HHS zerinden iptal etmek yerine, HBHS zerinden bu rzasn kaldrmak isteyebilir. \nBu API ars, mterinin HBHS zerinden hesap bilgisi rzasn iptal etmesine ve HHS nezdindeki hesap bilgisi rzas nesnesinin silinmesini salar. \nMterinin HBHSnin veri eriim iznini iptal etmesi durumunda HBHS, HHSde mevcut olan HesapBilgisiRizasi kaynan pratik olarak mmkn olan en ksa srede silmelidir. Bu ise, ilgili kaynaa \n DELETE /hesap-bilgisi-rizasi/{RizaNo} \nars aracl ile yerine getirilir. HBHS ayrca, sisteminden Hesap Eriim zni kaynaklarn da temizlemelidir. \nSz konusu silme ilemi, kaytlarn statsnn pasife ekilmesi ile gerekletirilmelidir. Sz konusu kaytlar, denetim izlerinin oluturulmas ve saklanmasna ilikin ikincil dzenleme hkmleri kapsamnda gvenli ekilde tutulmaldr. \nServis istek parametresi olarak sadece pathde iletilen Rza No bilgisine ihtiya duymaktadr. \nHK rzas baar ile silindiinde HTTP 204 response kodu ile ilem sonucu iletilir. Rza tipi I yani Yetki ptal olarak gncellenir ve gnclZmn zaman damgas vurularak gncellenir. \nHK ile rza iptali srasnda kurulacak iletiimde (e-posta, sms gibi) aadaki alanlarn iletilmesi tavsiye edilmektedir: \nYS Ad, HHS ad, Rza Oluturma Zaman, Servis Tipi Bilgisi (HBHS) \n 7.5 ADIM 3: Hesap Bilgilerinin Alnmas \n    \n \n   \n ekil 14: Hesap Bilgilerinin Alnmas \n STEK: \nMteri rzas tesis edilmi kullanc iin HBHS API eriim adresinden HHSye eriilebilir hesap bilgilerini GET istei ile sorgular: \n \n RizaDurumu Yetki Kullanld ise ileme balanr. RizaDurumu farkl bir deerde ise TR.OHVPS.Resource.ConsentMismatch hatasnn iletilmesi gerekir. \n GET verisinin modele gre kontrol yaplr (rnein: Alan kontrolleri) \n \n GET verisinin mantksal kontrolleri yaplr. \n 7.6 ADIM 3.1 ve 3.2: Hesap Bilgilerinin Sorgulanmas \n GET /hesaplar ve GET /hesaplar/{hspRef} \n Bu eriim noktalarndan tm hesaplarn veya belirli bir hesabn bilgilerinin sorgulanr. Hesap bilgisi iin daha nce tanmlanm izin trne gre (Temel Hesap Bilgisi veya Detayl Hesap Bilgisi) yantnda dnlen HesapBilgileri nesnesinin ierii deiir.  Tablo 15te HesapBilgileri nesnesinin ierii verilmitir. \n Hesap Bilgisi Sorgu rnei (Tm Hesaplar) =  /hesaplar \nHesap Bilgisi Sorgu rnei (Belirli Bir Hesap) =  /hesaplar/{hspRef} \nlem Sorgu rnei (Belirli Bir Hesap) =  /hesaplar?\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= hspRef &\nsrlmYon=A \n Tablo 14: Hesap Bilgileri Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numaras \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek kaytlarn sralama kriterini belirtir. Alabilecei deerler: { hspRef} \n Bu veri gnderildii durumda, HHS listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini hspRef olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler:  A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 15: HesapBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Rza No \n rizaNo \n AN1..128 \n Z \n HesapBilgisiRzas nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n Hesap Temel \n hspTml \n Kompleks: HesapTemel \n Z \n Temel Hesap Bilgileri (Temel Hesap Bilgisi varsaylan izin tr olduundan Hesap Temel nesnesi zorunlu olarak yantta bulunur) \n \n \n > Hesap Referans \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n > Hesap Numaras \n hspNo \n AN26 \n K \n Eer varsa deme hesabna ait IBAN bilgisi \n \n \n > Hesap Sahibi Unvan \n hspShb \n AN3..140 \n Z \n Hesap sahibi ya da hesap sahiplerinin ad-soyad, ticari unvan \n \n \n > ube Ad \n subeAdi \n AN3..50 \n K \n Eer varsa deme hesabnn bal olduu ubenin ad \n \n \n > Ksa Ad \n kisaAd \n AN3..50 \n K \n Eer hesap sahibi hesaba ait bir ad tanmladysa, tanmlanan hesap ad \n \n \n > Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi. \n \n \n > Hesap Tr \n hspTur \n AN1 \n Z \n Hesabn tr (bireysel veya ticari). TR.OHVPS.DataCode.HspTur srali veri deerlerinden birini alr. \n \n \n > Hesap Tipi \n hspTip \n AN1..32 \n Z \n Hesabn tipi (VADESZ, KREDL vb.).TR.OHVPS.DataCode.HspTip sral veri deerlerinden birini alr. \n \n \n >Hesap rn Ad \n hspUrunAdi \n AN1..140 \n  \n HHS tarafndan atanm olan rn ad bilgisidir. HBHS tarafndan HKya gsterilmesi kullanm kolayl salayacaktr. \n \n \n > Hesap Durumu \n hspDrm \n AN5..50 \n Z \n Hesabn durumunu belirtir. TR.OHVPS.DataCode.HspDrm sral veri trlerinden birini alr. \n \n \n Hesap Detay \n hspDty \n Kompleks: HesapDetay \n K \n Detay Hesap Bilgileri (Temel Hesap Bilgisine ek olarak Detay Hesap Bilgisi izin tr de seilmise Hesap Detay nesnesi koullu olarak yantta bulunur) \n \n \n > Al Tarihi \n hspAclsTrh \n ISODateTime \n Z \n Belirtilen hesabn al tarihi. \n 7.7 ADIM 3.3 ve 3.4: Hesap Bakiyesinin Sorgulanmas \n GET /bakiye ve GET /hesaplar/{hspRef}/bakiye \nBu eriim noktalarndan tm hesaplarn veya belirli bir hesabn bakiyesi sorgulanr. \nstek arsna dnlen BakiyeBilgileri nesnesi Tablo 17de verilmitir. \nlem Sorgu rnei (Belirli Bir Hesap)=  /bakiye?\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= hspRef &\nsrlmYon=A \n Tablo 16: BakiyeBilgileri Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numarasi \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek kaytlarn sralama kriterini belirtir. Alabilecei deerler: { hspRef} \n Bu veri gnderildii durumda, HHS listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini hspRef olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler:  A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 17: BakiyeBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Hesap Referans \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n Bakiye \n bky \n Kompleks:Bakiye \n Z \n \n \n \n > Hesap Bakiye Tutar \n bkyTtr \n N1..18 \n Z \n Hesabn bakiyesi.  rnein 1,20 TRY iin tutar alannda 120 deeri iletilir \n \n \n > Blokeli Tutar \n blkTtr \n N1..18 \n K \n Varsa hesapta blokeli tutar bilgisi.  rnein 1,20 TRY iin tutar alannda 120 deeri iletilir \n \n \n > Para Birimi \n prBrm \n AN3 \n Z \n Para birimi. \n \n \n > Bakiye letilme Zaman \n bkyZmn \n ISODateTime \n Z \n Bakiyenin iletildii zaman bilgisi. \n \n \n > KrediliHesap \n krdHsp \n Kompleks: KrediliHesap \n K \n \n \n \n >> Kredili Mevduat Hesab Bakiyesi \n kulKrdTtr \n N1..18 \n Z \n Kullanlabilir kredili mevduat tutar. Kredili bir hesap ise zorunlu. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir \n \n \n >> Kredi Dahil Gstergesi \n krdDhlGstr \n AN1 \n Z \n Kredili bir hesap ise zorunlu. Bakiye tutarnn kullanlabilir kredi tutar dahil edilerek ya da edilmeden iletildiini gsterir.  0: Kredi tutar dahil edilmeden bakiye bilgisi iletilmesi durumu 1: Kredi tutar dahil edilerek bakiye bilgisi iletilmesi durumu \n 7.8 ADIM 3.5 ve 3.6: lemlerin Sorgulanmas \n GET /hesaplar/{hspRef}/islemler \n Belirli bir hesaba ilikin ilem bilgileri Tablo 1daki istek parametrelerine gre sorgulanr. \nlem bilgisi iin daha nce tanmlanm izin trne gre yantta dnen IslemBilgileri nesnesinin (Temel lem Bilgisi veya Temel lem Bilgisi ve Detayl lem Bilgisi) ierii deiir. \nlemler servisi hem HKnn talebi ile YS uygulamas zerinden arlabilecei gibi, YSn HKsz balatabilecei otomatik arlar ile de yant dnebilmektedir. \nHHS, ilemin sistemsel yaplp yaplmadn, istek parametreleri ierisinde yer alan PSU-Initiated parametresi ile anlar. Bu parametre E ise HKl, H ise sistemsel yaplm bir sorgu anlamna gelmektedir.\nHKnn balatt sorgular iin HHS tarafndan belirlenen st rate limitler dahilinde arm yaplabilir. \nYS, otomatik yapaca sorgularda; \n \n Bireysel HKlar iin hesap baznda gnde en fazla 4 adet sorgulama yapabilir. \n Kurumsal HKlar iin hesap baznda saatte en fazla 12 adet sorgulama yapabilir. \n \n HHS, tutaca saya bilgisi ile bu saylar kontrol ederek daha fazla sorgulama yaplmasna izin vermeyebilir. \n Ayn istek parametreleri ile yaplan sorgu sonucunda dnecek toplam kayt says 100 atnda, sayfalama yntemi ile HHSnin cevap dnmesi beklenmektedir.  Her bir sayfa iin ilemler servisi tekrar arlsa da, bu arm HHSnin tuttuu saya deerini arttrmaz. HHSnin tutaca sayan kontrol parametreleri YS kodu, hesap numaras ya da referans olmaldr. Sayfa no parametresi varsa ve 1'den byk ise ilem sayacn arttrmamaldr. \n HKnn YS uygulamas zerinden tetikledii ilemlerde ise;\nbireysel HKlar  iin en fazla 1 aylk,\nkurumsal HKlar iin ise en fazla 1 haftalk bir pencere aralnda sorgulama yaplabilir. \n YS, otomatik yapaca sorgularda hem bireysel hem de kurumsal HKlar iin 24 saatlik bir pencere aralnda sorgulama yapabilir. \n lem Sorgu rnei (Belirli Bir Hesap)=  /hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2020-06-01T00:00:00+03:00&\nhesapIslemBtsTrh=2020-06-02T23:59:59+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A \n Tablo 18: lem Listesi Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n lem Sorgulama Balang Zaman \n hesapIslemBslTrh \n ISODateTime \n Z \n Sorgulanacak ilemlerin balang tarihi. \n HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. HK tarafndan tetiklenen sorgularda;hesapIslemBslTrh ve hesapIslemBtsTrh aras fark bireysel HKlar iin en fazla 1 ay,kurumsal HKlar iin ise en fazla 1 hafta olabilir. YS tarafndan sistemsel yaplan sorgulamalarda hem bireysel, hem de kurumsal HKlar iin;son 24 saat sorgulanabilir. Bu yzden hesapIslemBtsTrh-24 saatten daha uzun bir aralk sorgulanamaz olmaldr. stek balnda yer alan PSU-Initiated alan E ise HKl, H ise sistemsel yaplm bir sorgu anlamna gelmektedir. \n \n \n lem Sorgulama Biti Zaman \n hesapIslemBtsTrh \n ISODateTime \n Z \n Sorgulanacak ilemlerin biti tarihi. \n HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. YS tarafndan sistemsel yaplan sorgulamalarda hem bireysel, hem de kurumsal HKlar iin;leri vadeli ilem emirleri dahil olmad iin; lem Sorgulama Biti Zaman, her zaman, sorgulama zaman damgasn iletecek ekilde (datetime (now)) iletilmelidir. \n \n \n En Dk lem Tutar \n minIslTtr \n N1..18 \n  \n Sorgulanacak ilemlerin alabilecei en dk ilem tutar.rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n En Yksek lem Tutar \n mksIslTtr \n N1..18 \n  \n Sorgulanacak ilemlerin alabilecei en yksek ilem tutar.rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n Bor Alacak Gstergesi \n brcAlc \n AN1 \n  \n TR.OHVPS.DataCode.BrcAlc sral veri tipi deerlerinden birini alr. Sorgulanacak ilemlerin bor / alacak kriteri B: Hesaba bor yaratan ilem.A: Hesaba alacak yaratan ilem.{B,A} \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS ilemler listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numarasi \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek ilemlerin sralama kriterini belirtir. Alabilecei deerler: {islGrckZaman} \n Bu veri gnderildii durumda, HHS ilemler listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini islGrckZaman olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler: A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS ilemler listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 19: IslemBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Hesap Referans Numaras \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n Islemler \n isller \n Kompleks:Islem[Array] \n K \n Hesaba ilikin hareketler varsa lemler nesnesi dizisi olarak dnlr. lemler nesnesi Temel lem Bilgileri ve Detay lem Bilgileri nesnesinden meydana gelir. zin tr varsaylan olarak Temel lem Bilgilerini ierir. Detay lem Bilgileri izin tr de seildi ise Temel lem Bilgilerine ek olarak Detay lem Bilgileri de gnderilir. \n \n \n > Temel lem Bilgileri \n islTml \n Kompleks:IslemTemel \n Z \n Temel lem Bilgileri varsaylan olarak dnlr. \n \n \n >> lem Numaras \n islNo \n AN3..50 \n Z \n Hesap hareketinin oluturulmas srasnda atanan ve bor (veya alacak) hareketini tekilletiren HHS baznda tekil tanmlaycdr. Bu deer tek bana tekil olabilecei gibi birden fazla deerin bir araya getirilmesiyle de tekillii salanm olabilir. Bu deerin en azndan hesap numaras (hesNo) baznda tekil olmas beklenir. Genellikle kullanlan rnekleri; Instance_Id, Transaction_Id, Transaction_Num, Transaction_TimeStamp,dekont numaras \n \n \n >> lem Referans Numaras \n refNo \n AN3..50 \n Z \n lemi utan uca tanmlayan tekil tanmlaycdr. Bor ve alacak hareketinden oluan bir veya birden fazla ilemler btn iin atanm olan ve bu btn tekilletiren (bir biri ile ilikisini tutan) deerdir.Bu deer hem YSten gelen deer olabilir (deme ilemlerinde kullanlan kkodRef ya da refBlg alan) hem de HHS iinde takip edilmek iin retilmi bir deer olabilir. HHS sisteminde 2 deerin de bulunmas durumunda;refNo alann doldurmak iin, HHSnin YSten gelen deere ncelik vermesi beklenmektedir. YSten gelen veri rnei: Sipari Numaras, Fatura Numaras, Karekod Referans vb. HHSte retilen veri rnei: Masrafl havale ileminde hem havale ileminin hem de masraf ileminin ayn referans numarasna sahip olmas da rnek olarak gsterilebilir. \n \n \n >> lem Tutar \n islTtr \n N1..18 \n Z \n lem tutar. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi. \n \n \n >> lem Gerekleme Zaman \n islGrckZaman \n ISODateTime \n Z \n lemin gerekleme zaman. \n \n \n >> lem Kanal \n kanal \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeKaynak sral veri tr deerlerinden birini alr. \n \n \n >> Borlandrma Alacaklandrma Gstergesi \n brcAlc \n AN1 \n Z \n TR.OHVPS.DataCode.BrcAlc sral veri tr deerlerinden birini alr. lemin hesab bor ya da alacaklandrd bilgisidir. \n \n \n >> lem Tr \n islTur \n AN3..50 \n Z \n HHSnin ileme ait ilikilendirdii ilem tr deeri. TR.OHVPS.DataCode.IslemTuru sral veri tr deerlerinden birini alr. \n \n \n >> lem Amac \n islAmc \n AN2 \n Z \n TR.OHVPS.DataCode.IslemAmaci srali veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n \n \n >> deme Sistemi No \n odmStmNo \n AN10..50 \n K \n deme baarl balatldysa, demenin balatld sistemdeki referans numaras. FAST ilemleri iin MesRefBlg deeri atanr. deme Hizmeti kullancsna ilemin takibi iin gsterilebilir. \n \n \n > Detay lem Bilgileri \n islDty \n Kompleks: IslemDetay \n K \n Detay lem Bilgileri dizi olarak gnderilmelidir. \n \n \n >> lem Aklamas \n islAcklm \n AN1..150 \n Z \n HHS tarafndan atanan ilem aklamas.HHS kendi ilem hareketlerine yanstt aklamay buraya yanstmaldr. \n \n \n >> Kar Taraf \n krsTrf \n Kompleks:  KarsiTaraf \n K \n Kullanm ilem baznda deimektedir. rnek: FAST ileminde kar taraf alcnn bilgileridir. Vergi demesinde kurum IBAN bilgisi mteriye gsterilemeyebileceinden bu alann bo gelmesi HHS insiyatifindedir. \n \n \n >>> Kar Maskeli IBAN \n krsMskIBAN \n AN26 \n K \n lgili hesap hareketinin kar tarafnn maskeli IBAN bilgisi. \n \n \n >>> Kar Maskeli Unvan \n krsMskUnvan \n AN3..140 \n K \n lgili hesap hareketinin kar tarafnn maskeli ad-soyad ya da ticari unvan bilgisi. \n 7.9\tHealthcheck API \n GET /health \n HHSlerin sunaca bu servis, dzenli olarak BKM tarafndan arlarak servislerin ayakta olup olmadklarnn kontrolnn salanmas planlanmaktadr \n Baarl yantta Http 200 kodu dnlmelidir. \n Baarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir \n \n \n \n"},{title:"HHS ve YS API",frontmatter:{},regularPath:"/v1.0.1/contents/hhs-yos-api.html",relativePath:"v1.0.1/contents/hhs-yos-api.md",key:"v-4888cd9d",path:"/v1.0.1/contents/hhs-yos-api.html",headers:[{level:2,title:"HHS API",slug:"hhs-api"},{level:2,title:"YOS API",slug:"yos-api"},{level:2,title:"Healthcheck API",slug:"healthcheck-api"}],content:' HHS ve YS API \n HHS API, HHSlerin detay bilgilerini sunan servistir. Bu servis ile aadaki istek/yant yaplar ile ihtiya duyulabilecek ilgili bilgiler temin edilebilir. HHS API iin hhs_read scope bilgisi kullanlr. \n Production ortamnda HHS / YOS API ierisinde sisteme dahil olmu, sertifikasyonu baar ile tamamlam paydalar listelenecektir. HHS tarafndan desteklenen API srmleri listelenecektir. \n YSler HHS APIsini sorgulayabilir ancak YS APIsini sorgulayamazlar. \nBenzer ekilde HHSler YS APIsini sorgulayabilir, HHS APIsini sorgulayamazlar. \n HHS API \n GET /hhs/{hhsKod} \n lem Sorgu rnei =  /hhs    bu sorgu yntemi ile tm HHSlerin dizi eklinde verileri listelenir. \nlem Sorgu rnei =  /hhs/2001    bu sorgu yntemi ile gnderilmi olan hhsKoduna ait bilgiler listelenir. Ya da 404 Not Found hatas alr. \nHHS ve YS API Tablo 20deki istek parametrelerine gre sorgulanabilir. \nlem Sorgu rnei (Belirli Bir Hesap) =  /hhs?srlmKrtr=kod&srlmYon=A \n Tablo 20: HHS ve YS API Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek ilemlerin sralama kriterini belirtir. Alabilecei deerler: {kod, unv} \n Bu veri gnderildii durumda, HHS ilemler listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, sralama kriteri unv olarak belirlenmelidir. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler: A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS ilemler listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 21: HHS Bilgileri Sorgulama Yant Hhs nesnesi \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n hhs kodu \n kod \n AN4 \n Z \n HHS nin kod bilgisi \n \n \n hhs unvan \n unv \n AN3..140 \n Z \n HHS nin unvan bilgisi \n \n \n hhs markas \n marka \n AN1..140 \n Z \n HK\'nn kolaylkla alglayabilecei ksa unvan bilgisi. HHS tarafndan belirlenecektir. \n \n \n Ak anahtar \n acikAnahtar \n AN1..1024 \n Z \n HHSnin mesaj imzalama iin paylat ak anahtar \n \n \n HHS Api Bilgileri \n apiBilgileri \n Kompleks: HhsApiBilgi[Array][0..N] \n Z \n Desteklenen Api ve srm bilgileri dnlecektir. \n \n \n > api \n api \n AN1..20 \n Z \n Api smi rnek :obh, hbh,gkd \n \n \n > surum \n surum \n AN1..10 \n Z \n Api Srm Kodu rnek: s1.0, s2.0 s1.0 \n \n \n Logo Bilgileri \n logoBilgileri \n Kompleks: LogoBilgisi [Array][1..N] \n Z \n HHSye ait logo bilgileri. Logotur = Original  formatndaki logonun minimumda gnderimi zorunludur. \n \n \n >logoTur \n logoTur \n AN3..50 \n Z \n Logonun trn belirler. TR.OHVPS.DataCode.LogoTur alabilecei deerler  ORIGINAL , WHITE_OVERLAY , BLACK_OVERLAY , GRAY_OVERLAY \n \n \n > logoAdr \n logoAdr \n AN1..255 \n Z \n HHS tarafnda tutulan ve YSlerle paylalacak olan url adres bilgisidir. \n \n \n \n Hem YOS hem de HHS API iin geerli olacak; logo gnderiminde dikkat edilmesi gerekenler u ekilde tariflenmitir: \n \n Logolarn ham dosya yerine kurumun yaynlayaca bir URL zerinden sunulmas gerekmektedir. (rn: logoURL  =  https://kurumadi.com.tr/logo.png) Logo BKM tarafnda host edilmeyecektir.) \n PNG formatnda (PNG-24) olmaldr. \n 72 DPI znrlkte olmaldr. \n 500 x 500 boyutlarnda, yatayda veya dikeyde tama paysz tam oturacak, snr boyutlarn gemeyecek ve ortalanm yerleime sahip olmaldr. \n Logo arka plan renkli olmamal, arka plan transparan olmaldr. \n YS uygulamasnda gsterim esnasnda logolarn hzl yklenmesi ve dk veri tketmesi asndan; logo boyutu 250 KBn altnda olmaldr. \n Drt adet logo tr belirlenmitir. Bu 4 tr iin de logo dnlmesi zorunludur. \n Logo urlin public eriilebilir url olmas gereklidir. \n \n YS API, YS statsundeki kurumlarn detay bilgilerini sunan servistir. Bu servis ile aadaki istek/yant yaplar ile ihtiya duyulabilecek ilgili bilgiler temin edilebilir. YS API iin yos_read scope bilgisi kullanlr. \n YS API yantnda, listelenen ynlendirme ve bildirim adresleri bulunmaktadr. HHS, ilem annda iletilen yonAdr ya da bldrAdr alanlarnda gnderilen adreslere yetKod deerini iletmelidir. YS API ierisinde yer alan adresleri, rza isteinde gnderilen adreslerin doruluunu kontrol etme amacyla kullanlmaldr. Bu nedenle YS API ierisinde listelenen adreslerin hostname seviyesinde yer almas yeterlidir. \n YOS API \n GET /yos/{yosKod} \n lem Sorgu rnei =  /yos    bu sorgu yntemi ile tm yos lerin dizi eklinde verileri listelenir. \n lem Sorgu rnei =  /yos/2501    bu sorgu yntemi ile gnderilmi olan yosKoduna ait bilgiler listelenir ya da 404 Not Found hatas alr.\nYS API Tablo 20deki istek parametrelerine gre sorgulanabilir.\nlem Sorgu rnei (Belirli Bir Hesap)=  /yos?srlmKrtr=kod&srlmYon=A \n Tablo 22: YOS Bilgileri Sorgulama Yant Yos nesnesi \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Ys kodu \n kod \n AN4 \n Z \n YS\'n kod bilgisi \n \n \n Ys unvan \n unv \n AN3..140 \n Z \n YS unvan bilgisi \n \n \n Ys markas \n marka \n AN1..140 \n Z \n HK\'nn kolaylkla alglayabilecei ksa unvan bilgisi. YS tarafndan belirlenecektir. \n \n \n YS rolleri \n roller \n Array[AN4] \n Z \n YSun rollerini belirten deer. rnek: [ "obhs", "hbhs" ]  - obhs - deme Bilgisi Hizmet Salayc Rol  - hbhs - Hesap Bilgisi Hizmet Salayc Rol \n \n \n Adresler \n adresler \n Kompleks:Adres[Array] [1..N] \n Z \n --- \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur sral veri tr deerlerlerinden birini alr. Adres detaylarnn hangi GKD trne ait olduunu belirtir. \n \n \n >Adres Detaylar \n adresDetaylari \n adresDetaylari\tKompleks: AdresDetayi[Array] [1..N] \n Z \n \n \n \n >>Temel Adres \n tmlAdr \n AN1..1024 \n Z \n yetYntm deeri Y olarak iletildiinde Ynlendirmeli GKD srecinde HHSnin YOSe authorizasyon kodunu hangi url e gnderecei bilgisini tutar. yetYntm deeri A olarak iletildiinde Ayrk GKD srecinde HHSnin YOSe authorizasyon kodunu hangi url e gnderecei bilgisini tutar. Riza isteklerinde bu deer ile uyumluluu kontrol edilmelidir. rnek: https://example.com https://example2.com/path deepLink://example/test deepLink://example2/test \n \n \n >>Aklama \n aciklama \n AN1..1024 \n  \n YSn gnderdii adrese ynelik vermek istedii aklama rnek: WEB bireysel , WEB kurumsal  , APP \n \n \n Ak anahtar \n acikAnahtar \n AN1..1024 \n Z \n YSn mesaj imzalama iin paylat ak anahtar \n \n \n Logo Bilgileri \n logoBilgileri \n Kompleks: LogoBilgisi [Array][1..N] \n Z \n YOSe ait logo bilgileri. Logotur = Original formatndaki logonun minimumda gnderimi zorunludur. \n \n \n >logoTur \n logoTur \n AN3..50 \n Z \n Logonun trn belirler. TR.OHVPS.DataCode.LogoTur alabilecei deerler  ORIGINAL , WHITE_OVERLAY , BLACK_OVERLAY , GRAY_OVERLAY \n \n \n > logoAdr \n logoAdr \n AN1..255 \n Z \n YS tarafnda tutulan ve HHSlerle paylalacak olan url adres bilgisidir. rnek: https://via.placeholder.com/150?text=0001 \n Healthcheck API \n GET /health \n HHS ve YS API iin health servisleri aadaki servislerle kontrol edilebilir. \n Baarl yantta Http 200 kodu dnlecektir\nBaarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir \n \n \n \n'},{title:"6.\tdeme Emri Balatma Hizmeti",frontmatter:{},regularPath:"/v1.0.1/contents/odeme-emri-baslatma-hizmeti.html",relativePath:"v1.0.1/contents/odeme-emri-baslatma-hizmeti.md",key:"v-01c649bd",path:"/v1.0.1/contents/odeme-emri-baslatma-hizmeti.html",headers:[{level:3,title:"deme Emri Balatma Hizmeti iin Eriim Adresleri (Endpoints)",slug:"odeme-emri-baslatma-hizmeti-icin-erisim-adresleri-endpoints"},{level:2,title:"6.1.\tADIM 0 - deme Emri Balatma Istei",slug:"_6-1-adim-0-odeme-emri-baslatma-istegi"},{level:2,title:"6.2.\tADIM 1 - deme Emri Rzasnn Hazrlanmas",slug:"_6-2-adim-1-odeme-emri-rzasnn-hazrlanmas"},{level:2,title:"6.3.\tADIM 2- deme Emri Rzasnn Yetkilendirilmesi",slug:"_6-3-adim-2-odeme-emri-rzasnn-yetkilendirilmesi"},{level:2,title:"6.4.\tADIM 2.1  deme Emri Rzasnn Sorgulanmas (istee bal)",slug:"_6-4-adim-2-1-odeme-emri-rzasnn-sorgulanmas-istege-bagl"},{level:2,title:"6.5.\tADIM 3- deme Emrinin Oluturulmas",slug:"_6-5-adim-3-odeme-emrinin-olusturulmas"},{level:2,title:"6.6.\tADIM 3.1- deme Emri Sorgusu (stee bal)",slug:"_6-6-adim-3-1-odeme-emri-sorgusu-istege-bagl"},{level:3,title:"GET /odeme-emri/{odemeEmriNo}",slug:"get-odeme-emri-odemeemrino"},{level:2,title:"6.7\tHealthcheck API",slug:"_6-7healthcheck-api"},{level:3,title:"GET /health",slug:"get-health"}],content:" 6.\tdeme Emri Balatma Hizmeti \n deme emri balatma ilemi havale, FAST ya da PS demesiyle sonulanabilir. deme ileminin amac kiiden kiiye para transferi, e-ticaret demesi gibi farkl deme trleri olabilir. demenin amacna gre BHSnin iletecei veri setinde farkllamalar olabilir. \n deme Emri Balatma Hizmeti 5 temel akdan oluur: \n \n deme Emri Balatma steinin tetiklenmesi:  HK BHS mobil uygulama ya da websitesinden deme emrini balatr. \n deme Emri Rza Hazrlanmas:  BHS, deme Emri Balatma ilemi iin izin oluturulmas isteini HHSye iletir. \n deme Emri Rzasnn Yetkilendirilmesi:  HHS, gerekli grd durumlarda HKy GKD ile dorular ve deme emri rzasna eriim iin eriim belirteci tanmlanmasn temin eder. \n deme Emrinin Balatlmas:  BHS, deme emrini HHSye iletir. \n deme Emri Rza Durumu, deme Emri Durumu, deme Emri Detay Sorgular:  BHS, deme Emri Rza Durumu, deme Emri Durumu, deme Emri Detay bilgilerini istee bal olarak sorgulayabilir. \n \n \n ekil 4: deme Emri Balatma Hizmeti st Dzey  Ak \n deme Emri Balatma Hizmeti iin Eriim Adresleri (Endpoints) \n deme Emri Balatma Hizmeti in Eriim Adreslerinin Etki Alan (Scope) = odeme_emri olarak belirtilmelidir. \n Tablo 6: deme Emri Balatma Hizmeti in Eriim Adresleri \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu / stee Bal \n Yetkilendirme Tr \n mzalama \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n odeme-emri-rizasi \n POST \n POST /odeme-emri-rizasi \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n OdemeEmriRizasiIstegi \n OdemeEmriRizasi \n \n \n 2 \n erisim-belirteci (GKD iin) \n POST \n POST/erisim-belirteci /odeme-emri-rizasi \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n ErisimBelirteciIstegi \n ErisimBelirteci \n \n \n 2.1 \n odeme-emri-rizasi \n GET \n GET /odeme-emri-rizasi/{rizaNo} \n Z \n stemci Kimlik Bilgileri \n mzal Yant \n - \n OdemeEmriRizaYaniti \n \n \n 3 \n odeme-emri \n POST \n POST /odeme-emri \n Z \n stemci Kimlik Bilgileri & Yetkilendirme Kodu (GKD) \n mzal Yant \n OdemeEmriIstegi \n OdemeEmri \n \n \n 3.1 \n odeme-emri \n GET \n GET /odeme-emri/{odemeEmriNo} \n Z \n stemci Kimlik Bilgileri & Yetkilendirme Kodu (GKD) \n mzal Yant \n - \n OdemeEmri \n 6.1.\tADIM 0 - deme Emri Balatma Istei \n \n HK, BHS uygulamasnda (web arayz/mobil uygulama) deme emri balatma ilemine onay verir. \n Gnderen hesap detaylarnn bu aamada belirtilmesi zorunlu deildir. \n 6.2.\tADIM 1 - deme Emri Rzasnn Hazrlanmas \n   \n ekil 5: deme Emri Rzasnn Hazrlanmas \n \n \n BHS, deme hizmeti kullanc hesabnn bulunduu HHSye balanarak deme emri rza kaynann oluturulmasn (odemeEmriRizasi) salar. \n \n \n POST istei TLS protokol tesis edilen iletiim katman zerinden gerekletirilir. TLS iin nitelikli sertifikalar kullanlr. \n \n \n POST isteinin balndaki alanlar ve istemcinin sertifikasndaki zel alanlar kullanlarak istemcinin yetkilendirilmesi salanr: \n \n stekte bulunan BHS yetkilendirilmi mi? \n stekte bulunan yetkilendirilmi deme hizmeti salaycs BHS rolne sahip mi? \n stekte bulunulan HHS kodu doru mu? \n \n \n \n POST baarl olursa, HHS, deme emri iin ieride rza olup olmamasna baklmakszn yeni bir rza tanmlaycs RizaNo ieren odemeEmriRizasi  yant olarak dner. \n \n \n 1 HK'nn 1 YS iin 1HHS'de istedii kadar rzas olabilir. \n \n \n HHS tarafnda RizaDurumu deikeninin durumu Yetki Bekleniyor olarak gncellenir. \n \n \n YSn dorulama ekran olarak HKya aaca URL adresini de ilgili rza numarasna gre oluturur. Burada 2 farkl yntemle URL oluturabilir. \n \n Statik URL  : \nHHSnin base pathi/alt-dizin/{rzaNo} \nrnek hhsYonAdr : https://xbank.com.tr/ohvps/cb54834e36f742d09af3d534ece3352a \nBu adres iin ilgili dorulama sayfas nden hazrlanmal ve HKnn dorulama sayfasna eriimi iin yaynlanm olmaldr (publish edilmelidir). \n Dinamik URL : \nHHSnin base pathi/alt-dizin/GKD Karlama Ekran?rizano={rzano} \nrnek: https://xbank.com.tr/ohvps/gkd?rizano=cb54834e36f742d09af3d534ece3352a \n \n \n \n POST /odeme-emri-rizasi \n STEK: \n BHS, bu API eriim adresinden HHSye yeni bir OdemeEmriRizasi oluturulmas iin istekte bulunur: \n \n BHS, deme emri balatma istei olduunu HHSye bildirir. \n BHS, HKnn, BHS arayznden verdii rzann (n Onay) bir kopyasnn HHS nezdinde mteri tarafndan onaylanmas iin HHSye gnderilmesini salar. \n HHS; istek mesajnda yer alan alanlarn API dkmannda belirtilen artlar salayacak ekilde zorunluluk, uzunluk ve ierik kontrollerini yapar. (Zorunlu) \n HHS; YS API ile alnan BHS bilgilerinin ierisinde yer alan ynlendirme ve bildirim adresleri ile deme emri rzas nesnesi request mesajnda paylalan adreslerin uyumlu olup olmadnn kontrollerini yapar. (Zorunlu) \n HHS; kimlik bilgileri nesnesinde eer kimlik bilgileri iletilmi ise; bu veri ile HKnn HHS mterisi olup olmadnn kontrollerini yapar. Bu kontrol hem bireysel hem de kurumsal HKlar iin yaplmaldr.  (Koullu Zorunlu) \n HHS kimlik bilgisi ile gnderen unvannn uyumlu olduunun kontrol eder. (Zorunlu) \n Gnderen Hesap Numaras ile ilgili Tablo7de belirtilen kontroller yaplmaldr. (Zorunlu) \n HHS, deme iin benzersiz RizaNo ile OdemeEmriRizasi nesnesi oluturur ve BHSye dner. \n HHS, OdemeEmriRizasi oluturduu anda durumunu Yetki Bekleniyor olarak dzenler. \nBu aamada HKnn HHS tarafndan tanmlanm ve istein veri alannda gnderen hesaba (borlandrlacak hesaba) ilikin bir bilgisinin olmas gerekmez. \nHesap bakiye kontrolnn rza aamasnda yaplmamas gerekmektedir. nk HK deme emri gerekleene kadar hesabna para eklemesi yapabilir. \n \n POST /odeme-emri-rizasi  isteinin (REQUEST) gvdesinde (BODY)  odemeEmriRizasiIstegi nesnesi (Tablo-7) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda odemeEmriRizasi (Tablo-8) nesnesi oluturulur. \n  BAARILI STEK: \n Tablo 7: OdemeEmriRizasiIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n HHS tarafndan deme emri rzas oluturulmas srasnda yaplmas gereken kontrol ve ilemler \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidASPSP  hata kodunu dner. \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder. Hata durumunda  TR.OHVPS.Connection.InvalidTPP  hata kodunu dner. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n  \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. Yetkilendirme yntemi, BHS tarafndan belirtilmeyebilir. \n HHS, BHSnin belirledii yntemi dikkate alarak kendi belirledii yntemi kullanr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu.  YSn iletecei adrestir.  YS Ynlendirmeli GKD yntemi ile ak destekliyorsa, yetYntm deikeninden bamsz olarak ynlendirme adresini iletmelidir.  Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, mteri uygulama / taraycsn bu alanda belirtilen adrese ynlendirir. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunlu. YSn iletecei adrestir.  YS Ayrk GKD yntemi ile ak destekliyorsa, yetYntm deikeninden bamsz olarak bildirim adresini iletmelidir.  Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, ayrk GKD sonras bu alanda belirtilen adrese otorizasyon kodunu (authentication code) iletir. \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n K \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS geerli bir Kimlik Numaras Tr olduunu kontrol eder. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n K \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS, BHS tarafndan iletilmesi durumunda Kimlik Verisi zeriden apraz kontroller uygulamal ve Kimlik Verisini temel alarak GKD gerekletirmelidir.  Pasaport numarasna ilikin kontroller HHS'nin halihazrda kulland veri, ak ve tabi olduu dier dzenlemelerdeki ileyi ile ayn ekilde ele alnmaldr.  Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur.  HHS geerli bir Kurum Kimlik Numaras Tr olduunu kontrol eder. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur.  HHS, BHS tarafndan iletilmesi durumunda Kurum Kimlik Verisi zeriden apraz kontroller uygulamaldr. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n Kurum adna yaplan demelerde K deerini alr. Kurum Kimlik Tr ve Kurum Kimlik Verisi alanlarnn girilmi olduu apraz olarak kontrol edilir. \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n HHS geerli bir para birimi olduu kontrol eder. \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n  \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n  \n Gnderenin unvandr.  HHS, bu bilgiyi BHS sisteminden gelen veri yerine FASTa iletirken kendi sisteminden alabilir. \n HHSnin bu veri ile kendi sistemlerindeki verinin farkl olmas ve Kimlik Numaras ile elememesi durumunda deme emri balatma istei reddedilir.  BHS verisi ile HHS verisinin farkllamas durumunun ise risk deerlendirme sistemlerine girdi olarak kullanmas tavsiye edilir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n  \n BHS'nin n yznden daha nce kayt altna alnm hesaplar arasndan setirdii veya mteriye girdii IBANdr.  BHS tarafndan iletilmedii durumda, gnderen hesap bilgisini mteri tarafndan HHSnin dijital kanalnda GKD sonrasnda seilebilir. Bu amala BHS arayznde HHS setirilmelidir.  Hesap Referans kullanlyorsa Hesap Numaras kullanlmayabilir. Hesap referans ile deme emri rzas balatlacak ise HHS hesap referans deeri ile ilikilendirilmi mevcut bir hesap bilgisi rzas var m kontrol etmelidir. Eer aktif bir rzas yok ise  TR.OHVPS.Business.InvalidContent  hatas verilmelidir. \n BHS tarafndan iletildii durumda; IBAN ierisindeki HHS kodunun istek balndaki HHS kodu ile ayn olduu (hesabn HHSye aitliinin kontrol), IBANn doruluu (kontrol basama dorulamas), Hesap numarasnn HKya ait olduu, HHSye zel deme izni verilmeyen farkl statlerin bulunmas durumu kontrol edilir.  Kontrol baarsz olduunda  TR.OHVPS.Business. InvalidAccount  hatas YSe iletilir. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n  \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez.  BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir.  Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n HspRef'e bal IBAN deitiinde yeni IBAN'n da ilgili HspRef ile ilikilendirilmesi beklenmektedir. Bu durumda, HBHS, HspRef ile sorguya geldiinde HHS'nin yeni IBAN ve hesap hareketlerini dnebilmesi mmkn olacaktr. HspRefin, IBAN deitiinde deitirilmemesi tavsiye edilmektedir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n K \n Kolay Adres Sistemi  kullanlmyorsa zorunludur.  Alcnn unvandr. BHS ekranlarndan girii yaplabilecei gibi BHSnin kaytl alclarndan yaplan seimle de doldurup gnderebildii bilgi olabilir.  FAST-TR Karekod Veri Organizasyonunda;  yeri tarafndan sunulan uzun karekod yapsnn  59:  alannda tanml yeri ad alandr, Kiiden Kiiye deme Karekod Yapsnn  07:  alannda tanml    deme Alcsnn Ad ve Soyad  alandr.  FAST-TR Karekod dndaki i yeri demelerinde; yine Unvan alannda iyeri ad bilgisi gnderilmelidir. \n \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n Alcnn Hesap Numaras (IBAN)  alandr.   Kolay Adres Sistemi  kullanlmyorsa zorunludur.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  30-01:  alannda tanml  Yeri IBAN verisi kullanlr.  Alcnn birden fazla hesabnn kullanlabilir olduu durumlarda (zellikle iyeri demelerinde HHS nezdindeki hesap (on-us havale ak) tercih edilmelidir. \n HHS (Gnderen Katlmc) tarafndan IBAN dorulamas (kontrol basama dorulamas) yaplr. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n HHS (Gnderen FAST katlmcs) tarafndan KOLAS Servisine yaplan sorguda girdi olarak kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n HHS (Gnderen FAST katlmcs) tarafndan KOLAS Servisine yaplan sorguda girdi olarak kullanlr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n TR.OHVPS.DataCode.KareKodAksTur  sral veri deerlerinden birini alr. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn  gsterir. Okunan karekodda referans deeri varsa kullanlmas zorunludur.  Karekod ilke ve kurallar belgesinde tanmland ekilde kullanlmas gerekmektedir.  Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden birini alr. \n HHS geerli bir deme Kayna kodu kullanldn kontrol eder. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n HHS geerli bir deme Amac kodu olduunu kontrol eder. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK iin biricik olarak oluturan referans bilgisi  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  -\tKarekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n HHS bu deeri GKD iin kulland nyznde ilem dorulama kodunun bir unsuru olarak gstermelidir. \n \n \n >> Aklama \n odmAcklm \n AN1..50 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi. \n \n \n \n > BHS Masraf Tutar \n obhsMsrfTtr \n Kompleks:Tutar \n  \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n BHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda istekte yer alr. \n \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir.  4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n  BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan OdemeEmriRizasi nesnesi Tablo-8deki parametrelerden oluur: \n Tablo 8: OdemeEmriRizasi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zaman \n \n \n > Gncellenme Zaman \n gnclZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin gncellenme zaman \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n > Rza Iptal Detay Kodu \n rizaIptDtyKod \n AN2 \n K \n Rza durumunun iptal olduu durumda zorunludur. Alabilecei deerler 4. Blmde detaylandrlmtr. \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   HHS tarafndan maksimum 5 dk iinde ilem tamamlanacak ekil zaman damgas oluturulur. Zaman am olduunda HHSnin GKDye izin vermeyecek ekilde hata mesaj vermesi gerekmektedir.  Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n K \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n K \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr. \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n  \n \n \n \n >> Unvan \n unv \n AN3..140 \n  \n Gnderenin unvandr.  HHS, bu bilgiyi BHS sisteminden gelen veri yerine FASTa iletirken kendi sisteminden alabilir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n  \n BHS'nin n yznden daha nce kayt altna alnm hesaplar arasndan setirdii veya mteriye girdii IBANdr.  BHS tarafndan iletilmedii durumda, gnderen hesap bilgisini mteri tarafndan HHSnin dijital kanalnda GKD sonrasnda seilebilir. Bu amala BHS arayznde HHS setirilmelidir.   GKD sonras HHS ekrannda seilen Hesap Numaras POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir.    Hesap Referans kullanlyorsa Hesap Numaras kullanlmayabilir. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n  \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez.  BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir.   GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir.    Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolastan dnen account owner alan kullanlmaldr. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n BHS tarafndan istek mesajnda iletilip dorulanan veya Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen alc maskeli IBAN bilgisidir. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml KOLAS tarafndan ilgili sorguya zel olarak retilmi referans numarasdr. \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n TR.OHVPS.DataCode.KareKodAksTur  sral veri deerlerinden birini alr. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn  gsterir. \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatt kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden birini alr. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK iin biricik olarak oluturan referans bilgisi  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  -\tKarekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n \n \n >> Aklama \n odmAcklm \n AN1..50 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi. \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisidir. Bu alan ileri vadeli demeler iin dnlmtr. lk fazda doldurulmasna gerek olmad dnlmektedir. \n \n \n > BHS Masraf Tutar \n obhsMsrfTtr \n Kompleks:Tutar \n  \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n BHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n \n \n > HHS Masraf Tutar \n hhsMsrfTtr \n Kompleks:Tutar \n  \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n HHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda yantta yer alr. \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n 6.3.\tADIM 2- deme Emri Rzasnn Yetkilendirilmesi \n   \n ekil 6: deme Emri Rzasnn Yetkilendirilmesi \n BHS, HKnn deme emrini yetkilendirmesi isteini iletir. deme emrinin yetkilendirilmesi, HHS tarafndan gerekletirilen Ynlendirme veya Ayrk GKD yntemiyle yaplr. \n \n \n Ynlendirmeli dorulama aknda , BHS HKy HHSye ynlendirir. \n \n BHS tarafndan ynlendirme, bir nceki admdaki RizaNoyu ierir. \n Ynlendirmenin RizaNoyu iermesi sayesinde, HHS hangi deme emriyle ilikili olarak ynlendirme yapldn ilikilendirebilir. \n HHS, HK iin GKD srecini iletir. \n \n HKy dorularsa, \n \n HK -bir nceki admda semediyse- borlu hesabn seer. \n HHS, deme emri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n HHS, HKy olumlu ynlendirme ak ile BHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n \n \n \n yonAdr?rizaDrm=Y&yetKod=xx&rizaNo=yy&rizaTip=O&drmKod=zzz\n \n HKy dorulayamazsa, \n1. HHS, deme emri rza kaynann durumunu Yetki ptal olarak gnceller. \n2. HHS, HKy olumsuz ynlendirme ak ile BHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=I&rizaNo=yy&rizaTip=O&drmKod=zzz\n \n HHS tarafnda oluabilecek bir hata durumunun YSe aktarlmas gerektii durumlar olabilir. Bu durumda yonlendirme adresinde hata kodu parametresi zorunlu olarak iletilmelidir. \nHata aklamalarnn neler olabilecei ve YSn kendi uygulamasnda bu hatay ne ekilde gsterecei aada tariflenmitir. \n yonAdr?rizaDrm=I&rizaNo=yy&rizaTip=O&rizaIptDtyKod=11&drmKod=zzz\n \n URLde iletilen Rza ptal Detay Kodu Rza durumlar blmnde (4. Blm) belirtilen hata kodlar ile ayn olacak ekilde tasarlanmtr. GKD srasnda yaplmas gereken kontroller 5.3 blmnde detaylandrlmtr. \n \n Ayrk dorulama aknda , HHS, HKnn deme emrini balatt uygulamadan farkl olabilecek bir dorulama uygulamasnda ilemi dorulamasn ister.\n \n Ayrk ak BHSnin farkl bir kanal kullanarak yetkilendirme istei gndermesiyle balatlr. \n Bu yetkilendirme istei, yetkilendirilecek deme emri rzasnn eletirilecei HKnn bulunmas iin ilgili veriyi tar. \n HHS, HKy dorular. \n HK -bir nceki admda semediyse- borlandrlacak hesabn seer. \n HHS, deme emri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n \n Baarl GKD sonrasnda (rizaDrm=Y) ilgili rza nesnesi iin (belirli bir rizaNo) yetkilendirme kodunun (yetKod) alnmasnn ardndan eriim belirteci eriim adresine POST ars yaplarak yetkilendirme kodu karlnda eriim belirteci ve yenileme belirteci alnr. POST /eriim-belirteci eriim noktas EK-3te aklanmtr. \n Eriim belirteci alndktan sonra; HHS, deme emri rza kaynann durumunu Yetki Kullanld olarak gnceller. \n 6.4.\tADIM 2.1  deme Emri Rzasnn Sorgulanmas (istee bal) \n   \n ekil 7: odemeEmriRizasi nesnesinin sorgulanmas (istee bal) \n GKD ileminin baaryla tamamlanp deme Emri Rzasnn yetkilendirilmesi esnasnda, gnderen hesap seiminin HHS ekrannda yapld durumlar olabilir. Bu durumlarda deme emri isteinde gnderen hesap bilgileri alannn zorunlu olmas nedeniyle,  OdemeEmriRizasi  nesnesi sorgulanarak gnderen hesap bilgileri (hesap numaras ve/veya hesap referans) alnmaldr. HHS,  ADIM 2 -deme Emri Rzasnn Yetkilendirilmesi  aknda HKnn hesaplar arasnda seim yapmasn ve seilen hesap bilgisinin  OdemeEmriRizasi  nesnesine iler. \n GET /odeme-emri-rizasi/{RizaNo} \n BHS, mevcut durumunu kontrol etmek iin, oluturulan bir  OdemeEmriRizasi  kaynann durumunu istee bal olarak alabilir. \n Durum \n OdemeEmriRizasi  kayna iin kullanlabilecek durum gstergeleri u ekildedir: \n \n Yetki Bekleniyor \n Yetkilendirildi \n Yetki Kullanld \n Yetki deme Emrine Dnt \n Yetki Sonlandrld \n Yetki ptal \n \n deme emri rza durum deiiklikleri 4.2 blmnde detaylandrlmtr. \n BAARILI YANIT: \n GET /odeme-emri-rizasi/{RizaNo}  yantnn (RESPONSE) gvdesinde (BODY)  OdemeEmriRizasistegi nesnesi kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda Tablo-8de yer alan parametreleri ieren OdemeEmriRizasi oluturulur. \n Gnderen Hesap Bilgisinin, ADIM 2 (deme Emri Rzasnn Yetkilendirilmesi) sonrasnda HHS ekranndan seildii akta OdemeEmriRizasi nesnesi gncellenir ve BHS  GET /odeme-emri-rizasi/{RizaNo}  istei yaparak gncel gnderen hesap bilgisi bilgisini de ieren OdemeEmriRizasi nesnesini ekmelidir. \n ereve szleme kapsamnda olmayan tek seferlik deme ilemlerinde, Kimlik Tr ve Kimlik Verisi bilgilerinin deme emri rzas srasnda gnderimi zorunlu deildir. Baarl GKD sonras, yani eriim belirteci alndnda, deme emri olumadan nce, YSn deme emri rzasn sorgulayarak bu bilgileri almas ve deme emrini olutururken Kimlik Tr ve Kimlik Verisi alanlarn dolu olarak gndermesi beklenmektedir.  Ancak rza durumu Yetki Bekleniyor - B, Yetkilendirildi - Y ve Yetki ptal - I statlerinde ise, deme emri rzas sorgulamasnda, HHSnin Kimlik Tr ve Kimlik Verisi bilgisini YS ile paylamamas gerekmektedir. \n 6.5.\tADIM 3- deme Emrinin Oluturulmas \n   \n ekil 8: deme Emrinin Oluturulmas \n POST /odeme-emri \n \n HKnn Gl Kimlik Dorulama ile ilemi yetkilendirmesi sonrasnda, BHS OdemeEmri kaynan oluturur. \n deme emri (OdemeEmri) uygun deme kaynana POST istei yaplarak balatlr.\n \n POST HHS tarafndan ilenir: RizaDurumu Yetki Kullanld ise ileme balanr. \n POST /odeme-emri-rizasi ile POST /odeme-emri isteklerinde istek alanlarn ayn olmas beklenmektedir. HHS tarafndan kontrol salanmaldr.POST verisindeki Gnderen Hesap Numaras ve Alc Hesap Numarasnn ayn bankaya aitse HAVALE deilse FAST veya PS i akna geilir. \n POST verisinin modele gre kontrol yaplr (alan kontrolleri) \n POST verisinin mantksal kontrolleri yaplr (IBAN kontrol, apraz alan kontroller) \n OdemeEmriDurumu Gerekleti / Gnderildi / Gereklemedi olarak gncellenir. \n \n \n POST baarl olursa, ierisinde OdemeEmriNo ve OdemeEmriDurumu deikenleri de bulunan OdemeEmri nesnesi BHSye dner ve RizaDurumu deikenin deeri Yetki deme Emrine Dnt olarak gncellenir. \n \n BAARILI STEK: \n Tablo 9: OdemeEmriIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n HHS tarafndan deme emri oluturulmas srasnda yaplmas gereken kontrol ve ilemler \n FAST A01 PS M01 mesaj mapping \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zaman \n \n \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidASPSP  hata kodunu dner. \n Gnderen katlmc kodu (yani bankann FAST/PSteki Katlmc kodu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidTPP  hata kodunu dner. \n YosKod \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. \n \n \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu. \n \n \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi \n \n \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kimlik Numaras Tr verisi ile ayn olmaldr. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS, BHS tarafndan iletilmesi durumunda Kimlik Verisi zeriden apraz kontroller uygulamal ve Kimlik Verisini temel alarak GKD gerekletirmelidir. deme Emri Rizas Nesnesindeki Kimlik Numaras verisi ile ayn olmaldr. Gerek kii tarafndan yaplan demelerde, 1. HHS, Gnderen Ad ve Gnderen Hesap Numarasn deme emri isteinde (Havale/FAST/PS) gnderir. - Gnderen Ad ve dier tm mteri bilgileri, Kimlik Numaras zerinden elde edillir. Pasaport numarasna ilikin kontroller HHS'nin halihazrda kulland veri, ak ve tabi olduu dier dzenlemelerdeki ileyi ile ayn ekilde ele alnmaldr. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik verisi bu alanda gnderilebilmesi zorunludur. \n GonKimN / Psp \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kurum Kimlik Tr verisi ile ayn olmaldr. \n \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kurum Kimlik Verisi ile ayn olmaldr. \n GonKimN / VKN \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n Kurum adna yaplan demelerde K deerini alr. Kurum Kimlik Tr ve Kurum Kimlik Verisi alanlarnn giilmi olduu apraz olarak kontrol edilir.  deme Emri Rizas Nesnesindeki HK Tr ile ayn olmaldr. \n \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n deme Emri Rizas Nesnesindeki Para Birimi verisi ile ayn olmaldr. \n \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n deme Emri Rizas Nesnesindeki lem Tutar verisi ile ayn olmaldr. HHS ilem tutar deme mesajnda (Havale/FAST/PS) aynen tanmak durumundadr. \n Ttr \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n Z \n \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Gnderen kiinin ad soyad ya da ticari unvan bilgisi. \n HHS ve BHS verisi tutarl olmaldr.  BHS verisi ile HHS verisinin farkllamas durumunun ise risk deerlendirme sistemlerine girdi olarak kullanmas tavsiye edilir. \n GonAd \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n BHS'nin n yznden setirdii/kullancya girdii IBAN Hesap numaras ya da Hesap Referans alanlarndan en az birinin dolu olarak gelmesi gerekmektedir. \n deme Emri Rizas Yant Nesnesindeki Gnderen Hesap Numaras verisi ile ayn olmaldr. \n GonHesN \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n K \n BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme balatlabilir. GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir. Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n YSten alc ad soyad bilgisi geliyorsa ve HHS'nin kontrolnden baarl bir ekilde geti ise HHS'nin tekrar alc ad soyad bilgisi iin giri yaptrmasna gerek bulunmamaktadr. \n AlAd \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n Alcnn Hesap Numaras alandr (IBAN). Kolay Adres  sorgusunda dnlen adres kayd yaptrm olan alcnn maskeli IBAN bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen IBAN bilgisidir. Karekod aknda, FAST Karekod Veri Organizasyonundaki 30-01: alannda tanml  Yeri IBAN verisi kullanlr. \n deme Emri Rizas Yant Nesnesindeki Alc Hesap Numaras verisi ile ayn olmaldr.  Kontroller baaryla sonulanrsa, bilgi FAST/PS AlHesN alanna dorudan aktarr ve FAST/PS Alan Katlmc Kodu (AlKK) olarak Alc HHS Kodu kullanlr.  KOLAS sorgusu sonucunda deme emrinde iletilen maskeli bilgi ile HHSnin kendi deme emri rzas isteinde tuttuu KOLAS sorgusundan dnlen bilgi maskelenerek karlatrlr. Eer ayn deilse uygun hata kodu dnlerek ilem sonlandrlr. \n AlHesN \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n Mterinin sorgulamak istedii Kolay Adres Tipi deeridir.  TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n deme Emri Rizas Yant Nesnesindeki Kolay Adres Tipi verisi ile ayn olmaldr. \n \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n deme Emri Rizas Yant Nesnesindeki Kolay Adres Deeri verisi ile ayn olmaldr. \n FAST (KolasRef) \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n demeye zel Referans Bilgisi alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK iin biricik olarak oluturan referans bilgisi -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras -\tKarekod aknda, FAST Karekod Veri Organizasyonundaki -\t62-01: alannda tanml Fatura Numaras -\t62-06: alannda tanml Mteri Numaras verilerinden biri kullanlr. \n deme Emri Rizas Nesnesindeki Referans Bilgisi verisi ile ayn olmaldr. FAST:  KareKod ile balatlan ilemlerde FAST A01 mesajndaki Karekod Referans (KrkdRef) alanna karlk gelir. Bu durumda, FAST A01 mesaj alanlar FAST Mesaj Yaps ve lem Trleri belgesin uygun ekilde oluturulur: KareKod (KrKd) blmndeki Karekod Ak Tr (KrkdAksTur) ve Karekod Referans (KrkdRef) alanlar doldurulmaldr.  Kiiden kiiye fon aktarmlarnda ve e-ticaret ilemelerinde Referans Bilgisi (RefBlg) alan doldurulur. \n FAST (KrkdRef) ve (RefBlg) \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  Kolay Adresi Sistemi ile birlikte kullanlmaz.  01: FAST katlmcsndan dinamik dorulama hizmeti alnan iyeri demesi  02: FAST katlmcsndan statik dorulama hizmeti alnan iyeri demesi 03: Kiiden kiiye demeler \n deme Emri Rizas Nesnesindeki Kare Kod Ak Tr verisi ile ayn olmaldr. \n FAST: KrkdAksTur \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn gsterir.  Okunan karekodda referans deeri varsa kullanlmas zorunludur. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n deme Emri Rizas Nesnesindeki Karekod Referans verisi ile ayn olmaldr.  evrimii dorulama hizmeti alnmayan statik karekodlar iin Referans numarasnn bulunmad durumlarda HHS tarafndan NONREF ifadesi girilir. \n FAST: Karekod Referans (KrkdRef) \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatt kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden birini alr. \n deme Emri Rizas Nesnesindeki deme Kayna verisi ile ayn olmaldr. HHS tarafndan deme mesajnda (FAST/PS) aynen tanmak durumundadr. \n FAST/PS: OdmKynk \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. \n deme Emri Rizas Nesnesindeki deme Amac verisi ile ayn olmaldr. HHS tarafndan deme mesajnda (FAST/PS) aynen tanmak durumundadr. \n FAST (OdmAmc)/PS(OdmAmaci) \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK iin biricik olarak oluturan referans bilgisi  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  -\tKarekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n \n FAST (KrkdRef) ve (RefBlg) \n \n \n >> Aklama \n odmAcklm \n AN1..50 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi. \n \n FAST/PS Acklm \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n deme Emri Rizas Nesnesindeki deme Sistemi verisi ile ayn olmaldr. \n \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisi \n \n \n \n \n > BHS Masraf Tutar \n obhsMsrfTtr \n Kompleks:Tutar \n  \n \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n deme Emri Rizas Nesnesindeki BHS Masraf Para Birimi verisi ile ayn olmaldr. \n \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n BHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n deme Emri Rizas Nesnesindeki BHS Masraf Tutar verisi ile ayn olmaldr. \n \n \n \n > HHS Masraf Tutar \n hhsMsrfTtr \n Kompleks:Tutar \n  \n \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n deme Emri Rizas Nesnesindeki HHS Masraf Para Birimi verisi ile ayn olmaldr. \n \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n HHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n deme Emri Rizas Nesnesindeki HHS Masraf Tutar verisi ile ayn olmaldr. \n \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda istekte yer alr. \n \n \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n \n \n \n \n \n BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan OdemeEmri nesnesi Tablo-10daki parametrelerden oluur: \n Tablo 10: OdemeEmri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zaman \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n Emir Bilgileri \n emrBlg \n Kompleks: EmirBilgileri \n Z \n \n \n \n > deme Emri Numaras \n odmEmriNo \n AN1..128 \n Z \n deme Emri nesnesinin UID'sidir. OdemeEmrine likin sorgular bu ID zerinden yaplr. \n \n \n > deme Emri Zaman \n odmEmriZmn \n ISODateTime \n Z \n deme emrinin FAST, PS, havale gibi gerekletirilecei ilgili deme sistemine iletilme tarihi. \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Gnderen kiinin ad soyad ya da ticari unvan bilgisi. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n BHS tarafndan iletilip dorulanan veya HHS ekrannda seilen Gnderen Hesap Numaras dnlr. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n K \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid)  YS baznda farkllamas gerekmez. BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir. GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir. Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolastan dnen account owner alan kullanlmaldr. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n Alcnn Hesap Numaras alandr (IBAN). Kolay Adres  sorgusunda dnlen adres kayd yaptrm olan alcnn maskeli IBAN bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen IBAN bilgisidir. Karekod aknda, FAST Karekod Veri Organizasyonundaki 30-01: alannda tanml  Yeri IBAN verisi kullanlr. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n Mterinin sorgulamak istedii Kolay Adres Tipi deeridir.  TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml KOLAS tarafndan ilgili sorguya zel olarak retilmi referans numarasdr. \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  Kolay Adresi Sistemi ile birlikte kullanlmaz.  01: FAST katlmcsndan dinamik dorulama hizmeti alnan iyeri demesi  02: FAST katlmcsndan statik dorulama hizmeti alnan iyeri demesi 03: Kiiden kiiye demeler \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn gsterir.  Okunan karekodda referans deeri varsa kullanlmas zorunludur. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden birini alr. \n \n \n >> deme Durumu \n odmDrm \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeDurumu  sral veri deerlerinden birini alr. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK iin biricik olarak oluturan referans bilgisi  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  -\tKarekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n \n \n >> Aklama \n odmAcklm \n AN1..50 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi. \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n \n \n >> deme Sistem Numaras \n odmStmNo \n AN10..50 \n K \n deme baarl balatldysa, demenin balatld sistemdeki referans numaras. FAST ilemleri iin MesRefBlg deeri atanr. deme Hizmeti kullancsna ilemin takibi iin gsterilebilir. \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisi \n \n \n > BHS Masraf Tutar \n obhsMsrfTtr \n Kompleks:Tutar \n  \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n BHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n \n \n > HHS Masraf Tutar \n hhsMsrfTtr \n Kompleks:Tutar \n  \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n >> Tutar \n ttr \n N1..18 \n Z \n HHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir. \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda yantta yer alr. \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n 6.6.\tADIM 3.1- deme Emri Sorgusu (stee bal) \n   \n ekil 9: deme Emri Sorgusu \n GET /odeme-emri/{odemeEmriNo} \n BHS, bu eriim adresi araclyla deme emrini sorgulayabilir. \n BAARILI YANIT: \n GET /odeme-emri/{odemeEmriNo} yantnn (RESPONSE) gvdesinde (BODY)  OdemeEmri nesnesi bulunur. stek baaryla sonulanrsa HHS kaynak sunucusunda Tablo-10da yer alan parametreleri ieren OdemeEmri nesnesi dner. \n 6.7\tHealthcheck API \n GET /health \n HHSlerin sunaca bu servis, dzenli olarak BKM tarafndan arlarak servislerin ayakta olup olmadklarnn kontrolnn salanmas planlanmaktadr \n Baarl yantta Http 200 kodu dnlmelidir. \n Baarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir \n \n \n \n"},{title:"4. Rza Durumlar",frontmatter:{},regularPath:"/v1.0.1/contents/riza-durumlari.html",relativePath:"v1.0.1/contents/riza-durumlari.md",key:"v-7301a6d1",path:"/v1.0.1/contents/riza-durumlari.html",headers:[{level:2,title:"4.1.\tHesap Bilgisi Hizmeti Rza durum deiiklikleri",slug:"_4-1-hesap-bilgisi-hizmeti-rza-durum-degisiklikleri"},{level:2,title:"4.2.\tdeme Bilgisi Hizmeti Rza Durum Deiiklikleri",slug:"_4-2-odeme-bilgisi-hizmeti-rza-durum-degisiklikleri"}],content:" 4. Rza Durumlar \n HK, deme Emri Balatma Hizmetine ya da Hesap Bilgisi Hizmetine mteri rzasnn tesisi ile balar. HKnn YS uygulamas zerinden yapt ilemler neticesinde rza durumlar deiebilir.\nRzann alabilecei durum kodlar u ekilde belirlenmitir. \n B: Yetki Bekleniyor   lk rza talebinde \n Y: Yetkilendirildi   Baarl GKD sonras yetKod retildiinde \n K: Yetki Kullanld   Eriim Belirteci alndnda \n E: Yetki deme emrine dnt   BHS iin \n S: Yetki Sonlandrld \nHBHS iin : Eriimin Geerli Olduu Son Tarih geldiinde \nBHS iin : Yenileme belirteci Son Tarihi geldiinde \n I :Yetki ptal \nRza iptal durumu ise gerek raporlama gerekse mteri deneyimi perspektifinden doru   bilgilendirmeler yaplabilmesi asndan aadaki gibi detay kodlar ile zenginletirilmitir: \n \n Rza ptal Detay Kodu: \n \n \n \n 01 :\tYeni Rza Talebi ile ptal \n 02 :\tKullanc stei ile HHS zerinden ptal \n 03 :\tKullanc stei ile YS zerinden ptal \n 04 :\tSre Am : Yetki Bekleniyor \n 05 :\tSre Am : Yetkilendirildi \n 06 :\tSre Am : Yetki demeye Dnmedi \n 07 :\tGKD iptali : Ayn rza no ile mkerrer arm \n 08 :\tGKD iptali : Rzano ile TCKN uyumamas \n 09 :\tGKD iptali : Uygun rn bulunmuyor \n 10 :\tGKD iptali : HHS Ak Bankaclk kanal ileme kapal \n 11 :\tGKD iptali : Hesap Yetki Sorunu \n 12 :\tGKD iptali : HK HHS mterisi deil \n 13 :\tGKD iptali : HK HHS kontrollerini aamad \n 14 :\tGKD iptali : Baarsz GKD \n 15 :\tGKD iptali : HK istei ile GKDden vazgeildi \n 16 :\tGKD iptali : Dier \n \n \n 4.1 ve 4.2 blmlerinde detaylandrlan rza durum deiikliklerinde rza iptal detay kodlar kullanlmtr. \n rnein B I/01 denildiinde Yetki Bekleniyor rza durumundan Yetki ptal rza durumuna Rza ptal Detay Kodu da 01 yani Yeni Rza Talebi ile ptal olarak gncellenmelidir ifade edilmitir. \n HK verdii rza srasnda setii hesaplarndan biri kapatlrsa, dier hesaplara ait bilgileri grmeye devam eder. Ancak HKnn hesabna ait bilgilerinin YS'e iletilmesini istemedii durumda, rzasn tamamen iptal ederek yeni hesap listesi ile yeni rza vermesi gerekmektedir. Yani hesap kapanmas nedeniyle rza geerliliini yitirmez. HK'nn proaktif olarak bu hesab rzadan karmas durumunda rza iptali olur. \n Rza iptal edilmedii ve geerli olduu srece kapal hesaplar iin dier evrimii kanallarda uygulanan yntem izlenmelidir. Dier evrimii kanallarda kapal hesaplara ilikin bilgi dnlmyor ise HVPS'den de dn yaplmaz. HKnn rza onay verdii ak hesaplarnn tm HHS tarafnda kapatld durumda, yine ayn ekilde HHS evrimii kanallarnda koyduu kurallara gre bu hesaplarnn YS uygulamasnda gsterilmesine karar verir. \n Hesap kapama ve ticari kullanclarn hesaplar zerindeki yetki deiiklikleri HHS'nin i sistemleri tarafndan yaplan kontrollerle ynetilir. Buradaki deiiklikler ile HHS sistemsel olarak rza iptali gerekletiremez. HK izni ve onay dahilinde rza iptal gerekletirilmesi gerekmektedir. \n 4.1.\tHesap Bilgisi Hizmeti Rza durum deiiklikleri \n Kural : Bir HK'nn, bir YS iin, bir HHS'de Y, K, B rza durumlarnda tek bir rzas olabilir.\nBir HK hem kiisel olarak hem de bir kurumun kullancs olabilir. Bu durumda kurum ve kiisel rza ayn anda mevcut olabilmelidir. Rza nesneleri, HHS tarafndan uygun ekilde ynetilmelidir. \n \n \n Hesap Bilgisi Rzas istei HHSye iletilir. \na.\tHHS HK'ya ait ieride rza var m kontrol eder. Eer yoksa  Yetki Bekleniyor - B  rza durumu ile yeni rza oluturur. \nb.\tEer ieride rza varsa \n i. Rza durumu Yetki Bekleniyor - B ise; \n    HHS, sistemde Yetki Bekleniyor - B rza durumuna sahip kayt olduu iin, ncelikle eski kayd Yetki ptal - I durumuna getirir.  Rza ptal Detay Kodu Yeni Rza Talebi ile iptal olmaldr.  B  I / 01  Sonrasnda,  Yetki Bekleniyor - B  rza durumu ile yeni rza oluturur. \n  ii. Rza durumu Yetkilendirildi - Y veya Yetki Kullanld - K ise; \nHK'nn halihazrda verilmi bir rzas vardr. HHS, nce mevcut rzann iptalinin yaplmas gerektiine dair hata dner.  TR.OHVPS.Resource.ConsentMismatch \n  iii.\tRza durumu Yetki Sonlandrld - S  ise Yetki Bekleniyor - B durumunda yeni rza no oluturur. \n  iv.\tRza durumu Yetki ptal - I ise  Yetki Bekleniyor - B  durumunda yeni rza no oluturur. \n \n \n GKD baarl bir ekilde tamamlandnda Rza durumu Yetki Bekleniyordan Yetkilendirildiye gncellenir.  B  Y \n \n \n GKD'nin gereklemedii durumlardan HHS haberdar olmayabilir. \n HK GKD yapmadan ayrlm olabilir. (R: Taraycy kapatm olabilir) Rza Yetki Bekleniyor - B rza durumunda kalr.  5 dakika ierisinde sistem tarafndan Yetki Bekleniyor - B rza durumundaki kaytlar Yetki ptal  : Yetki Bekleniyor Sre Am olarak gncellenir.   B  I / 04  Bkz. 9. Madde. \n \n \n GKD'nin gereklemedii durumlardan HHS haberdardr. HHS yonlendirme adresinin query parametrelerine  rizaIptDtyKod  deerini ekleyerek bu durumu YSe bildirmek zorundadr. \n \n \n Rza durumunun  Yetkilendirildi\" , Yetki Kullanld olduu durum.  Yetki Bekleniyor  Yetki ptal   B   I / 07 \n \n \n Rzano ile kimlik bilgileri uyumazl.  Yetki Bekleniyor  Yetki ptal  B  I / 08 \n \n \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) Yetki Bekleniyor  Yetki ptal   B I / 09 \n \n \n Ak bankaclk kanalnz ileme kapaldr.Yetki Bekleniyor  Yetki ptal  B I / 10 \n \n \n Kullancnn HHS'deki hesaplarnda yeterli yetkisinin olmama durumu  Yetki Bekleniyor  Yetki ptal  B  I / 11 \n \n \n HK'nn ilgili HHS mterisi olmad durum Yetki Bekleniyor  Yetki ptal  B  I / 12 \n \n \n HHSnin HK iin yapt kontrollerin baarsz olduu durum Yetki Bekleniyor  Yetki ptal   B  I / 13 \n \n \n HK kendini dorulayamam olabilir. Baarsz GKD Yetki Bekleniyor  Yetki ptal  B  I / 14 \n \n \n HK istei ile GKDden vazgeildii durum Yetki Bekleniyor  Yetki ptal  B  I / 15 \n \n \n Dier Yetki Bekleniyor   Yetki ptal   B   I / 16 \n \n \n \n \n \n \n HK, hesaplarnda/izin trlerinde/Eriimin Geerli Olduu Son Tarih bilgilerinden bir ya da birden fazlasnda gncelleme yapmak iin YS ekranna girer. \n \n \n a.\tYS nce Rza ptal API'sini arr. Sonra yeni deerlerle yeni bir rza isteinde bulunur. Tekrar GKD gerekir. \n b.\tYS rza iptal yapmadan yeni rza alma akna balarsa 1.b ak devreye girer. \n c.\tRza gncelleme ilerleyen srmlerde ele alnacaktr. \n \n \n Eriim Belirteci API \n a. Eriim Belirteci'nin yetkilendirme kodu ile arm yapldnda; \n  i. Rza durumu Yetki ptal - I ya da Yetki Sonlandrld - S ise   TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n ii. Rza durumu Yetki Bekleniyor - B ya da Yetki Kullanld - K  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iii. Rza durumu Yetkilendirildi - Y olduunda eriim belirteci tahsis edilir.\nEriim belirteci alndnda rza durumu K: Yetki Kullanld yaplr.  Y K \n b. Yenileme belirteci karl eriim belirteci alnmas srasnda; yenileme belirteci kontrol ve sonrasnda rza kontrol yaplmaldr. \n  i. ncelikle Yenileme Belirteci Geerlik Sresi kontrol yaplmaldr. Geerli bir Yenileme Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n ii. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n iii. Rza durumu Yetki Bekleniyor - B ya da Yetkilendirildi - Y  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iv. Rza durumu Yetki Kullanld - K olduunda, yenileme belirteci karl eriim belirteci tahsis edilir. \n \n \n Sorgulama: HBHS, rza alma akna balamadan nce, daha nce oluturulmu bir hesap bilgisi-rizasi kaynann durumunu, istee bal olarak alabilir. Rza numaras ile sorgulama yaplr. \n \n \n Hesap Bilgisi Rzasnn ptali: HBHS zerinden ya da HHS zerinden yaplan rza iptallerinde Rza durumu  Yetki ptal - I olarak gncellenir. Rza numaras ile iptal salanr. \n a. HHS zerinden rza iptali yapm olabilir.  Rza durumu sorgulanr. \n Rza numaras Yetki Bekleniyor - B ve Yetkilendirildi - Y ve Yetki Kullanld - K durumlarnda ise Yetki ptal durumuna getirilir. Rza gnclzmn timestamp ile gncellenir.\nHHS, Rza iptalinde ayn zamanda eriim belirtecini de invalid hale getirmelidir. \n B  I / 02 \n Y  I / 02 \n K  I / 02 \n b.\tYS zerinden yaplacak iptal ileminde yine Y ve B ve K rza durumlarnda ise iptal edilebilir. \n B  I / 03 \n Y  I / 03 \n K  I / 03 \n Rza durumu Yetki Sonlandrld - S  ise iptal gereklemez. Rza durumunuz iptal etmeye uygun deildir. hatas HK'ya yanstlr.  TR.OHVPS.Resource.ConsentMismatch \n \n \n HKnn verdii rza sresi dolmu olabilir.\nEriimin Geerli Olduu Son Tarih geldiinde Rza durumu Yetki Kullanlddan Yetki Sonlandrld durumuna ekilmelidir.   K  S \n \n \n Hesaplar, Bakiye ve lemler servislerinde eriim belirteci kontrol ve sonrasnda rza kontrol yaplmaldr.\nGeerli bir eriim belirteci yok ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n YS'n; Rza ptal - I ya da Yetki Sonlandrld - S rza durumlarnda Hesaplar, Bakiye ve lemler servislerini armamas beklenir. HHS'nin bu rza durumlar ile yaplm arlar olduunda  TR.OHVPS.Resource.ConsentRevoked  hatasn dnmesi gereklidir. \n Rza durumu Yetki Kullanld - K dnda ise  TR.OHVPS.Resource.ConsentMismatch  hatas verilmelidir. \n Rza durumu Yetki Kullanld - K ise servis aklarna devam edilir. \n Rza sorgulama API'sinde ilgili rza kayd bulunamaz veya sorgulayan kurumun yetkisi yoksa (rn : YSn farkl bir YSe ait rza noyu sorgulamas) \n TR.OHVPS.Resource.NotFound hatas  verilmelidir. \n \n \n HHS/YS tarafnda rza bilgileri belirli aralklarla sistem kullancs tarafndan taranr:\n5 dakikadan uzun sredir Yetki Bekleniyor durumunda kalan kaytlarn durumlar gncellenir.\nYetki Bekleniyor   Rza ptal  / Sre Am : Yetki Bekleniyor  B  I / 04 \n 5 dakikadan uzun sredir Yetkilendirildi durumunda kalan kaytlar gncellenir.\nYetkilendirildi      Rza ptal / Sre Am: Yetkilendirildi  B  I / 05 \nYukarda bahsedilen, YS Sre Am nedeniyle rza iptal durum gncellemelerini yapmadan nce HHSyi sorgulayarak rza durumunu renmeli ve sre am dnda bir kodu varsa ayn kodla kendi sistemini gncellemelidir. \nEriimin Geerli Olduu Son Tarih geldiinde rza durumu Yetki Kullanlddan Yetki Sonlandrldya gncellenir.  K  S \n 4.2.\tdeme Bilgisi Hizmeti Rza Durum Deiiklikleri \n Kural : Bir HK'nn bir YS iin bir HHS'de istedii kadar rzas olabilir. \n Kurum ve kiisel rza ayn anda mevcut olabilmelidir. Rza nesneleri, HHS tarafndan uygun ekilde ynetilmelidir. \n \n \n deme Emri Rzas istei HHSye iletilir. eride rza olup olmamasna baklmakszn  Yetki Bekleniyor - B  rza durumu ile yeni rza no oluturur. \n \n \n GKD baarl bir ekilde tamamlandnda rza durumu Yetki Bekleniyordan Yetkilendirildiye gncellenir.   B  Y \n \n \n GKD'nin gereklemedii durumlardan HHS haberdar olmayabilir. \n HK GKD yapmadan ayrlm olabilir. (R: Browser kapatm olabilir)\nRza durumu Yetki Bekleniyor'dur. 5 dakika ierisinde sistem tarafndan Yetki Bekleniyor - B durumundaki kaytlar Rza ptal : Yetki Bekleniyor Sre Am olarak gncellenir. Bkz. 8. Madde. \n \n \n GKD'nin gereklemedii durumlardan HHS haberdardr. HHS yonlendirme adresinin query parametrelerine rizaIptDtyKod deerini ekleyerek bu durumu YSe bildirmek zorundadr. \n \n \n Rza durumunun  Yetkilendirildi\" , Yetki Kullanld olduu durum.  Yetki Bekleniyor  Yetki ptal   B   I / 07 \n \n \n Rzano ile kimlik bilgileri uyumazl.  Yetki Bekleniyor  Yetki ptal  B  I / 08 \n \n \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) Yetki Bekleniyor  Yetki ptal   B I / 09 \n \n \n Ak bankaclk kanalnz ileme kapaldr.Yetki Bekleniyor  Yetki ptal  B I / 10 \n \n \n Kullancnn HHS'deki hesaplarnda yeterli yetkisinin olmama durumu  Yetki Bekleniyor  Yetki ptal  B  I / 11 \n \n \n HK'nn ilgili HHS mterisi olmad durum Yetki Bekleniyor  Yetki ptal  B  I / 12 \n \n \n HHSnin HK iin yapt kontrollerin baarsz olduu durum Yetki Bekleniyor  Yetki ptal   B  I / 13 \n \n \n HK, kendini dorulayamam olabilir. Baarsz GKD Yetki Bekleniyor  Yetki ptal  B  I / 14 \n \n \n HK istei ile GKDden vazgeildii durum Yetki Bekleniyor  Yetki ptal  B  I / 15 \n \n \n Dier Yetki Bekleniyor   Yetki ptal   B   I / 16 \n \n \n \n \n \n \n GKD muafiyeti olduunda YS HHSden arka planda onay alr. Bu onay srasnda rza durumu  Yetkilendirildi  yaplr.  B  Y \n \n \n Eriim Belirteci API \na. Eriim Belirteci'nin yetkilendirme kodu ile arm yapldnda; \n  i. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise   TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n ii. Rza durumu Yetki Bekleniyor - B , Yetki Kullanld - K  ya da Yetki deme emrine dnt - E  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iii. Rza durumu Yetkilendirildi - Y olduunda eriim belirteci tahsis edilir.\nEriim belirteci alndnda rza durumu K: Yetki Kullanld yaplr.  Y K \n b. Yenileme belirteci karl eriim belirteci alnmas srasnda; yenileme belirteci kontrol ve sonrasnda rza kontrol yaplmaldr. \n  i. ncelikle Yenileme Belirteci Geerlik Sresi kontrol yaplmaldr. Geerli bir Yenileme Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n ii. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n iii. Rza durumu Yetki Bekleniyor - B ya da Yetkilendirildi - Y  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iv. Rza durumu Yetki Kullanld - K veya Yetki deme Emrine Dnt  E olduunda, yenileme belirteci karl eriim belirteci tahsis edilir. \n \n \n deme Balatma API nce eriim belirteci ve sonrasnda rza kontol yaplarak gerekletirilmelidir \n \n ncelikle Eriim Belirteci kontrol yaplmaldr. Geerli bir Eriim Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n Rza durumu Yetki Bekleniyor - B , Yetkilendirildi - Y, Yetki deme Emrine Dnt - E  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n Rza durumu Yetki Kullanld - K olduunda deme emri gerekletirilir.  Rza durumu Yetki Kullanld - K'dan Yetki deme Emrine Dnt  E yaplmaldr.   K E \n \n \n \n Sorgulama: GKD ileminin baaryla tamamlanp deme Emri Rzasnn yetkilendirilmesi esnasnda, gnderen hesap seiminin HHS ekrannda yapld durumlarda, deme emri isteinde gnderen hesap bilgileri alannn zorunlu olmas nedeniyle, demeEmriRizasi nesnesi sorgulanarak gnderen hesap bilgileri (hesap numaras ve/veya hesap referans) alnmaldr.\nRza sorgulama, deme Emri Sorgulama API'lerinde ilgili rza kayd bulunamaz veya sorgulayan kurumun yetkisi yoksa (rn : YSn farkl bir YSe ait rza noyu sorgulamas) \n TR.OHVPS.Resource.NotFound  hatas verilmelidir. \n \n \n deme Emri Rzasnn ptali bulunmamaktadr. \n \n \n HHS/YS tarafnda rza bilgileri belirli aralklarla sistem kullancs tarafndan taranr:\n5 dakikadan uzun sredir Yetki Bekleniyor'da kalan kaytlarn durumlar gncellenir.\nYetki Bekleniyor  Rza ptal / Sre Am : Yetki Bekleniyor  B  I / 04 \n 5 dakikadan uzun sredir Yetkilendirildi'de kalan kaytlar durumlar gncellenir.\nYetkilendirildi      Rza ptal / Sre Am : Yetkilendirildi  B  I / 05 \n 5 dakikadan uzun sredir Yetki kullanld'da kalan kaytlar durumlar gncellenir.\nYetki kullanld  Rza ptal / Sre Am : Yetki demeye Dnmedi  B  I / 06 \n Yenileme belirteci Son Tarih geldiinde rza durumu Yetki deme emrine dntden Yetki Sonlandrld'ya gncellenir. \n E  S \n \n \n GKD muafiyeti sadece deme balatma servislerinde bulunmaktadr. \n \n \n"},{title:"2.Kapsam ve Dayanak",frontmatter:{},regularPath:"/v1.0.1/contents/kapsam-ve-dayanak.html",relativePath:"v1.0.1/contents/kapsam-ve-dayanak.md",key:"v-7e81b77d",path:"/v1.0.1/contents/kapsam-ve-dayanak.html",content:" 2.Kapsam ve Dayanak \n 12 Kasm 2019da gncellenen  6493 sayl deme ve Menkul Kymet Mutabakat Sistemleri, deme Hizmetleri ve Elektronik Para Kurulular Hakknda Kanun un (Kanun) 12nci maddesine yeni eklenen ve  deme Hizmetleri Direktifi 2 'de (Payment Services Directive 2, PSD2) bulunan iki yeni deme hizmeti aadaki gibi tanmlanmtr (ekil-1: deme Hizmetleri Veri Paylam Servisleri): \n \n deme Emri Balatma Hizmeti : HKnn istei zerine baka bir deme hizmeti salaycsnda bulunan  deme hesabyla  ilgili sunulan deme emri balatma hizmeti [Madde 12, birinci fkra, (f) bendi] \n Hesap Bilgisi Hizmeti : HKnn onaynn alnmas kouluyla, HKnn deme hizmeti salayclar nezdinde bulunan bir veya daha fazla  deme hesabna  ilikin konsolide edilmi bilgilerin evrim ii platformlarda sunulmas hizmeti [Madde 12, birinci fkra, (g) bendi] \n \n   \n ekil 1: deme Hizmetleri Veri Paylam Servisleri (HVPS)- tantm \n Kanunun 14/A maddesinin ikinci fkrasna gre , Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetleri ile ilgili ilemlerin yrtlmesine ilikin usul ve esaslar ile taraflarca uyulmas gereken teknik ve operasyonel gereklilikler ikincil dzenlemeler uyarnca Trkiye Cumhuriyet Merkez Bankas (TCMB) tarafndan belirlenir. Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetlerinde kullanlan veri paylam servisleri  deme hizmetleri veri paylam servisleri (HVPS)  olarak adlandrlmaktadr. \n deme Hizmetleri ve Elektronik Para hrac ile deme Hizmeti Salayclar Hakknda Ynetmelikin (Ynetmelik) 59uncu maddesinin birinci fkras uyarnca hazrlanan bu belgede sz konusu deme hizmetlerini sunacak deme hizmeti salaycsnn, deme hesabnn bulunduu deme hizmeti salaycsnn, varsa ilgili dier taraflarn ve bu hizmetlerin sunulmas iin taraflar arasnda kurulacak balantnn teknik ve operasyonel gereklilikleri aklanmaktadr. \n Dzenlemeler kapsamnda yetkilendirilen nc taraf hizmet salaycs  (Yetkili deme Hizmeti Salaycs, YS) , deme hizmeti kullanclarnn  Hesap Hizmeti Salayclar (HHS)  nezdindeki deme hesaplarna ulaarak deme emri balatma ve hesap bilgisi salama hizmetlerinden (deme hizmetleri veri paylam servislerinden) faydalanmasna araclk eder. deme hizmetleri veri paylam servisleri kapsamnda iki tip YS bulunmaktadr:  1) Hesap Bilgisi Hizmeti Salaycs (HBHS) ve 2) deme Emri Balatma Hizmeti Salaycs (BHS). \n Hesap Bilgisi Hizmeti Salaycs (HBHS) HKnn farkl Hesap Hizmeti Salayclar (HHS) nezdindeki hesaplarnn bilgilerini derleyerek evrim ii platformlarda  toplu ekilde  sunar. deme Emri Balatma Hizmeti Salaycs (BHS) ise talebi zerine HKnn HHSde bulunan deme hesabndan deme ilemi balatr. \n HVPSnin st dzey gsterimi ekil-2de verilmitir. \n   \n ekil 2: deme Hizmetleri Veri Paylam Servisleri (HVPS) -st dzey gsterim \n deme Hizmetleri Veri Paylam Servislerinin HHSler tarafndan  BKM API Geidi  vastasyla sunulduu uygulama mimarisi ise ekil-3te sunulmutur. \n  \n ekil 3: HVPS'nin BKM API Geidi vastasyla sunumu \n"},{frontmatter:{},regularPath:"/v1.0.1/contents/tanim-ve-kisitlamalar.html",relativePath:"v1.0.1/contents/tanim-ve-kisitlamalar.md",key:"v-1178fa5d",path:"/v1.0.1/contents/tanim-ve-kisitlamalar.html",content:"  1.\tTanm ve Ksaltmalar   \n Tablo 1: Tanm ve Ksaltmalar \n \n \n \n Ksaltma \n Tanm \n Aklama \n ngilizce Aklama \n ngilizce Ksaltma \n \n \n \n \n S \n ereve Szleme \n deme hizmeti salaycs ile mteri arasnda tekil veya sreklilik arz eden deme ilemlerinin yrtlmesine ve mmkn olan durumlarda deme hesabnn almasna ilikin usul ve esaslar belirleyen szleme \n \n \n \n \n EPK \n Elektronik Para Kuruluu \n Kanun kapsamnda elektronik para ihra etme yetkisi verilen tzel kii \n Electronic Money Institution \n EMI \n \n \n FAST \n Fonlarn Anlk ve Srekli Transferi \n TCMB tarafndan iletilen Fonlarn Anlk ve Srekli Transferi Sistemi \n \n \n \n \n FAST TR-Karekod \n FAST-TR Karekod Teknik lke ve Kurallar Rehberi \n TR Karekodun FAST Sistemi araclyla gerekleecek ilemlerde kullanlmasna ilikin detayl teknik ilke ve kurallarn ieren dokman \n \n \n \n \n GKD \n Gl Kimlik Dorulama \n Kimlik dorulamada kullanlan ve bir bileenin ele geirilmesinin dier bileenin gvenliini tehlikeye atmayaca en az iki bileenden oluan, bu iki bileenin de mterinin bildii, sahip olduu veya biyometrik bir karakteristii olan bileen snflarndan farkl ikisine ait olacak ekilde seildii yntem \n Strong Customer Authentication \n SCA \n \n \n B \n lem Bilgisi \n Gerekletirilen ileme ilikin ilem zamann, ilemin niteliini ve deme ilemi iin deme emrinin masraf, komisyon ve cretler de dahil hesabn borlandrlaca toplam tutarn ve demenin gndereni ile alcsn veya toplu deme emrinin masraf, komisyon ve cretler de dahil hesabn borlandrlaca toplam tutarn ve gndereni ile alclarn ieren bilgi \n \n \n \n \n DK \n lem Dorulama Kodu \n Kimlik dorulama yntemlerinden biriyle kendisini sisteme tantan bir mterinin gerekletirmek istedii ileme zg olmak ve belirli bir geerlilik sresi iinde ilem onaynda kullanlmak zere oluturulan, finansal sonu dorunan ilemlerde kiiye onay annda ilgili ilem bilgisi (B) ile birlikte gsterilen, alc veya tutarn deimesiyle geersiz hale gelen bilgi \n Authentication Code \n AC \n \n \n KOLAS \n Kolay Adresleme Servisi \n Fon transferlerinde hesap numaras ile ad soyad yerine kullanlan ve belirli bir hesap ile eletirilmi telefon numaras, e-posta adresi, T.C. Kimlik Numaras (TCKN), Vergi Kimlik Numaras (VKN), Yabanc Kimlik Numaras veya Pasaport Numaras gibi Kolay Adres bilgilerinin kaydedilmesini, gncellenmesini ve sorgulamasn salayan katman servis \n \n \n \n \n HBHS \n Hesap Bilgisi Hizmeti Salaycs \n Kanunun 12 inci maddesinin birinci fkrasnn (g) bendinde tanmlanan deme hizmetini (hesap bilgisi hizmetini) sunan tzel kii \n Account Information Service Provider \n AISP \n \n \n HHS \n Hesap Hizmeti Salaycs \n Nezdinde deme hesab bulunan deme hizmeti salaycs \n Account Servicing Payment Service Provider \n ASPSP \n \n \n BHS \n deme Emri Balatma Hizmeti Salaycs \n Kanunun 12 inci maddesinin birinci fkrasnn (f) bendinde tanmlanan deme hizmetini (deme emri balatma hizmetini) sunan tzel kii \n Payment Initiation Service Provider \n PISP \n \n \n DK \n deme Kuruluu \n deme hizmeti salamak ve gerekletirmek iin Kanun kapsamnda yetkilendirilmi tzel kii \n Payment Institution \n PI \n \n \n H \n deme Hesab \n deme hizmeti kullancs adna alan ve deme ileminin yrtlmesinde kullanlan hesap \n Payment Account \n PA \n \n \n HK \n deme Hizmeti Kullancs (Mteri) \n Gnderen, alc veya her ikisi sfatyla belirli bir deme hizmetinden faydalanan gerek veya tzel kii \n Payment Service User \n PSU \n \n \n HS \n deme Hizmeti Salaycs \n 5411 sayl Kanun kapsamndaki bankalar, EPK, DK ve Posta ve Telgraf Tekilat Anonim irketi(PTT) \n Payment Service Provider \n PSP \n \n \n HVPS \n deme Hizmetleri Veri Paylam Servisleri \n Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetlerinde kullanlan veri paylam servisleri \n \n \n \n \n PS \n Perakende deme Sistemi \n TCMB tarafndan iletilen, ilemlerin Trk Liras zerinden gerekletii Mteriler Aras Trk Liras Aktarm Sistemi \n \n \n \n \n TR-Karekod \n TR-Karekod lke ve Kurallar \n Ulusal karekod (TR Karekod) ilke ve kurallarnn belirlendii belge \n \n \n \n \n YS \n Yetkili deme Hizmeti Salaycs \n deme emri balatma hizmeti ve/veya hesap bilgisi hizmeti sunan tzel kii \n Third Party Payment Service Providers \n TPP \n \n \n \n"},{title:"3. Temel Prensipler",frontmatter:{},regularPath:"/v1.0.1/contents/temel-prensipler.html",relativePath:"v1.0.1/contents/temel-prensipler.md",key:"v-432b5bd6",path:"/v1.0.1/contents/temel-prensipler.html",headers:[{level:2,title:"3.1 Genel",slug:"_3-1-genel"},{level:2,title:"3.2.\tstem (ar) ve Oturum",slug:"_3-2-istem-cagr-ve-oturum"},{level:2,title:"3.3.\tRESTful API",slug:"_3-3-restful-api"},{level:2,title:"3.4.\tSrm Ynetimi",slug:"_3-4-surum-yonetimi"},{level:2,title:"3.5.\tKaynak URI Yol Yaps",slug:"_3-5-kaynak-uri-yol-yaps"},{level:2,title:"3.6.\tKarakter Kodlama",slug:"_3-6-karakter-kodlama"},{level:2,title:"3.7.\tVeri Format",slug:"_3-7-veri-format"},{level:2,title:"3.8.\tstemci Sertifika Ynetimi",slug:"_3-8-istemci-sertifika-yonetimi"},{level:2,title:"3.9.\tYetkilendirme Trleri",slug:"_3-9-yetkilendirme-turleri"},{level:2,title:"3.10. stek/Cevap Mesajlarnda Kullanlan Nesne Yaplar",slug:"_3-10-istek-cevap-mesajlarnda-kullanlan-nesne-yaplar"},{level:2,title:"3.11. Sayfalandrma ve Filtreleme",slug:"_3-11-sayfalandrma-ve-filtreleme"},{level:2,title:"3.12. Mesaj mzalama",slug:"_3-12-mesaj-imzalama"},{level:2,title:"3.13. Durum Kodu",slug:"_3-13-durum-kodu"},{level:2,title:"3.14. Gereksinimlerinin Snflandrlmas",slug:"_3-14-gereksinimlerinin-snflandrlmas"},{level:2,title:"3.15. stek Bal",slug:"_3-15-istek-baslg"},{level:2,title:"3.16. Yant Bal",slug:"_3-16-yant-baslg"},{level:2,title:"3.17. Idempotency Kurallar",slug:"_3-17-idempotency-kurallar"},{level:2,title:"3.18. HTTP Durum Kodlar",slug:"_3-18-http-durum-kodlar"},{level:2,title:"3.19. Maskeleme Kurallar",slug:"_3-19-maskeleme-kurallar"},{level:2,title:"3.20. Fonksiyonel Olmayan Gereksinimler",slug:"_3-20-fonksiyonel-olmayan-gereksinimler"}],content:' 3. Temel Prensipler  \n Bu blmde deme Hizmetleri Veri Paylam Servisleri (Hesap Bilgisi Hizmeti, deme Emri Balatma Hizmeti) iin tanmlanan temel prensipler aklanmaktadr. \n 3.1 Genel \n \n \n HHSler Ynetmeliin 59. maddesinin beinci fkras ve deme ve Elektronik Para Kurulularnn Bilgi Sistemleri ile deme Hizmeti Salayclarnn deme Hizmetleri Alanndaki Veri Paylam Servislerine likin Tebliin (Tebli) 23. maddesinin birinci fkras uyarnca, deme hizmetleri veri paylam servislerini BKM API Geidi araclyla HBHS ve BHSye sunmakla ykmldr. \n \n \n Tebliin 23. maddesinin ikinci fkras uyarnca deme emri balatma hizmetinde ak iletiim servisinin taraflar BHS ile HHSdir. \n \n \n Tebliin 23. maddesinin nc fkras uyarnca hesap bilgisi hizmetinde ak iletiim servisinin taraflar HBHS ile HHSdir. \n \n \n Ynetmeliin 60. maddesinin birinci fkras uyarnca mteri, deme emri balatma hizmetini  deme hesabnn evrim ii olarak eriilebilir olduu durumlarda , kullanmay tercih edebilir. \n \n \n Ynetmeliin 61. maddesinin birinci fkras uyarnca mteri, hesap bilgisi hizmetini  deme hesabnn evrim ii olarak eriilebilir olduu durumlarda , kullanmay tercih edebilir. \n \n \n Tebliin 25. maddesi uyarnca HHS ve YS (BHS ve HBHS) arasnda balant utan uca gvenli bir ekilde salanr. Bu amala iletim katmannda TLS (asgari 1.2 srm) ile ifreli iletiim salanr. \n \n \n Tebliin 23. maddesinin drdnc fkras uyarnca HHS tarafndan sunulan deme hizmetleri veri paylam servislerini kullanan yetkilendirilmi deme hizmeti salayclarnn TCMB tarafndan ilgili deme hizmeti iin yetkilendirilmi olduu kontrol edilir. \n \n \n Tebliin 25. maddesinin beinci fkras uyarnca zaman damgas, 15/1/2004 tarihli 5070 sayl Elektronik mza Kanunu kapsamnda tanmlanan zaman damgasna dayanr. \n \n \n API alan isimleri Trke olarak tanmlanmtr. Ancak API bal (header) alanndaki alan isimleri zelinde, API Geitleri tarafndan otomatik olarak tannabilmesi gzetilerek, ngilizce isimlendirme tercih edilmitir. \n 3.2.\tstem (ar) ve Oturum \n \n \n Her istek biricik istek numaras ve HKl ilemler iin zaman damgas ierir. Birden fazla istek ieren ilem YS tarafndan belirlenen arya zg talep kimlii (istek numaras: x-request-id) ve ilem akna zg talep kimlii (ilem grup numaras: x-group-id) deerleri kullanlarak HHS tarafndan bir oturum yaklam ile srdrlr (Bknz. 3.15 stek Bal). \n \n \n Oturum takibi ise ilem grup numaras ile yaplr. lem grup numaras da HKl ilemler iin zaman damgas ile birlikte ilgili tm ilem verilerini ierecek ekilde kayt altna alnr. \n \n \n rnein, bir deme emri balatma ilemi birden fazla istekten oluur. Her istek yukarda belirtildii gibi biricik istek numaras ve HKl ilemler iin zaman damgas ierir. Ancak ilemin oturum btnl ilem grup numaras ile salanr. \n \n \n Taraflar atklar oturumu ilem btnln salayacak sre ierisinde ak tutar ve ilem biter bitmez kapatr. \n 3.3.\tRESTful API \n APIler, dnya leinde yaygn bir ekilde kullanlan Temsili Durum Transferi (Representational State Transfer, REST) mimari tarz ve JavaScript Nesne Notasyonu (JavaScript Object Notation, JSON) veri formatlarna uygun olarak gelitirilir. En st seviye Veri Tanmlama Dili (Data Description Language) ve en iyi uygulama rnekleri iin  ^JSON emas  temel alnr. \n 3.4.\tSrm Ynetimi \n API sonraki aamalarda doabilecek gereksinimleri ve daha karmak kullanm durumlarn karlamak iin srmler halinde gelitirilir ve bu durum tasarm srasnda gz nnde bulundurulur. \n API v1.0 srmnde ; \n \n Kapsamdaki deme hesaplar : Vadesiz TL, yabanc para hesaplar (gerek ve tzel kiilere ait deme hesaplar), Kredili Mevduat Hesab \n Tekil deme (Virman/Havale/FAST/Mterileraras TL Aktarm Sistemi)\n \n Virman ve havale ilemleri kapsamnda yabanc para transferi yaplabilir. \n \n \n Hesap bilgisi hizmetleri\n \n Temel veya ayrntl hesap bilgisi \n Bakiye \n Gerekleen ilemler iin Hesap hareketleri \n \n \n Karekodlu demelerdeki 01, 02 ve 03 ak trleri\nyer almaktadr. \n \n Her srm deiikliinde bir nceki srm belirli bir sre desteklenecektir. Dier bir ifadeyle, sadece belirli bir sre iin mevcut ve bir nceki srm ayn anda eriilebilir olacaktr. \n 3.5.\tKaynak URI Yol Yaps \n YSlerin balatt arlarda URI yolu aadaki yapy takip eder: \n [hhs-yol-n-eki]/ohvps/ [kaynak-grubu]/ [srm]/ [kaynak]/[kaynak-no]/[alt-kaynak] \n Bu, aadaki unsurlardan oluur: \n \n [hhs-yol-n-eki] \nstee bal, HHS\'ye zg yol n ekini ifade eder. \nBKM API geidi zerinden yaplan arlarda BKM tarafndan belirlenen sistem ad ve yol n eki kullanlr. \n ohvps \nSabit metin ohvps (deme Hizmetleri Veri Paylam Servisleri ksaltmas) \n [kaynak-grubu] \nKaynak grubu, APIye erimek iin kullanlan deme hizmetine (HBH, BH) gre eriim adresi (end point) grubunu tanmlar (hbh veya obh). \n [srm] \nAPI srmn ifade eder (/s[ana-srm].[alt-srm]/). \n [kaynak]/[kaynak-no] \nKaynak detaylarn ifade eder. \n [alt-kaynak] \nAlt kaynak detaylarn ifade eder. \n \n HHS, tm kaynaklar iin ayn katlmc yolu n ekini ve sistem adn kullanmaldr. \n BKM APIlerine erimek isteyen uygulamalarn yetkilerine gre aadaki APIlere abone olmalar gerekmektedir: \n OBH: \n https://apigw-prod.bkm.com.tr/api/main/ohvps/obh/s1.0/odeme-emri-rizasi \n https://apigw-prod.bkm.com.tr/api/main/ohvps/obh/s1.0/odeme-emri \nHBH: \n https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesap-bilgisi-rizasi \n https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesaplar \n https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesaplar/1234/islemler \n https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesaplar/1234/bakiye \nGKD \n https://apigw-prod.bkm.com.tr/api/main/ohvps/gkd/s1.0/erisim-belirteci \nHHS  YS API \n https://apigw-prod.bkm.com.tr/api/main/hhs-api/s1.0/hhs \n https://apigw-prod.bkm.com.tr/api/main/hhs-api/s1.0/hhs/1234 \n https://apigw-prod.bkm.com.tr/api/main/yos-api/s1.0/yos \n https://apigw-prod.bkm.com.tr/api/main/yos-api/s1.0/yos/1234 \n HHSlerin salayacaklar APIlerdeki URI evrimi rnekleri aadaki gibidir. \n \n https://xbank.com.tr/api-portal/ohvps/obh/s1.0/odeme-emri \n https://apigw-prod.bkm.com.tr/api/main/ohvps/obh/s1.0/odeme-emri  (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.0/hesap-bilgisi-rizasi \n https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesap-bilgisi-rizasi  (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesaplar \n https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.1/hesaplar   (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesaplar/1234 \n https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.1/hesaplar/1234  (BKM API) \n \n BKM API Geidi zerinden yaplan arlarda, istek balnda bulunan x-aspsp-code (istein iletildii Hesap Hizmeti Salaycsnn kodu) deerine gre HHS APIde standart olarak tanmlanm olan basePath bilgisine servis uzants eklenerek HHSye ynlendirme yaplr. \n rnein, istek balnda  xbank n kodu varsa, YS tarafndan yaplan \n https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesap-bilgisi-rizasi \nars BKM API Geidi tarafndan karlanarak \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.0/hesap-bilgisi-rizasi \nadresine ynlendirilir. \n Bu rnekte,  https://xbank.com.tr/api-portal  basePath bilgisi HHS tarafndan HHS APIye girilen deerdir. \n 3.6.\tKarakter Kodlama \n API istekleri ve yantlarnda UTF-8 karakter kodlamas kullanlr. Bu, JSON iin varsaylan karakter kodlamasdr. \n Ancak, bir HHS\'nin kendi uygulamalar ve deme balatt deme sistemi (FAST vb.)  baz UTF-8 karakterlerini kabul etmeyebilir. HHS, UTF-8 kodlamas ieren bir mesaj ileyemez ve reddederse, HTTP 400 (Hatal stek) durum kodu ile yant vermelidir. \n 3.7.\tVeri Format \n \n Ak bankaclk kapsamndaki zaman damgas, ISO 8601 standartna uygun olarak yerel saat bilgisini ve timezone bilgisini de ierecek ekilde " yyyy-MM-ddTHH:mm:ssXXX " formattaki haliyle hazrlanmaldr. \n \n rnek:  "timestamp": "2021-05-30T20:34:15+03:00" \nyyyy : 4 hane yl \nMM : Baa 0 eklenmi, toplam 2 hane ay \ndd    : Baa 0 eklenmi, toplam 2 hane gn \nHH    : Baa 0 eklenmi, toplam 2 hane saat (0-23 aras deer alabilir.) \nmm : Baa 0 eklenmi, toplam 2 hane dakika \nss    : Baa 0 eklenmi, toplam 2 hane saniye \nXXX : ISO 8601 Time zone \n \n JWT veri paketlerinde kullanlan zaman damgalar, 1 Ocak 1970 Saat 00:00:00 (UTC) anndan itibaren geen saniye says deerini (Unix Time) kullanr. \n Bir HHS, tarihi yanl biimlendirilmi bir istek aldnda, 400 (Hatal stek) durum kodu ve ilgili hata kodu ile yant verir. \n Tm tutar alanlar tam say olarak, para birimleri ise ISO4217deki 3 harfli kodla iletilir. Tutar alan, tutara ilikin para biriminin ISO4217de tanml olan tam saydan sonraki uzunluuna gre formatlanarak okunmaldr. rnein 1,20 TRY iin tutar alannda 120 deeri iletilir, para birimi TRY olduu iin son iki basaman kuru olduu sonucuna ulalacaktr. 12000 Japon Yeni iin, ISO4217de JPY para biriminin ondalk ksm olmadndan tutar alannda 12000 deeri iletilir. \n Sral veri tipleri byk kk harfe duyarldr. \n Altn para birimi ISO4217ye uygun biimde XAU cinsinde ve virglden sonra 2 basamak olacak ekilde iletilmelidir. rnein ierisinde "13,5 gr" altn olan hesap iin bakiye 1350 gnderilmelidir. \n 3.8.\tstemci Sertifika Ynetimi \n HVPS kapsamnda YS ve HHSlerin gvenli bir ekilde tanmlanmas amacyla elektronik sertifikalar kullanlr. \n HVPS kapsamnda taraflarn gvenli bir ekilde tanmlamas, utan uca gvenli iletiim, mesaj ifreleme ve mesaj imzalama ilevleri 15/1/2004 tarihli ve 5070 sayl Elektronik mza Kanununda aklanan elektronik sertifikalar kullanlarak salanr. Elektronik sertifikada Trkiye Cumhuriyet Merkez Bankas tarafndan verilen kurulu kodu ve kuruluun trne dair bilgiler bulunur. \n BKM API Geidi zerinden yaplan eriimlerde YS ve HHSlere nceden datlm olan istemci sertifikalar kullanlarak taraflarn (sunucu) kimliklerinin dorulanmas salanacaktr. stemci sertifikalar hem test hem de retim ortamnda kullanlacaktr. Sertifikalarn ilevsellii ve geerlilii sertifikasyon srecinde de snanacaktr. Sz konusu sertifikalarn datm prosedrleri ve kullanmlara ynelik aklamalar EK-3te yer verilmitir. \n 3.9.\tYetkilendirme Trleri \n BKM API Geidi zerinden yaplan arlarda iki temel yetkilendirme tr kullanlr: \n 1.\tstemci Kimlik Bilgileri:  Mteri onaynn gerekmedii, sadece YSn tanmlanp doruland API arlarnda kullanlr. YSn yetkilendirilmi olduu ve faaliyet izninin yapt hizmet arsna uygun olduu kontrol edilir.  Bu amala, YSlere clientId ve clientSecret tahsis edilecektir. YSler ilgili clientId ve clientSecret ile sadece yetkilendirilmi olduklar servislere eriebileceklerdir. YSler kendilerine BKM tarafndan sunulacak APIyi, kendi clientID ve clientSecret deerleri ile sorgulayarak stemci Kimlik Bilgileri belirtecini (access token) elde edeceklerdir.\nHHSler de BKM API geidi zerindeki YS APIsini sorgulama maksad ile BKM API Geidine geldiklerinde, kendilerine atanm olan clientID ve clientSecret bilgileri ile yetki kontrolleri yaplr.\nHHSler kendilerinden alnacak username ve password deerleri kullanlarak oluturulacak basic authentication metodu ile servislerini sunacaklardr. \n 2.\tYetkilendirme Kodu:  YSn dorulanmasnn yansra mterinin GKD ile dorulanmas gereken API arlarnda kullanlr. Mteri dorulanarak yetkilendirme kodu oluturulmas HHSnin yetkilendirme arayzne ynlendirilir. GKDnin baaryla tamamlanmas sonrasnda yetkilendirme kodu YSe dnlr. YS daha sonra HHSnin  eriim belirteci  (access token) eriim adresini (EK-3: POST /erisim-belirteci) armak suretiyle yetkilendirme kodunu bir eriim belirteci (access token) ile deitirerek ilgili kaynaklar kullanabilir. \n deme emri balatma ve hesap bilgisi hizmetlerinde hangi yetkilendirme trlerinin kullanlaca bilgisi, ilgili balklardaki eriim adresleri (endpoints) tablolarnda yer almaktadr. \n erisim-belirteci  erisim noktasndan elde edilen  erisimBelirteci  ilikilendirildii nesne veya ilem iin gnderilen POST istei balnda  x-access-token  alannda iletilir.\nBelirli bir sre iin tanmlanan eriim belirteci (access token) deerinin yenileme belirteci (refresh token) ile yenilenmesi gerekir. \n Eriim adreslerinde kullanlan yetkilendirme tr ilgili eriim adresi tablolarnda belirtilmitir. \n 3.10. stek/Cevap Mesajlarnda Kullanlan Nesne Yaplar \n stek ve Cevap mesajlarnda kullanlacak olan nesneler tm elemanlarn kapsayacak ekilde Ek-1 de listelenmitir. Tm listelenen elemanlar asndan (U nokta mesaj yaplarnn belirtildii tablolarda belirtildii zere) alann Zorunlu (z) veya stee Bal () olma durumlarna gre baz alanlar gnderilebilir veya gnderilmeyebilir. \n 3.11. Sayfalandrma ve Filtreleme \n Sayfalandrma \n arya dnlen kaynak nesnesi ierisindeki kaytlar bir sayfalandrma yaps ile arlacak ekilde istek oluturulur. \n Oluturulacak istein ierisinde parametreler ile filtreleme, sayfa bana gsterilecek kayt says ve hangi sayfann nyzde gsterilecei bilgileri eriim noktasna iletilir ve ilgili kaytlar cevap olarak alnr. \n Filtreleme \n HHS, birden ok kayt dnlmesi gereken GET arlarnda snrl filtreleme destei salamaldr. Filtre parametreleri her zaman kaynak nesnesinin belirli alanlarna zgdr ve nesne iin tanmlanan kurallara uymaldr. \n 3.12. Mesaj mzalama \n Elektronik imzalar, HVPS APIde gerekletirilen ilemlerin ve tanan verilerin btnlk ve inkr edilemezliini destekler. mzalarn kaynak baznda hangi istek ve yantlara uyguland belirlidir. \n API yalnzca TLS\'ye dayanrsa, dijital kaytlar ve inkr edilemezlik kantlarn tutmak zor olur. Bu nedenle, TLS\'ye dayanmayan bir inkr edilemezlik zm olarak API isteinin HTTP balnda bir JWS kullanlarak salanabilir. \n HTTP isteinin gvdesinin hash fonksiyonu (SHA256) ile zeti alnacaktr. Elde edilen zet, asimetrik anahtarlar destekleyen bir algoritma kullanlarak imzalanacak ve JWS elde edilecektir. \n Bir istek, YS\'nin zel anahtar ile imzalanacak ve bu istee karlk gelen yant, HHS\'nin zel anahtar tarafndan imzalanacaktr. \n Tm API istekleri ve yantlar imzalanmaz. Mesaj imzalamann zorunlu olup olmad, desteklenip desteklenmedii her API zelinde belirlenir. \n Anahtar Deposu \n HHS\'ler ve YS\'ler tarafndan gvenilen bir Gven Otoritesi (Trust Anchor), taraflar iin bir genel anahtar deposu salamaktan sorumludur. \n Gven Otoritesi, taraflardan herhangi birisinin oluturduu bir anahtar iftinin ak blmn saklayan merkezi bir dizin (BKM tarafndan tutulan merkezi kayt sistemi vb.) olacaktr. \n Mesajlar dorulamak iin taraflarn genel anahtarlarnn paylalmas iin BKM bir servis salayacaktr. HHS API olarak adlandrlm olan bu servis ile HHS ve YS listelerine ulalabildii gibi dorulama ilemi iin ihtiya duyulacak olan genel anahtarlara da bu servis zerinden eriilebilinecektir. \n lgili Mesaj ifreleme iin genel ak, Ek-5 blmnde detaylaryla paylalmaktadr. \n 3.13. Durum Kodu \n APIler, iki farkl amaca hizmet eden iki durum kodu kullanr: \n \n HTTP Durum Kodu, API arsnn (kaynaktaki HTTP ilemi) sonucunu yanstr. \n Baz kaynak payloadlarndaki Durum alan, kaynaklarn durumunu yanstr. \n 3.14. Gereksinimlerinin Snflandrlmas \n Eriim adreslerinin ve alanlarn kullanm Zorunlu(Z), stee Bal() veya Koullu(K) olabilir. Kullanmlara ilikin durumlar ve kullanmn (K) koullu olduu duruma ilikin aklamalar ilgili tablolarda belirtilmitir. \n stek ve yantta kullanlacak balk isimleri, ilgili RFC dokmanlarnda ve aadaki tabloda yer ald ekilde kullanlacaktr.  Uygulamaya zellemi balklar "X-" ile balayacaktr. Balk isimlerinde yer alacak ksaltmalar (rn. PSU, ASPSP gibi) tamam byk harfle yazlacak ekilde tanmlanacaktr. Balk isimleri byk  kk harfe duyarl olmamaldr. rnein x-request-id ya da X-Request-ID olarak gnderilmi olan bir istek bal deikeni, sunucu tarafnda hata vermeyecek ekilde ilenebilmelidir. \n 3.15. stek Bal \n Tablo 2: stek Balnda Yer Alan Veriler \n \n \n \n Balk simleri \n Format \n Notlar \n POST \n GET \n DELETE \n \n \n \n \n X-Request-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen arya zg talep kimlii. stek numaras.   rnek: deme emri balatma i aknn her admda farkl x-request-id deeri kullanlr.   arlarn ayn yant dnmesinin beklendii durumlarda (idempotent ilemlerde) ayn deer ile ar yaplr. \n Z \n Z \n Z \n \n \n X-Group-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen ilem akna zg talep kimlii. lem grup numaras.  Ayn rza noya ait tm isteklerde ayn x-group-id bilgisi deeri gnderilmelidir. rnek: deme emri balatma/hesap bilgisi i aknn her admnda ayn x-group-id deeri kullanlr. \n Z \n Z \n Z \n \n \n Content-Type \n AN1..20 \n Standart HTTP Bal; Talepte salanan payloadn biimini temsil eder: application/json  (Baka bir deere ayarlanrsa, HHS, 415 Desteklenmeyen Ortam Tr (Unsupported Media Type) ile yant vermelidir) \n  \n - \n - \n \n \n X-ASPSP-Code \n AN4 \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n Z \n Z \n Z \n \n \n X-TPP-Code \n AN4 \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur \n Z \n Z \n Z \n \n \n PSU-Auth-Date \n ISODateTime \n HKnn YS zerinde en son oturum at saat. [RFC7231] rnein:  auth-date: Tue, 11 Sep 2012 19:43:31 GMT \n  \n  \n  \n \n \n PSU-IP-Adress \n AN7..15 \n HK YS zerinde oturum amsa, ilemi balatt cihazn IP adresi. \n  \n  \n  \n \n \n PSU-IP-Port \n AN1..5 \n HK YS zerinde oturum amsa, ilemi balatt cihazn Port adresi. \n  \n  \n  \n \n \n PSU-GEO-Location \n AN1..36 \n HKnn ilemi balatt cihazn konum bilgisi. RFC2426 standartna uygun olarak paylalmaldr. rnein  GEO:"<enlem >, <boylam>GEO:52.506931,13.144558 \n  \n  \n  \n \n \n PSU-User-Agent \n AN 1.. 255 \n HKnn ilemi balatt cihazn salad user-agent bilgisi. (Tarayc, versiyon, iletim sistemi bilgileri) \n  \n  \n  \n \n \n PSU-Timestamp \n ISODateTime \n HKnn ilemi balatt cihazn tarih saat ieren zaman bilgisi. \n  \n  \n  \n \n \n PSU-Device-ID \n AN5..40 \n HK ilemi mobil uygulama araclyla balattysa, kullanlan mobil uygulama ilk yklendiinde oluturulan tekil cihaz veya uygulama belirteci. HK cihaznn UUID deeri kullanlabilir. \n  \n  \n  \n \n \n PSU-Device-Data \n AN1..1024 \n HKnn ilemi balatt mobil cihaza ait veriler.  rnek alanlar:   - Platform - (Android, iOS, Windows 10 Mobile)  - Device Model   - OS Name   - OS Version - Locale - Time zone \n  \n  \n  \n \n \n PSU-Initiated \n AN1 \n lemin HK tarafndan balatlmas durumunda E , sistem tarafndan balatld durumda H deerini almas beklenir.   lemler servisinde yaplacak sistemsel sorgulardaki ilem limitlerini kontrol amacyla kullanlr. \n Z \n Z \n Z \n \n \n Authorization \n AN1..4096 \n YS ile BKM API Gateway arasndaki otorizasyon iin kullanlan token bilgisidir.  Yekilendirme trlerinden stemci Kimlik Bilgilerini adresler. \n Z \n Z \n Z \n \n \n X-Access-Token \n AN1..4096 \n HKnn GKD srecinde dorulanmas sonrasnda kullanlan eriim simgesi. Yetkilendirme trlerinden Yetkilendirme Kodu (GKD)nu adresler. \n  \n  \n  \n \n \n X-JWS-Signature \n AN1..4096 \n Payload gvdesinin ayrlm bir JWS imzasn ieren stbilgi.  Bu baln ne zaman belirtilmesi gerektii hususu ilgili endpoint iin belirtilmitir. \n K (Kullanlan API ve methoda gre kullanlr.) \n K \n K \n 3.16. Yant Bal \n Tablo 3: Yant Balnda Yer Alan Veriler \n \n \n \n Balk simleri \n Format \n Notlar \n Kullanm Durumu \n \n \n \n \n X-Request-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen arya zg talep kimlii. stek numaras    lgili istek balndaki bilgi geri dnlr. \n Z \n \n \n X-Group-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen ilem akna zg talep kimlii. lem grup numaras. lgili istek balndaki bu deer geri dnlr. \n Z \n \n \n X-ASPSP-Code \n AN4 \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n Z \n \n \n X-TPP-Code \n AN4 \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur \n Z \n \n \n Content-Type \n AN1..20 \n Standart HTTP Bal; Talepte salanan payloadn biimini temsil eder:  application/json \n  \n \n \n X-JWS-Signature \n AN1..4096 \n JWS imzasn ieren stbilgi. Bu baln hangi yantlar iin kullanlmas gerektii ilgili endpoint iin belirtilmitir. \n K \n \n \n Retry-After \n AN 1..255 \n YSn bir istei yeniden denemeden nce beklemesi gereken sreyi (saniye cinsinden) gsterir. HHS, 429 HTTP durum kodu (Too Many Requests) ile dnd yantlarn balnda bu bilgiyi dnmelidir. \n K \n \n \n x-total-count \n N 1..18 \n Hesaplar, lemler ve Bakiye servislerinde sayfalama kullanld durumda, sorgu sonucu dnecek toplam kayt says bilgisi, bu alanda HHS isteine bal olarak gnderilebilir. \n  \n \n \n Link \n 1..4096 \n Link alannn oklu sayfa yaps olmas durumunda gnderilmesi zorunludur.  Sayfalama yaps kullanldnda gelen yantta birden fazla sayfa var ise; nceki, sonraki, ilk, son sayfalara gitmek iin gerekli referanslar link headernda aadaki rnekteki gibi doldurulabilir.  x-total-count alannn gnderimi istee bal olduu iin; Link ierisindeki son sayfa bilgisi  (last) istee bal hale getirilmitir. nceki( prev) ve Sonraki (next) admlarnn uygun olan her durumda yer almas zorunludur. lk sayfada nceki seenei olmamal, son sayfada ise Sonraki seenei olmamaldr.    </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=6&syfKytSayi=100>; rel="next",  </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=4&syfKytSayi=100>; rel="prev",  </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=14&syfKytSayi=100>; rel="last",  </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=0&syfKytSayi=100>; rel="first" \n K \n 3.17. Idempotency Kurallar \n YSn aadaki durumlarda ayn istek numaras (x-request-id) ve ayn veri gvdesiyle ary tekrarlamas; HHSnin de bu durumlarda ayn yant dnmesi gereklidir. \n \n HHSnin yant kesinti/arza nedeniyle YSe ulamaz ve zaman am sz konusu olmas, \n HK, YS uygulamas zerinden ift tklama ile mkerrer defa HHS APIlerini arlmas,\n(API kontrollerinden nce YS uygulamasnn, ift tklama kontrol yapmas nerilmektedir.) \n YS, yant almasna ramen ileyemeden kaybedilmesi, \n \n durumlarnda HHS aadaki kurallar iletir: \n \n HHS gelen istek numarasn ve veri gvdesini birletirerek checksum deeri retir. \nchesksum deeri x-request-id|request.body nin hash algoritmalarndan (CRC32,MD5 vb)  geirilerek retilebilir. \n HHS bu checksum deeri ile YSe dnm olduu yant 5 dk boyunca saklar.  Saklama yntemi olarak veri taban veya nbellek aralar kullanlabilir. \n YS ayn istek numaras ve ayn veri gvdesi ile yeni bir ar yaptnda, ayn checksum deeri retilecei iin 5dk boyunca bu deere karlk gelen yant dner. \n 5 dk sonrasnda istek numaras veya veri gvdesi deimemi olsa dahi bu HHS tarafndan yeni istek olarak kabul edilir. \n \n Aadaki Public Post ilemleri iin bu kural setinin iletilmesi gerekmektedir: \n 1- deme emri rzas oluturma \n2- Eriim belirteci oluturma \n3- deme emri \n4- Hesap bilgisi rzas oluturma \n 3.18. HTTP Durum Kodlar \n RFC 2616\'da belirlenmi olan durum kodlar (status code) gnderilen istein durumunu YSa standart bir ekilde ifade eder. Eer bir hata varsa hatay, gnderilen istek baarl bir ekilde ilem grdyse ona ilikin durumu aktarr. Durum kodlar genel olarak 5 kategoridedir. \n \n 1xx Bilgi \n 2xx Baarl \n 3xx Ynlendirme \n 4xx stemci Hatas \n 5xx Sunucu Hatas \n \n Sral (Enumarated) Hata Tipleri: \n \n TR.OHVPS.Resource \n \n \tInvalidFormat \n \tConsentMismatch \n \tNotFound \n \tInvalidSignature \n \tMissingSignature \n \tMethodNotAllowed \n \tNotAcceptable \n \tUnsupportedMediaType \n \tConsentRevoked \n \n \n \n TR.OHVPS.Business \n \n \tInvalidContent \n \tInvalidAccount \n \n \n \n TR.OHVPS.Connection \n \n \tInvalidCertificate \n \tExceededRate \n \tInvalidTPP \n \tInvalidASPSP \n \tInvalidToken \n \tInvalidTPPRole \n \n \n \n TR.OHVPS.Server \n \n \tInternalError \n \tServiceUnavailable \n \n \n TR.OHVPS.Resource.InvalidFormat hatas alnd durumda; fieldErrors nesnesi ierisinde verilecek hata kodlar : \n \n TR.OHVPS.Field \n \n \tMissing \n \tInvalid \n \n \n Veri Tipi rnei: \n { \n   "id" :   "2b5f0fb2-730b-11e8-adc0-fa7ae01bbebc" , \n   "path" :   "/ohvps/s1.1/obh/odeme-emri-rizasi" , \n   "timestamp" :   "2020-06-13T18:24:38" , \n   "httpCode" :   400 , \n   "httpMessage" :   "Bad Request" , \n   "moreInformation" :   "Resource Schema validation error" , \n   "moreInformationTr" :   "ema kontrolleri baarsz" , \n    "errorCode" :   "TR.OHVPS.Resource.InvalidFormat" , \n   \n   "fieldErrors" :   [ \n            { \n                  "objectName" :   "odemeEmriRizasi" , \n                  "field" :   "kmlkNo" , \n                  "messageTr" :   "boyut \'6\' ile \'30\' arasnda olmal" , \n                  "message" :   "size must be between \'6\' and \'30\'" , \n                  "code" :   "TR.OHVPS.Field.Invalid" \n               } , \n               { \n                  "objectName" :   "odemeEmriRizasi" , \n                   "field" :   "prBrm" , \n                   "messageTr" :   "bo deer olamaz" , \n                   "message" :   "must not be null" , \n                   "code" :   "TR.OHVPS.Field.Missing" \n               } ] \n } \n \n Veri Tipi rnei: \n Zorunlu header alanlarndan biri ya da birka eksik olarak gnderilirse aadaki gibi bir hata dn gerekleebilir. \n \n { \n     "httpCode" :   "400" , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "One or more required API parameters are missing in the API request." \n } \n\n \n Tablo 4: HTTP Durum Kodlar \n \n \n \n HTTP Durum \n stek Sonucu ve Aklamalar \n POST \n GET \n DELETE \n \n \n \n \n 200 OK \n stek Baaryla Tamamland. Kaynak gncellemek iin yaplan (rnein, PUT) ve baaryla tamamlanan isteklerinde kullanlr. \n H \n H \n H \n \n \n 201 Created \n stek Baarl Oldu. Kaynak yaratma istei (rnein, POST /deme-emri-rizasi) baaryla sonuland. \n E \n H \n H \n \n \n 204 No Content \n Silme ilemi baaryla tamamland. Kaynak silme istei (rnein,  DELETE /hesap-rizasi/{RizaNo} ) baaryla sonuland. \n H \n H \n E \n \n \n 400 Bad Request \n stekte bozuk, eksik veya uyumlu olmayan JSON gvdesi, URL parametreleri veya balk alanlar var.  stekle balatlan ilem yapsal bozukluk, eksik veya tutarsz veri veya HHS tarafndaki kontrollerin hatal sonulanmas nedeniyle hata ile sonulanr ve hataya ilikin veriler hata nesnesi ierisinde dnlr. \n E \n E \n E \n \n \n 401 Unauthorized \n Yetkilendirme bal eksik, hatal veya geersiz olduundan istek yetkilendirilmediinde ve eriim reddedildiinde http 401 kodu dnlmelidir. \n E \n E \n E \n \n \n 403 Forbidden \n Eriim belirtecinin veya rzann kapsam uyumuyor. YS bir hesaba/ilem kaynana erimeye alr ve YS, istenen kaynaa erimek iin geerli izinlere sahip bir rzas yoktur.  rnein; hesap bilgisi rzas bakiye izni almamtr ancak /bakiyeler adresinden istekte bulunmutur. \n \n \n \n \n \n 404 Not Found \n **HHS geerli bir API eriim adresini salamyorsa, o URL\'ye gelen istekler iin 404 (Bulunamad) ile yant vermelidir.**YS, uygulama esaslarnda tanmlanmayan bir kaynak iin bir URL\'ye erimeye alrsa (rnein, GET /yurtdisi-odeme), HHS, 404 (Bulunamad) ile yant vermeyi seebilir. \n E \n E \n E \n \n \n 405 Method Not Allowed \n YS, desteklenmeyen bir yntemle kaynaa erimeye alt. \n E \n E \n E \n \n \n 406 Not Acceptable \n stek, geersiz bir karakter kmesi ieriyor. \n E \n E \n E \n \n \n 415 Unsupported Media Type \n stek gvdesi hedef kaynakta bu yntem tarafndan desteklenmeyen bir biimde oluturulduu iin ilem reddedildi \n E \n H \n H \n \n \n 429 Too Many Requests \n Belirli bir sre iinde ok fazla talepte bulunulduu iin ilem reddedildi.  HHSler adil kullanm politikalarn aan talepleri kstlayabilir. \n E \n E \n E \n \n \n 500 Internal Server Error \n API sunucu / servis katmannda sorun olutu. lem baarsz. \n E \n E \n E \n \n \n 503 Service Unavailable \n Hizmet srm kullanmdan kaldrld.  Bir API\'nin kullanmdan kaldrld ve artk bir HHS tarafndan operasyonel olarak desteklenmedii durumlarda, URI yolu hala etkin olabilir ve API isteklerini kabul edebilir.  Bu durumda, YS\'n API srmnn evrimd olduunun farknda olmas iin 503 Hizmet Kullanlamyor dnmesi nerilir. \n E \n E \n E \n \n \n \n Hata rnekleri: \n 400 Bad Request \n TR.OHVPS.Business.InvalidContent  hatas HHS tarafndan yaplacak i kural kontrollerinin baarsz olduu durumda verilmelidir. \n TR.OHVPS.Resource.InvalidFormat  hatas ema validasyonu, alan uzunluk ve varlk kontrollerinin baarsz olduu durumda verilmelidir. \n httpCode :   400 \nhttpMessage :  Bad Request\nmoreInformation :  Resource Schema validation error\nmoreInformationTr :  ema Kontrolleri Baarsz \nerrorCode :   "TR.OHVPS.Resource.InvalidFormat" \n\nfieldErrors :   \n         code :   { "TR.OHVPS.Field.Invalid" , \n                     "TR.OHVPS.Field.Missing" } \n\n \n rn; GET /odeme-emri/22289 ars durumunda 22289 geerli bir deme kayna deilse, HHS, 400 koduyla cevap vermelidir. \n { \n   "id" :   "2b5f0fb2-730b-11e8-adc0-fa7ae01bbebc" , \n   "path" :   "/ohvps/s1.1/obh/odeme-emri-rizasi" , \n   "timestamp" :   "2020-06-13T18:24:38" , \n   "httpCode" :   400 , \n   "httpMessage" :   "Bad Request" , \n   "moreInformation" :   "Resource Schema validation error" , \n   "moreInformationTr" :   "ema kontrolleri baarsz" , \n    "errorCode" :   "TR.OHVPS.Resource.InvalidFormat" , \n   \n   "fieldErrors" :   [ \n { \n "objectName" :   "odemeEmriRizasi" , \n "field" :   "kmlkNo" , \n "messageTr" :   "boyut \'6\' ile \'30\' arasnda olmal" , \n "message" :   "size must be between \'6\' and \'30\'" , \n "code" :   "TR.OHVPS.Field.Invalid" \n } , \n { \n "objectName" :   "odemeEmriRizasi" , \n  "field" :   "prBrm" , \n  "messageTr" :   "bo deer olamaz" , \n  "message" :   "must not be null" , \n  "code" :   "TR.OHVPS.Field.Missing" \n } \n ] \n } \n\n\nerrorCode :   "TR.OHVPS.Connection.InvalidTPP" \nmoreInformation :  Invalid TPP Code\nmoreInformationTr :  Geersiz Ys Kodu \n\nerrorCode :   "TR.OHVPS.Connection.InvalidASPSP" \nmoreInformation :  Invalid ASPSP Code\nmoreInformationTr :  Geersiz HHS Kodu \n\nerrorCode :   "TR.OHVPS.Connection. InvalidTPPRole" \nmoreInformation :  Invalid TPP Role \nmoreInformationTr :  Hatal Ys Rol \n \n 401 Unauthorized \n YS, sresi dolmu bir eriim belirteci kullandnda, HHS 401 (Yetkisiz) http kodu ile aadaki hata kodunu dnmelidir.  Aadaki nedenlerden herhangi biri nedeniyle bir Eriim Belirtecinin sresi dolduunda bu durum ortaya kabilir: \n \n Rzann sresi doldu (Son Kullanma Tarihi geti) \n Eriim Belirtecinin pheli kullanm veya sahtekarlk phesi \n Rzada belirlenen gn saysnn am\nBu hata, mteriden doru izinlerle yeniden kimlik dorulamas isteyerek zlebilir. \n \n errorCode :   " TR.OHVPS.Connection.InvalidToken " \nmoreInformation :  Invalid Token\nmoreInformationTr :  Geersiz Token \n \n 403 Forbidden \n httpCode :   403 \nhttpMessage :  Forbidden\n\nerrorCode :   "TR.OHVPS.Resource.Forbidden" \nmoreInformation :  Insufficient rights\nmoreInformationTr :  zin verilmedi.\n \n 404 Not Found \n httpCode :   404 \nhttpMessage :  Not Found\n\nerrorCode :   "TR.OHVPS.Resource.NotFound" \nmoreInformation :  Resource not found\nmoreInformationTr :  Kayt bulunamad\n \n 405 Method Not Allowed \n httpCode :   405 \nhttpMessage :  Method  Not Found\n\nerrorCode :   "TR.OHVPS.Resource.MethodNotAllowed" \nmoreInformation :  Method Not Allowed\nmoreInformationTr :  stek yaplan URL iin izin verilmeyen metot \n \n 406 Not Acceptable \n httpCode :   406 \nhttpMessage :  Not Acceptable\n\nerrorCode :   " TR.OHVPS.Resource.NotAcceptable" \nmoreInformation :  Accept Headers not supported\nmoreInformationTr :  Desteklenmeyen kabul balklar \n \n 415 Unsupported Media Type \n httpCode :   415 \nhttpMessage :  Unsupported Media Type\n\nerrorCode :   " TR.OHVPS.Resource.UnsupportedMediaType" \nmoreInformation :  Content type not supported\nmoreInformationTr :  Desteklenmeyen ierik tipi \n \n 429 Too Many Requests \n httpCode :   429 \nhttpMessage :  Too Many Requests\n\nerrorCode :   " TR.OHVPS.Connection.ExceededRate" \nmoreInformation :  The rate limit has been exceeded for the plan or operation being used\nmoreInformationTr :  Planda tanmlanm olan ar limiti ald\n \n 500 Internal Server Error \n httpCode :   500 \nhttpMessage :  Internal Server Error\n\nerrorCode :   "TR.OHVPS.Server.InternalError" \nmoreInformation :  Unexpected condition was encountered\nmoreInformationTr :  Beklenmedik bir durumla karlald. \n \n 503 Service Unavailable \n httpCode :   503 \nhttpMessage :  Service Unavailable\n\nerrorCode :   "TR.OHVPS.Server.ServiceUnavailable " \nmoreInformation :  API is currently unable to handle the request\nmoreInformationTr :  API u anda istei ileyemiyor \n 3.19. Maskeleme Kurallar \n Maskeli olarak iletilmesi gereken verilerin maskeleme kurallar u ekildedir: \n \n IBAN verileri Hesap Numaras : lk 4 ve son 4 karakteri ak, dier karakterler maskeli olmaldr. rnek: TR54******************4812 \n Ad-Soyad / Ticari Unvan : Her kelimenin ilk 2 karakteri ak, sonraki karakterler yerine 4 adet   karakteri konumlandrlmaldr.\nrnein: FATH SERKAN EREN ifadesi FA *** SE**** ER**** eklinde gsterilmelidir. \n Tabela Unvan : Her kelimenin ilk 2 karakteri ak, sonraki karakterler yerine 4 adet   karakteri konumlandrlmaldr. rnein BANKALARARASI KART MERKEZ ANONM RKET ifadesi BA *** KA**** ME**** AN**** **** eklinde gsterilmelidir. \n YSten girilen unvan ve iban bilgileri deme emri rzas ve deme emri yantnda ak dnlr, Kolas aknda deme emri rzas yant ve deme emri istek ve yantnda maskeli tanr. \n 3.20. Fonksiyonel Olmayan Gereksinimler \n \n \n HHSlerin sunuyor olduklar servisleri en fazla 3000 ms iinde yant dnecek ekilde tasarlamaldr. \n \n \n YS tarafndan kullancnn balatmad otomatize sorgular iin aadaki limitler belirlenmitir. \n \n YS, Bireysel HKlar iin hesap baznda gnde en fazla 4 adet sorgulama yapabilir. \n YS, Kurumsal HKlar iin hesap baznda saatte en fazla 12 adet sorgulama yapabilir \nDier taraftan kullancnn balatt Hesap Bilgisi Hizmeti kapsamndaki sorgular HHS tarafndan belirlenen st rate limitler dahilinde tanmlanabilir. \n \n \n \n HHSlerin sunuyor olduklar servislere sistemin gvenlik ve srekliliini salamak adna rate limit koyma ihtiyalar olur ise, standartlar ve ihtiyalara uygun ekilde bir konfigrasyon yapabilirler. r: YS - Kullanc baznda gnde X sorgu v.b.\nstein kullanc tarafndan balatld Request Header ierisinde yer alan Payment Service User (PSU) alanlarndan anlalabilir. \n \n \n HHSler ayn zamanda servislerin ayakta olup olmadna ynelik olarak bir healthcheck servisi kurmaldr.  HHSlerin bu servis ile tm network ve veritaban ya da servislerinin ihtiya duyduklar altyapsal eriimleri modellemeli ve bu servisi BKM ile paylamalar beklenmektedir. Bu servis dzenli olarak BKM tarafndan arlarak servislerin ayakta olup olmadklarnn kontrolnn salanmas planlanmaktadr. \n \n \n Sunulan her API iin /health endpointi ile aadaki bilgileri vermeleri beklenmektedir. \n GET /{api ismi}/{versiyon}/health \n rnek: \n GET /obh/s1.0/health \n GET /hbh/s1.0/health \n GET /gkd/s1.0/health \n HHS ve YS API iin health servisleri aadaki servislerle kontrol edilebilir. \n GET /hhs-api/s1.0/health \n GET /yos-api/s1.0/health \n Baarl yantta Http 200 kodu dnlmelidir. \nBaarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Koullu  / stee Bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir. \n \n \n \n Health servisinden yant alnamamas, hata almas ya da status DOWN gelmesi durumunda API Gatewayden istek HHS tarafna iletilmeyecektir. \n \n \n HVPS servisleri ile ilgili olarak HHSler, BKM tarafndan dzenli olarak sorgulanacaktr, eriilebilirlik ve kullanm oranlar takip edilecektir. \n \n \n HHSlerin servislerini eriim yzdeleri asndan yl baznda %99.75 orannda ayakta olmalarn salayacak ekilde kurgulamalar gerekmektedir. \n \n \n'},{title:"EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar",frontmatter:{},regularPath:"/v1.0.2/contents/ekler.html",relativePath:"v1.0.2/contents/ekler.md",key:"v-bc107546",path:"/v1.0.2/contents/ekler.html",headers:[{level:2,title:"EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar",slug:"ek-1-istek-cevap-mesajlarnda-kullanlacak-nesne-yaplar"},{level:2,title:"EK-2: Sral Veri Trleri",slug:"ek-2-sral-veri-turleri"},{level:2,title:"EK-3: stemci Sertifikalarnn Tanm ve Ynetimi",slug:"ek-3-istemci-sertifikalarnn-tanm-ve-yonetimi"},{level:2,title:"EK-4: Sunucu Sertifikalar",slug:"ek-4-sunucu-sertifikalar"},{level:2,title:"EK-5: Mesaj mzalama Ak",slug:"ek-5-mesaj-imzalama-aks"},{level:3,title:"mzalama Kurallar (YS)",slug:"imzalama-kurallar-yos"},{level:2,title:"EK-6: HHS/YS API Mimarisi",slug:"ek-6-hhs-yos-api-mimarisi"}],content:' EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar \n Ak Bankaclk simlatr uygulamas zerinde swagger dkmanlarnn gncel srmlerine eriim salanabilir. \n EK-2: Sral Veri Trleri \n \n \n \n Kod \n Aklama \n \n \n \n \n TR.OHVPS.DataCode.KimlikTur \n Kod, Tip, Format K , TCKN , N11 M , MNO , AN1..30 (HHSye zel bireysel veya kurum mteri numaras) Y , YKN , N11 P , PNO , AN7..9 \n \n \n TR.OHVPS.DataCode.KurumKimlikTur \n Kod, Tip, Format K , TCKN , N11 M , MNO , AN1..30 (HHSye zel bireysel veya kurum mteri numaras) V , VKN , AN10 \n \n \n TR.OHVPS.DataCode.OhkTur \n Kod: B: Bireysel  K: Kurumsal \n \n \n TR.OHVPS.DataCode.KolasTur \n Mterinin sorgulama istedii Kolay Adres Tipi deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr: T: Telefon Numaras E: E-Posta K: TCKN V: VKN Y: YKN P: Pasaport Numaras \n \n \n TR.OHVPS.DataCode.KareKodAksTur \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  01: FAST katlmcsndan dinamik dorulamal hizmet alnan iyeri demesi 02: FAST katlmcsndan statik dorulamal iyeri demesi 03: Kiiden kiiye demeler \n \n \n TR.OHVPS.DataCode.OdemeKaynak \n I: nternet bankaclndan gnderilen demelerde kullanlr. A: Otomatik para makineleri (ATM) ile gnderilen demelerde kullanlr. T: Telefon bankacl ile gnderilen demelerde kullanlr. K: Kiosklar araclyla gnderilen demelerde kullanlr. S: ubeden girilen demelerde kullanlr. M: Mobil uygulamadan gnderilen demelerde kullanlr. D: Yukardakiler dndaki deme kaynaklarndan gnderilen demelerde kullanlr.  O: Ak bankaclk aracl ile gnderilen demelerde kullanlr. \n \n \n TR.OHVPS.DataCode.OdemeAmaci \n demenin Amacna ynelik olarak aadaki deerlerden birini alr: 01: Konut Kiras demesi 02:  yeri Kiras demesi 03: Dier Kira demesi 04: E-Ticaret demesi: Elektronik ticaret ilem amal aktarmlar 05: alan demesi: Maa, harcrah, prim gibi alan demeleri 06: Ticari deme: Ticari iletmelerin birbirlerine, kendi hesaplarna veya mterilerine demeleri, bor, ithalat, ihracat, irket satn alma, vb. kapsamnda demeler 07: Bireysel deme: zel amal (aile bireylerine, hediye, ba, bor, alveri vs.) demeler 08: Yatrm: Mevduat, menkul kymet, dviz, gayr menkul, tat, varlk alm, temett deme, tahsilat vb. gibi yatrm amal demeler 09: Finansal: Kredi, depo, repo, trev, finansal varlk alm/satm vb. demeler 10: Eitim demesi 11: Aidat demesi \n \n \n TR.OHVPS.DataCode.OdemeDurumu \n demenin durumunu gsterir. Alabilecei deerler: 01: Gerekleti (deme ilgili deme sistemine iletildi ve alc hesabna ulat.)  02: Gnderildi (deme ilgili deme sistemine iletildi ancak alc hesabna ulatna dair teyit alnmad.)lemin son durumunun teyidi iin YS sorgulama yapmaldr. 03- Gereklemedi (demenin ilgili deme sistemine iletiminde veya ilenmesi srasnda hata, zaman am, sistemin gn sonu ilemlerine balamas vb. durum olutu ve deme gereeklemedi veya iade edildi.) 04- Onayda bekliyor (deme emri alnd. oklu onay aknn tamamlanmas bekleniyor.) 05- leme Alnd ( deme emri alnd. ) YS tarafndan mteriye gsterilmeyen bir koddur. Bu kod dnldnde YS uygulamasnda HKya deme durumu 02-Gnderildi  olarak gsterilir. lemin son durumunun teyidi iin YS sorgulama yapmaldr. \n \n \n TR.OHVPS.DataCode.IslemAmaci \n demenin Amacna ynelik olarak aadaki deerlerden birini alr: 01: Konut Kiras demesi 02:  yeri Kiras demesi 03: Dier Kira demesi 04: E-Ticaret demesi: Elektronik ticaret ilem amal aktarmlar 05: alan demesi: Maa, harcrah, prim gibi alan demeleri 06: Ticari deme: Ticari iletmelerin birbirlerine, kendi hesaplarna veya mterilerine demeleri, bor, ithalat, ihracat, irket satn alma, vb. kapsamnda demeler 07: Bireysel deme: zel amal (aile bireylerine, hediye, ba, bor, alveri vs.) demeler 08: Yatrm: Mevduat, menkul kymet, dviz, gayr menkul, tat, varlk alm, temett deme, tahsilat vb. gibi yatrm amal demeler 09: Finansal: Kredi, depo, repo, trev, finansal varlk alm/satm vb. demeler 10: Eitim demesi 11: Aidat demesi 12: Dier \n \n \n TR.OHVPS.DataCode.RizaDurumu \n B: Yetki Bekleniyor Y: Yetkilendirildi K: Yetki Kullanld E: Yetki deme Emrine Dnt S: Yetki Sonlandrld I :Yetki Iptal \n \n \n TR.OHVPS.DataCode.GkdTur \n GKD yaplmasn gerekli bulduu durumda HHS, YSn belirledii yntemi dikkate alarak kendi belirledii GKD yntemini bildirir: Y: Ynlendirmeli GKD A: Ayrk GKD \n \n \n TR.OHVPS.DataCode.RizaTip \n H: Hesap Bilgisi Rzas O: deme Emri Rzas \n \n \n TR.OHVPS.DataCode.IzinTur \n 01: Temel Hesap Bilgisi 02: Ayrntl Hesap Bilgisi 03: Bakiye Bilgisi 04: Temel lem (Hesap Hareketleri) Bilgisi 05: Ayrntl lem Bilgisi \n \n \n TR.OHVPS.DataCode.OdemeSistemi \n lemin ynlendirildii deme Sistemine gre aadaki deerlerden birini alabilir: H: Havale F: FAST E: EFT (PS) deerlerinden birini alabilir. \n \n \n TR.OHVPS.DataCode.IslemTuru \n Hesap hareketleri (ilemler) sorgusunda dnlen lem Tr (islTur) parametresi aadaki deerlerden birini alabilir: HAVALE EFT FAST PARA_YATIRMA PARA_CEKME YABANCI_PARA_HAVALE YATIRIM_HESABINA_AKTARIM YATIRIM_HESABINDAN_AKTARIM KURUM_FATURA_ODEMESI CEK SENET SIGORTA_ODEMESI UCRET_KOMISYON_FAIZ SGK_ODEMESI VERGI_ODEMESI DOVIZ_ALIM DOVIZ_SATIM KREDI_ODEMESI KREDI_KULLANIM KK_ODEMESI KK_NAKIT_AVANS SANS_OYUNU UYE_ISYERI_ISLEMLERI HGS_OGS_ISLEMLERI DOGRUDAN_BORCLANDIRMA_SISTEMI DIGER \n \n \n TR.OHVPS.DataCode.HspTur \n Hesabn bireysel veya ticari nitelikte olduunu belirtir: B: Bireysel T: Ticari \n \n \n TR.OHVPS.DataCode.KolasHspTur \n Hesabn bireysel veya ticari nitelikte olduunu belirtir: B: Bireysel T: Ticari \n \n \n TR.OHVPS.DataCode.HspTip \n Hesap eidini belirtir: VADESIZ VADELI KREDILI_MEVDUAT_HESABI POS CEK YATIRIM \n \n \n TR.OHVPS.DataCode.HspDrm \n Hesabn durumunu belirtir: AKTIF PASIF KAPALI \n \n \n TR.OHVPS.DataCode.YetTip \n Alabilecei deerlere gre hangi belirtecin dneceine karar verilir. yet_kod yenileme_belirteci \n \n \n TR.OHVPS.DataCode.BrcAlc \n lemin hesab borlandrd ya da alacaklandrd bilgisidir. B : Bor A : Alacak \n \n \n TR.OHVPS.DataCode.RizaIptDtyKod \n 01 :Yeni Rza Talebi ile ptal 02 :Kullanc stei ile HHS zerinden ptal 03 :Kullanc stei ile YS zerinden ptal 04 :Sre Am : Yetki Bekleniyor 05 :Sre Am : Yetkilendirildi 06 :Sre Am : Yetki demeye Dnmedi 07 :GKD iptali : Ayn rza no ile mkerrer arm 08 :GKD iptali : Rzano ile TCKN uyumamas 09 :GKD iptali : Uygun rn bulunmuyor 10 :GKD iptali : HHS Ak Bankaclk kanal ileme kapal 11 :GKD iptali : Hesap Yetki Sorunu 12 :GKD iptali : HK HHS kontrollerini aamad 13 :GKD iptali : HK istei ile GKDden vazgeildi 14 :GKD iptali : Fraud phesi 99 :GKD iptali : Dier \n \n \n TR.OHVPS.DataCode.PSUInitiated \n E : Evet H : Hayr \n \n \n TR.OHVPS.DataCode.HHSYOSSrlmKrtr \n kod : Kod,unv : Unvan \n \n \n TR.OHVPS.DataCode.SrlmYon \n A: Azalan deerle sralama Y: Artan deerle sralama \n \n \n TR.OHVPS.DataCode.ZmnAralik \n 0 : Kayt Yok  1 : 0-2 saat 2 : 2-24 saat  3 : 1-3 gn   4 : 3-15 gn\t  5 : 15 gn ve st \n \n \n TR.OHVPS.DataCode.VarYok \n 0 : Kayt Yok   1 : Kayt Var \n \n \n TR.OHVPS.DataCode.HHSDurumu \n A : Ak. retim Ortamnda HHSnin aktif bir ekilde hizmet vermesi durumu.  Y : Yaygnlatrma. retim Ortamnda HHSnin kendisi tarafndan tanmlanm kstl HKya hizmet vermesi durumu.    G : Geici Hizmet Veremiyor. HHS servislerinde teknik bir sorun olmas nedeniyle HHSnin hizmet verememesi durumu.  K: Kapal. HHSnin hizmet vermeme durumu. \n EK-3: stemci Sertifikalarnn Tanm ve Ynetimi \n Tm katlmclarn BKM API Geidine eriebilmesi iin, BKM tarafndan yaplan istemci sertifika dorulamasndan gemesi gerekmektedir. stemci sertifikas retilmeden nce katlmclarn CSR retme akn tamamlamas gerekmektedir. \n OpenSSL ile CSR (Certificate Signing Request) Oluturma \nAadaki komut ile 2048-bit RSA private key ve CSR oluturulur. \nopenssl req -new -newkey rsa:2048 -nodes -keyout PRIVATEKEY.key -out CSR.csr \n CSR ile ilgili detay bilgilerin giriinde; \nCommon Name (CN) olarak 4 karakterli hhsKod ya da yosKod deeri ile, \ndier alanlar iin de kurum bilgileriniz ile giri yaplr. \n Tm bilgilerin girilmesinden sonra oluan private key dosyas kurumunuzda saklanr.\nCSR dosyas ise istemci sertifika retmek zere kullanlr. Bu aamada takip edilmesi gereken admlar u ekildedir: \n Katlmclarn, TRIP ortam zerinden, BKM Tarafndan yetki verilmi kullanclarnn grebilecei "stemci Sertifika Talebi" men admna giri yapmalar beklenir. Alan ekranda,"CSR Dosyas Ykleme" alan ierisine, katlmcnn retmi olduu csr dosyas yklenir. Yaklak 1 dakika ierisinde kuruma zel olarak retilmi olan client sertifikas indirilmeye hazr hale gelecektir. "ndir" butonu ile client sertifika indirilir. stemci tarafnda web isteinin ilgili sertifika ile ilikilendirilerek oluturulmas gerekmektedir. \n Uzun dnemli olarak hazrlanacak olan sertifikalar sertifikasyon ve retim ortamlarnda kullanlacaktr. Sertifikalarn ilevsellii ve geerlilii bu aamalarda snanacaktr. \n BKM API Geidi zmnn test ve retim ortamlar ayrmnda istemci sertifikalar, HHS Listeleme API eriimleri ve Sertifikasyon balantlar ekil 15-HHS/YS API Mimarisi Diagramnda resmedilmitir. \n EK-4: Sunucu Sertifikalar \n Sunucu sertifikalarnn endpoint bilgisini (Fqdn) ierecek ve global bir Certification Authority tarafndan imzalanm olarak sunulmas gerekmektedir.\nrnein; entegrasyon formu ierinde yer alan URL bilgisinin (test.xbank.com.tr) sertifika ierisinde tanml olmas ve bu sertifikann global bir CA rnein Verisign tarafndan imzalanm olarak sunulmas gerekmektedir. \n Hizmet salayc olan HHS\'ler tarafndan sunucu sertifikalar uygulanmaldr. \n EK-5: Mesaj mzalama Ak \n Dijital imzalama yaps, HVPS APIde gerekletirilen ilemlerin ve tanan verilerin btnlk ve inkr edilemezliini salamak amacyla kurgulanmtr.\nBu kapsamda imzalama ak aadaki gibi olmaldr: \n \n HHS ya da YS ncelikle zel ve ak anahtarlarn oluturmaldr. Bu anahtarlar oluturmak iin aada openssl kullanlarak oluturma rnei paylalmtr.  Bu anahtarlardan zel olan anahtar mesaj imzalamak iin kullanlacak olup, ak anahtar ise mesaj dorulamak amacyla mesajn alcs tarafndan kullanlacaktr. \n \n private_key.pem ve public_key.pem dosyasinin ierikleri kod tarafnda kullanlacaktr. \n --private.pem => zel anahtarn ismi\nopenssl genrsa -out private.pem 2048 \n --public_key.pem => Ak anahtarn ismi\nopenssl rsa -in private.pem -pubout -outform PEM -out public_key.pem \n --private_key.pem => zel anahtarn PCKS8 formatna evrilmesi (Java asndan PCKS8 formatnda olma ihtiyac nedeniyle) openssl pkcs8 -topk8 -inform PEM -in private.pem -out private_key.pem -nocrypt \n \n \n Ak ve zel anahtarlar oluturulduktan sonra Ak Anahtar BKM ile paylalr. BKM bu ak anahtar dier katlmclarn ulaabilmesi ve alabilmesi iin bir Anahtar Deposu yaklam ile bnyesinde tutar. lgili anahtar iletebilmek ve alabilmek iin kullanlacak HHS/YOS API ye eriim detaylar EK-6 blmnde detayl olarak paylalmtr.  Eer kurumun ilgili anahtar iftinin yenilenme durumu sz konusu ise yenilemenin hemen ardndan ak anahtar yeni bir imzalama yaplmadan nce mutlaka BKM ile paylalmaldr. \n \n \n mzal mesaj aacak olan kurum mesaj imzalayan kurumun ak anahtarn her sorguda yeniden almak durumunda deildir. Belirli periyodlarda kendi ortamndaki anahtar yenileyerek sistemi iletebilir. Ancak imzalayan kurum anahtar ifti yenilemesi yaptnda BKM ile ak anahtarn paylasa dahi imzal mesaj dorulayacak taraf eski ak anahtar ile dorulama yapmaya alt iin hata alacaktr. Bu ilk hata durumunda hzlca BKM zerinden yeni anahtar alp mesaj tekrar dorulamay denemelidir. Eer yine hata alyor ise dorulama ilemini hata statsne almaldr. Bu sebeple anahtar yenileyen kurum yeni ak anahtarn yeni bir mesaj imzalama yapmadan nce mutlaka BKM ile paylamaldr. \n \n \n PSU-Fraud-Check alan iin de JWT formatnda kt hazrlanmas beklenmektedir. rnek bir PSU-Fraud-Check payload deeri aadaki gibidir; \n {"AnomalyFlag": "0", \n"LastPasswordChangeFlag": "1", \n"FirstLoginFlag": "1", \n"DeviceFirstLoginFlag": "1", \n"BlacklistFlag": "0", \n"MalwareFlag": "0", \n"UnsafeAccountFlag": "0", \n"exp": 1663424479, \n"iat": 1663338079, \n"iss": "[https://apigw.bkm.com.tr|https://apigw.bkm.com.tr/]" } \n mzalama Kurallar (YS) \n Bir YS zerinden balayan ak rnek olarak paylalmtr. \n \n \n YS, mesaj imzalama gerektiren her API isteinin HTTP gvdesini (request body) kendi zel anahtar ile ifreleyerek imza bilgisini oluturur. \n \n \n Ardndan bu imza verisini, gnderecei mesajn istek balnda yer alan X-JWS-Signature alannda gndermelidir. \n \n \n X-JWS-Signature alannda gnderilecek olan bilgi aadaki yntem ile oluturulmaldr. \n \n \n Bu alana yazlacak olan bilgi JWT formatnda oluturulmaldr. \n \n \n Bir JWT, header-payload-signature alanlarndan olumaktadr. \n \n Header alannda JWTyi imzalamak iin kullanlacak algoritma belirtilmelidir.  Standartlar kapsamnda RS256 kullanlacaktr. \n Payload ksmnda zel olarak oluturulacak olan body claim alanna istek gvdesi (request body) verisinin SHA256 hash deeri karl yazlmaldr. \n JSON payload oluturulurken RFC 7519 baz alnmaldr. "iss" (Issuer) Claim, "exp" (Expiration Time) Claim, "iat" (Issued At) Claim, body Claim alanlarnn gnderilmesi zorunludur. ^RFC7519 \na.\t"iss" (Issuer) Claim : Kurumunuza zel bilgidir. \nb.\t"exp" (Expiration Time) Claim: Saniye cinsinden (Unix time) imzann son geerli olduu tarih. Bu tarih  mevcut sunucu saatinizden 60 dakika sonra olacak ekilde kullanlmaldr. \nc.\t"iat" (Issued At) Claim : Saniye cinsinden (Unix time) imzann oluturulduu tarih. Bu tarih  mevcut sunucu saatinizden 5 dakika nce olacak ekilde kullanlmaldr. \nd.\tbody Claim : istek gvdesi (request body) verisinin SHA256 hash deeri karl. \n Signature alannda da zel anahtar ile imzalanm olan imza ierii yer alacaktr. \n \n X-JWS-Signature:   JWS imzasn ieren stbilgi. Bu baln ne zaman belirtilmesi gerektii hususu ilgili endpoint iin belirtilmitir. \n rnek X-JWS-Signature Payload Deeri \n { \n"iss": "https://apigw.bkm.com.tr", \n"exp": 1646832405, \n"iat": 1646746005, \n"body": "c543072f97a761a1d891dc81acc380bc1e6f61ca6541bd93ebfdece338457922" \n} \n \n \n \n \n YS, istei gnderir. Sadece mesajn btnln ve doruluunu teyit amac ile istek gvdesi (request body) SHA256 hash deeri imzalanarak X-JWS-Signature alannda bu imza iletilir. stein gvde (request body) ksm ak ve ifresiz olarak gnderilmektedir. \n \n \n HHS, istei alr, talebi gerekletirmeden nce ald API isteklerinin imzasn dorulamaldr. X-JWS-Signature alanndaki JWT aadaki admlarla dorulanmaldr. \n \n Header ksmndaki algoritmanin RS256 olduu kontrol edilir. \n Gnderen kurumun ak anahtar ile JWT verify (dorulama) ilemi yaplr. \n Yukardaki ilemlerin doruluunun ardndan JWTnin payload ksmndaki body claim alanndaki bilginin, istein gvde verisinin SHA256 hash deerlerinin ayn olduu kontrol edilir. \n rnek checksum deeri   "a64b19f95eeb1fb0a0a3e2dbbc6e3d8472c52184d4543417ddc6d156fc5c5571" veya   "A64B19F95EEB1FB0A0A3E2DBBC6E3D8472C52184D4543417DDC6D156FC5C5571" eklinde olabilir. ki hali de ayn deere sahiptir. Kontrollerde buna dikkat edilmesi gerekmektedir. \n \n \n \n Yukardaki ilemler ile doruluu teyit edilmi olan istein talebi gerekletirir. \n \n \n Eer istek dorulanamyor ise gnderen kurumun ak ve zel anahtar ifti yenilenmi olabilir. \n \n \n BKM HHS API  zerinden ilgili kurumun bilgilerini (kurum kodu vs) kullanarak kurumun detay bilgileri eker ve kendi ortamnda yeniler. \n \n \n Ardndan imzay tekrar ak anahtar ile dorulayarak kontroller gerekletirilir. (Eer halen dorulama ilemi baarsz ise bu istek iin hata ak altrlr.  TR.OHVPS.Resource.InvalidSignature  kodu ile hata retilebilir.) \n \n \n mza bilgisinin beklendii (x-jws-signature) servislerde, bu bilginin iletilmedii durumlarda  TR.OHVPS.Resource.MissingSignature  hatas retilebilir. \n \n \n HHS istei iledikten sonra cevab olutururken de yukardaki aklar ile gnderecei cevab imzalamaldr. \n \n \n stek yant gvdesinin SHA256 checksum deeri iin hexadecimal kt kullanlacaktr. Oluacak ktnn 64 karakter olmas beklenmektedir. Kontrol iin "^[A-Fa-f0-9]{64}$" RegEx tarifini kullanabilirsiniz. \n \n \n rnek bir gvde: \n {"katilimciBlg":{"hhsKod":"8000","yosKod":"8000"},"gkd":{"yetYntm":"Y","yonAdr":"https://boss-test.bkm.com.tr/boss/ab/yosSimulator/8000?drmKod=6021de9f-55e7-454a-94be-2044866b22e1"},"kmlk":{"kmlkTur":"M","kmlkVrs":"123456","ohkTur":"B"},"hspBlg":{"iznBlg":{"iznTur":["01","02","03","04","05"],"erisimIzniSonTrh":"2022-10-12T23:59:59+03:00","hesapIslemBslZmn":"2021-10-10T00:00:00+03:00","hesapIslemBtsZmn":"2023-10-10T23:59:59+03:00"}}}\n \n Bu gvdenin checksum\': \n a64b19f95eeb1fb0a0a3e2dbbc6e3d8472c52184d4543417ddc6d156fc5c5571\n \n Bu checksum\'n iletildii x-jws-signature balk deeri: \n eyJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FwaWd3LmJrbS5jb20udHIiLCJleHAiOjE2NjU0NzU1NjIsImlhdCI6MTY2NTM4OTE2MiwiYm9keSI6ImE2NGIxOWY5NWVlYjFmYjBhMGEzZTJkYmJjNmUzZDg0NzJjNTIxODRkNDU0MzQxN2RkYzZkMTU2ZmM1YzU1NzEifQ.Q65PI_1fTEzzBMirvmJvXgVX3orhhZ4_UqujtGdHkU7me-1ymIjvPrzy3kfyER1pedFb7HDCBuPvYoqjX8eUnpiiZsxfzCiEa0McIhoFeUOggq-O8VihItp8bLr2DWwQ9JHN1-WXB2mL31KAKFAL1VY9-DXuAdT-RfE_SLYsl2ycmNy4ti4XvfDvvlE56ZsieFZ727VuwR8wi7F0kKDc6UhjaMF9xcUeAM1fxX-bmcOaOo1NZGC0vvgjNZKz_OJrN-q8VhWYnQPiJ7wY7S9IG8bHIkBImKSVf8LuOEvl8u0BZzADLH1iOBd9x2l1plyI_NLPTrnOqhWhKlljkkJBCg\n \n Eer PSU-Fraud-Check iin balk gnderilecekse, yine JWT formatnda imza retilmelidir. rnek bir psu-fraud-check balk deeri: \n eyJhbGciOiJSUzI1NiJ9.eyJBbm9tYWx5RmxhZyI6IjAiLCJMYXN0UGFzc3dvcmRDaGFuZ2VGbGFnIjoiMSIsIkZpcnN0TG9naW5GbGFnIjoiMSIsIkRldmljZUZpcnN0TG9naW5GbGFnIjoiMSIsIkJsYWNrbGlzdEZsYWciOiIwIiwiTWFsd2FyZUZsYWciOiIwIiwiVW5zYWZlQWNjb3VudEZsYWciOiIwIiwiZXhwIjoxNjY1NDc1NTU2LCJpYXQiOjE2NjUzODkxNTYsImlzcyI6Imh0dHBzOi8vYXBpZ3cuYmttLmNvbS50ciJ9.DhUh_nsXDuNIrvsQ3KOhOXdVcJg6fTDVW8K1oea8kLtmb7n-_hJHY3mWX5zzobu-Vh2VvFzIxPhHtol6gLHFktmIMiQ9TDHb_mRZFXgJB4ToNfqc3Fy9mi5bS8By2IYi1HxDaCStstaZDaunzXfHCtqybfZXyk6teDrf-iIf6lqX9Keo7GZO-Y7mP7C13-c_QwyNKrZK4TZwUQbecRqXYn1DcEHM7kukQHTar_hKBWkXPmNpScY0J2rKksr4ejR1uLhdQm-Pdwoe9y6qrNEB79vMLBkRNtbuV0vc1GYHp_YKkzBKBI_58uuB2GD9877CsrcRnHMQb88xpxiPKh6-ew\n EK-6: HHS/YS API Mimarisi \n HHS/YS API Uygulama Mimarisinde Test ve retim ortamlarnda aadaki alanda yer almaktadr. \n \n ekil 15: HHS/YS API Mimarisi \n'},{title:"POST /erisim-belirteci",frontmatter:{},regularPath:"/v1.0.2/contents/erisim-belirteci.html",relativePath:"v1.0.2/contents/erisim-belirteci.md",key:"v-485bbe8d",path:"/v1.0.2/contents/erisim-belirteci.html",content:" POST /erisim-belirteci \n STEK: \n YS erisim-belirteci eriim adresini 2 amala kullanr: \n \n \n Bir nceki admdan ald rizaNo, rizaTip (deme emri balatma hizmetinde O, hesap bilgisi hizmetinde H) ve GKD sonras dnlen yetKod bilgilerini kullanarak HHS nezdinde ErisimBelirteci nesnesi oluturmak zere istekte bulunur. YSn istekte bulunabilmesi iin GKD admnn baarl bir ekilde tamamlanmas rizaDrm bilgisinin yetkilendirildi olmas gerekir. Eriim Belirteci nesnesi ile rzas nesnesi (deme Emri Rzas veya Hesap Bilgisi Rzas) arasndaki iliki rza numaras zerinden salanr. \n \n \n Ald eriim belirtecinin Geerlilik Sresinin dolduu durumda, yenileme belirteci karlnda yeni bir eriim belirteci almas gerekmektedir. \n \n \n POST /erisim-belirteci isteinin (REQUEST) gvdesinde (BODY)  ErisimBelirteciIstegi nesnesi (Tablo-23) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda ErisimBelirteci nesnesi (Tablo 24) oluturulur veya (Yenileme Belirteci iin) gncellenir. Rza durumu Yetki Kullanld olarak gncellenir. \n Eriim Belirteci POST ilemi sonucunda HTTP 200 dnlmesi gerekmektedir. \n Tablo 23: ErisimBelirteciIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format:Veri modeli smi \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n RzaNo \n rizaNo \n AN1..128 \n Z \n Rza nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n Rza Tipi \n rizaTip \n AN1 \n Z \n O veya H (TR.OHVPS.DataCode.RizaTip) \n \n \n Yetki Tipi \n yetTip \n AN1..50 \n Z \n yet_kod yada yenileme_belirteci deerini alabilir.  (TR.OHVPS.DataCode.YetTip) \n \n \n Yetki Kodu \n yetKod \n AN1..255 \n K \n GKD ileminden dnen yetkilendirme kodudur. Tek kullanmlk olup, ayn yetKod ile birden fazla token alnamaz. yetKod Parametresinin yaam mr 5 dakika olmaldr. yetTip = yet_kod ise zorunludur. \n \n \n Yenilenme Belirteci \n yenilemeBelirteci \n AN1..4096 \n K \n Eriim belirtecinin yenilenmesi amacyla kullanlr. yetTip = yenileme_belirteci ise kullanm zorunludur. \n \n \n \n BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan erisimBelirteci nesnesinde (Tablo-19) bulunan eriim belirteci deeri deme emrinin balatlmas esnasnda kullanlr. \n Tablo 24: \"ErisimBelirteci\" nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format:Veri modeli smi \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Eriim Belirteci \n erisimBelirteci \n AN1..4096 \n Z \n Yetkilendirme Kodu karlnda HHS tarafndan dnlen ve sonraki hesap bilgisi ve deme emri servislerine eriimde kullanlan bilgidir. \n \n \n Geerlilik Sresi \n gecerlilikSuresi \n N1..9 \n Z \n Eriim Belirtecini saniye cinsinden geerlilik sresidir.  Eriim belirteci geerli olduu son tarih ; Hesap Bilgisi Rzas iin en fazla 30 gn olmaldr. Eriimin Geerli Olduu Son Tarih(erisimIzniSonTrh); Eriim Belirteci Geerlilik Sresi'nden kk ise Eriimin Geerli Olduu Son Tarih deeri ile snrldr. deme Balatma Rzas iin 5 dakika olmaldr. \n \n \n Yenileme Belirteci \n yenilemeBelirteci \n AN1..4096 \n Z \n Eriim belirtecinin yenilenmesi amacyla kullanlr. \n \n \n Yenileme Belirteci Geerlik Sresi \n yenilemeBelirteciGecerlilikSuresi \n N1..9 \n Z \n Yenileme belirtecinin saniye cinsinden geerlilik sresidir. Yenileme belirtecinin geerli olduu son tarih ; Hesap Bilgisi iin Eriimin Geerli Olduu Son Tarih ile snrl olmaldr. Bu tarih geldii zaman Hesap Bilgisi Rza Durumunu Yetki Sonlandrld statsne ekilmesi gerekir. deme Balatma iin Rza Oluturma Zamanndan 15 gn sonras olmaldr. 15 gn sresi sorgulama servislerinin armn destekleyecek ekilde uzun tutulmutur. leri vadeli ilemler bu kapsamda deildir.  deme emri 5 dakika iinde gerekletirilmelidir. Gereklemediinde 4.2.8 blmnde aktarlan rza stat gncellemesi yaplmaldr. \n \n \n \n erisim-belirteci erisim noktasndan elde edilen erisimBelirteci, ilikilendirildii nesne veya ilem iin gnderilen POST istei balnda x-access-token alannda iletilir. \n Yenilenme Belirteci (refreshToken) kullanlarak Eriim Belirteci (accessToken) alndnda, dnen yanttaki Yenileme Belirteci Geerlik Sresi (yenilemeBelirteciGecerlilikSuresi) geen sre eksiltilerek, kalan zamann saniye cinsinden hesaplanmasyla iletilmelidir. \n Yenileme Belirteci ile Eriim Belirteci gncellendiinde, HHS'den dnen yenilemeBelirteci deeri deiebilir, YS bu gncel anahtar saklamal ve sonraki erisimBelirteci isteini yenilenmi olan yenilemeBelirteci ile yapmaldr. \n Eriim Belirteci API arm srasnda rza durumlar kontrol edilmelidir. Bu kontrollerin nasl yaplmas gerektii 4-Rza Durumlar blmnde aktarlmtr. \n Yenileme belirteci karlnda yeni bir eriim belirteci alnmas srasnda hata alnmas durumunda, HHS'nin dnd hata yantnda httpCode = 401 ve errorCode = \"TR.OHVPS.Connection.InvalidToken\" geldii durumda, YS tarafndan HHS'ye ilgili rza iin sistemsel olarak iptal istei gnderilmelidir. \n"},{title:"7.\tHesap Bilgisi Hizmeti",frontmatter:{},regularPath:"/v1.0.2/contents/hesap-bilgisi-hizmeti.html",relativePath:"v1.0.2/contents/hesap-bilgisi-hizmeti.md",key:"v-f0808a06",path:"/v1.0.2/contents/hesap-bilgisi-hizmeti.html",headers:[{level:2,title:"Genel Bilgiler",slug:"genel-bilgiler"},{level:2,title:"Hesap Bilgisi Hizmeti in Eriim Adresleri",slug:"hesap-bilgisi-hizmeti-icin-erisim-adresleri"},{level:2,title:"ADIM 0: HK'nn hesap bilgilerine eriim iin talepte bulunmas:",slug:"adim-0-ohk-nn-hesap-bilgilerine-erisim-icin-talepte-bulunmas"},{level:2,title:"7.1 ADIM 1: Hesap Bilgisi Rzasnn Hazrlanmas",slug:"_7-1-adim-1-hesap-bilgisi-rzasnn-hazrlanmas"},{level:3,title:"POST /hesap-bilgisi-rizasi",slug:"post-hesap-bilgisi-rizasi"},{level:3,title:"Baarl stek:",slug:"basarl-istek"},{level:3,title:"Baarl Yant:",slug:"basarl-yant"},{level:2,title:"zinler",slug:"izinler"},{level:2,title:"7.2 ADIM 2: Hesap Bilgisi Hizmeti Rzasnn Tesisi",slug:"_7-2-adim-2-hesap-bilgisi-hizmeti-rzasnn-tesisi"},{level:2,title:"7.3 ADIM 2.1: Hesap Bilgisi Rzasnn Sorgulanmas",slug:"_7-3-adim-2-1-hesap-bilgisi-rzasnn-sorgulanmas"},{level:2,title:"7.4 ADIM 2.2: Hesap Bilgisi Rzasnn ptali",slug:"_7-4-adim-2-2-hesap-bilgisi-rzasnn-iptali"},{level:2,title:"7.5 ADIM 3: Hesap Bilgilerinin Alnmas",slug:"_7-5-adim-3-hesap-bilgilerinin-alnmas"},{level:2,title:"7.6 ADIM 3.1 ve 3.2: Hesap Bilgilerinin Sorgulanmas",slug:"_7-6-adim-3-1-ve-3-2-hesap-bilgilerinin-sorgulanmas"},{level:2,title:"7.7 ADIM 3.3 ve 3.4: Hesap Bakiyesinin Sorgulanmas",slug:"_7-7-adim-3-3-ve-3-4-hesap-bakiyesinin-sorgulanmas"},{level:2,title:"7.8 ADIM 3.5 ve 3.6: lemlerin Sorgulanmas",slug:"_7-8-adim-3-5-ve-3-6-islemlerin-sorgulanmas"},{level:2,title:"7.9\tHealthcheck API",slug:"_7-9healthcheck-api"},{level:3,title:"Baarl Yant:",slug:"basarl-yant-2"}],content:" 7.\tHesap Bilgisi Hizmeti  \n Genel Bilgiler \n Hesap bilgisi sorgulama iin HBHS tarafndan mteri rzas tesisinin HHS tamamlanm olmas gerekir. Mteri rzas tesisi tamamlandktan sonra, HBHS sorgulamak istedii hesaba ait verileri ilgili eriim adresi zerinden sorgular. \n \n \n ekil 10: Hesap Bilgisi Hizmeti st Dzey Ak \n ekil-10da sunulan hesap bilgisi hizmeti 5 temel aktan oluur: \n 0.\tMterinin hesap bilgilerine eriim iin talepte bulunmas:  HK BHS mobil uygulama ya da web sitesinden hesap bilgilerine eriim ilemini balatr. \n 1.\tHesap Bilgisi mteri rzasnn hazrlanmas: \n HBHS, hesap bilgilerine eriim iin mteri rzas tesisi amacyla HHSdeki hesap bilgisi rzas eriim adresine bir POST isteinde bulunur ve bir hesap bilgisi rzas nesnesi oluturur. HHS hesap bilgisi rzas nesnesi iin biricik tanmlayac dner (RzaNo). Hesap bilgisi rzas, mterinin HBHSnin hesap bilgilerine eriim izin verdii alanlar ierir: \n \n zinler - eriim iin izin verilen veri kmelerinin listesi. \n Eriimin Geerli Olduu Son Tarih - HBHS'nin mterinin hesap bilgilerine eriebilecei istee bal seilebilen son tarih. \n lem Sorgulama Balang Zaman  Mteri rzasnn tesisinden itibaren geriye dnk olarak HBHSnin hesap bilgilerine eriebilecei sreyi \n lem Sorgulama Biti Zaman - Mteri rzasnn tesisinden itibaren ileriye dnk olarak HBHSnin hesap bilgilerine eriebilecei sreyi \n \n 2.\tHesap bilgisi hizmeti mteri rzasnn tesisi: \n HHS, Hesap Bilgisi Rzas servisi ile HK zelinde Yetki bekleniyor statsnde bir rza nesnesi hazrlar. HHS, GKDnin baaryla tamamlanmas sonrasnda hesap bilgisi rzas nesnesinin yetkilendirildiini belirtmek iin Rza Durumunu Rza Yetkilendirildi olarak gnceller. Nesne yetkilendirildikten sonra HHS nesne ile bir eriim belirteci (access token) ilikilendirir, Rza Durumunu Yetki Kullanld yapar ve bu belirteci HBHSye geri dner.  Bylece mteri rza tesisi salanm olur. \n Hesap bilgisi iin mteri rzasna ilikin temel ilkeler unlardr: \n \n 1 HK'nn 1 YS iin 1HHS'de Yetki Bekleniyor, Yetkilendirildi, Yetki Kullanld statsnde 1 rzas olabilir. \n Mteri rzasnn ayrntlar HK ile HBHS arasnda belirlenir. Bu nedenle mteri rzasnn ayrntlar HHS ekrannda deitirilmemelidir. \n HK, hesap eriim izni ayrntlarn yalnzca bir btn olarak yetkilendirebilir veya geri alabilir. \n Mteri rzas tesisi esnasnda, mteri HHS arayznde eriim iin yetkilendirecek hesaplar seer. \n \n 2.1\tHesap bilgisi rzasnn sorgulanmas:  Mteri rzas  GET/hesap-bilgisi-rizasi/{RizaNo}  ars yaplarak sorgulanr. \n 2.2\tHesap bilgisi mteri rzasnn iptali:  Mteri rzas  DELETE/hesap-bilgisi-rizasi/{RizaNo}  ars yaplarak iptal edilir. \n 3.\tHesap bilgilerinin alnmas:  Hesap bilgileri ilgili kaynaa (hesaplar, bakiye, ilemler) GET istei yaplarak gerekletirilir. HBHS, mteri rzasnn tesisinden sonrasnda (geerli bir eriim belirticine sahip olduunda) ncelikle  GET/hesaplar  ars yapacaktr. \n Hesap Bilgisi Hizmeti in Eriim Adresleri \n Etki Alan (Scope) =hesap_bilgisi \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu / stee Bal \n Yetkilendirme Tr \n mzalama \n Parametre \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n hesap-bilgisi-rizasi \n POST \n /hesap-bilgisi-rizasi \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n HesapBilgisiRizasiIstegi \n HesapBilgisiRizasi \n \n \n 2 \n erisim-belirteci  (GKD iin) \n POST \n /erisim-belirteci \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n ErisimBelirteciIstegi \n ErisimBelirteci \n \n \n 2.1 \n hesap-bilgisi-rizasi \n GET \n /hesap-bilgisi-rizasi/{RizaNo} \n Z \n stemci Kimlik Bilgileri \n mzal Yant \n \n \n HesapBilgisiRizasi \n \n \n 2.2 \n hesap-bilgisi-rizasi \n DELETE \n /hesap-bilgisi-rizasi/{RizaNo} \n Z \n stemci Kimlik Bilgileri \n \n \n \n \n \n \n 3.1 \n hesaplar \n GET \n /hesaplar \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama \n \n HesapBilgileri(birden ok hesap) \n \n \n 3.2 \n hesaplar \n GET \n /hesaplar/{hspRef} \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n \n \n HesapBilgileri(tek  hesap) \n \n \n 3.3 \n bakiye \n GET \n /hesaplar/{hspRef}/bakiye \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n \n \n BakiyeBilgileri(tek  hesap) \n \n \n 3.4 \n bakiye \n GET \n /bakiye \n  \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama \n \n BakiyeBilgileri(birden ok hesap) \n \n \n 3.5 \n islemler \n GET \n /hesaplar/{hspRef}/ilemler \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama Filtreleme \n \n IslemBilgileri (tek hesap) \n \n \n \n Tablo 11: Hesap Bilgisi Hizmeti in Eriim Adresleri \n ADIM 0: HK'nn hesap bilgilerine eriim iin talepte bulunmas: \n HK, HBHS uygulamasnda (web arayz/mobil uygulama) hesap bilgilerine eriim iin talepte bulunur. \n 7.1 ADIM 1: Hesap Bilgisi Rzasnn Hazrlanmas \n Bu API ars HBHS'nin HHS'de yeni bir HesapBilgisiRizasi nesnesi oluturmasn ve nesneye erimek iin benzersiz bir rza numaras ({RizaNo}) dnlmesini salar. \n API arsnn baaryla sonulanmas iin HBHS'nin istemci kimlik bilgileri yetkisi kullanmas yeterlidir.\nBaaryla oluturulan hesap bilgisi rza kaynann rza durumu Yetki Bekleniyor olarak dzenlenir.\nHK daha nce ald rzaya ilikin eriim tarihleri, izin trlerini ve hesap bilgilerini gncellemek isterse, HBHS nce HHS nezdindeki rzay iptal etmeli ve sonrasnda yeni bir rza talebinde bulunmaldr.\n \n \n ekil 11: Hesap Bilgisi Mteri Rzasnn Hazrlanmas \n \n POST /hesap-bilgisi-rizasi isteinin (REQUEST) gvdesinde (BODY)  HesapBilgisiRizasIstegi nesnesi (Tablo-12) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda HesapBilgisiRizasi (Tablo-13) nesnesi oluturulur. \n  POST /hesap-bilgisi-rizasi \n Baarl stek: \n STEK: \n HBHS, bu API eriim adresinden HHSye yeni bir HesapBilgisiRizasi oluturulmas iin istekte bulunur: \n \n HBHS, HKnn hesap bilgilerine ynelik rza balatma istei olduunu HHSye bildirir. \n HBHS, HKnn, HBHS arayznden verdii rzann (n Onay) bir kopyasnn HHS nezdinde mteri tarafndan onaylanmas iin HHSye gnderilmesini salar. \n HHS; istek mesajnda yer alan alanlarn API dkmannda belirtilen artlar salayacak ekilde zorunluluk ve uzunluk kontrollerini yapar. (Zorunlu) \n HHS; YS API ile alnan HBHS bilgilerinin ierisinde yer alan ynlendirme ve bildirim adresleri ile deme emri rzas nesnesi request mesajnda paylalan adreslerin uyumlu olup olmadnn kontrollerini yapar. (Zorunlu) \n HHS; kimlik bilgileri nesnesinde iletilen kimlik bilgileri ile HKnn HHS mterisi olup olmadnn kontrollerini yapar. Bu kontrol hem bireysel hem de kurumsal HKlar iin yaplmaldr.  (Zorunlu) \n Eriimin Geerli Olduu Son Tarih, lem Sorgulama Balang Zaman, lem Sorgulama Biti Zaman alanlar ile ilgili Tablo 12de belirtilen kontroller yaplmaldr. (Zorunlu) \n HHS, benzersiz RizaNo ile HesapBilgisiRizasi nesnesi oluturur ve HBHSye dner. \n HHS, HesapBilgisiRizasi oluturduu anda durumunu Yetki Bekleniyor olarak dzenler. \n \n Eriimin Geerli Olduu Son Tarih, lem Sorgulama Balang Zaman, lem Sorgulama Biti Zaman alanlarnda zaman aralklar mteri deneyimi penceresinden deerlendirilerek ay cinsinden belirtilmitir. Bu konuda aadaki gibi oluabilecek u rneklere dikkat edilmesi gerekmektedir. \n Bugn : 31.08.2019 \nBugn + 6 Ay : 29.02.2020 \nBugn : 30.08.2020 \nBugn + 6 Ay : 28.02.2021\nBugn : 30.09.2022 \nBugn + 3 Ay : 30.12.2022\nBugn : 14.07.2022 \nBugn + 3 Ay : 14.10.2022 \n Tablo 12: HesapBilgisiRizasiIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder. Hata durumunda TR.OHVPS.Connection.InvalidASPSP hata kodunu dner. \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda TR.OHVPS.Connection.InvalidTPP hata kodunu dner. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n >Yetkilendirme Yntemi \n yetYntm \n AN1 \n  \n TR.OHVPS.DataCode.GkdTur sral veri tr deerlerinden birini alr.   Yetkilendirme yntemi, HBHS tarafndan belirtilmeyebilir. \n HHS, HBHSnin belirledii yntemi dikkate alarak kendi belirledii yntemi kullanr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunludur.  YS Ynlendirmeli GKD yntemi ile ak destekliyorsa, yetYntm deikeninden bamsz olarak ynlendirme adresini iletmelidir. Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, mteri uygulama / taraycsn bu alanda belirtilen adrese ynlendirir. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunludur.  YS Ayrk GKD yntemi ile ak destekliyorsa, yetYntm deikeninden bamsz olarak bildirim adresini iletmelidir.  Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, ayrk GKD sonras bu alanda belirtilen adrese otorizasyon kodunu (authentication code) iletir. \n \n \n Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n > Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur sral veri tr deerlerinden birini alr.   Kurum adna yaplan(ticari) ilemlerde kurum kullancsnn bilgisi iletilmelidir. \n \n \n \n > Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr.   TR.OHVPS.DataCode.KimlikTur deerine gre uzunluk ve format deiir.   Kurum adna yaplan(ticari) ilemlerde kurum kullancsnn bilgisi iletilmelidir. \n \n \n \n > Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr.  TR.OHVPS.DataCode.KurumKimlikTur sral veri tr deerlerinden birini alr. \n \n \n \n > Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.  TR.OHVPS.DataCode.KurumKimlikTur deerine gre uzunluk ve format deiir. \n \n \n \n > deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur sral veri tr deerlerinden birini alr (B: Bireysel, K:Kurumsal) \n \n \n \n Hesap Bilgisi \n hspBlg \n Kompleks: HesapBilgisi \n Z \n \n \n \n \n >zin Bilgisi \n iznBlg \n Kompleks: IzinBilgisi \n Z \n \n \n \n \n >> zin Tr \n iznTur \n Array[AN2] \n Z \n HK tarafndan HHS nyznde belirlenen izin tipleridir. Bir istekte birden fazla deer bulunabilir, TR.OHVPS.DataCode.IzinTur sral veri tr deerlerinden birini alr. \n \n \n \n >> Eriimin Geerli Olduu Son Tarih \n erisimIzniSonTrh \n ISODateTime \n Z \n Hesap bilgisi rzasnn geerli olduu son tarih.   Mteri YS ekranndan bu deeri belirleyebilir.   Varsaylan deer : Rza verilen tarih + 6 ay   Alabilecei maksimum deer : Rza tarihi + 6 ay    Alabilecei minimum deer : Rza tarihi + 1 gn   rnein 23/09/2021de minimum 24/09/2021 seilebilir. Bu durumda izin 24/09/2021 23:59:59da bitecek ekilde olmaldr. \n Bu alanda bir deer bulunmad durumda HHS hata dnmelidir. \n \n \n >> lem Sorgulama Balang Zaman \n hesapIslemBslZmn \n ISODateTime \n K \n Hesap bilgisi rzas verilmesinden gemie dnk en fazla 12 ay olabilir, daha eski olmamas gerekir.   Varsaylan deeri rza verilen tarih (ilem zaman)  12 aydr.   HK bu alana bir deer girii salamam ise BHS varsaylan deerlerle bu alan doldurarak, HHSye iletir.   Minimum tarihi : Rzann verili tarihi  - 12 ay    Maksimum tarih: Rzann verili tarihi +  12 ay    zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur.  zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ise gnderilmemelidir. \n HK tarafndan izin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ve  lem Sorgulama Balang Zaman BHS tarafndan dolu olarak gnderilmi ise HHS tarafndan ilemin devamna izin verilmez. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmi ise; HHS bu alann alabilecei minimum ve maksimum deerlerin snrlar ierisinde olduunu kontrol eder. \n \n \n >> lem Sorgulama Biti Zaman \n hesapIslemBtsZmn \n ISODateTime \n K \n Hesap bilgisi rzas verilmesinden gelecee dnk en fazla 12 ay sonras olabilir, daha ileri bir tarih olmamas gerekir.   Varsaylan deeri: Rza verilen tarih + 12 aydr.  HK bu alana bir deer girii salamam ise BHS varsaylan deerlerle bu alan doldurarak, HHSye iletir.  Minimum tarihi : Rzann verili tarihi   12 ay  Maksimum tarihi :  Rzann verili tarihi + 12 ay   zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur.  zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ise gnderilmemelidir. Eer dolu gnderilirse HHS tarafndan uygun hata mesaj iletilmelidir. \n HK tarafndan izin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ve lem Sorgulama Biti Zaman BHS tarafndan dolu olarak gnderilmi ise HHS tarafndan ilemin devamna izin verilmez.   zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmi ise; HHS bu alann alabilecei minimum ve maksimum deerlerin snrlar ierisinde olduunu kontrol eder. \n Baarl Yant: \n Tablo 13: HesapBilgisiRizasi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n HesapBilgisiRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n HesapBilgisiRzas nesnesinin oluturulma zaman \n \n \n > Gncellenme Zaman \n gnclZmn \n ISODateTime \n Z \n HesapBilgisiRzas nesnesinin gncellenme zaman \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu sral veri tipini deerlerinden birini alr. rn; hesap bilgi rzasnn tesisine dair ilk istek mesajna dnte B: Yetki Bekleniyor deerini almas beklenir. \n \n \n > Rza Iptal Detay Kodu \n rizaIptDtyKod \n AN2 \n K \n Rza durumunun iptal olduu durumda zorunludur. \n \n \n Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n > Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur sral veri tr deerlerinden birini alr. \n \n \n > Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur deerine gre uzunluk ve format deiir. \n \n \n > Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr.  TR.OHVPS.DataCode.KurumKimlikTur sral veri tr deerlerinden birini alr. \n \n \n > Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.  TR.OHVPS.DataCode.KurumKimlikTur deerine gre uzunluk ve format deiir. \n \n \n > deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur sral veri tr deerlerinden birini alr (B: Bireysel, K:Kurumsal) \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n K \n HHS, HBHSnin belirledii yntemi dikkate alarak kendi belirledii yntemi kullanr.  TR.OHVPS.DataCode.GkdTur sral veri tr deerlerinden birini alr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n HHS, mteri uygulama / taraycsn bu alanda belirtilen YS adresine ynlendirir. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n HHS, ayrk GKD sonras bu alanda belirtilen YS adresine otorizasyon kodunu (authentication code) iletir. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi. \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.  HHS tarafndan maksimum 5 dk iinde ilem tamamlanacak ekil zaman damgas oluturulur. Zaman am olduunda HHSnin GKDye izin vermeyecek ekilde hata mesaj vermesi gerekmektedir. Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n Hesap Bilgisi \n hspBlg \n Kompleks: HesapBilgisi \n Z \n \n \n \n > zin Bilgisi \n iznBlg \n Kompleks: IzinBilgisi \n Z \n \n \n \n >> zin Tr \n iznTur \n Array[AN2] \n Z \n HK tarafndan HBHS nyznde belirlenen izin tipleridir. Bir istekte birden fazla deer bulunabilir, TR.OHVPS.DataCode.IzinTur sral veri tr deerlerinden birini alr. \n \n \n >> Eriimin Geerli Olduu Son Tarih \n erisimIzniSonTrh \n ISODateTime \n Z \n Hesap bilgisi rzasnn geerli olduu son tarih \n \n \n >> lem Sorgulama Balang Zaman \n hesapIslemBslZmn \n ISODateTime \n K \n Hesap hareketlerinin sorgunabilecei balang zaman. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur. \n \n \n >> lem Sorgulama Biti Zaman \n hesapIslemBtsZmn \n ISODateTime \n K \n Hesap hareketlerinin sorgunabilecei biti zaman. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur. \n \n \n > Ayrnt Bilgi \n ayrBlg \n Kompleks: AyrintiBilgi \n  \n \n \n \n > HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n zinler \n Bir hesap bilgisi mteri rzas kayna arsna yant olarak dndrlen verileri snrlamak iin izin kodlar kullanlr: \n \n Temel Hesap Bilgisi \n Ayrntl Hesap Bilgisi \n Bakiye Bilgisi \n Temel lem (Hesap Hareketleri) Bilgisi \n Ayrntl lem Bilgisi \n \n HKya sunulacak seimler ve kurallar aadaki gibi olmaldr. \n \n \n \n Seim \n Kural \n \n \n \n \n Temel Hesap Bilgisi \n HK seimine sunulmamaldr. Deitirilemez ekilde seili gsterilmelidir. \n \n \n Ayrntl Hesap Bilgisi \n HK seim yapabilir. \n \n \n Bakiye Bilgisi \n HK seim yapabilir. \n \n \n Temel lem (Hesap Hareketleri)  Bilgisi \n HK seim yapabilir. \n \n \n Ayrntl lem Bilgisi \n HK seim yapabilir. Ayrntl lem Bilgisi seimi Temel lem Bilgisi seimini kapsar. (Ayrntl lem bilgisi seildiinde Temel lem Bilgisi de seili olmaldr.) \n \n \n \n Aadaki durumlarda, izin kombinasyonlarna izin verilmez. HHS, bu hesap eriim onaylarn 400 (Hatal stek) yant koduyla reddetmelidir: \n \n zin dizisinin herhangi bir izin tr iermemesi durumu, \n zin dizisinde HHS tarafndan desteklenmeyen bir izin kodunun yer almas durumu \n 7.2 ADIM 2: Hesap Bilgisi Hizmeti Rzasnn Tesisi \n \n \n ekil 12: Hesap Bilgisi HK Rzasnn Tesisi \n Rza tesisinin baaryla sonulanmas iin HBHS'nin istemci kimlik bilgileri yetkisi kullanmas ve ardndan mterinin HHS tarafndan ynlendirmeli veya ayrk GKD ile dorulanmas gerekir. HHS'de oluturulan ve rza durumu Yetki Bekleniyor olan bir hesap bilgisi rzas, GKD sonras Yetkilendirildi statsne gncellenir. HBHS, eriim salayaca hesaplar hesap bilgisi rzasnn tesisinden nce seer. \n \n \n Ynlendirmeli dorulama aknda, HBHS HKy HHSye ynlendirir. \n \n \n HBHS tarafndan ynlendirme, bir nceki admdaki RizaNoyu ierir. \n \n \n HHS, HK iin GKD srecini iletir. \n HKy dorularsa, \n \n \n HK HBHS zerinden ilem yaplmasna izin verecei hesap seimini yapar. HBHS zerinden HKnn verdii izin bilgilerini ve eriim izninin biti tarihi bilgilerini, HHS bilgilendirme amal HKya gsterir. \n \n \n HHS hesap bilgisiri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n HHS, HKy olumlu ynlendirme ak ile HBHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=Y&yetKod=xx&rizaNo=yy&rizaTip=H&drmKod=zzz\n \n \n \n HKy dorulayamazsa, \n \n \n HHS, hesap bilgisi rza kaynann durumunu Yetki ptal olarak gnceller. \n \n \n HHS, HKy olumsuz ynlendirme ak ile HBHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=I &rizaNo=yy&rizaTip=H&rizaIptDtyKod=11&drmKod=zzz\n \n \n \n \n \n \n \n Ayrk dorulama aknda, HHS, HKnn hesap bilgisi hizmetini balatt uygulamadan farkl olabilecek bir dorulama uygulamasnda ilemi dorulamasn ister. \n \n Ayrk ak HBHSnin farkl bir kanal kullanarak yetkilendirme istei gndermesiyle balatlr. \n Bu yetkilendirme istei, yetkilendirilecek hesap bilgisi rzasnn eletirilecei HKnn bulunmas iin ilgili veriyi tar. \n HHS, deme hizmeti kullancsn dorular. \n HK verdii izin tipi dahilinde bilgileri paylalacak olan hesaplar seer. \n HHS, hesap bilgisi rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n \n Baarl GKD sonrasnda (rizaDrm=Y) ilgili rza nesnesi iin (belirli bir rizaNo) yetkilendirme kodunun (yetKod) alnmasnn ardndan eriim belirteci eriim adresine POST ars yaplarak yetkilendirme kodu karlnda eriim belirteci ve yenileme belirteci alnr. POST /eriim-belirteci eriim noktas EK-3te aklanmtr. \n Eriim belirteci alndktan sonra; HHS,  hesap bilgisi rzasnn durumunu Yetki Kullanld olarak gnceller. Rza tesisi salanm olur. \n 7.3 ADIM 2.1: Hesap Bilgisi Rzasnn Sorgulanmas \n GET /hesap-bilgisi-rizasi/{RizaNo} \n HK, HHS zerinden rza iptali yapm olabilir veya HKnn verdii rza sresi dolmu olabilir.  Bu durumlarda HBHS, rza alma akna balamadan nce, daha nce oluturulmu bir HesapBilgisiRizasi kaynann durumunu, istee bal olarak alabilir. \n Servis baarl yantnda Tablo 13de belirtilen HesapBilgisiRizasi nesnesini dnmektedir. \n Durum \nHesapBilgisiRizasi kayna iin kullanlabilecek durum gstergeleri u ekildedir: \n \n Yetki Bekleniyor \n Yetkilendirildi \n Yetki Kullanld \n Yetki Sonlandrld \n Yetki ptal \n 7.4 ADIM 2.2: Hesap Bilgisi Rzasnn ptali \n \n \n \n ekil 13: Hesap Bilgisi Mteri Rzasnn Geri Alnmas \n DELETE /hesap-bilgisi-rizasi/{RizaNo} \n DELETE /hesap-bilgisi-rizasi ars, bir HBHS'nin nceden oluturulmu bir hesap eriim rzasn (yetkili olsun veya olmasn) silmesine izin verir. Mteri, rzasn HHS zerinden iptal etmek yerine, HBHS zerinden bu rzasn kaldrmak isteyebilir. \nBu API ars, mterinin HBHS zerinden hesap bilgisi rzasn iptal etmesine ve HHS nezdindeki hesap bilgisi rzas nesnesinin silinmesini salar. \nMterinin HBHSnin veri eriim iznini iptal etmesi durumunda HBHS, HHSde mevcut olan HesapBilgisiRizasi kaynan pratik olarak mmkn olan en ksa srede silmelidir. Bu ise, ilgili kaynaa \n DELETE /hesap-bilgisi-rizasi/{RizaNo} \nars aracl ile yerine getirilir. HBHS ayrca, sisteminden Hesap Eriim zni kaynaklarn da temizlemelidir. \nSz konusu silme ilemi, kaytlarn statsnn pasife ekilmesi ile gerekletirilmelidir. Sz konusu kaytlar, denetim izlerinin oluturulmas ve saklanmasna ilikin ikincil dzenleme hkmleri kapsamnda gvenli ekilde tutulmaldr. \nServis istek parametresi olarak sadece pathde iletilen Rza No bilgisine ihtiya duymaktadr. \nHK rzas baar ile silindiinde HTTP 204 response kodu ile ilem sonucu iletilir. Rza tipi I yani Yetki ptal olarak gncellenir ve gnclZmn zaman damgas vurularak gncellenir. \nHK ile rza iptali srasnda kurulacak iletiimde (e-posta, sms gibi) aadaki alanlarn iletilmesi tavsiye edilmektedir: \nYS Ad, HHS ad, Rza Oluturma Zaman, Servis Tipi Bilgisi (HBHS) \n 7.5 ADIM 3: Hesap Bilgilerinin Alnmas \n    \n \n   \n ekil 14: Hesap Bilgilerinin Alnmas \n STEK: \nMteri rzas tesis edilmi kullanc iin HBHS API eriim adresinden HHSye eriilebilir hesap bilgilerini GET istei ile sorgular: \n \n RizaDurumu Yetki Kullanld ise ileme balanr. RizaDurumu farkl bir deerde ise TR.OHVPS.Resource.ConsentMismatch hatasnn iletilmesi gerekir. \n GET verisinin modele gre kontrol yaplr (rnein: Alan kontrolleri) \n \n GET verisinin mantksal kontrolleri yaplr. \n 7.6 ADIM 3.1 ve 3.2: Hesap Bilgilerinin Sorgulanmas \n GET /hesaplar ve GET /hesaplar/{hspRef} \n Bu eriim noktalarndan tm hesaplarn veya belirli bir hesabn bilgilerinin sorgulanr. Hesap bilgisi iin daha nce tanmlanm izin trne gre (Temel Hesap Bilgisi veya Detayl Hesap Bilgisi) yantnda dnlen HesapBilgileri nesnesinin ierii deiir.  Tablo 15te HesapBilgileri nesnesinin ierii verilmitir. \n Hesap Bilgisi Sorgu rnei (Tm Hesaplar) =  /hesaplar \nHesap Bilgisi Sorgu rnei (Belirli Bir Hesap) =  /hesaplar/{hspRef} \nlem Sorgu rnei (Belirli Bir Hesap) =  /hesaplar?\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= hspRef &\nsrlmYon=A \n Tablo 14: Hesap Bilgileri Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numaras \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek kaytlarn sralama kriterini belirtir. Alabilecei deerler: { hspRef} \n Bu veri gnderildii durumda, HHS listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini hspRef olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler:  A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 15: HesapBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Rza No \n rizaNo \n AN1..128 \n Z \n HesapBilgisiRzas nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n Hesap Temel \n hspTml \n Kompleks: HesapTemel \n Z \n Temel Hesap Bilgileri (Temel Hesap Bilgisi varsaylan izin tr olduundan Hesap Temel nesnesi zorunlu olarak yantta bulunur) \n \n \n > Hesap Referans \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n > Hesap Numaras \n hspNo \n AN26 \n K \n Eer varsa deme hesabna ait IBAN bilgisi \n \n \n > Hesap Sahibi Unvan \n hspShb \n AN3..140 \n Z \n Hesap sahibi ya da hesap sahiplerinin ad-soyad, ticari unvan \n \n \n > ube Ad \n subeAdi \n AN3..50 \n K \n Eer varsa deme hesabnn bal olduu ubenin ad \n \n \n > Ksa Ad \n kisaAd \n AN3..50 \n K \n Eer hesap sahibi hesaba ait bir ad tanmladysa, tanmlanan hesap ad \n \n \n > Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi. \n \n \n > Hesap Tr \n hspTur \n AN1 \n Z \n Hesabn tr (bireysel veya ticari). TR.OHVPS.DataCode.HspTur srali veri deerlerinden birini alr. \n \n \n > Hesap Tipi \n hspTip \n AN1..32 \n Z \n Hesabn tipi (VADESZ, KREDL vb.).TR.OHVPS.DataCode.HspTip sral veri deerlerinden birini alr. \n \n \n >Hesap rn Ad \n hspUrunAdi \n AN1..140 \n  \n HHS tarafndan atanm olan rn ad bilgisidir. HBHS tarafndan HKya gsterilmesi kullanm kolayl salayacaktr. \n \n \n > Hesap Durumu \n hspDrm \n AN5..50 \n Z \n Hesabn durumunu belirtir. TR.OHVPS.DataCode.HspDrm sral veri trlerinden birini alr. \n \n \n Hesap Detay \n hspDty \n Kompleks: HesapDetay \n K \n Detay Hesap Bilgileri (Temel Hesap Bilgisine ek olarak Detay Hesap Bilgisi izin tr de seilmise Hesap Detay nesnesi koullu olarak yantta bulunur) \n \n \n > Al Tarihi \n hspAclsTrh \n ISODateTime \n Z \n Belirtilen hesabn al tarihi. \n 7.7 ADIM 3.3 ve 3.4: Hesap Bakiyesinin Sorgulanmas \n GET /bakiye ve GET /hesaplar/{hspRef}/bakiye \nBu eriim noktalarndan tm hesaplarn veya belirli bir hesabn bakiyesi sorgulanr. \nstek arsna dnlen BakiyeBilgileri nesnesi Tablo 17de verilmitir. \n Hesap bakiyelerinin gsterilmesi srasnda aada verilen rnekler gznnde bulundurulmaldr. \n rnek 1 : HK  Hesap Bakiye Tutar  0 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL. HK 1000 TL para k gerekletirdi. Bakiye API'si yant ierisinde iletilen  Kredi Dahil Gstergesi  0 deerini ieriyorsa,  Hesap Bakiye Tutar  -1000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL olmaldr. \n rnek 2 : HK  Hesap Bakiye Tutar  0 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL. HK 1000 TL para k gerekletirdi. Bakiye API'si yant ierisinde iletilen  Kredi Dahil Gstergesi  1 deerini ieriyorsa,  Hesap Bakiye Tutar  2000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL olmaldr. \n rnek 3 : HK  Hesap Bakiye Tutar  1000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL. HK 1000 TL para k gerekletirdi. Bakiye API'si yant ierisinde iletilen  Kredi Dahil Gstergesi  0 deerini ieriyorsa,  Hesap Bakiye Tutar  0 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL olmaldr. \n rnek 4 : HK  Hesap Bakiye Tutar  1000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL. HK 1000 TL para k gerekletirdi. Bakiye API'si yant ierisinde iletilen  Kredi Dahil Gstergesi  1 deerini ieriyorsa,  Hesap Bakiye Tutar  3000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL olmaldr. \n lem Sorgu rnei (Belirli Bir Hesap)=  /bakiye?\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= hspRef &\nsrlmYon=A \n Tablo 16: BakiyeBilgileri Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numarasi \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek kaytlarn sralama kriterini belirtir. Alabilecei deerler: { hspRef} \n Bu veri gnderildii durumda, HHS listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini hspRef olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler:  A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 17: BakiyeBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Hesap Referans \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n Bakiye \n bky \n Kompleks:Bakiye \n Z \n \n \n \n > Hesap Bakiye Tutar \n bkyTtr \n AN1..25 \n Z \n Hesabn bakiyesi. Bloke tutar dlmeden iletilmelidir.   Tutar alan regex patterni u ekildedir:  '^-?\\d{1,18}$|^-?\\d{1,18}\\.\\d{1,5}$' \n \n \n > Blokeli Tutar \n blkTtr \n AN1..24 \n K \n Varsa hesapta blokeli tutar bilgisi.     Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n > Para Birimi \n prBrm \n AN3 \n Z \n Para birimi. \n \n \n > Bakiye letilme Zaman \n bkyZmn \n ISODateTime \n Z \n Bakiyenin iletildii zaman bilgisi. \n \n \n > KrediliHesap \n krdHsp \n Kompleks: KrediliHesap \n K \n \n \n \n >> Kredili Mevduat Hesab Bakiyesi \n kulKrdTtr \n AN1..24 \n Z \n Kredili mevduat tutar. Kredili bir hesap ise zorunlu.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n >> Kredi Dahil Gstergesi \n krdDhlGstr \n AN1 \n Z \n Kredili bir hesap ise zorunlu. Bakiye tutarnn kredi tutar dahil edilerek ya da edilmeden iletildiini gsterir.   0: Kredi tutar dahil edilmeden bakiye bilgisi iletilmesi durumu   1: Kredi tutar dahil edilerek bakiye bilgisi iletilmesi durumu \n 7.8 ADIM 3.5 ve 3.6: lemlerin Sorgulanmas \n GET /hesaplar/{hspRef}/islemler \n Belirli bir hesaba ilikin ilem bilgileri Tablo 1daki istek parametrelerine gre sorgulanr. \nlem bilgisi iin daha nce tanmlanm izin trne gre yantta dnen IslemBilgileri nesnesinin (Temel lem Bilgisi veya Temel lem Bilgisi ve Detayl lem Bilgisi) ierii deiir. \nlemler servisi hem HKnn talebi ile YS uygulamas zerinden arlabilecei gibi, YSn HKsz balatabilecei otomatik arlar ile de yant dnebilmektedir. \nHHS, ilemin sistemsel yaplp yaplmadn, istek parametreleri ierisinde yer alan PSU-Initiated parametresi ile anlar. Bu parametre E ise HKl, H ise sistemsel yaplm bir sorgu anlamna gelmektedir.\nHKnn balatt sorgular iin HHS tarafndan belirlenen st rate limitler dahilinde arm yaplabilir. \nYS, otomatik yapaca sorgularda; \n \n Bireysel HKlar iin hesap baznda gnde en fazla 4 adet baar ile sonulanan sorgulama yapabilir. \n Kurumsal HKlar iin hesap baznda saatte en fazla 12 adet baar ile sonulanan sorgulama yapabilir. \n \n HHS, tutaca saya bilgisi ile bu saylar kontrol ederek daha fazla sorgulama yaplmasna izin vermeyebilir. \n Ayn istek parametreleri ile yaplan sorgu sonucunda dnecek toplam kayt says 100 atnda, sayfalama yntemi ile HHSnin cevap dnmesi beklenmektedir.  Her bir sayfa iin ilemler servisi tekrar arlsa da, bu arm HHSnin tuttuu saya deerini arttrmaz. HHSnin tutaca sayan kontrol parametreleri YS kodu, hesap numaras ya da referans olmaldr. Sayfa no parametresi varsa ve 1'den byk ise ilem sayacn arttrmamaldr. \n HKnn YS uygulamas zerinden tetikledii ilemlerde ise;\nbireysel HKlar  iin en fazla 1 aylk,\nkurumsal HKlar iin ise en fazla 1 haftalk bir pencere aralnda sorgulama yaplabilir. \n YS, otomatik yapaca sorgularda hem bireysel hem de kurumsal HKlar iin 24 saatlik bir pencere aralnda sorgulama yapabilir. \n Hesap kapal olduu durumda hesap hareketlerini iletmek istemeyen HHS'lerin  TR.OHVPS.Business.InvalidAccount  hatas vermeleri beklenir. \n lem Sorgu rnei (Belirli Bir Hesap)=  /hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2020-06-01T00:00:00+03:00&\nhesapIslemBtsTrh=2020-06-02T23:59:59+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A \n Tablo 18: lem Listesi Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n lem Sorgulama Balang Zaman \n hesapIslemBslTrh \n ISODateTime \n Z \n Sorgulanacak ilemlerin balang tarihi. \n HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. HK tarafndan tetiklenen sorgularda;hesapIslemBslTrh ve hesapIslemBtsTrh aras fark bireysel HKlar iin en fazla 1 ay,kurumsal HKlar iin ise en fazla 1 hafta olabilir. YS tarafndan sistemsel yaplan sorgulamalarda hem bireysel, hem de kurumsal HKlar iin;son 24 saat sorgulanabilir. Bu yzden hesapIslemBtsTrh-24 saatten daha uzun bir aralk sorgulanamaz olmaldr. stek balnda yer alan PSU-Initiated alan E ise HKl, H ise sistemsel yaplm bir sorgu anlamna gelmektedir. \n \n \n lem Sorgulama Biti Zaman \n hesapIslemBtsTrh \n ISODateTime \n Z \n Sorgulanacak ilemlerin biti tarihi. \n HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. YS tarafndan sistemsel yaplan sorgulamalarda hem bireysel, hem de kurumsal HKlar iin;leri vadeli ilem emirleri dahil olmad iin; lem Sorgulama Biti Zaman, her zaman, sorgulama zaman damgasn iletecek ekilde (datetime (now)) iletilmelidir. \n \n \n En Dk lem Tutar \n minIslTtr \n AN1..24 \n  \n Sorgulanacak ilemlerin alabilecei en dk ilem tutar.      Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n En Yksek lem Tutar \n mksIslTtr \n AN1..24 \n  \n Sorgulanacak ilemlerin alabilecei en yksek ilem tutar.    Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n Bor Alacak Gstergesi \n brcAlc \n AN1 \n  \n TR.OHVPS.DataCode.BrcAlc sral veri tipi deerlerinden birini alr. Sorgulanacak ilemlerin bor / alacak kriteri B: Hesaba bor yaratan ilem.A: Hesaba alacak yaratan ilem.{B,A} \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS ilemler listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numarasi \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek ilemlerin sralama kriterini belirtir. Alabilecei deerler: {islGrckZaman} \n Bu veri gnderildii durumda, HHS ilemler listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini islGrckZaman olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler: A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS ilemler listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 19: IslemBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Hesap Referans Numaras \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n Islemler \n isller \n Kompleks:Islem[Array] \n K \n Hesaba ilikin hareketler varsa lemler nesnesi dizisi olarak dnlr. lemler nesnesi Temel lem Bilgileri ve Detay lem Bilgileri nesnesinden meydana gelir. zin tr varsaylan olarak Temel lem Bilgilerini ierir. Detay lem Bilgileri izin tr de seildi ise Temel lem Bilgilerine ek olarak Detay lem Bilgileri de gnderilir. \n \n \n > Temel lem Bilgileri \n islTml \n Kompleks:IslemTemel \n Z \n Temel lem Bilgileri varsaylan olarak dnlr. \n \n \n >> lem Numaras \n islNo \n AN3..50 \n Z \n Hesap hareketinin oluturulmas srasnda atanan ve bor (veya alacak) hareketini tekilletiren HHS baznda tekil tanmlaycdr. Bu deer tek bana tekil olabilecei gibi birden fazla deerin bir araya getirilmesiyle de tekillii salanm olabilir. Bu deerin en azndan hesap numaras (hesNo) baznda tekil olmas beklenir. Genellikle kullanlan rnekleri; Instance_Id, Transaction_Id, Transaction_Num, Transaction_TimeStamp,dekont numaras \n \n \n >> lem Referans Numaras \n refNo \n AN3..50 \n Z \n lemi utan uca tanmlayan tekil tanmlaycdr. Bor ve alacak hareketinden oluan bir veya birden fazla ilemler btn iin atanm olan ve bu btn tekilletiren (bir biri ile ilikisini tutan) deerdir.Bu deer hem YSten gelen deer olabilir (deme ilemlerinde kullanlan kkodRef ya da refBlg alan) hem de HHS iinde takip edilmek iin retilmi bir deer olabilir. HHS sisteminde 2 deerin de bulunmas durumunda;refNo alann doldurmak iin, HHSnin YSten gelen deere ncelik vermesi beklenmektedir. YSten gelen veri rnei: Sipari Numaras, Fatura Numaras, Karekod Referans vb. HHSte retilen veri rnei: Masrafl havale ileminde hem havale ileminin hem de masraf ileminin ayn referans numarasna sahip olmas da rnek olarak gsterilebilir. \n \n \n >> lem Tutar \n islTtr \n AN1..24 \n Z \n lem tutar.    Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi. \n \n \n >> lem Gerekleme Zaman \n islGrckZaman \n ISODateTime \n Z \n lemin gerekleme zaman. \n \n \n >> lem Kanal \n kanal \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeKaynak sral veri tr deerlerinden birini alr. \n \n \n >> Borlandrma Alacaklandrma Gstergesi \n brcAlc \n AN1 \n Z \n TR.OHVPS.DataCode.BrcAlc sral veri tr deerlerinden birini alr. lemin hesab bor ya da alacaklandrd bilgisidir. \n \n \n >> lem Tr \n islTur \n AN3..50 \n Z \n HHSnin ileme ait ilikilendirdii ilem tr deeri. TR.OHVPS.DataCode.IslemTuru sral veri tr deerlerinden birini alr. \n \n \n >> lem Amac \n islAmc \n AN2 \n Z \n TR.OHVPS.DataCode.IslemAmaci srali veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n \n \n >> deme Sistemi No \n odmStmNo \n AN10..50 \n K \n deme baarl balatldysa, demenin balatld sistemdeki referans numaras. Gerektiinde ilgili deme sisteminde/HHSde sz konusu demeye karlk gelen mesajla balant kurmada kullanlr.   deme Hizmeti kullancsna ilemin takibi iin gsterilebilir.  lemin ynlendirildii deme sistemi FAST ya da PS ise sistemdeki ilgili mesajn Tarih, GnderenKatilimKodu ve SorguNumarasi deerlerinin birleiminden oluur. Bu 3 alan mevcutta kullanld formatta aralarna dikey izgi (Unicode U+2223) iareti koyularak, birletirmeli ve iletilmelidir. rn : Tarih|GnderenKatilimKodu|SorguNumarasi   deme Havale/Virman ilemi ise HHSnin retmi olduu havale/virman numarasn ierir. Buradaki format da Tarih|GnderenKatilimKodu|Havale-virman numaras eklinde olmaldr. \n \n \n > Detay lem Bilgileri \n islDty \n Kompleks: IslemDetay \n K \n Detay lem Bilgileri dizi olarak gnderilmelidir. \n \n \n >> lem Aklamas \n islAcklm \n AN1..150 \n Z \n HHS tarafndan atanan ilem aklamas.HHS kendi ilem hareketlerine yanstt aklamay buraya yanstmaldr. \n \n \n >> Kar Taraf \n krsTrf \n Kompleks:  KarsiTaraf \n K \n Kullanm ilem baznda deimektedir. rnek: FAST ileminde kar taraf alcnn bilgileridir. Vergi demesinde kurum IBAN bilgisi mteriye gsterilemeyebileceinden bu alann bo gelmesi HHS insiyatifindedir. \n \n \n >>> Kar Maskeli IBAN \n krsMskIBAN \n AN26 \n K \n lgili hesap hareketinin kar tarafnn maskeli IBAN bilgisi. \n \n \n >>> Kar Maskeli Unvan \n krsMskUnvan \n AN3..140 \n K \n lgili hesap hareketinin kar tarafnn maskeli ad-soyad ya da ticari unvan bilgisi. \n 7.9\tHealthcheck API \n GET /health \n HHSlerin sunaca bu servis, dzenli olarak BKM tarafndan arlarak servislerin ayakta olup olmadklarnn kontrolnn salanmas planlanmaktadr \n Baarl yantta Http 200 kodu dnlmelidir. \n Baarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir \n \n \n \n"},{title:"5.\tGl Kimlik Dorulama",frontmatter:{},regularPath:"/v1.0.2/contents/gkd.html",relativePath:"v1.0.2/contents/gkd.md",key:"v-d80dcb06",path:"/v1.0.2/contents/gkd.html",headers:[{level:2,title:"5.1.\tYnlendirmeli Gl Kimlik Dorulama",slug:"_5-1-yonlendirmeli-guclu-kimlik-dogrulama"},{level:2,title:"5.2.\tAyrk Gl Kimlik Dorulama",slug:"_5-2-ayrk-guclu-kimlik-dogrulama"},{level:2,title:"5.3.\tYnlendirme/Bildirim Adresleri ve Durum Kodu Parametresi",slug:"_5-3-yonlendirme-bildirim-adresleri-ve-durum-kodu-parametresi"},{level:2,title:"5.4\tHealthcheck API",slug:"_5-4healthcheck-api"},{level:2,title:"5.5  Gl Kimlik Dorulama Kontrolleri",slug:"_5-5-guclu-kimlik-dogrulama-kontrolleri"}],content:" 5.\tGl Kimlik Dorulama \n Mteri iin gl kimlik dorulama, HKnn (mterinin) kimliinin dorulamada kullanlan ve bir bileenin ele geirilmesinin dier bileenin gvenliini tehlikeye atmayaca en az iki bileenden oluan, bu iki bileenin de mterinin bildii, sahip olduu veya biyometrik bir karakteristii olan bileen snflarndan farkl ikisine ait olacak ekilde seildii yntemi tanmlar. \n deme ve Elektronik Para Kurulularnn Bilgi Sistemleri ile deme Hizmeti Salayclarnn deme Hizmetleri Alanndaki Veri Paylam Servislerine likin Tebli uyarnca hesap bilgisi hizmetinde mterinin onaynn alnmas esnasnda ve deme emri balatma hizmetinde her bir deme emri balatma ileminde  HHS tarafndan mteriye gl kimlik dorulama (GKD) uygulanmas esastr.  Buna gre: \n \n \n Hesap bilgisi hizmetinde HKnn onaynn alnmas esnasnda  Tebliin 26 nc maddesinin 1 inci fkras uyarnca  HHS tarafndan HKya GKD uygulanr. \n \n \n deme emri balatma hizmetinde,  Tebliin 26 nc maddesinin 2 nci fkras uyarnca  HHS tarafndan HKya gl kimlik dorulama uygulanr ve ilem dorulama kodu ile HKnn onay alnr. \n \n \n deme emri balatma hizmetinde,  Tebliin 26 nc maddesinin 3 nci fkras uyarnca  HHS tarafndan HKya gl kimlik dorulama uygulanmasna ilikin istisna veya ilave gvenlik nlemleri ibu API lke ve Kurallar belgesinde tanmlanr. \n \n \n HHS, gl kimlik dorulama srecinde HKnin sahip olduu bileen snf olarak SMS OTP ya da SMS ile ilem dorulama kodu kullanabilir. \n \n \n HHS, aadaki hallerde veya  Tebliin 10 uncu maddesinin ikinci fkrasnda  belirtilen risk deerlendirmesi sonucuna gre tek bileen ile kimlik dorulama yapabilir. \n \n demenin gndereni ve alcsnn ayn olmas, \n Daha nce tanmlanm gvenli alclar listesine deme yaplmas, \n HKnin talimatna istinaden gerekletirilen dzenli bir deme olmas. \n \n \n \n Tek bileen ile kimlik dorulama yaplan bu ilemlerle ilgili olarak gerekletirilen ilemin mteri tarafndan yapldn ispat etme ykmll HHSye ait olur. \n \n \n lem Dorulamada  Tebliin 3 nc maddesinin birinci fkras  bendindeki  ilem bilgisi tanmna uygun olarak aadaki bilgiler ile  Tebliin 3 nc maddesinin birinci fkras hh bendinde  tanmlanan ileme zel retilmi ilem dorulama kodu birlikte kullanlr. \n \n Alc Unvan (Kolas aknda maskeli olarak)  (deme emri balatma hizmeti) \n Tutar (deme emri balatma hizmeti) \n Referans bilgisi (8 karakterden kk ise alann tm deeri, byk ise ilk 4 ve son 4 hanesi) \n \n leme ait yukardaki bilgilerden en az biri deitii zaman  Tebliin 3 nc maddesinin birinci fkras hh bendinde  belirtildii gibi yeni bir ilem dorulama kodu retilecek ekilde ak kurgulanmaldr. \n \n \n lem dorulama kodunun gnderilmesinden HHS sorumludur. HHS,  Tebliin 10 uncu maddesinin ikinci fkrasnda  belirtilen risk deerlendirmesi sonucuna gre ilem dorulama kodu kullanmakszn HKnn onayn alabilir. lem dorulama kodu kullanlmayan ilemlerle ilgili olarak gerekletirilen ilemin HK tarafndan yapldn ispat etme ykmll HHSye aittir. \n \n \n HVPS API standart kapsamnda iki adet Gl Kimlik Dorulama (GKD) yntemi kullanlacaktr: \n \n Ynlendirmeli (Redirect) GKD Yntemi \n Ayrk (Decoupled) GKD Yntemi \n \n \n \n HHS asgari olarak tarayc tabanl Ynlendirmeli GKD yntemini desteklemek zorundadr. \n \n \n ereve szleme kapsamnda olmayan tek seferlik deme ilemleri sadece Ynlendirmeli GKD yntemi ile gerekletirilebilir. \n 5.1.\tYnlendirmeli Gl Kimlik Dorulama \n Ynlendirmeli GKD Ynteminde, mteri kimlik dorulama iin YS tarafndan HHS arayzne ynlendirilir. \n Mteri HHSye (uygulama veya web arayz vastasyla) ynlendirildikten sonra mterinin gl kimlik dorulamas adm adm ve dorudan HHS ile mteri arasnda yrtlr. GKDnin tamamlanmasndan sonra mteri tekrar YS uygulamasna ynlendirilir.Ynlendirmenin ayn sayfada HTTP 302 yant koduyla yaplmas gerekmektedir. \n Ynlendirmeli GKD Yntemi iin st dzey rnek i ak aadaki admlardan oluur: \n \n YS, GKD iin HHS tarafndan tanmlanan arayze (tarayc ya da uygulama) ynlendirme yapar. \n Mteri, YS arayznden ayrlr, ynlendirildii HHS arayz zerinde kimlik dorulama ilemlerini gerekletirir. \n GKD tamamlandktan sonra mteri, YS arayzne tekrar ynlendirilir ve ilem sonucu grntlenir. \n \n Ynlendirmeli GKD iin temel gereklilikler unlardr: \n \n deme hizmeti (hesap bilgisi veya deme emri balatma hizmeti) tarayc ya da uygulama tabanl bir ekilde sunulabilir. Bu nedenle,  YS ve HHSlerin Ynlendirmeli GKD iin asgari olarak tarayc tabanl ynlendirme akn desteklemeleri gerekmektedir. \n ereve szleme (S) kapsamnda olmayan tek seferlik deme ilemleri sadece Ynlendirmeli GKD yntemi ile gerekletirilebilir. \n \n Tarayc Tabanl Ynlendirme \n HHSnin web arayzne, \n \n HHSnin mobil uygulamasnn olmad, \n HKnn deme hizmetini (hesap bilgisi veya deme emri balatma hizmeti) sunduu mobil cihazda HHS uygulamasnn ykl olmad, \ndurumlarda ynlendirme yaplr. \n \n YSn mobil uygulamas varsa mobil cihazda uygulamadan taraycya, YSn mobil uygulamas yoksa deme hizmetinin sunduu cihazda (Kiisel Bilgisayar veya Mobil Cihaz) tarayc zerinden ynlendirme yaplr. \n Uygulama Tabanl Ynlendirme \n HKnn deme hizmetini (hesap bilgisi veya deme emri balatma hizmeti) YSn mobil uygulamas ile kullanyorsa, ayn mobil cihazda HHSnin mobil uygulamasnn yklenmi olmas durumunda, HK dorulamasnn HHS mobil uygulamas tarafndan yaplmas iin uygulama tabanl ynlendirme yaplr. Bylece HK, deme hizmetine eriim iin HHSnin mobil kanalna eriim srasnda kulland dorulama yntemini ile dorulanabilir. \n Tablo 5: Ynlendirmeli Gl Kimlik Dorulama Kanallar \n \n \n \n Dorulama Yntemi \n YS Olas Ortam \n HHS Olas Ortam \n \n \n \n \n Tarayc Tabanl Ynlendirme \n Kiisel Bilgisayar (masast, dizst)/Mobil Cihaz \n Kiisel Bilgisayar (masast, dizst) / Mobil Cihaz \n \n \n Uygulama Tabanl Ynlendirme \n Mobil Cihaz \n Mobil Cihaz \n 5.2.\tAyrk Gl Kimlik Dorulama \n Ayrk GKD Yntemi i ak, Ynlendirmeli GKD Ynteminin ilem akna benzer. Fark, HHS'nin, evrimii arayznden bamsz olan herhangi bir uygulama veya cihaz araclyla deme ilemi ayrntlarn ieren bir anlk bildirim (push notification) gndererek mteriden kimlik dorulamas istemesidir. Ayrk GKD Yntemine dayal bir ilem iin (ok basitletirilmi) st dzey rnek bilgi ak u ekildedir: \n \n Mteri, YS arayznde ilemini balatr. \n YS, talebini mteriye ait TCKN, VKN, YKN gibi tekil tanmlayc kimlik numaras bilgisi ierecek ekilde HHSye iletilir. \n HHS tekil tanmlayc bilgisini kullanarak farkl bir cihaz veya uygulama zerinden mteriye anlk bildirim gnderir ve dorulama yaplmasn salar. Bu ekilde HHS kendi mobil uygulamasna eriim iin kullanlan dorulama yntemini aynen kullanabilecektir. \n YS, herhangi bir yere ynlendirme yapmadan ilemin sonucunu bekler, mteri YS arayznden ayrlmaz (arayz ayn kalr). \n Kimlik dorulama sonras, YS arayznde ilem sonucu grntlenir. \n 5.3.\tYnlendirme/Bildirim Adresleri ve Durum Kodu Parametresi \n CSRF Ataklarndan korunmak iin ve YS uygulamasnn bir nceki durumunu restore edebilmesi iin; YS tarafndan iletilen ynlendirme ve bildirim adreslerine , Oauth2 standartlarndaki state parametresine edeer,   durum kodu (drmKod)  parametresinin eklenmesi gerekmektedir. Durum kodu parametresi YS tarafndan retilen, tekil ve kolay tahmin edilemeyen bir deer olmaldr. Rza istei gnderimi aamasnda oluturulmaldr. YS uygulamasnda uygun bir yerde saklanmaldr (cookie, session, local storage gibi) . \n Durum kodu, rza isteindeki ynlendirme adresine parametre olarak eklenir.  GKD sreci sonrasnda yetki kodu ile birlikte bu bilgi, HHS tarafndan YSe iletilir. YS saklad deer ile parametre olarak gelen deerin eitliini kontrol eder. Ayn ise eriim belirteci almak zere ak ilerletir. Farkl ise ilemi keser. \n 5.4\tHealthcheck API \n GET /health \n HHSlerin sunaca bu servis, dzenli olarak BKM tarafndan arlarak servislerin ayakta olup olmadklarnn kontrolnn salanmas planlanmaktadr. \n Baarl yantta Http 200 kodu dnlmelidir. \nBaarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Koullu  / stee Bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir. \n 5.5  Gl Kimlik Dorulama Kontrolleri \n HK, GKD iin HHS uygulamasna ynlendirildiinde, HHSnin eitli kontroller yaparak ilemin doruluunu teyit etmesi gerekmektedir.\nYaplmas gereken kontrollere ait temel senaryolar aadaki tabloda belirtilmitir. Bu senaryolar baz alnarak HHSler tarafndan zenginletirilebilir. \n Aadaki tabloda yer alan 07-13 aras Rza ptal Detay Kodlarnn olutuu senaryolar, HHS uygulamasnda yaplan kullanc dorulama ncesi ve sonras olarak iki admda incelenmelidir. \n HHS tarafnda, kullanc dorulama ncesinde yaplan kontroller neticesinde verilemeyen rzalar iin 04 : Sre Am : Yetki Bekleniyor iptal kodu atanr. HHS'nin YS uygulamasna 04 kodunu iletmesi beklenmez. YS zaman am neticesinde rza statsn sorgulayarak renir. \nKullanc dorulandktan sonra rza verilemiyorsa ilgili hata kodunun YS'e iletilmesi beklenmektedir. Kullanc dorulama sonras YS'e iletilen rza iptal detay kodu ile HHS veri modelinde tutulan rza ile ilikili rza iptal detay kodu, ayn deeri alacak ekilde gncellenmelidir. YS, HHS tarafndan kendine iletilen rza iptal detay kodunu kendi veri modelinde gncellemelidir. \n Zorunlu olarak belirtilen hata durumlarnn HHSler tarafndan gereklenmesi ve uygun hata kodlarnn YSe iletilmesi; ileride oluabilecek mutabakatlama sorunlarn ortadan kaldrabilecek, yaplacak raporlamalar kapsamnda sistem ve sre iyiletirmelerine katk salayacak, son kullanc asndan da alnan hataya ynelik bilgilendirici ierik salayacaktr. \n Hata aklamalar; hata koduna uygun ya da uyumlu olmak kaydyla, HHS ve YS tarafndan farkl ekillerde sunulabilir. \n GKD Srasnda yaplmas gereken kontroller \n \n \n \n Rza ptal Detay Kodu \n HHS hata aklamas* \n Ys ekrannda listelenecek rnek mesaj metni* \n rnek Senaryo \n Zorunlu / Opsiyonel \n \n \n \n \n 07 \n Rza mevcut ve durumu \"Yetkilendirildi\" veya \"Yetki Kullanld\" \n Yetki Hatas \n HK,  kullanc dorulama ilemi tamamlandktan sonra  YS ekrannda ileri - geri yaparak ya da HK'nn ynlendirme adresini kopyalayarak taraycya yaptrmas ile tekrar HHS'ye ynlendirir. Bu durumda HHS bu rza iptal detay kodunu iletir. HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Zorunlu \n \n \n 08 \n Rzano ile kimlik bilgileri uyumazl. \n lem gerekletirilememitir. \n YS tarafndan balatlan rza ierisinde yer alan kimlik bilgisi (rn:TCKN) ile HHS'de baarl kimlik dorulama yaplan HK'nn bilgilerinin uyumad durumda  HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Zorunlu \n \n \n 09 \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) \n Gsterilebilecek hesap/kart bulunamamtr. \n HHS, kullanc dorulama yaptktan sonra, HK'nn uygun statl hesabnn olmad durumda  HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Zorunlu \n \n \n 10 \n HK'nn Ak Bankaclk kanal ileme kapal \n HK'nn Ak Bankaclk kanal ileme kapal \n Ak bankacl ayr bir kanal olarak tanmlam HHS'lerde,  HK kullanc dorulama yaptktan sonra yaplan kontrollerde, HK'nn ilemlerini AB kanalna kapatm olmas durumunda   HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Opsiyonel \n \n \n 11 \n HK'nn HHS'deki hesaplarnda yeterli yetkisinin olmamas \n Yetki hatas \n 1- Kurumsal firma kullanclarnn hesaplar zerinde ilem yetkisinin olmamas durumunda   2- Bireysel ortak hesaplarda hesap kst bulunuyorsa (para kna izin verilmedii durum)  HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Zorunlu \n \n \n 12 \n HHSnin,  HK zelinde yapt kontrollerin baarsz olmas \n Yetki hatas \n HHS'nin, kullanc dorulama sonras HK iin i sistemlerinde yapt kontrollerin baarsz olmas. rnein: Mterinin henz bankaclk hizmet szlemesi gibi Internet ubesi zerinde ilem yapmasn engelleyen eksikleri olmas durumunda veya kurumsal kullancda vekalet sresinin dolmas/eksik dokman olmas durumunda kanal zerinde ilem yapamad durum  HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Opsiyonel \n \n \n 13 \n HK istei ile GKDden vazgeilmesi \n Mteri ilemden vazgemitir. \n HHS ekrannda yer alan VAZGE butonuna baslmas durumu (HK,HHS uygulamasnda kullanc dorulama yaptktan sonra VAZGE butonu olabilir.) \n Zorunlu \n \n \n 14 \n GKD ptali: Fraud phesi \n lem gerekletirilememitir. \n HHS Fraud phesi nedeniyle ilemin devamna izin vermez. HHS'nin, fraud kontrollerinin deme balatma hizmeti iin yapmas ve 14- GKD ptali: Fraud phesi ile rza iptalini gerekletirmelidir. HBH servislerinde HHS'nin rza iptal kodu 14 ile ilemi kesmesi HHS'nin kendi insiyatifindedir yani opsiyoneldir. \n Koullu \n \n \n 99 \n Dier \n lem gerekletirilememitir. \n Oluabilecek dier senaryolar. \n Zorunlu \n \n \n \n GKD srasnda iletilen rza no eer HHSnin sisteminde bulunamazsa durumu gncellenecek bir rza no da olmayacaktr. HHS kendi nyznde bu duruma uygun bir mesaj gsterebilir. YSe de Dier hata kodu ile bu durumu iletebilir. \n"},{title:"HHS ve YS API",frontmatter:{},regularPath:"/v1.0.2/contents/hhs-yos-api.html",relativePath:"v1.0.2/contents/hhs-yos-api.md",key:"v-0ec6f57d",path:"/v1.0.2/contents/hhs-yos-api.html",headers:[{level:2,title:"HHS API",slug:"hhs-api"},{level:2,title:"YOS API",slug:"yos-api"},{level:2,title:"Healthcheck API",slug:"healthcheck-api"}],content:' HHS ve YS API \n HHS API, HHSlerin detay bilgilerini sunan servistir. Bu servis ile aadaki istek/yant yaplar ile ihtiya duyulabilecek ilgili bilgiler temin edilebilir. HHS API iin hhs_read scope bilgisi kullanlr. \n Production ortamnda HHS / YOS API ierisinde sisteme dahil olmu, sertifikasyonu baar ile tamamlam paydalar listelenecektir. HHS tarafndan desteklenen API srmleri listelenecektir. \n YSler HHS APIsini sorgulayabilir ancak YS APIsini sorgulayamazlar. \nBenzer ekilde HHSler YS APIsini sorgulayabilir, HHS APIsini sorgulayamazlar. \n HHS API \n GET /hhs/{hhsKod} \n lem Sorgu rnei =  /hhs    bu sorgu yntemi ile tm HHSlerin dizi eklinde verileri listelenir. \nlem Sorgu rnei =  /hhs/2001    bu sorgu yntemi ile gnderilmi olan hhsKoduna ait bilgiler listelenir. Ya da 404 Not Found hatas alr. \nHHS ve YS API Tablo 20deki istek parametrelerine gre sorgulanabilir. \nlem Sorgu rnei (Belirli Bir Hesap) =  /hhs?srlmKrtr=kod&srlmYon=A \n Tablo 20: HHS ve YS API Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek ilemlerin sralama kriterini belirtir. Alabilecei deerler: {kod, unv} \n Bu veri gnderildii durumda, HHS ilemler listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, sralama kriteri unv olarak belirlenmelidir. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler: A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS ilemler listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 21: HHS Bilgileri Sorgulama Yant Hhs nesnesi \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n hhs kodu \n kod \n AN4 \n Z \n HHS nin kod bilgisi \n \n \n hhs unvan \n unv \n AN3..140 \n Z \n HHS nin unvan bilgisi \n \n \n hhs markas \n marka \n AN1..140 \n Z \n HK\'nn kolaylkla alglayabilecei ksa unvan bilgisi. HHS tarafndan belirlenecektir. \n \n \n Ak anahtar \n acikAnahtar \n AN1..1024 \n Z \n HHSnin mesaj imzalama iin paylat ak anahtar \n \n \n HHS Api Bilgileri \n apiBilgileri \n Kompleks: HhsApiBilgi[Array][0..N] \n Z \n Desteklenen Api ve srm bilgileri dnlecektir. \n \n \n > api \n api \n AN1..20 \n Z \n Api smi rnek :obh, hbh,gkd \n \n \n > surum \n surum \n AN1..10 \n Z \n Api Srm Kodu rnek: s1.0, s2.0 s1.0 \n \n \n Logo Bilgileri \n logoBilgileri \n Kompleks: LogoBilgisi [Array][1..N] \n Z \n HHSye ait logo bilgileri. Logotur = Original  formatndaki logonun minimumda gnderimi zorunludur. \n \n \n >logoTur \n logoTur \n AN3..50 \n Z \n Logonun trn belirler. TR.OHVPS.DataCode.LogoTur alabilecei deerler  ORIGINAL , WHITE_OVERLAY , BLACK_OVERLAY , GRAY_OVERLAY \n \n \n > logoAdr \n logoAdr \n AN1..255 \n Z \n HHS tarafnda tutulan ve YSlerle paylalacak olan url adres bilgisidir. \n \n \n Durum \n durum \n AN1 \n Z \n HHS\'nin durum bilgisidir.  TR.OHVPS.DataCode.HHSDurumu sral veri tipinde alabilecei deerler belirtilmitir. \n \n \n \n HHS API\'de; Ak, Yaygnlatrma, Geici Hizmet Veremiyor, Kapal durumlarndaki HHS\'ler listelenecektir.  \nSertifikasyon onay alan HHS\'ler, retim ortamna geite "Yaygnlatrma" durumuna sahip olabilir.  HHS\'nin, hangi YS\'ler ile "Yaygnlatrma" kontrollerini yapaca, HHS ynetiminde olacaktr. Bylece retim Ortamnda HHSnin kendisi tarafndan tanmlanm kstl HKya hizmet vermesi ve servislerini test etmesi salanabilir olacaktr. HHS\'ler kendi kurum kontrollerini yapana kadar, "Yaygnlatrma" durumunda kalabilirler. HHS\'nin BKM\'ye yapaca talep ile, HHS "Yaygnlatrma" durumundan "Ak" durumuna geebilecektir. \nHHS\'de olas bir teknik sorun olmas durumunda, BKM - HHS koordinasyonu ile HHS durumu "Geici Hizmet Veremiyor" haline getirilecektir. Sorun giderildiinde "Ak" durumuna geri dnecektir. \n Hem YOS hem de HHS API iin geerli olacak; logo gnderiminde dikkat edilmesi gerekenler u ekilde tariflenmitir: \n \n Logolarn ham dosya yerine kurumun yaynlayaca bir URL zerinden sunulmas gerekmektedir. (rn: logoURL  =  https://kurumadi.com.tr/logo.png) Logo BKM tarafnda host edilmeyecektir.) \n PNG formatnda (PNG-24) olmaldr. \n 72 DPI znrlkte olmaldr. \n 500 x 500 boyutlarnda, yatayda veya dikeyde tama paysz tam oturacak, snr boyutlarn gemeyecek ve ortalanm yerleime sahip olmaldr. \n Logo arka plan renkli olmamal, arka plan transparan olmaldr. \n YS uygulamasnda gsterim esnasnda logolarn hzl yklenmesi ve dk veri tketmesi asndan; logo boyutu 250 KBn altnda olmaldr. \n Drt adet logo tr belirlenmitir. Bu 4 tr iin de logo dnlmesi zorunludur. \n Logo urlin public eriilebilir url olmas gereklidir. \n \n YS API, YS statsundeki kurumlarn detay bilgilerini sunan servistir. Bu servis ile aadaki istek/yant yaplar ile ihtiya duyulabilecek ilgili bilgiler temin edilebilir. YS API iin yos_read scope bilgisi kullanlr. \n YS API yantnda, listelenen ynlendirme ve bildirim adresleri bulunmaktadr. HHS, ilem annda iletilen yonAdr ya da bldrAdr alanlarnda gnderilen adreslere yetKod deerini iletmelidir. YS API ierisinde yer alan adresleri, rza isteinde gnderilen adreslerin doruluunu kontrol etme amacyla kullanlmaldr. Bu nedenle YS API ierisinde listelenen adreslerin hostname seviyesinde yer almas yeterlidir. \n YOS API \n YS API ierisinde yer alan YS rol bilgileri ve aktiflik/pasiflik durumlar birbiriyle ilikili deildir. \n YS\'n sahip olduu bhs,hbhs rolleri iin herhangi bir fraud ya da teknik sebeplerden tr geici sreyle geri alnabilir. \n YS aktifliini korurken problem zlene kadar geici olarak alnan roller(bhs,hbhs) tekrardan aktif hale getirilir. \n GET /yos/{yosKod} \n lem Sorgu rnei =  /yos    bu sorgu yntemi ile tm yos lerin dizi eklinde verileri listelenir. \n lem Sorgu rnei =  /yos/2501    bu sorgu yntemi ile gnderilmi olan yosKoduna ait bilgiler listelenir ya da 404 Not Found hatas alr.\nYS API Tablo 20deki istek parametrelerine gre sorgulanabilir.\nlem Sorgu rnei (Belirli Bir Hesap)=  /yos?srlmKrtr=kod&srlmYon=A \n Tablo 22: YOS Bilgileri Sorgulama Yant Yos nesnesi \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Ys kodu \n kod \n AN4 \n Z \n YS\'n kod bilgisi \n \n \n Ys unvan \n unv \n AN3..140 \n Z \n YS unvan bilgisi \n \n \n Ys markas \n marka \n AN1..140 \n Z \n HK\'nn kolaylkla alglayabilecei ksa unvan bilgisi. YS tarafndan belirlenecektir. \n \n \n YS rolleri \n roller \n Array[AN4] \n Z \n YSun rollerini belirten deer. rnek: [ "obhs", "hbhs" ]  - obhs - deme Bilgisi Hizmet Salayc Rol  - hbhs - Hesap Bilgisi Hizmet Salayc Rol \n \n \n Adresler \n adresler \n Kompleks:Adres[Array] [1..N] \n Z \n --- \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur sral veri tr deerlerlerinden birini alr. Adres detaylarnn hangi GKD trne ait olduunu belirtir. \n \n \n >Adres Detaylar \n adresDetaylari \n adresDetaylari\tKompleks: AdresDetayi[Array] [1..N] \n Z \n \n \n \n >>Temel Adres \n tmlAdr \n AN1..1024 \n Z \n yetYntm deeri Y olarak iletildiinde Ynlendirmeli GKD srecinde HHSnin YOSe authorizasyon kodunu hangi url e gnderecei bilgisini tutar. yetYntm deeri A olarak iletildiinde Ayrk GKD srecinde HHSnin YOSe authorizasyon kodunu hangi url e gnderecei bilgisini tutar. Riza isteklerinde bu deer ile uyumluluu kontrol edilmelidir. rnek: https://example.com https://example2.com/path deepLink://example/test deepLink://example2/test \n \n \n >>Aklama \n aciklama \n AN1..1024 \n  \n YSn gnderdii adrese ynelik vermek istedii aklama rnek: WEB bireysel , WEB kurumsal  , APP \n \n \n Ak anahtar \n acikAnahtar \n AN1..1024 \n Z \n YSn mesaj imzalama iin paylat ak anahtar \n \n \n Logo Bilgileri \n logoBilgileri \n Kompleks: LogoBilgisi [Array][1..N] \n Z \n YOSe ait logo bilgileri. Logotur = Original formatndaki logonun minimumda gnderimi zorunludur. \n \n \n >logoTur \n logoTur \n AN3..50 \n Z \n Logonun trn belirler. TR.OHVPS.DataCode.LogoTur alabilecei deerler  ORIGINAL , WHITE_OVERLAY , BLACK_OVERLAY , GRAY_OVERLAY \n \n \n > logoAdr \n logoAdr \n AN1..255 \n Z \n YS tarafnda tutulan ve HHSlerle paylalacak olan url adres bilgisidir. rnek: https://via.placeholder.com/150?text=0001 \n Healthcheck API \n GET /health \n HHS ve YS API iin health servisleri aadaki servislerle kontrol edilebilir. \n Baarl yantta Http 200 kodu dnlecektir\nBaarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir \n \n \n \n'},{title:"2.Kapsam ve Dayanak",frontmatter:{},regularPath:"/v1.0.2/contents/kapsam-ve-dayanak.html",relativePath:"v1.0.2/contents/kapsam-ve-dayanak.md",key:"v-3539d41d",path:"/v1.0.2/contents/kapsam-ve-dayanak.html",content:" 2.Kapsam ve Dayanak \n 12 Kasm 2019da gncellenen  6493 sayl deme ve Menkul Kymet Mutabakat Sistemleri, deme Hizmetleri ve Elektronik Para Kurulular Hakknda Kanun un (Kanun) 12nci maddesine yeni eklenen ve  deme Hizmetleri Direktifi 2 'de (Payment Services Directive 2, PSD2) bulunan iki yeni deme hizmeti aadaki gibi tanmlanmtr (ekil-1: deme Hizmetleri Veri Paylam Servisleri): \n \n deme Emri Balatma Hizmeti : HKnn istei zerine baka bir deme hizmeti salaycsnda bulunan  deme hesabyla  ilgili sunulan deme emri balatma hizmeti [Madde 12, birinci fkra, (f) bendi] \n Hesap Bilgisi Hizmeti : HKnn onaynn alnmas kouluyla, HKnn deme hizmeti salayclar nezdinde bulunan bir veya daha fazla  deme hesabna  ilikin konsolide edilmi bilgilerin evrim ii platformlarda sunulmas hizmeti [Madde 12, birinci fkra, (g) bendi] \n \n   \n ekil 1: deme Hizmetleri Veri Paylam Servisleri (HVPS)- tantm \n Kanunun 14/A maddesinin ikinci fkrasna gre , Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetleri ile ilgili ilemlerin yrtlmesine ilikin usul ve esaslar ile taraflarca uyulmas gereken teknik ve operasyonel gereklilikler ikincil dzenlemeler uyarnca Trkiye Cumhuriyet Merkez Bankas (TCMB) tarafndan belirlenir. Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetlerinde kullanlan veri paylam servisleri  deme hizmetleri veri paylam servisleri (HVPS)  olarak adlandrlmaktadr. \n deme Hizmetleri ve Elektronik Para hrac ile deme Hizmeti Salayclar Hakknda Ynetmelikin (Ynetmelik) 59uncu maddesinin birinci fkras uyarnca hazrlanan bu belgede sz konusu deme hizmetlerini sunacak deme hizmeti salaycsnn, deme hesabnn bulunduu deme hizmeti salaycsnn, varsa ilgili dier taraflarn ve bu hizmetlerin sunulmas iin taraflar arasnda kurulacak balantnn teknik ve operasyonel gereklilikleri aklanmaktadr. \n Dzenlemeler kapsamnda yetkilendirilen nc taraf hizmet salaycs  (Yetkili deme Hizmeti Salaycs, YS) , deme hizmeti kullanclarnn  Hesap Hizmeti Salayclar (HHS)  nezdindeki deme hesaplarna ulaarak deme emri balatma ve hesap bilgisi salama hizmetlerinden (deme hizmetleri veri paylam servislerinden) faydalanmasna araclk eder. deme hizmetleri veri paylam servisleri kapsamnda iki tip YS bulunmaktadr:  1) Hesap Bilgisi Hizmeti Salaycs (HBHS) ve 2) deme Emri Balatma Hizmeti Salaycs (BHS). \n Hesap Bilgisi Hizmeti Salaycs (HBHS) HKnn farkl Hesap Hizmeti Salayclar (HHS) nezdindeki hesaplarnn bilgilerini derleyerek evrim ii platformlarda  toplu ekilde  sunar. deme Emri Balatma Hizmeti Salaycs (BHS) ise talebi zerine HKnn HHSde bulunan deme hesabndan deme ilemi balatr. \n HVPSnin st dzey gsterimi ekil-2de verilmitir. \n   \n ekil 2: deme Hizmetleri Veri Paylam Servisleri (HVPS) -st dzey gsterim \n deme Hizmetleri Veri Paylam Servislerinin HHSler tarafndan  BKM API Geidi  vastasyla sunulduu uygulama mimarisi ise ekil-3te sunulmutur. \n  \n ekil 3: HVPS'nin BKM API Geidi vastasyla sunumu \n"},{title:"4. Rza Durumlar",frontmatter:{},regularPath:"/v1.0.2/contents/riza-durumlari.html",relativePath:"v1.0.2/contents/riza-durumlari.md",key:"v-1be15362",path:"/v1.0.2/contents/riza-durumlari.html",headers:[{level:2,title:"4.1.\tHesap Bilgisi Hizmeti Rza durum deiiklikleri",slug:"_4-1-hesap-bilgisi-hizmeti-rza-durum-degisiklikleri"},{level:2,title:"4.2.\tdeme Bilgisi Hizmeti Rza Durum Deiiklikleri",slug:"_4-2-odeme-bilgisi-hizmeti-rza-durum-degisiklikleri"}],content:" 4. Rza Durumlar \n HK, deme Emri Balatma Hizmetine ya da Hesap Bilgisi Hizmetine mteri rzasnn tesisi ile balar. HKnn YS uygulamas zerinden yapt ilemler neticesinde rza durumlar deiebilir.\nRzann alabilecei durum kodlar u ekilde belirlenmitir. \n B: Yetki Bekleniyor   lk rza talebinde \n Y: Yetkilendirildi   Baarl GKD sonras yetKod retildiinde \n K: Yetki Kullanld   Eriim Belirteci alndnda \n E: Yetki deme emrine dnt   BHS iin \n S: Yetki Sonlandrld \nHBHS iin : Eriimin Geerli Olduu Son Tarih geldiinde \nBHS iin : Yenileme belirteci Son Tarihi geldiinde \n I :Yetki ptal \nRza iptal durumu ise gerek raporlama gerekse mteri deneyimi perspektifinden doru   bilgilendirmeler yaplabilmesi asndan aadaki gibi detay kodlar ile zenginletirilmitir: \n \n Rza ptal Detay Kodu: \n \n \n \n 01 :\tYeni Rza Talebi ile ptal \n 02 :\tKullanc stei ile HHS zerinden ptal \n 03 :\tKullanc stei ile YS zerinden ptal \n 04 :\tSre Am : Yetki Bekleniyor \n 05 :\tSre Am : Yetkilendirildi \n 06 :\tSre Am : Yetki demeye Dnmedi \n 07 :\tGKD iptali : Ayn rza no ile mkerrer arm \n 08 :\tGKD iptali : Rzano ile TCKN uyumamas \n 09 :\tGKD iptali : Uygun rn bulunmuyor \n 10 :\tGKD iptali : HHS Ak Bankaclk kanal ileme kapal \n 11 :\tGKD iptali : Hesap Yetki Sorunu \n 12 :\tGKD iptali : HK HHS kontrollerini aamad \n 13 :\tGKD iptali : HK istei ile GKDden vazgeildi \n 14 :\tGKD iptali : Fraud phesi \n 99 :\tGKD iptali : Dier \n \n \n 4.1 ve 4.2 blmlerinde detaylandrlan rza durum deiikliklerinde rza iptal detay kodlar kullanlmtr. \n rnein B I/01 denildiinde Yetki Bekleniyor rza durumundan Yetki ptal rza durumuna Rza ptal Detay Kodu da 01 yani Yeni Rza Talebi ile ptal olarak gncellenmelidir ifade edilmitir. \n HK verdii rza srasnda setii hesaplarndan biri kapatlrsa, dier hesaplara ait bilgileri grmeye devam eder. Ancak HKnn hesabna ait bilgilerinin YS'e iletilmesini istemedii durumda, rzasn tamamen iptal ederek yeni hesap listesi ile yeni rza vermesi gerekmektedir. Yani hesap kapanmas nedeniyle rza geerliliini yitirmez. HK'nn proaktif olarak bu hesab rzadan karmas durumunda rza iptali olur. \n Rza iptal edilmedii ve geerli olduu srece kapal hesaplar iin dier evrimii kanallarda uygulanan yntem izlenmelidir. Dier evrimii kanallarda kapal hesaplara ilikin bilgi dnlmyor ise HVPS'den de dn yaplmaz. HKnn rza onay verdii ak hesaplarnn tm HHS tarafnda kapatld durumda, yine ayn ekilde HHS evrimii kanallarnda koyduu kurallara gre bu hesaplarnn YS uygulamasnda gsterilmesine karar verir. \n Hesap kapama ve ticari kullanclarn hesaplar zerindeki yetki deiiklikleri HHS'nin i sistemleri tarafndan yaplan kontrollerle ynetilir. Buradaki deiiklikler ile HHS sistemsel olarak rza iptali gerekletiremez. HK izni ve onay dahilinde rza iptal gerekletirilmesi gerekmektedir. \n HHS'ler sunmu olduklar Rza ptal ekrann (sadece Hesap Bilgisi Rzas iin), hangi ortamlardan GKD yaplmasna izin veriliyorsa (web/mobil) ayn ortamdan HK'ya sunmaldr.  rnein bir HHS bireysel mterileri iin web ve mobil, kurumsal mteriler iin web zerinden GKD imkan sunuyor ise, minimumda bireysel mteriler iin web ve mobil ortamlarndan, kurumsal mteriler iin web ortamndan Rza ptal ekran aracl ile rza iptaline izin vermelidir. Bunun dnda ar merkezi ya da ube gibi ortamlardan sunaca Rza ptal imkan HHS inisiyatifindedir. Bahsi geen zorunluluk deme Emri Rza ptal ekran iin geerli deildir. \n Benzer ekilde YS'ler hangi ortamlardan (web/mobil) hizmet veriyorsa, ayn ortam zerinden Rza ptal ekrann sunmaldr. \n 4.1.\tHesap Bilgisi Hizmeti Rza durum deiiklikleri \n Kural : Bir HK'nn, bir YS iin, bir HHS'de Y, K, B rza durumlarnda tek bir rzas olabilir.\nBir HK hem kiisel olarak hem de bir kurumun kullancs olabilir. Bu durumda kurum ve kiisel rza ayn anda mevcut olabilmelidir. Rza nesneleri, HHS tarafndan uygun ekilde ynetilmelidir. \n \n \n Hesap Bilgisi Rzas istei HHSye iletilir. \na.\tHHS HK'ya ait ieride rza var m kontrol eder. Eer yoksa  Yetki Bekleniyor - B  rza durumu ile yeni rza oluturur. \nb.\tEer ieride rza varsa \n i. Rza durumu Yetki Bekleniyor - B ise; \n    HHS, sistemde Yetki Bekleniyor - B rza durumuna sahip kayt olduu iin, ncelikle eski kayd Yetki ptal - I durumuna getirir.  Rza ptal Detay Kodu Yeni Rza Talebi ile iptal olmaldr.  B  I / 01  Sonrasnda,  Yetki Bekleniyor - B  rza durumu ile yeni rza oluturur. \n  ii. Rza durumu Yetkilendirildi - Y veya Yetki Kullanld - K ise; \nHK'nn halihazrda verilmi bir rzas vardr. HHS, nce mevcut rzann iptalinin yaplmas gerektiine dair   TR.OHVPS.Resource.ConsentMismatch  hatasn dner. YS, HHS ya da YS uygulamas zerinden bu rzann iptal edilmesi gerektiine dair HK'ya bilgilendirme yapar. \n  iii.\tRza durumu Yetki Sonlandrld - S  ise Yetki Bekleniyor - B durumunda yeni rza no oluturur. \n  iv.\tRza durumu Yetki ptal - I ise  Yetki Bekleniyor - B  durumunda yeni rza no oluturur. \n \n \n GKD baarl bir ekilde tamamlandnda Rza durumu Yetki Bekleniyordan Yetkilendirildiye gncellenir.  B  Y \n \n \n GKD'nin gereklemedii durumlardan HHS haberdar olmayabilir. \n HK GKD yapmadan ayrlm olabilir. (R: Taraycy kapatm olabilir) Rza Yetki Bekleniyor - B rza durumunda kalr.  5 dakika ierisinde sistem tarafndan Yetki Bekleniyor - B rza durumundaki kaytlar Yetki ptal  : Yetki Bekleniyor Sre Am olarak gncellenir.   B  I / 04  Bkz. 9. Madde. \n \n \n GKD'nin gereklemedii durumlardan HHS haberdardr. HHS yonlendirme adresinin query parametrelerine  rizaIptDtyKod  deerini ekleyerek bu durumu YSe bildirmek zorundadr. \n \n \n Rza durumunun  Yetkilendirildi\" , Yetki Kullanld olduu durum.  Yetki Bekleniyor  Yetki ptal   B   I / 07 \n \n \n Rzano ile kimlik bilgileri uyumazl.  Yetki Bekleniyor  Yetki ptal  B  I / 08 \n \n \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) Yetki Bekleniyor  Yetki ptal   B  I / 09 \n \n \n Ak bankaclk kanalnz ileme kapaldr.Yetki Bekleniyor  Yetki ptal  B  I / 10 \n \n \n Kullancnn HHS'deki hesaplarnda yeterli yetkisinin olmama durumu  Yetki Bekleniyor  Yetki ptal  B  I / 11 \n \n \n HHSnin HK iin yapt kontrollerin baarsz olduu durum Yetki Bekleniyor  Yetki ptal   B  I / 12 \n \n \n HK istei ile GKDden vazgeildii durum Yetki Bekleniyor  Yetki ptal  B  I / 13 \n \n \n Fraud phesi Yetki Bekleniyor  Yetki ptal  B  I / 14 \n \n \n Dier Yetki Bekleniyor   Yetki ptal   B   I / 99 \n \n \n \n \n \n \n HK, hesaplarnda/izin trlerinde/Eriimin Geerli Olduu Son Tarih bilgilerinden bir ya da birden fazlasnda gncelleme yapmak iin YS ekranna girer. \n \n \n a.\tYS nce Rza ptal API'sini arr. Sonra yeni deerlerle yeni bir rza isteinde bulunur. Tekrar GKD gerekir. \n b.\tYS rza iptal yapmadan yeni rza alma akna balarsa 1.b ak devreye girer. \n c.\tRza gncelleme ilerleyen srmlerde ele alnacaktr. \n \n \n Eriim Belirteci API \n a. Eriim Belirteci'nin yetkilendirme kodu ile arm yapldnda; \n  i. Rza durumu Yetki ptal - I ya da Yetki Sonlandrld - S ise   TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n ii. Rza durumu Yetki Bekleniyor - B ya da Yetki Kullanld - K  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iii. Rza durumu Yetkilendirildi - Y olduunda eriim belirteci tahsis edilir.\nEriim belirteci alndnda rza durumu K: Yetki Kullanld yaplr.  Y K \n b. Yenileme belirteci karl eriim belirteci alnmas srasnda; yenileme belirteci kontrol ve sonrasnda rza kontrol yaplmaldr. \n  i. ncelikle Yenileme Belirteci Geerlik Sresi kontrol yaplmaldr. Geerli bir Yenileme Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n ii. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n iii. Rza durumu Yetki Bekleniyor - B ya da Yetkilendirildi - Y  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iv. Rza durumu Yetki Kullanld - K olduunda, yenileme belirteci karl eriim belirteci tahsis edilir. \n \n \n Sorgulama: HBHS, rza alma akna balamadan nce, daha nce oluturulmu bir hesap bilgisi-rizasi kaynann durumunu, istee bal olarak alabilir. Rza numaras ile sorgulama yaplr. \n \n \n Hesap Bilgisi Rzasnn ptali: HBHS zerinden ya da HHS zerinden yaplan rza iptallerinde Rza durumu  Yetki ptal - I olarak gncellenir. Rza numaras ile iptal salanr. \n a. HHS zerinden rza iptali yapm olabilir.  Rza durumu sorgulanr. \n Rza numaras Yetki Bekleniyor - B ve Yetkilendirildi - Y ve Yetki Kullanld - K durumlarnda ise Yetki ptal durumuna getirilir. Rza gnclzmn timestamp ile gncellenir.\nHHS, Rza iptalinde ayn zamanda eriim belirtecini de invalid hale getirmelidir. \n B  I / 02 \n Y  I / 02 \n K  I / 02 \n b.\tYS zerinden yaplacak iptal ileminde yine Y ve B ve K rza durumlarnda ise iptal edilebilir. \n B  I / 03 \n Y  I / 03 \n K  I / 03 \n Rza durumu Yetki Sonlandrld - S  ise iptal gereklemez. Rza durumunuz iptal etmeye uygun deildir. hatas HK'ya yanstlr.  TR.OHVPS.Resource.ConsentRevoked \n \n \n HKnn verdii rza sresi dolmu olabilir.\nEriimin Geerli Olduu Son Tarih geldiinde Rza durumu Yetki Kullanlddan Yetki Sonlandrld durumuna ekilmelidir.   K  S \n \n \n Hesaplar, Bakiye ve lemler servislerinde eriim belirteci kontrol ve sonrasnda rza kontrol yaplmaldr.\nGeerli bir eriim belirteci yok ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n YS'n; Rza ptal - I ya da Yetki Sonlandrld - S rza durumlarnda Hesaplar, Bakiye ve lemler servislerini armamas beklenir. HHS'nin bu rza durumlar ile yaplm arlar olduunda  TR.OHVPS.Resource.ConsentRevoked  hatasn dnmesi gereklidir. \n Rza durumu Yetki Kullanld - K dnda ise  TR.OHVPS.Resource.ConsentMismatch  hatas verilmelidir. \n Rza durumu Yetki Kullanld - K ise servis aklarna devam edilir. \n Rza sorgulama API'sinde ilgili rza kayd bulunamaz veya sorgulayan kurumun yetkisi yoksa (rn : YSn farkl bir YSe ait rza noyu sorgulamas) \n TR.OHVPS.Resource.NotFound hatas  verilmelidir. \n \n \n HHS/YS tarafnda rza bilgileri belirli aralklarla sistem kullancs tarafndan taranr:\n5 dakikadan uzun sredir Yetki Bekleniyor durumunda kalan kaytlarn durumlar gncellenir.\nYetki Bekleniyor   Rza ptal  / Sre Am : Yetki Bekleniyor  B  I / 04 \n 5 dakikadan uzun sredir Yetkilendirildi durumunda kalan kaytlar gncellenir.\nYetkilendirildi      Rza ptal / Sre Am: Yetkilendirildi  B  I / 05 \nYukarda bahsedilen, YS Sre Am nedeniyle rza iptal durum gncellemelerini yapmadan nce HHSyi sorgulayarak rza durumunu renmeli ve sre am dnda bir kodu varsa ayn kodla kendi sistemini gncellemelidir. \nEriimin Geerli Olduu Son Tarih geldiinde rza durumu Yetki Kullanlddan Yetki Sonlandrldya gncellenir.  K  S \n 4.2.\tdeme Bilgisi Hizmeti Rza Durum Deiiklikleri \n Kural : Bir HK'nn bir YS iin bir HHS'de istedii kadar rzas olabilir. \n Kurum ve kiisel rza ayn anda mevcut olabilmelidir. Rza nesneleri, HHS tarafndan uygun ekilde ynetilmelidir. \n \n \n deme Emri Rzas istei HHSye iletilir. eride rza olup olmamasna baklmakszn  Yetki Bekleniyor - B  rza durumu ile yeni rza no oluturur. \n \n \n GKD baarl bir ekilde tamamlandnda rza durumu Yetki Bekleniyordan Yetkilendirildiye gncellenir.   B  Y \n \n \n GKD'nin gereklemedii durumlardan HHS haberdar olmayabilir. \n HK GKD yapmadan ayrlm olabilir. (R: Browser kapatm olabilir)\nRza durumu Yetki Bekleniyor'dur. 5 dakika ierisinde sistem tarafndan Yetki Bekleniyor - B durumundaki kaytlar Rza ptal : Yetki Bekleniyor Sre Am olarak gncellenir. Bkz. 8. Madde. \n \n \n GKD'nin gereklemedii durumlardan HHS haberdardr. HHS yonlendirme adresinin query parametrelerine rizaIptDtyKod deerini ekleyerek bu durumu YSe bildirmek zorundadr. \n \n \n Rza durumunun  Yetkilendirildi\" , Yetki Kullanld olduu durum.  Yetki Bekleniyor  Yetki ptal   B   I / 07 \n \n \n Rzano ile kimlik bilgileri uyumazl.  Yetki Bekleniyor  Yetki ptal  B  I / 08 \n \n \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) Yetki Bekleniyor  Yetki ptal   B  I / 09 \n \n \n Ak bankaclk kanalnz ileme kapaldr.Yetki Bekleniyor  Yetki ptal  B  I / 10 \n \n \n Kullancnn HHS'deki hesaplarnda yeterli yetkisinin olmama durumu  Yetki Bekleniyor  Yetki ptal  B  I / 11 \n \n \n HHSnin HK iin yapt kontrollerin baarsz olduu durum Yetki Bekleniyor  Yetki ptal   B  I / 12 \n \n \n HK istei ile GKDden vazgeildii durum Yetki Bekleniyor  Yetki ptal  B  I / 13 \n \n \n Fraud phesi Yetki Bekleniyor  Yetki ptal  B  I / 14 \n \n \n Dier Yetki Bekleniyor   Yetki ptal   B   I / 99 \n \n \n \n \n \n \n GKD muafiyeti olduunda YS HHSden arka planda onay alr. Bu onay srasnda rza durumu  Yetkilendirildi  yaplr.  B  Y \n \n \n Eriim Belirteci API \na. Eriim Belirteci'nin yetkilendirme kodu ile arm yapldnda; \n  i. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise   TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n ii. Rza durumu Yetki Bekleniyor - B , Yetki Kullanld - K  ya da Yetki deme emrine dnt - E  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iii. Rza durumu Yetkilendirildi - Y olduunda eriim belirteci tahsis edilir.\nEriim belirteci alndnda rza durumu K: Yetki Kullanld yaplr.  Y K \n b. Yenileme belirteci karl eriim belirteci alnmas srasnda; yenileme belirteci kontrol ve sonrasnda rza kontrol yaplmaldr. \n  i. ncelikle Yenileme Belirteci Geerlik Sresi kontrol yaplmaldr. Geerli bir Yenileme Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n ii. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n iii. Rza durumu Yetki Bekleniyor - B ya da Yetkilendirildi - Y  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iv. Rza durumu Yetki Kullanld - K veya Yetki deme Emrine Dnt  E olduunda, yenileme belirteci karl eriim belirteci tahsis edilir. \n \n \n deme Balatma API nce eriim belirteci ve sonrasnda rza kontol yaplarak gerekletirilmelidir \n \n ncelikle Eriim Belirteci kontrol yaplmaldr. Geerli bir Eriim Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n Rza durumu Yetki Bekleniyor - B , Yetkilendirildi - Y, Yetki deme Emrine Dnt - E  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n Rza durumu Yetki Kullanld - K olduunda deme emri gerekletirilir.  Rza durumu Yetki Kullanld - K'dan Yetki deme Emrine Dnt  E yaplmaldr.   K E \n \n \n \n Sorgulama: GKD ileminin baaryla tamamlanp deme Emri Rzasnn yetkilendirilmesi esnasnda, gnderen hesap seiminin HHS ekrannda yapld durumlarda, deme emri isteinde gnderen hesap bilgileri alannn zorunlu olmas nedeniyle, demeEmriRizasi nesnesi sorgulanarak gnderen hesap bilgileri (hesap numaras ve/veya hesap referans) alnmaldr.\nRza sorgulama, deme Emri Sorgulama API'lerinde ilgili rza kayd bulunamaz veya sorgulayan kurumun yetkisi yoksa (rn : YSn farkl bir YSe ait rza noyu sorgulamas) \n TR.OHVPS.Resource.NotFound  hatas verilmelidir. \n \n \n deme Emri Rzasnn ptali bulunmamaktadr. \n \n \n HHS/YS tarafnda rza bilgileri belirli aralklarla sistem kullancs tarafndan taranr:\n5 dakikadan uzun sredir Yetki Bekleniyor'da kalan kaytlarn durumlar gncellenir.\nYetki Bekleniyor  Rza ptal / Sre Am : Yetki Bekleniyor  B  I / 04 \n 5 dakikadan uzun sredir Yetkilendirildi'de kalan kaytlar durumlar gncellenir.\nYetkilendirildi      Rza ptal / Sre Am : Yetkilendirildi  B  I / 05 \n 5 dakikadan uzun sredir Yetki kullanld'da kalan kaytlar durumlar gncellenir.\nYetki kullanld  Rza ptal / Sre Am : Yetki demeye Dnmedi  B  I / 06 \n Yenileme belirteci Son Tarih geldiinde rza durumu Yetki deme emrine dntden Yetki Sonlandrld'ya gncellenir. \n E  S \n \n \n GKD muafiyeti sadece deme balatma servislerinde bulunmaktadr. \n \n \n"},{title:"6.\tdeme Emri Balatma Hizmeti",frontmatter:{},regularPath:"/v1.0.2/contents/odeme-emri-baslatma-hizmeti.html",relativePath:"v1.0.2/contents/odeme-emri-baslatma-hizmeti.md",key:"v-1ef8939d",path:"/v1.0.2/contents/odeme-emri-baslatma-hizmeti.html",headers:[{level:3,title:"deme Emri Balatma Hizmeti iin Eriim Adresleri (Endpoints)",slug:"odeme-emri-baslatma-hizmeti-icin-erisim-adresleri-endpoints"},{level:2,title:"6.1.\tADIM 0 - deme Emri Balatma Istei",slug:"_6-1-adim-0-odeme-emri-baslatma-istegi"},{level:2,title:"6.2.\tADIM 1 - deme Emri Rzasnn Hazrlanmas",slug:"_6-2-adim-1-odeme-emri-rzasnn-hazrlanmas"},{level:2,title:"6.3.\tADIM 2- deme Emri Rzasnn Yetkilendirilmesi",slug:"_6-3-adim-2-odeme-emri-rzasnn-yetkilendirilmesi"},{level:2,title:"6.4.\tADIM 2.1  deme Emri Rzasnn Sorgulanmas (istee bal)",slug:"_6-4-adim-2-1-odeme-emri-rzasnn-sorgulanmas-istege-bagl"},{level:2,title:"6.5.\tADIM 3- deme Emrinin Oluturulmas",slug:"_6-5-adim-3-odeme-emrinin-olusturulmas"},{level:2,title:"6.6.\tADIM 3.1- deme Emri Sorgusu (stee bal)",slug:"_6-6-adim-3-1-odeme-emri-sorgusu-istege-bagl"},{level:3,title:"GET /odeme-emri/{odemeEmriNo}",slug:"get-odeme-emri-odemeemrino"},{level:2,title:"6.7\tHealthcheck API",slug:"_6-7healthcheck-api"},{level:3,title:"GET /health",slug:"get-health"}],content:" 6.\tdeme Emri Balatma Hizmeti \n deme emri balatma ilemi havale, FAST ya da PS demesiyle sonulanabilir. deme ileminin amac kiiden kiiye para transferi, e-ticaret demesi gibi farkl deme trleri olabilir. demenin amacna gre BHSnin iletecei veri setinde farkllamalar olabilir. \n deme Emri Balatma Hizmeti 5 temel akdan oluur: \n \n deme Emri Balatma steinin tetiklenmesi:  HK BHS mobil uygulama ya da websitesinden deme emrini balatr. \n deme Emri Rza Hazrlanmas:  BHS, deme Emri Balatma ilemi iin izin oluturulmas isteini HHSye iletir. \n deme Emri Rzasnn Yetkilendirilmesi:  HHS, gerekli grd durumlarda HKy GKD ile dorular ve deme emri rzasna eriim iin eriim belirteci tanmlanmasn temin eder. \n deme Emrinin Balatlmas:  BHS, deme emrini HHSye iletir. \n deme Emri Rza Durumu, deme Emri Durumu, deme Emri Detay Sorgular:  BHS, deme Emri Rza Durumu, deme Emri Durumu, deme Emri Detay bilgilerini istee bal olarak sorgulayabilir. \n \n \n ekil 4: deme Emri Balatma Hizmeti st Dzey  Ak \n deme Emri Balatma Hizmeti iin Eriim Adresleri (Endpoints) \n deme Emri Balatma Hizmeti in Eriim Adreslerinin Etki Alan (Scope) = odeme_emri olarak belirtilmelidir. \n Tablo 6: deme Emri Balatma Hizmeti in Eriim Adresleri \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu / stee Bal \n Yetkilendirme Tr \n mzalama \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n odeme-emri-rizasi \n POST \n /odeme-emri-rizasi \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n OdemeEmriRizasiIstegi \n OdemeEmriRizasi \n \n \n 2 \n erisim-belirteci (GKD iin) \n POST \n /erisim-belirteci \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n ErisimBelirteciIstegi \n ErisimBelirteci \n \n \n 2.1 \n odeme-emri-rizasi \n GET \n /odeme-emri-rizasi/{rizaNo} \n Z \n stemci Kimlik Bilgileri \n mzal Yant \n - \n OdemeEmriRizaYaniti \n \n \n 3 \n odeme-emri \n POST \n /odeme-emri \n Z \n stemci Kimlik Bilgileri & Yetkilendirme Kodu (GKD) \n mzal stek ve Yant \n OdemeEmriIstegi \n OdemeEmri \n \n \n 3.1 \n odeme-emri \n GET \n /odeme-emri/{odemeEmriNo} \n Z \n stemci Kimlik Bilgileri & Yetkilendirme Kodu (GKD) \n mzal Yant \n - \n OdemeEmri \n 6.1.\tADIM 0 - deme Emri Balatma Istei \n \n HK, BHS uygulamasnda (web arayz/mobil uygulama) deme emri balatma ilemine onay verir. \n Gnderen hesap detaylarnn bu aamada belirtilmesi zorunlu deildir. \n 6.2.\tADIM 1 - deme Emri Rzasnn Hazrlanmas \n   \n ekil 5: deme Emri Rzasnn Hazrlanmas \n \n \n BHS, deme hizmeti kullanc hesabnn bulunduu HHSye balanarak deme emri rza kaynann oluturulmasn (odemeEmriRizasi) salar. \n \n \n POST istei TLS protokol tesis edilen iletiim katman zerinden gerekletirilir. TLS iin nitelikli sertifikalar kullanlr. \n \n \n POST isteinin balndaki alanlar ve istemcinin sertifikasndaki zel alanlar kullanlarak istemcinin yetkilendirilmesi salanr: \n \n stekte bulunan BHS yetkilendirilmi mi? \n stekte bulunan yetkilendirilmi deme hizmeti salaycs BHS rolne sahip mi? \n stekte bulunulan HHS kodu doru mu? \n \n \n \n POST baarl olursa, HHS, deme emri iin ieride rza olup olmamasna baklmakszn yeni bir rza tanmlaycs RizaNo ieren odemeEmriRizasi  yant olarak dner. \n \n \n 1 HK'nn 1 YS iin 1HHS'de istedii kadar rzas olabilir. \n \n \n HHS tarafnda RizaDurumu deikeninin durumu Yetki Bekleniyor olarak gncellenir. \n \n \n YSn dorulama ekran olarak HKya aaca URL adresini de ilgili rza numarasna gre oluturur. Burada 2 farkl yntemle URL oluturabilir. \n \n Statik URL  : \nHHSnin base pathi/alt-dizin/{rzaNo} \nrnek hhsYonAdr : https://xbank.com.tr/ohvps/cb54834e36f742d09af3d534ece3352a \nBu adres iin ilgili dorulama sayfas nden hazrlanmal ve HKnn dorulama sayfasna eriimi iin yaynlanm olmaldr (publish edilmelidir). \n Dinamik URL : \nHHSnin base pathi/alt-dizin/GKD Karlama Ekran?rizano={rzano} \nrnek: https://xbank.com.tr/ohvps/gkd?rizano=cb54834e36f742d09af3d534ece3352a \n \n \n \n POST /odeme-emri-rizasi \n STEK: \n BHS, bu API eriim adresinden HHSye yeni bir OdemeEmriRizasi oluturulmas iin istekte bulunur: \n \n BHS, deme emri balatma istei olduunu HHSye bildirir. \n BHS, HKnn, BHS arayznden verdii rzann (n Onay) bir kopyasnn HHS nezdinde mteri tarafndan onaylanmas iin HHSye gnderilmesini salar. \n HHS; istek mesajnda yer alan alanlarn API dkmannda belirtilen artlar salayacak ekilde zorunluluk, uzunluk ve ierik kontrollerini yapar. (Zorunlu) \n HHS; YS API ile alnan BHS bilgilerinin ierisinde yer alan ynlendirme ve bildirim adresleri ile deme emri rzas nesnesi request mesajnda paylalan adreslerin uyumlu olup olmadnn kontrollerini yapar. (Zorunlu) \n HHS; kimlik bilgileri nesnesinde eer kimlik bilgileri iletilmi ise; bu veri ile HKnn HHS mterisi olup olmadnn kontrollerini yapar. Bu kontrol hem bireysel hem de kurumsal HKlar iin yaplmaldr.  (Koullu Zorunlu) \n HHS kimlik bilgisi ile gnderen unvannn uyumlu olduunun kontrol eder. HHS'ler EFT/FAST ilemlerinde kabul ettikleri kontrol kriterleri ile ileme izin verebilirler. (Zorunlu) \n Gnderen Hesap Numaras ile ilgili Tablo7de belirtilen kontroller yaplmaldr. (Zorunlu) \n HHS, deme iin benzersiz RizaNo ile OdemeEmriRizasi nesnesi oluturur ve BHSye dner. \n HHS, OdemeEmriRizasi oluturduu anda durumunu Yetki Bekleniyor olarak dzenler. \nBu aamada HKnn HHS tarafndan tanmlanm ve istein veri alannda gnderen hesaba (borlandrlacak hesaba) ilikin bir bilgisinin olmas gerekmez. \nHesap bakiye kontrolnn rza aamasnda yaplmamas gerekmektedir. nk HK deme emri gerekleene kadar hesabna para eklemesi yapabilir. \n \n POST /odeme-emri-rizasi  isteinin (REQUEST) gvdesinde (BODY)  odemeEmriRizasiIstegi nesnesi (Tablo-7) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda odemeEmriRizasi (Tablo-8) nesnesi oluturulur. \n Tek Seferlik deme \nTek seferlik deme ak YS'ten HHS'ye giden istekte, gnderen kimlik bilgilerinin olmad durumda gerekleir. Gnderen kimlik bilgisi olmadnda, KOLAS sorgusu yaplamayacandan tr, HHS tarafndan TR.OHVPS.Business.InvalidContent hatas dnlmelidir. \nTek seferlik deme ak hem iyeri demelerinde hem de kiiden kiiye para transferlerinde kullanlabilen bir aktr.\nAadaki senaryolar tek seferlik demeye rnek olarak gsterilebilir. \nyeri demesi ak rnei: Bir e-ticaret sitesinde, ye olmadan alveri yaplmas ve demenin YS tarafndan kimlik bilgisi olmadan balatlmas \nKiiden kiiye para transferi ak rnei: QR veya dier yntemler ile alc bilgilerinin gnderici ile paylalmas ve YS zerinden gnderici bilgileri olmadan alcya para transferi yaplmas iin rza verilmesi \n  BAARILI STEK: \n Tablo 7: OdemeEmriRizasiIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n HHS tarafndan deme emri rzas oluturulmas srasnda yaplmas gereken kontrol ve ilemler \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidASPSP  hata kodunu dner. \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder. Hata durumunda  TR.OHVPS.Connection.InvalidTPP  hata kodunu dner. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n  \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. Yetkilendirme yntemi, BHS tarafndan belirtilmeyebilir. \n HHS, BHSnin belirledii yntemi dikkate alarak kendi belirledii yntemi kullanr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu.  YSn iletecei adrestir.  YS Ynlendirmeli GKD yntemi ile ak destekliyorsa, yetYntm deikeninden bamsz olarak ynlendirme adresini iletmelidir.  Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, mteri uygulama / taraycsn bu alanda belirtilen adrese ynlendirir. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunlu. YSn iletecei adrestir.  YS Ayrk GKD yntemi ile ak destekliyorsa, yetYntm deikeninden bamsz olarak bildirim adresini iletmelidir.  Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, ayrk GKD sonras bu alanda belirtilen adrese otorizasyon kodunu (authentication code) iletir. \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n K \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS geerli bir Kimlik Numaras Tr olduunu kontrol eder. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n K \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS, BHS tarafndan iletilmesi durumunda Kimlik Verisi zeriden apraz kontroller uygulamal ve Kimlik Verisini temel alarak GKD gerekletirmelidir.  Pasaport numarasna ilikin kontroller HHS'nin halihazrda kulland veri, ak ve tabi olduu dier dzenlemelerdeki ileyi ile ayn ekilde ele alnmaldr.  Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur.  HHS geerli bir Kurum Kimlik Numaras Tr olduunu kontrol eder. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur.  HHS, BHS tarafndan iletilmesi durumunda Kurum Kimlik Verisi zeriden apraz kontroller uygulamaldr. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n Kurum adna yaplan demelerde K deerini alr. Kurum Kimlik Tr ve Kurum Kimlik Verisi alanlarnn girilmi olduu apraz olarak kontrol edilir. \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n HHS geerli bir para birimi olduu kontrol eder. \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n  \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n  \n Gnderenin unvandr.  HHS, bu bilgiyi BHS sisteminden gelen veri yerine FASTa iletirken kendi sisteminden alabilir. \n HHSnin bu veri ile kendi sistemlerindeki verinin farkl olmas ve Kimlik Numaras ile elememesi durumunda deme emri balatma istei reddedilir.  BHS verisi ile HHS verisinin farkllamas durumunun ise risk deerlendirme sistemlerine girdi olarak kullanmas tavsiye edilir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n  \n BHS'nin n yznden daha nce kayt altna alnm hesaplar arasndan setirdii veya mteriye girdii IBANdr.  BHS tarafndan iletilmedii durumda, gnderen hesap bilgisini mteri tarafndan HHSnin dijital kanalnda GKD sonrasnda seilebilir. Bu amala BHS arayznde HHS setirilmelidir.  Hesap Referans kullanlyorsa Hesap Numaras kullanlmayabilir. Hesap referans ile deme emri rzas balatlacak ise HHS hesap referans deeri ile ilikilendirilmi mevcut bir hesap bilgisi rzas var m kontrol etmelidir. Eer aktif bir rzas yok ise  TR.OHVPS.Business.InvalidContent  hatas verilmelidir. \n BHS tarafndan iletildii durumda; IBAN ierisindeki HHS kodunun istek balndaki HHS kodu ile ayn olduu (hesabn HHSye aitliinin kontrol), IBANn doruluu (kontrol basama dorulamas), Hesap numarasnn HKya ait olduu, HHSye zel deme izni verilmeyen farkl statlerin bulunmas durumu kontrol edilir.  Kontrol baarsz olduunda  TR.OHVPS.Business. InvalidAccount  hatas YSe iletilir. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n  \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez.  BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir.  Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n HspRef'e bal IBAN deitiinde yeni IBAN'n da ilgili HspRef ile ilikilendirilmesi beklenmektedir. Bu durumda, HBHS, HspRef ile sorguya geldiinde HHS'nin yeni IBAN ve hesap hareketlerini dnebilmesi mmkn olacaktr. HspRefin, IBAN deitiinde deitirilmemesi tavsiye edilmektedir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n K \n Kolay Adres Sistemi  kullanlmyorsa zorunludur.  Alcnn unvandr. BHS ekranlarndan girii yaplabilecei gibi BHSnin kaytl alclarndan yaplan seimle de doldurup gnderebildii bilgi olabilir.  FAST-TR Karekod Veri Organizasyonunda;  yeri tarafndan sunulan uzun karekod yapsnn  59:  alannda tanml yeri ad alandr, Kiiden Kiiye deme Karekod Yapsnn  07:  alannda tanml    deme Alcsnn Ad ve Soyad  alandr.  FAST-TR Karekod dndaki i yeri demelerinde; yine Unvan alannda iyeri ad bilgisi gnderilmelidir. \n \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n Alcnn Hesap Numaras (IBAN)  alandr.   Kolay Adres Sistemi  kullanlmyorsa zorunludur.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  30-01:  alannda tanml  Yeri IBAN verisi kullanlr.  Alcnn birden fazla hesabnn kullanlabilir olduu durumlarda (zellikle iyeri demelerinde HHS nezdindeki hesap (on-us havale ak) tercih edilmelidir. \n HHS (Gnderen Katlmc) tarafndan IBAN dorulamas (kontrol basama dorulamas) yaplr. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n Tek seferlik demelerde ( kimlik bilgileri bo iletildiinde) KOLAS nesnesi dolu iletiliyorsa; HHS tarafndan TR.OHVPS.Business.InvalidContent hatas dnlmelidir \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n HHS (Gnderen FAST katlmcs) tarafndan KOLAS Servisine yaplan sorguda girdi olarak kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n HHS (Gnderen FAST katlmcs) tarafndan KOLAS Servisine yaplan sorguda girdi olarak kullanlr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n TR.OHVPS.DataCode.KareKodAksTur  sral veri deerlerinden birini alr. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn  gsterir. Okunan karekodda referans deeri varsa kullanlmas zorunludur.  Karekod ilke ve kurallar belgesinde tanmland ekilde kullanlmas gerekmektedir.  Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri veri deerlerinden O deeri atanarak iletilmelidir. O deeri Ak bankaclk aracl ile gnderilen demelerde kullanlr. anlamn tamaktadr. \n HHS, YS'n API deseninde \"O\" kodunu ilettiini kontrol eder. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n HHS geerli bir deme Amac kodu olduunu kontrol eder. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarnda: Gn ierisinde HK zelinde, her ileme zel biricik olarak oluturulan referans bilgisidir.  Karekod P2P ak iin referans bilgisi (Karekod referans numaras deil, ileme zel retilecek referans bilgisidir.) YS tarafndan atanacaktr.   -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  -\tyeri demesi Karekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n YS bu deeri HKy HHSye ynlendirmeden nceki ekranda gstermeli, ve HHS bu deeri GKD iin kulland nyznde ilem dorulama kodunun bir unsuru olarak yine HKya gstermelidir. \n \n \n >> Aklama \n odmAcklm \n AN1..50 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi. \n \n \n \n > BHS Masraf Tutar \n obhsMsrfTtr \n Kompleks:Tutar \n  \n API lke ve Kurallar 1.0 srmnde bu nesnenin API deseninde gnderilmemesi gerekmektedir. \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda istekte yer alr.  yeri deme Bilgileri, YS uygulama nyznde HKnn bildii ve girii yaplmas beklenen bir bilgi olmamaldr. YS tarafndan sistemsel olarak doldurulmas gereklidir. \n \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir.  4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n  BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan OdemeEmriRizasi nesnesi Tablo-8deki parametrelerden oluur: \n Tablo 8: OdemeEmriRizasi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zaman \n \n \n > Gncellenme Zaman \n gnclZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin gncellenme zaman \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n > Rza Iptal Detay Kodu \n rizaIptDtyKod \n AN2 \n K \n Rza durumunun iptal olduu durumda zorunludur. Alabilecei deerler 4. Blmde detaylandrlmtr. \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   HHS tarafndan maksimum 5 dk iinde ilem tamamlanacak ekil zaman damgas oluturulur. Zaman am olduunda HHSnin GKDye izin vermeyecek ekilde hata mesaj vermesi gerekmektedir.  Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n K \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n K \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n  \n \n \n \n >> Unvan \n unv \n AN3..140 \n  \n Gnderenin unvandr.  HHS, bu bilgiyi BHS sisteminden gelen veri yerine FASTa iletirken kendi sisteminden alabilir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n  \n BHS'nin n yznden daha nce kayt altna alnm hesaplar arasndan setirdii veya mteriye girdii IBANdr.  BHS tarafndan iletilmedii durumda, gnderen hesap bilgisini mteri tarafndan HHSnin dijital kanalnda GKD sonrasnda seilebilir. Bu amala BHS arayznde HHS setirilmelidir.   GKD sonras HHS ekrannda seilen Hesap Numaras POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir.    Hesap Referans kullanlyorsa Hesap Numaras kullanlmayabilir. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n  \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez.  BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir.   GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir.    Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolastan dnen account owner alan kullanlmaldr. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n BHS tarafndan istek mesajnda iletilip dorulanan veya Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen alc maskeli IBAN bilgisidir. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml KOLAS tarafndan ilgili sorguya zel olarak retilmi referans numarasdr. \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n TR.OHVPS.DataCode.KareKodAksTur  sral veri deerlerinden birini alr. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn  gsterir. \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden O deerini alr. O deeri Ak bankaclk aracl ile gnderilen demelerde kullanlr. anlamn tamaktadr. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK zelinde, her ileme zel biricik olarak oluturulan referans bilgisidir.  Karekod P2P ak iin referans bilgisi (Karekod referans numaras deil, ileme zel retilecek referans bilgisidir.) YS tarafndan atanacaktr.  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  - yeri demesi Karekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n \n \n >> Aklama \n odmAcklm \n AN1..50 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi. \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisidir. Bu alan ileri vadeli demeler iin dnlmtr. lk fazda doldurulmasna gerek olmad dnlmektedir. \n \n \n > BHS Masraf Tutar \n obhsMsrfTtr \n Kompleks:Tutar \n  \n API lke ve Kurallar 1.0 srmnde bu nesnenin API deseninde gnderilmemesi gerekmektedir. \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n > HHS Masraf Tutar \n hhsMsrfTtr \n Kompleks:Tutar \n  \n API lke ve Kurallar 1.0 srmnde bu nesnenin API deseninde gnderilmemesi gerekmektedir. \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n HHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda yantta yer alr. \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n 6.3.\tADIM 2- deme Emri Rzasnn Yetkilendirilmesi \n   \n ekil 6: deme Emri Rzasnn Yetkilendirilmesi \n BHS, HKnn deme emrini yetkilendirmesi isteini iletir. deme emrinin yetkilendirilmesi, HHS tarafndan gerekletirilen Ynlendirme veya Ayrk GKD yntemiyle yaplr. \n \n \n Ynlendirmeli dorulama aknda , BHS HKy HHSye ynlendirir. \n \n BHS tarafndan ynlendirme, bir nceki admdaki RizaNoyu ierir. \n Ynlendirmenin RizaNoyu iermesi sayesinde, HHS hangi deme emriyle ilikili olarak ynlendirme yapldn ilikilendirebilir. \n HHS, HK iin GKD srecini iletir. \n \n HKy dorularsa, \n \n HK -bir nceki admda semediyse- borlu hesabn seer. \n HHS, deme emri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n HHS, HKy olumlu ynlendirme ak ile BHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n \n \n \n yonAdr?rizaDrm=Y&yetKod=xx&rizaNo=yy&rizaTip=O&drmKod=zzz\n \n HKy dorulayamazsa, \n1. HHS, deme emri rza kaynann durumunu Yetki ptal olarak gnceller. \n2. HHS, HKy olumsuz ynlendirme ak ile BHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=I&rizaNo=yy&rizaTip=O&drmKod=zzz\n \n HHS tarafnda oluabilecek bir hata durumunun YSe aktarlmas gerektii durumlar olabilir. Bu durumda yonlendirme adresinde hata kodu parametresi zorunlu olarak iletilmelidir. \nHata aklamalarnn neler olabilecei ve YSn kendi uygulamasnda bu hatay ne ekilde gsterecei aada tariflenmitir. \n yonAdr?rizaDrm=I&rizaNo=yy&rizaTip=O&rizaIptDtyKod=11&drmKod=zzz\n \n URLde iletilen Rza ptal Detay Kodu Rza durumlar blmnde (4. Blm) belirtilen hata kodlar ile ayn olacak ekilde tasarlanmtr. GKD srasnda yaplmas gereken kontroller 5.3 blmnde detaylandrlmtr. \n \n Ayrk dorulama aknda , HHS, HKnn deme emrini balatt uygulamadan farkl olabilecek bir dorulama uygulamasnda ilemi dorulamasn ister.\n \n Ayrk ak BHSnin farkl bir kanal kullanarak yetkilendirme istei gndermesiyle balatlr. \n Bu yetkilendirme istei, yetkilendirilecek deme emri rzasnn eletirilecei HKnn bulunmas iin ilgili veriyi tar. \n HHS, HKy dorular. \n HK -bir nceki admda semediyse- borlandrlacak hesabn seer. \n HHS, deme emri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n \n Baarl GKD sonrasnda (rizaDrm=Y) ilgili rza nesnesi iin (belirli bir rizaNo) yetkilendirme kodunun (yetKod) alnmasnn ardndan eriim belirteci eriim adresine POST ars yaplarak yetkilendirme kodu karlnda eriim belirteci ve yenileme belirteci alnr. POST /eriim-belirteci eriim noktas EK-3te aklanmtr. \n Eriim belirteci alndktan sonra; HHS, deme emri rza kaynann durumunu Yetki Kullanld olarak gnceller. \n 6.4.\tADIM 2.1  deme Emri Rzasnn Sorgulanmas (istee bal) \n   \n ekil 7: odemeEmriRizasi nesnesinin sorgulanmas (istee bal) \n GKD ileminin baaryla tamamlanp deme Emri Rzasnn yetkilendirilmesi esnasnda, gnderen hesap seiminin HHS ekrannda yapld durumlar olabilir. Bu durumlarda deme emri isteinde gnderen hesap bilgileri alannn zorunlu olmas nedeniyle,  OdemeEmriRizasi  nesnesi sorgulanarak gnderen hesap bilgileri (hesap numaras ve/veya hesap referans) alnmaldr. HHS,  ADIM 2 -deme Emri Rzasnn Yetkilendirilmesi  aknda HKnn hesaplar arasnda seim yapmasn ve seilen hesap bilgisinin  OdemeEmriRizasi  nesnesine iler. \n GET /odeme-emri-rizasi/{RizaNo} \n BHS, mevcut durumunu kontrol etmek iin, oluturulan bir  OdemeEmriRizasi  kaynann durumunu istee bal olarak alabilir. \n Durum \n OdemeEmriRizasi  kayna iin kullanlabilecek durum gstergeleri u ekildedir: \n \n Yetki Bekleniyor \n Yetkilendirildi \n Yetki Kullanld \n Yetki deme Emrine Dnt \n Yetki Sonlandrld \n Yetki ptal \n \n deme emri rza durum deiiklikleri 4.2 blmnde detaylandrlmtr. \n BAARILI YANIT: \n GET /odeme-emri-rizasi/{RizaNo}  yantnn (RESPONSE) gvdesinde (BODY)  OdemeEmriRizasistegi nesnesi kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda Tablo-8de yer alan parametreleri ieren OdemeEmriRizasi oluturulur. \n Gnderen Hesap Bilgisinin, ADIM 2 (deme Emri Rzasnn Yetkilendirilmesi) sonrasnda HHS ekranndan seildii akta OdemeEmriRizasi nesnesi gncellenir ve BHS  GET /odeme-emri-rizasi/{RizaNo}  istei yaparak gncel gnderen hesap bilgisi bilgisini de ieren OdemeEmriRizasi nesnesini ekmelidir. \n ereve szleme kapsamnda olmayan tek seferlik deme ilemlerinde, Kimlik Tr ve Kimlik Verisi bilgilerinin deme emri rzas srasnda gnderimi zorunlu deildir. Baarl GKD sonras, yani eriim belirteci alndnda, deme emri olumadan nce, YSn deme emri rzasn sorgulayarak bu bilgileri almas ve deme emrini olutururken Kimlik Tr ve Kimlik Verisi alanlarn dolu olarak gndermesi beklenmektedir.  Ancak rza durumu Yetki Bekleniyor - B, Yetkilendirildi - Y ve Yetki ptal - I statlerinde ise, deme emri rzas sorgulamasnda, HHSnin Kimlik Tr ve Kimlik Verisi bilgisini YS ile paylamamas gerekmektedir. \n 6.5.\tADIM 3- deme Emrinin Oluturulmas \n   \n ekil 8: deme Emrinin Oluturulmas \n POST /odeme-emri \n \n HKnn Gl Kimlik Dorulama ile ilemi yetkilendirmesi sonrasnda, BHS OdemeEmri kaynan oluturur. \n deme emri (OdemeEmri) uygun deme kaynana POST istei yaplarak balatlr.\n \n POST HHS tarafndan ilenir: RizaDurumu Yetki Kullanld ise ileme balanr. \n POST /odeme-emri-rizasi ile POST /odeme-emri isteklerinde istek alanlarn ayn olmas beklenmektedir. HHS tarafndan kontrol salanmaldr.POST verisindeki Gnderen Hesap Numaras ve Alc Hesap Numarasnn ayn bankaya aitse HAVALE deilse FAST veya PS i akna geilir. \n POST verisinin modele gre kontrol yaplr (alan kontrolleri) \n POST verisinin mantksal kontrolleri yaplr (IBAN kontrol, apraz alan kontroller) \n OdemeEmriDurumu Gerekleti / Gnderildi / Gereklemedi olarak gncellenir. \n \n \n POST baarl olursa, ierisinde OdemeEmriNo ve OdemeEmriDurumu deikenleri de bulunan OdemeEmri nesnesi BHSye dner ve RizaDurumu deikenin deeri Yetki deme Emrine Dnt olarak gncellenir. \n \n BAARILI STEK: \n Tablo 9: OdemeEmriIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n HHS tarafndan deme emri oluturulmas srasnda yaplmas gereken kontrol ve ilemler \n FAST A01 PS M01 mesaj mapping \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zaman \n \n \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidASPSP  hata kodunu dner. \n Gnderen katlmc kodu (yani bankann FAST/PSteki Katlmc kodu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidTPP  hata kodunu dner. \n YosKod \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. \n \n \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu. \n \n \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi \n \n \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kimlik Numaras Tr verisi ile ayn olmaldr. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS, BHS tarafndan iletilmesi durumunda Kimlik Verisi zeriden apraz kontroller uygulamal ve Kimlik Verisini temel alarak GKD gerekletirmelidir. deme Emri Rizas Nesnesindeki Kimlik Numaras verisi ile ayn olmaldr. Gerek kii tarafndan yaplan demelerde, 1. HHS, Gnderen Ad ve Gnderen Hesap Numarasn deme emri isteinde (Havale/FAST/PS) gnderir. - Gnderen Ad ve dier tm mteri bilgileri, Kimlik Numaras zerinden elde edillir. Pasaport numarasna ilikin kontroller HHS'nin halihazrda kulland veri, ak ve tabi olduu dier dzenlemelerdeki ileyi ile ayn ekilde ele alnmaldr. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik verisi bu alanda gnderilebilmesi zorunludur. \n GonKimN / Psp \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kurum Kimlik Tr verisi ile ayn olmaldr. \n \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kurum Kimlik Verisi ile ayn olmaldr. \n GonKimN / VKN \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n Kurum adna yaplan demelerde K deerini alr. Kurum Kimlik Tr ve Kurum Kimlik Verisi alanlarnn giilmi olduu apraz olarak kontrol edilir.  deme Emri Rizas Nesnesindeki HK Tr ile ayn olmaldr. \n \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n deme Emri Rizas Nesnesindeki Para Birimi verisi ile ayn olmaldr. \n \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n deme Emri Rizas Nesnesindeki lem Tutar verisi ile ayn olmaldr. HHS ilem tutar deme mesajnda (Havale/FAST/PS) aynen tanmak durumundadr. \n Ttr \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n Z \n \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Gnderen kiinin ad soyad ya da ticari unvan bilgisi. \n HHS ve BHS verisi tutarl olmaldr.  BHS verisi ile HHS verisinin farkllamas durumunun ise risk deerlendirme sistemlerine girdi olarak kullanmas tavsiye edilir. \n GonAd \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n BHS'nin n yznden setirdii/kullancya girdii IBAN Hesap numaras ya da Hesap Referans alanlarndan en az birinin dolu olarak gelmesi gerekmektedir. \n deme Emri Rizas Yant Nesnesindeki Gnderen Hesap Numaras verisi ile ayn olmaldr. \n GonHesN \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n K \n BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme balatlabilir. GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir. Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n YSten alc ad soyad bilgisi geliyorsa ve HHS'nin kontrolnden baarl bir ekilde geti ise HHS'nin tekrar alc ad soyad bilgisi iin giri yaptrmasna gerek bulunmamaktadr. \n AlAd \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n Alcnn Hesap Numaras alandr (IBAN). Kolay Adres  sorgusunda dnlen adres kayd yaptrm olan alcnn maskeli IBAN bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen IBAN bilgisidir. Karekod aknda, FAST Karekod Veri Organizasyonundaki 30-01: alannda tanml  Yeri IBAN verisi kullanlr. \n deme Emri Rizas Yant Nesnesindeki Alc Hesap Numaras verisi ile ayn olmaldr.  Kontroller baaryla sonulanrsa, bilgi FAST/PS AlHesN alanna dorudan aktarr ve FAST/PS Alan Katlmc Kodu (AlKK) olarak Alc HHS Kodu kullanlr.  KOLAS sorgusu sonucunda deme emrinde iletilen maskeli bilgi ile HHSnin kendi deme emri rzas isteinde tuttuu KOLAS sorgusundan dnlen bilgi maskelenerek karlatrlr. Eer ayn deilse uygun hata kodu dnlerek ilem sonlandrlr. \n AlHesN \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n Mterinin sorgulamak istedii Kolay Adres Tipi deeridir.  TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n deme Emri Rizas Yant Nesnesindeki Kolay Adres Tipi verisi ile ayn olmaldr. \n \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n deme Emri Rizas Yant Nesnesindeki Kolay Adres Deeri verisi ile ayn olmaldr. \n FAST (KolasRef) \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml KOLAS tarafndan ilgili sorguya zel olarak retilmi referans numarasdr. \n \n KolasRef ( hem FAST hem de PS iin ayn) \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  Kolay Adresi Sistemi ile birlikte kullanlmaz.  01: FAST katlmcsndan dinamik dorulama hizmeti alnan iyeri demesi  02: FAST katlmcsndan statik dorulama hizmeti alnan iyeri demesi 03: Kiiden kiiye demeler \n deme Emri Rizas Nesnesindeki Kare Kod Ak Tr verisi ile ayn olmaldr. \n FAST: KrkdAksTur \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn gsterir.  Okunan karekodda referans deeri varsa kullanlmas zorunludur. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n deme Emri Rizas Nesnesindeki Karekod Referans verisi ile ayn olmaldr.  evrimii dorulama hizmeti alnmayan statik karekodlar iin Referans numarasnn bulunmad durumlarda HHS tarafndan NONREF ifadesi girilir. \n FAST: Karekod Referans (KrkdRef) \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden O deeri atanarak iletilmelidir. O deeri Ak bankaclk aracl ile gnderilen demelerde kullanlr. anlamn tamaktadr. \n deme Emri Rizas Nesnesindeki deme Kayna verisi ile ayn olmaldr. HHS tarafndan deme mesajnda (FAST/PS) aynen tanmak durumundadr. \n FAST/PS: OdmKynk \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. \n deme Emri Rizas Nesnesindeki deme Amac verisi ile ayn olmaldr. HHS tarafndan deme mesajnda (FAST/PS) aynen tanmak durumundadr. \n FAST (OdmAmc)/PS(OdmAmaci) \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK zelinde, her ileme zel biricik olarak oluturulan referans bilgisidir.  Karekod P2P ak iin referans bilgisi (Karekod referans numaras deil, ileme zel retilecek referans bilgisidir.) YS tarafndan atanacaktr.  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  -yeri demesi Karekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n deme Emri Rizas Nesnesindeki Referans Bilgisi verisi ile ayn olmaldr. \n RefBlg (Hem FAST hem de PS iin ayn) \n \n \n >> Aklama \n odmAcklm \n AN1..50 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi. \n \n FAST/PS Acklm \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n deme Emri Rizas Nesnesindeki deme Sistemi verisi ile ayn olmaldr. \n \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisi \n \n \n \n \n > BHS Masraf Tutar \n obhsMsrfTtr \n Kompleks:Tutar \n  \n API lke ve Kurallar 1.0 srmnde bu nesnenin API deseninde gnderilmemesi gerekmektedir. \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n deme Emri Rizas Nesnesindeki BHS Masraf Para Birimi verisi ile ayn olmaldr. \n \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n deme Emri Rizas Nesnesindeki BHS Masraf Tutar verisi ile ayn olmaldr. \n \n \n \n > HHS Masraf Tutar \n hhsMsrfTtr \n Kompleks:Tutar \n  \n API lke ve Kurallar 1.0 srmnde bu nesnenin API deseninde gnderilmemesi gerekmektedir. \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n deme Emri Rizas Nesnesindeki HHS Masraf Para Birimi verisi ile ayn olmaldr. \n \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n HHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n deme Emri Rizas Nesnesindeki HHS Masraf Tutar verisi ile ayn olmaldr. \n \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda istekte yer alr.  yeri deme Bilgileri, YS uygulama nyznde HKnn bildii ve girii yaplmas beklenen bir bilgi olmamaldr. YS tarafndan sistemsel olarak doldurulmas gereklidir. \n \n \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n \n \n \n \n \n BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan OdemeEmri nesnesi Tablo-10daki parametrelerden oluur: \n Tablo 10: OdemeEmri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zamandr. \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu. \n \n \n > Bildirim Adresi \n bldAdr \n AN1..1024 \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n Emir Bilgileri \n emrBlg \n Kompleks: EmirBilgileri \n Z \n \n \n \n > deme Emri Numaras \n odmEmriNo \n AN1..128 \n Z \n odemeEmri nesnesinin UID'sidir. OdemeEmrine likin sorgular bu ID zerinden yaplr. \n \n \n > deme Emri Zaman \n odmEmriZmn \n ISODateTime \n Z \n odemeEmri nesnesinin oluturulma zamandr. \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr.    Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Gnderen kiinin ad soyad ya da ticari unvan bilgisi. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n BHS tarafndan iletilip dorulanan veya HHS ekrannda seilen Gnderen Hesap Numaras dnlr. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n K \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid)  YS baznda farkllamas gerekmez. BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir. GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir. Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolastan dnen account owner alan kullanlmaldr. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n Alcnn Hesap Numaras alandr (IBAN). Kolay Adres  sorgusunda dnlen adres kayd yaptrm olan alcnn maskeli IBAN bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen IBAN bilgisidir. Karekod aknda, FAST Karekod Veri Organizasyonundaki 30-01: alannda tanml  Yeri IBAN verisi kullanlr. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n Mterinin sorgulamak istedii Kolay Adres Tipi deeridir.  TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml KOLAS tarafndan ilgili sorguya zel olarak retilmi referans numarasdr. \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  Kolay Adresi Sistemi ile birlikte kullanlmaz.  01: FAST katlmcsndan dinamik dorulama hizmeti alnan iyeri demesi  02: FAST katlmcsndan statik dorulama hizmeti alnan iyeri demesi 03: Kiiden kiiye demeler \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn gsterir.  Okunan karekodda referans deeri varsa kullanlmas zorunludur. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden O  deerini alr. O deeri Ak bankaclk aracl ile gnderilen demelerde kullanlr. anlamn tamaktadr. \n \n \n >> deme Durumu \n odmDrm \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeDurumu  sral veri deerlerinden birini alr.      deme Durumu alan ile ilgili olarak HHSler tarafndan YSlere  OdemeEmri servisi yantnda 02:Gnderildi, 04:Onayda Bekliyor,05:leme Alnd yantlar gnderilebilir.   05:leme Alnd  durumu YS tarafndan mteriye gsterilmeyen bir koddur. Bu kod dnldnde YS uygulamasnda HKya deme durumu  02:Gnderildi  olarak gsterilir. lemin son durumunun teyidi iin YS deme emri sorgulamas yapmaldr.   02:Gnderildi  durumu olutuktan sonra YS tarafndan deme emri sorgulamas yaplarak deme durumunun gncel deeri renilir. Gncel deerler  01:Gerekleti,03:Gereklemedi  durumlar olabilir. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK zelinde, her ileme zel biricik olarak oluturulan referans bilgisidir.  Karekod P2P ak iin referans bilgisi (Karekod referans numaras deil, ileme zel retilecek referans bilgisidir.) YS tarafndan atanacaktr.  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  - yeri demesi Karekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n \n \n >> Aklama \n odmAcklm \n AN1..50 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi. \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n \n \n >> deme Sistem Numaras \n odmStmNo \n AN10..50 \n K \n deme baarl balatldysa, demenin balatld sistemdeki referans numaras. Gerektiinde ilgili deme sisteminde/HHSde sz konusu demeye karlk gelen mesajla balant kurmada kullanlr.   deme Hizmeti kullancsna ilemin takibi iin gsterilebilir.  lemin ynlendirildii deme sistemi FAST ya da PS ise sistemdeki ilgili mesajn Tarih, GnderenKatilimKodu ve SorguNumarasi deerlerinin birleiminden oluur. Bu 3 alan mevcutta kullanld formatta aralarna dikey izgi (Unicode U+2223) iareti koyularak, birletirmeli ve iletilmelidir. rn : Tarih|GnderenKatilimKodu|SorguNumarasi   deme Havale/Virman ilemi ise HHSnin retmi olduu havale/virman numarasn ierir. Buradaki format da Tarih|GnderenKatilimKodu|Havale-virman numaras eklinde olmaldr. \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisi \n \n \n > BHS Masraf Tutar \n obhsMsrfTtr \n Kompleks:Tutar \n  \n API lke ve Kurallar 1.0 srmnde bu nesnenin API deseninde gnderilmemesi gerekmektedir. \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n > HHS Masraf Tutar \n hhsMsrfTtr \n Kompleks:Tutar \n  \n API lke ve Kurallar 1.0 srmnde bu nesnenin API deseninde gnderilmemesi gerekmektedir. \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi (TRY, USD, EUR vb.). \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n HHSnin ilemle ilgili HKnn borlandrlmasn belirttii masraf tutar. lem Tutar ile ayn para biriminde olmaldr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda yantta yer alr. \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n 6.6.\tADIM 3.1- deme Emri Sorgusu (stee bal) \n   \n ekil 9: deme Emri Sorgusu \n GET /odeme-emri/{odemeEmriNo} \n BHS, bu eriim adresi araclyla deme emrini sorgulayabilir. \n BAARILI YANIT: \n GET /odeme-emri/{odemeEmriNo} yantnn (RESPONSE) gvdesinde (BODY)  OdemeEmri nesnesi bulunur. stek baaryla sonulanrsa HHS kaynak sunucusunda Tablo-10da yer alan parametreleri ieren OdemeEmri nesnesi dner. \n 6.7\tHealthcheck API \n GET /health \n HHSlerin sunaca bu servis, dzenli olarak BKM tarafndan arlarak servislerin ayakta olup olmadklarnn kontrolnn salanmas planlanmaktadr \n Baarl yantta Http 200 kodu dnlmelidir. \n Baarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir \n \n \n \n"},{frontmatter:{},regularPath:"/v1.0.2/contents/tanim-ve-kisitlamalar.html",relativePath:"v1.0.2/contents/tanim-ve-kisitlamalar.md",key:"v-3e221f7d",path:"/v1.0.2/contents/tanim-ve-kisitlamalar.html",content:"  1.\tTanm ve Ksaltmalar   \n Tablo 1: Tanm ve Ksaltmalar \n \n \n \n Ksaltma \n Tanm \n Aklama \n ngilizce Aklama \n ngilizce Ksaltma \n \n \n \n \n S \n ereve Szleme \n deme hizmeti salaycs ile mteri arasnda tekil veya sreklilik arz eden deme ilemlerinin yrtlmesine ve mmkn olan durumlarda deme hesabnn almasna ilikin usul ve esaslar belirleyen szleme \n \n \n \n \n EPK \n Elektronik Para Kuruluu \n Kanun kapsamnda elektronik para ihra etme yetkisi verilen tzel kii \n Electronic Money Institution \n EMI \n \n \n FAST \n Fonlarn Anlk ve Srekli Transferi \n TCMB tarafndan iletilen Fonlarn Anlk ve Srekli Transferi Sistemi \n \n \n \n \n FAST TR-Karekod \n FAST-TR Karekod Teknik lke ve Kurallar Rehberi \n TR Karekodun FAST Sistemi araclyla gerekleecek ilemlerde kullanlmasna ilikin detayl teknik ilke ve kurallarn ieren dokman \n \n \n \n \n GKD \n Gl Kimlik Dorulama \n Kimlik dorulamada kullanlan ve bir bileenin ele geirilmesinin dier bileenin gvenliini tehlikeye atmayaca en az iki bileenden oluan, bu iki bileenin de mterinin bildii, sahip olduu veya biyometrik bir karakteristii olan bileen snflarndan farkl ikisine ait olacak ekilde seildii yntem \n Strong Customer Authentication \n SCA \n \n \n B \n lem Bilgisi \n Gerekletirilen ileme ilikin ilem zamann, ilemin niteliini ve deme ilemi iin deme emrinin masraf, komisyon ve cretler de dahil hesabn borlandrlaca toplam tutarn ve demenin gndereni ile alcsn veya toplu deme emrinin masraf, komisyon ve cretler de dahil hesabn borlandrlaca toplam tutarn ve gndereni ile alclarn ieren bilgi \n \n \n \n \n DK \n lem Dorulama Kodu \n Kimlik dorulama yntemlerinden biriyle kendisini sisteme tantan bir mterinin gerekletirmek istedii ileme zg olmak ve belirli bir geerlilik sresi iinde ilem onaynda kullanlmak zere oluturulan, finansal sonu dorunan ilemlerde kiiye onay annda ilgili ilem bilgisi (B) ile birlikte gsterilen, alc veya tutarn deimesiyle geersiz hale gelen bilgi \n Authentication Code \n AC \n \n \n KOLAS \n Kolay Adresleme Servisi \n Fon transferlerinde hesap numaras ile ad soyad yerine kullanlan ve belirli bir hesap ile eletirilmi telefon numaras, e-posta adresi, T.C. Kimlik Numaras (TCKN), Vergi Kimlik Numaras (VKN), Yabanc Kimlik Numaras veya Pasaport Numaras gibi Kolay Adres bilgilerinin kaydedilmesini, gncellenmesini ve sorgulamasn salayan katman servis \n \n \n \n \n HBHS \n Hesap Bilgisi Hizmeti Salaycs \n Kanunun 12 inci maddesinin birinci fkrasnn (g) bendinde tanmlanan deme hizmetini (hesap bilgisi hizmetini) sunan tzel kii \n Account Information Service Provider \n AISP \n \n \n HHS \n Hesap Hizmeti Salaycs \n Nezdinde deme hesab bulunan deme hizmeti salaycs \n Account Servicing Payment Service Provider \n ASPSP \n \n \n BHS \n deme Emri Balatma Hizmeti Salaycs \n Kanunun 12 inci maddesinin birinci fkrasnn (f) bendinde tanmlanan deme hizmetini (deme emri balatma hizmetini) sunan tzel kii \n Payment Initiation Service Provider \n PISP \n \n \n DK \n deme Kuruluu \n deme hizmeti salamak ve gerekletirmek iin Kanun kapsamnda yetkilendirilmi tzel kii \n Payment Institution \n PI \n \n \n H \n deme Hesab \n deme hizmeti kullancs adna alan ve deme ileminin yrtlmesinde kullanlan hesap \n Payment Account \n PA \n \n \n HK \n deme Hizmeti Kullancs (Mteri) \n Gnderen, alc veya her ikisi sfatyla belirli bir deme hizmetinden faydalanan gerek veya tzel kii \n Payment Service User \n PSU \n \n \n HS \n deme Hizmeti Salaycs \n 5411 sayl Kanun kapsamndaki bankalar, EPK, DK ve Posta ve Telgraf Tekilat Anonim irketi(PTT) \n Payment Service Provider \n PSP \n \n \n HVPS \n deme Hizmetleri Veri Paylam Servisleri \n Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetlerinde kullanlan veri paylam servisleri \n \n \n \n \n PS \n Perakende deme Sistemi \n TCMB tarafndan iletilen, ilemlerin Trk Liras zerinden gerekletii Mteriler Aras Trk Liras Aktarm Sistemi \n \n \n \n \n TR-Karekod \n TR-Karekod lke ve Kurallar \n Ulusal karekod (TR Karekod) ilke ve kurallarnn belirlendii belge \n \n \n \n \n YS \n Yetkili deme Hizmeti Salaycs \n deme emri balatma hizmeti ve/veya hesap bilgisi hizmeti sunan tzel kii \n Third Party Payment Service Providers \n TPP \n \n \n \n"},{title:"3. Temel Prensipler",frontmatter:{},regularPath:"/v1.0.2/contents/temel-prensipler.html",relativePath:"v1.0.2/contents/temel-prensipler.md",key:"v-03088e53",path:"/v1.0.2/contents/temel-prensipler.html",headers:[{level:2,title:"3.1 Genel",slug:"_3-1-genel"},{level:2,title:"3.2.\tstem (ar) ve Oturum",slug:"_3-2-istem-cagr-ve-oturum"},{level:2,title:"3.3.\tRESTful API",slug:"_3-3-restful-api"},{level:2,title:"3.4.\tSrm Ynetimi",slug:"_3-4-surum-yonetimi"},{level:2,title:"3.5.\tKaynak URI Yol Yaps",slug:"_3-5-kaynak-uri-yol-yaps"},{level:2,title:"3.6.\tKarakter Kodlama",slug:"_3-6-karakter-kodlama"},{level:2,title:"3.7.\tVeri Format",slug:"_3-7-veri-format"},{level:2,title:"3.8.\tstemci Sertifika Ynetimi",slug:"_3-8-istemci-sertifika-yonetimi"},{level:2,title:"3.9.\tYetkilendirme Trleri",slug:"_3-9-yetkilendirme-turleri"},{level:2,title:"3.10. stek/Cevap Mesajlarnda Kullanlan Nesne Yaplar",slug:"_3-10-istek-cevap-mesajlarnda-kullanlan-nesne-yaplar"},{level:2,title:"3.11. Sayfalandrma ve Filtreleme",slug:"_3-11-sayfalandrma-ve-filtreleme"},{level:2,title:"3.12. Mesaj mzalama",slug:"_3-12-mesaj-imzalama"},{level:2,title:"3.13. Durum Kodu",slug:"_3-13-durum-kodu"},{level:2,title:"3.14. Gereksinimlerinin Snflandrlmas",slug:"_3-14-gereksinimlerinin-snflandrlmas"},{level:2,title:"3.15. stek Bal",slug:"_3-15-istek-baslg"},{level:2,title:"3.16. Yant Bal",slug:"_3-16-yant-baslg"},{level:2,title:"3.17. Idempotency Kurallar",slug:"_3-17-idempotency-kurallar"},{level:2,title:"3.18. HTTP Durum Kodlar",slug:"_3-18-http-durum-kodlar"},{level:2,title:"3.19. Maskeleme Kurallar",slug:"_3-19-maskeleme-kurallar"},{level:2,title:"3.20. Fonksiyonel Olmayan Gereksinimler",slug:"_3-20-fonksiyonel-olmayan-gereksinimler"},{level:2,title:"3.21. Otomatik Sorgular",slug:"_3-21-otomatik-sorgular"}],content:' 3. Temel Prensipler  \n Bu blmde deme Hizmetleri Veri Paylam Servisleri (Hesap Bilgisi Hizmeti, deme Emri Balatma Hizmeti) iin tanmlanan temel prensipler aklanmaktadr. \n 3.1 Genel \n \n \n HHSler Ynetmeliin 59. maddesinin beinci fkras ve deme ve Elektronik Para Kurulularnn Bilgi Sistemleri ile deme Hizmeti Salayclarnn deme Hizmetleri Alanndaki Veri Paylam Servislerine likin Tebliin (Tebli) 23. maddesinin birinci fkras uyarnca, deme hizmetleri veri paylam servislerini BKM API Geidi araclyla HBHS ve BHSye sunmakla ykmldr. \n \n \n Tebliin 23. maddesinin ikinci fkras uyarnca deme emri balatma hizmetinde ak iletiim servisinin taraflar BHS ile HHSdir. \n \n \n Tebliin 23. maddesinin nc fkras uyarnca hesap bilgisi hizmetinde ak iletiim servisinin taraflar HBHS ile HHSdir. \n \n \n Ynetmeliin 60. maddesinin birinci fkras uyarnca mteri, deme emri balatma hizmetini  deme hesabnn evrim ii olarak eriilebilir olduu durumlarda , kullanmay tercih edebilir. \n \n \n Ynetmeliin 61. maddesinin birinci fkras uyarnca mteri, hesap bilgisi hizmetini  deme hesabnn evrim ii olarak eriilebilir olduu durumlarda , kullanmay tercih edebilir. \n \n \n Tebliin 25. maddesi uyarnca HHS ve YS (BHS ve HBHS) arasnda balant utan uca gvenli bir ekilde salanr. Bu amala iletim katmannda TLS (asgari 1.2 srm) ile ifreli iletiim salanr. \n \n \n Tebliin 23. maddesinin drdnc fkras uyarnca HHS tarafndan sunulan deme hizmetleri veri paylam servislerini kullanan yetkilendirilmi deme hizmeti salayclarnn TCMB tarafndan ilgili deme hizmeti iin yetkilendirilmi olduu kontrol edilir. \n \n \n Tebliin 25. maddesinin beinci fkras uyarnca zaman damgas, 15/1/2004 tarihli 5070 sayl Elektronik mza Kanunu kapsamnda tanmlanan zaman damgasna dayanr. \n \n \n API alan isimleri Trke olarak tanmlanmtr. Ancak API bal (header) alanndaki alan isimleri zelinde, API Geitleri tarafndan otomatik olarak tannabilmesi gzetilerek, ngilizce isimlendirme tercih edilmitir. \n \n \n HK halihazrda deme hesaplarna, evrim ii (mobil bankaclk, internet bankacl vb.) eriebilir durumda ise, HHS\'nin varsa Ak Bankaclk kanal veya yetki tanmn varsaylan deeri AIK olacak ekilde sunmas gerekmektedir. HHSnin, Bireysel/Kurumsal/Ticari mteri ayrm yapmakszn tm mterileri iin, evrim ii kanallarda hesap hareketlerine eriim ve deme yapabilme yetkisi bulunmas durumunda, yine ayn ekilde Ak Bankaclk kanal veya yetki tanmn da varsaylan deeri AIK olacak ekilde sunmas gerekmektedir. \n 3.2.\tstem (ar) ve Oturum \n \n \n Her istek tekil istek numaras ve HKl ilemler iin zaman damgas (PSU-Timestamp) ierir. Birden fazla istek ieren ilem YS tarafndan belirlenen arya zg talep kimlii (istek numaras: X-Request-ID) ve rza srecine zg talep kimlii (ilem grup numaras: X-Group-ID) deerleri kullanlmaldr. Ayn rza noya ait tm isteklerde ayn X-Group-ID bilgisi deeri gnderilmelidir. \n \n \n Oturum takibi ise PSU-Session-ID ile yaplr. Oturum numaras (PSU-Session-ID) HKl ilemler iin zaman damgas (PSU-Timestamp) ile birlikte ilgili tm ilem verilerini ierecek ekilde kayt altna alnr. \n \n \n rnein, bir deme emri balatma ilemi birden fazla istekten oluur. Her istek yukarda belirtildii gibi biricik istek numaras ve HKl ilemler iin zaman damgas (PSU-Timestamp) ierir. Ancak ilemin oturum btnl PSU-Session-ID ile salanr. \n \n \n Taraflar atklar oturumu ilem btnln salayacak sre ierisinde ak tutar ve ilem biter bitmez kapatr. \n 3.3.\tRESTful API \n APIler, dnya leinde yaygn bir ekilde kullanlan Temsili Durum Transferi (Representational State Transfer, REST) mimari tarz ve JavaScript Nesne Notasyonu (JavaScript Object Notation, JSON) veri formatlarna uygun olarak gelitirilir. En st seviye Veri Tanmlama Dili (Data Description Language) ve en iyi uygulama rnekleri iin  ^JSON emas  temel alnr. \n stek ve yant mesajlarnda, istee bal veya koullu bir alan, deer iermiyorsa, bu alan JSON payloadunda yer almamaldr. \n rnek kod blou. \n "rzBlg":{\n         "rizaNo":"aa9bd7e7-0ccd-4edc-9639-5a358dbf2335",\n         "olusZmn":"2022-11-28T12:00:21+03:00",\n         "gnclZmn":null,    --\x3e hatal\n         "rizaDrm":"K",\n         "rizaIptDtyKod":"" --\x3e hatal \n      },\n \n rnek kod blou: \n \n         "alc":{\n            "hspNo": "TR800800004162387689546019",\n            "unv": "AHMET YILMAZ", \n            "kolas":{}  --\x3e nesne gnderimi hatal\n         },\n 3.4.\tSrm Ynetimi \n API sonraki aamalarda doabilecek gereksinimleri ve daha karmak kullanm durumlarn karlamak iin srmler halinde gelitirilir ve bu durum tasarm srasnda gz nnde bulundurulur. \n API v1.0 srmnde ; \n \n Kapsamdaki deme hesaplar : Vadesiz TL, yabanc para hesaplar (gerek ve tzel kiilere ait deme hesaplar), Kredili Mevduat Hesab \n Tekil deme (Virman/Havale/FAST/Mterileraras TL Aktarm Sistemi)\n \n Virman ve havale ilemleri kapsamnda yabanc para transferi yaplabilir. \n \n \n Hesap bilgisi hizmetleri\n \n Temel veya ayrntl hesap bilgisi \n Bakiye \n Gerekleen ilemler iin Hesap hareketleri \n \n \n Karekodlu demelerdeki 01, 02 ve 03 ak trleri\nyer almaktadr. \n \n Her srm deiikliinde bir nceki srm belirli bir sre desteklenecektir. Dier bir ifadeyle, sadece belirli bir sre iin mevcut ve bir nceki srm ayn anda eriilebilir olacaktr. \n 3.5.\tKaynak URI Yol Yaps \n YSlerin balatt arlarda URI yolu aadaki yapy takip eder: \n [hhs-yol-n-eki]/ohvps/ [kaynak-grubu]/ [srm]/ [kaynak]/[kaynak-no]/[alt-kaynak] \n Bu, aadaki unsurlardan oluur: \n \n [hhs-yol-n-eki] \nstee bal, HHS\'ye zg yol n ekini ifade eder. \nBKM API geidi zerinden yaplan arlarda BKM tarafndan belirlenen sistem ad ve yol n eki kullanlr. \n ohvps \nSabit metin ohvps (deme Hizmetleri Veri Paylam Servisleri ksaltmas) \n [kaynak-grubu] \nKaynak grubu, APIye erimek iin kullanlan deme hizmetine (HBH, BH) gre eriim adresi (end point) grubunu tanmlar (hbh veya obh). \n [srm] \nAPI srmn ifade eder (/s[ana-srm].[alt-srm]/). \n [kaynak]/[kaynak-no] \nKaynak detaylarn ifade eder. \n [alt-kaynak] \nAlt kaynak detaylarn ifade eder. \n \n HHS, tm kaynaklar iin ayn katlmc yolu n ekini ve sistem adn kullanmaldr. \n BKM APIlerine erimek isteyen uygulamalarn yetkilerine gre aadaki APIlere abone olmalar gerekmektedir: \n OBH: \n https://secure.api-preprod.bkm.com.tr/ohvps/obh/s1.0/odeme-emri-rizasi \n https://secure.api-preprod.bkm.com.tr/ohvps/obh/s1.0/odeme-emri \nHBH: \n https://secure.api-preprod.bkm.com.tr/ohvps/hbh/s1.0/hesap-bilgisi-rizasi \n https://secure.api-preprod.bkm.com.tr/ohvps/hbh/s1.0/hesaplar \n https://secure.api-preprod.bkm.com.tr/ohvps/hbh/s1.0/hesaplar/1234/islemler \n https://secure.api-preprod.bkm.com.tr/ohvps/hbh/s1.0/hesaplar/1234/bakiye \nGKD \n https://secure.api-preprod.bkm.com.tr/ohvps/gkd/s1.0/erisim-belirteci \nHHS  YS API \n https://secure.api-preprod.bkm.com.tr/hhs-api/s1.0/hhs \n https://secure.api-preprod.bkm.com.tr/hhs-api/s1.0/hhs/1234 \n https://secure.api-preprod.bkm.com.tr/yos-api/s1.0/yos \n https://secure.api-preprod.bkm.com.tr/yos-api/s1.0/yos/1234 \n HHSlerin salayacaklar APIlerdeki URI evrimi rnekleri aadaki gibidir. \n \n https://xbank.com.tr/api-portal/ohvps/obh/s1.0/odeme-emri \n https://secure.api-preprod.bkm.com.tr/ohvps/obh/s1.0/odeme-emri  (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.0/hesap-bilgisi-rizasi \n https://secure.api-preprod.bkm.com.tr/ohvps/hbh/s1.0/hesap-bilgisi-rizasi  (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesaplar \n https://secure.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesaplar   (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesaplar/1234 \n https://secure.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesaplar/1234  (BKM API) \n \n BKM API Geidi zerinden yaplan arlarda, istek balnda bulunan x-aspsp-code (istein iletildii Hesap Hizmeti Salaycsnn kodu) deerine gre HHS APIde standart olarak tanmlanm olan basePath bilgisine servis uzants eklenerek HHSye ynlendirme yaplr. \n rnein, istek balnda  xbank n kodu varsa, YS tarafndan yaplan \n https://secure.api-preprod.bkm.com.tr/ohvps/hbh/s1.0/hesap-bilgisi-rizasi \nars BKM API Geidi tarafndan karlanarak \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.0/hesap-bilgisi-rizasi \nadresine ynlendirilir. \n Bu rnekte,  https://xbank.com.tr/api-portal  basePath bilgisi HHS tarafndan HHS APIye girilen deerdir. \n 3.6.\tKarakter Kodlama \n API istekleri ve yantlarnda UTF-8 karakter kodlamas kullanlr. Bu, JSON iin varsaylan karakter kodlamasdr. \n Ancak, bir HHS\'nin kendi uygulamalar ve deme balatt deme sistemi (FAST vb.)  baz UTF-8 karakterlerini kabul etmeyebilir. HHS, UTF-8 kodlamas ieren bir mesaj ileyemez ve reddederse, HTTP 400 (Hatal stek) durum kodu ile yant vermelidir. \n 3.7.\tVeri Format \n \n Ak bankaclk kapsamndaki zaman damgas, ISO 8601 standartna uygun olarak yerel saat bilgisini ve timezone bilgisini de ierecek ekilde " yyyy-MM-ddTHH:mm:ssXXX " formattaki haliyle hazrlanmaldr. \n \n rnek:  "timestamp": "2021-05-30T20:34:15+03:00" \nyyyy : 4 hane yl \nMM : Baa 0 eklenmi, toplam 2 hane ay \ndd    : Baa 0 eklenmi, toplam 2 hane gn \nHH    : Baa 0 eklenmi, toplam 2 hane saat (0-23 aras deer alabilir.) \nmm : Baa 0 eklenmi, toplam 2 hane dakika \nss    : Baa 0 eklenmi, toplam 2 hane saniye \nXXX : ISO 8601 Time zone \n \n \n JWT veri paketlerinde kullanlan zaman damgalar, 1 Ocak 1970 Saat 00:00:00 (UTC) anndan itibaren geen saniye says deerini (Unix Time) kullanmaldr. \n \n \n Bir HHS, tarihi yanl biimlendirilmi bir istek aldnda, 400 (Hatal stek) durum kodu ve ilgili hata kodu ile yant vermelidir. \n \n \n ISO 4217 Standartnda para birimleri ve ka basamak ondalk deer ierebilecekleri belirlenmitir. \n https://www.iso.org/iso-4217-currency-codes.html   adresinden cretsiz olarak listeye eriilebilir.  \nAPI Standartlarnda da para birimleri  ISO 4217de tanmlanm olan 3 harfli kodlarla iletilir.   Tm tutar alanlar ISO 4217\'de tanmlanm para birimlerinin ondalk basamak deerleri de gz nnde bulundurularak iletilmelidir. Tutar alanlar art ya da eksi deer alabilecei iin API deseninde tanmlanm regular expressionlar dikkate alnmaldr. \nrnein; Bakiye API\'sindeki "Kredili Mevduat Hesab Bakiyesi" alan "-100.25" ve "Para Birimi" alan "TRY" olarak iletildiinde 25 deerinin kuru olduu anlalmaldr. \ndeme Emri Rzas API\'sinde yer alan "lem Tutar" alan "104.75" TRY olarak iletildiinde "75" deerinin kuru olduu anlalmaldr. \n"12000" Japon Yeni iin, ISO 4217de JPY para biriminin ondalk ksm olmadndan "lem Tutar" alannda "12000" ve "Para Birimi" alannda "JPY" deeri  iletilmelidir. \n \n \n Altn para birimi zelinde ISO 4217ye uygun olarak "XAU" cinsinde ve 2 basamak ondalk rakam ierecek ekilde iletilmelidir. rnein ierisinde "13,50 gr" altn olan hesap iin bakiye "13.50", para birimi "XAU" olarak gnderilmelidir. \n \n \n Dier madenlerde ondalk basamak ISO 4217 standartnda tanmland gibi olmaldr. \n \n \n Sral veri tipleri byk kk harfe duyarl olmaldr. \n 3.8.\tstemci Sertifika Ynetimi \n HVPS kapsamnda YS ve HHSlerin gvenli bir ekilde tanmlanmas amacyla elektronik sertifikalar kullanlr. \n HVPS kapsamnda taraflarn gvenli bir ekilde tanmlamas, utan uca gvenli iletiim, mesaj ifreleme ve mesaj imzalama ilevleri 15/1/2004 tarihli ve 5070 sayl Elektronik mza Kanununda aklanan elektronik sertifikalar kullanlarak salanr. Elektronik sertifikada Trkiye Cumhuriyet Merkez Bankas tarafndan verilen kurulu kodu ve kuruluun trne dair bilgiler bulunur. \n BKM API Geidi zerinden yaplan eriimlerde YS ve HHSlere nceden datlm olan istemci sertifikalar kullanlarak taraflarn (sunucu) kimliklerinin dorulanmas salanacaktr. stemci sertifikalar hem test hem de retim ortamnda kullanlacaktr. Sertifikalarn ilevsellii ve geerlilii sertifikasyon srecinde de snanacaktr. Sz konusu sertifikalarn datm prosedrleri ve kullanmlara ynelik aklamalar EK-3te yer verilmitir. \n 3.9.\tYetkilendirme Trleri \n BKM API Geidi zerinden yaplan arlarda iki temel yetkilendirme tr kullanlr: \n 1.\tstemci Kimlik Bilgileri:  Mteri onaynn gerekmedii, sadece YSn tanmlanp doruland API arlarnda kullanlr. YSn yetkilendirilmi olduu ve faaliyet izninin yapt hizmet arsna uygun olduu kontrol edilir.  Bu amala, YSlere clientId ve clientSecret tahsis edilecektir. YSler ilgili clientId ve clientSecret ile sadece yetkilendirilmi olduklar servislere eriebileceklerdir. YSler kendilerine BKM tarafndan sunulacak APIyi, kendi clientID ve clientSecret deerleri ile sorgulayarak stemci Kimlik Bilgileri belirtecini (access token) elde edeceklerdir.\nHHSler de BKM API geidi zerindeki YS APIsini sorgulama maksad ile BKM API Geidine geldiklerinde, kendilerine atanm olan clientID ve clientSecret bilgileri ile yetki kontrolleri yaplr.\nHHSler kendilerinden alnacak username ve password deerleri kullanlarak oluturulacak basic authentication metodu ile servislerini sunacaklardr. \n 2.\tYetkilendirme Kodu:  YSn dorulanmasnn yansra mterinin GKD ile dorulanmas gereken API arlarnda kullanlr. Mteri dorulanarak yetkilendirme kodu oluturulmas HHSnin yetkilendirme arayzne ynlendirilir. GKDnin baaryla tamamlanmas sonrasnda yetkilendirme kodu YSe dnlr. YS daha sonra HHSnin  eriim belirteci  (access token) eriim adresini (EK-3: POST /erisim-belirteci) armak suretiyle yetkilendirme kodunu bir eriim belirteci (access token) ile deitirerek ilgili kaynaklar kullanabilir. \n deme emri balatma ve hesap bilgisi hizmetlerinde hangi yetkilendirme trlerinin kullanlaca bilgisi, ilgili balklardaki eriim adresleri (endpoints) tablolarnda yer almaktadr. \n erisim-belirteci  erisim noktasndan elde edilen  erisimBelirteci  ilikilendirildii nesne veya ilem iin gnderilen POST istei balnda  x-access-token  alannda iletilir.\nBelirli bir sre iin tanmlanan eriim belirteci (access token) deerinin yenileme belirteci (refresh token) ile yenilenmesi gerekir. \n Eriim adreslerinde kullanlan yetkilendirme tr ilgili eriim adresi tablolarnda belirtilmitir. \n 3.10. stek/Cevap Mesajlarnda Kullanlan Nesne Yaplar \n stek ve Cevap mesajlarnda kullanlacak olan nesneler tm elemanlarn kapsayacak ekilde Ek-1 de listelenmitir. Tm listelenen elemanlar asndan (U nokta mesaj yaplarnn belirtildii tablolarda belirtildii zere) alann Zorunlu (z) veya stee Bal () olma durumlarna gre baz alanlar gnderilebilir veya gnderilmeyebilir. \n 3.11. Sayfalandrma ve Filtreleme \n Sayfalandrma \n arya dnlen kaynak nesnesi ierisindeki kaytlar bir sayfalandrma yaps ile arlacak ekilde istek oluturulur. \n Oluturulacak istein ierisinde parametreler ile filtreleme, sayfa bana gsterilecek kayt says ve hangi sayfann nyzde gsterilecei bilgileri eriim noktasna iletilir ve ilgili kaytlar cevap olarak alnr. \n Filtreleme \n HHS, birden ok kayt dnlmesi gereken GET arlarnda snrl filtreleme destei salamaldr. Filtre parametreleri her zaman kaynak nesnesinin belirli alanlarna zgdr ve nesne iin tanmlanan kurallara uymaldr. \n 3.12. Mesaj mzalama \n Elektronik imzalar, HVPS APIde gerekletirilen ilemlerin ve tanan verilerin btnlk ve inkr edilemezliini destekler. mzalarn kaynak baznda hangi istek ve yantlara uyguland belirlidir. \n API yalnzca TLS\'ye dayanrsa, dijital kaytlar ve inkr edilemezlik kantlarn tutmak zor olur. Bu nedenle, TLS\'ye dayanmayan bir inkr edilemezlik zm olarak API isteinin HTTP balnda bir JWS kullanlarak salanabilir. \n HTTP isteinin gvdesinin hash fonksiyonu (SHA256) ile zeti alnacaktr. Elde edilen zet, asimetrik anahtarlar destekleyen bir algoritma kullanlarak imzalanacak ve JWS elde edilecektir. \n Bir istek, YS\'nin zel anahtar ile imzalanacak ve bu istee karlk gelen yant, HHS\'nin zel anahtar tarafndan imzalanacaktr. \n Tm API istekleri ve yantlar imzalanmaz. Mesaj imzalamann zorunlu olup olmad, desteklenip desteklenmedii her API zelinde belirlenir. \n Anahtar Deposu \n HHS\'ler ve YS\'ler tarafndan gvenilen bir Gven Otoritesi (Trust Anchor), taraflar iin bir genel anahtar deposu salamaktan sorumludur. \n Gven Otoritesi, taraflardan herhangi birisinin oluturduu bir anahtar iftinin ak blmn saklayan merkezi bir dizin (BKM tarafndan tutulan merkezi kayt sistemi vb.) olacaktr. \n Mesajlar dorulamak iin taraflarn genel anahtarlarnn paylalmas iin BKM bir servis salayacaktr. HHS API olarak adlandrlm olan bu servis ile HHS ve YS listelerine ulalabildii gibi dorulama ilemi iin ihtiya duyulacak olan genel anahtarlara da bu servis zerinden eriilebilinecektir. \n lgili Mesaj ifreleme iin genel ak, Ek-5 blmnde detaylaryla paylalmaktadr. \n 3.13. Durum Kodu \n APIler, iki farkl amaca hizmet eden iki durum kodu kullanr: \n \n HTTP Durum Kodu, API arsnn (kaynaktaki HTTP ilemi) sonucunu yanstr. \n Baz kaynak payloadlarndaki Durum alan, kaynaklarn durumunu yanstr. \n 3.14. Gereksinimlerinin Snflandrlmas \n Eriim adreslerinin ve alanlarn kullanm Zorunlu(Z), stee Bal() veya Koullu(K) olabilir. Kullanmlara ilikin durumlar ve kullanmn (K) koullu olduu duruma ilikin aklamalar ilgili tablolarda belirtilmitir. \n HVPS API\'lerinin (HBH,BH,GKD) istek ve yantta kullanlacak balk isimleri, ilgili RFC dokmanlarnda ve aadaki tabloda yer ald ekilde kullanlacaktr.  Uygulamaya zellemi balklar "X-" ile balayacaktr. Balk isimlerinde yer alacak ksaltmalar (rn. PSU, ASPSP gibi) tamam byk harfle yazlacak ekilde tanmlanacaktr. Balk isimleri byk  kk harfe duyarl olmamaldr. rnein x-request-id ya da X-Request-ID olarak gnderilmi olan bir istek bal deikeni, sunucu tarafnda hata vermeyecek ekilde ilenebilmelidir. \n 3.15. stek Bal \n \n "Balk isimleri" yorumlanrken kk byk harfe duyarl olmamaldr. rnein "x-ReQuEsT-Id" geerli bir balk ismidir. \n "Balk deerleri" yorumlanrken ise kk byk harf duyarll olmaldr. rnein "xyz123" ile "XYZ123" deerleri farkldr. \n Balk deerlerinde ISO-8859-1 standartnda yer alan karakter kmesi kullanlmaldr. rnein "PSU-Device-Data" deerinde "OS12" yazmak, byk "" harfinin ISO-8859-1 ierisinde yer almamasndan dolay, hataya yol aacaktr. \n \n Tablo 2: stek Balnda Yer Alan Veriler \n \n \n \n Balk simleri \n Format \n Notlar \n POST \n GET \n DELETE \n \n \n \n \n X-Request-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen arya zg talep kimlii. stek numaras.   rnek: deme emri balatma i aknn her admda farkl x-request-id deeri kullanlr.   arlarn ayn yant dnmesinin beklendii durumlarda (idempotent ilemlerde) ayn deer ile ar yaplr. \n Z \n Z \n Z \n \n \n X-Group-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen ilem akna zg talep kimlii. lem grup numaras.  Ayn rza noya ait tm isteklerde ayn x-group-id bilgisi deeri gnderilmelidir. rnek: deme emri balatma/hesap bilgisi i aknn her admnda ayn x-group-id deeri kullanlr. \n Z \n Z \n Z \n \n \n Content-Type \n AN1..20 \n Standart HTTP Bal; Talepte salanan payloadn biimini temsil eder. Bu deerin application/json olarak gnderilmesi gerekmektedir.  (Baka bir deere ayarlanrsa, HHS, 415 Desteklenmeyen Ortam Tr (Unsupported Media Type) ile yant vermelidir) \n Z \n - \n - \n \n \n X-ASPSP-Code \n AN4 \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n Z \n Z \n Z \n \n \n X-TPP-Code \n AN4 \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur \n Z \n Z \n Z \n \n \n PSU-Auth-Date \n ISODateTime \n HKnn YS zerinde en son oturum at saat. [RFC7231] rnein:  auth-date: Tue, 11 Sep 2012 19:43:31 GMT \n  \n  \n  \n \n \n PSU-IP-Adress \n AN7..15 \n HK YS zerinde oturum amsa, ilemi balatt cihazn IP adresi. \n  \n  \n  \n \n \n PSU-IP-Port \n AN1..5 \n HK YS zerinde oturum amsa, ilemi balatt cihazn Port adresi. \n  \n  \n  \n \n \n PSU-GEO-Location \n AN1..36 \n HKnn ilemi balatt cihazn konum bilgisi. RFC2426 standartna uygun olarak paylalmaldr. rnein  GEO:"<enlem >, <boylam>GEO:52.506931,13.144558 \n  \n  \n  \n \n \n PSU-User-Agent \n AN 1.. 255 \n HKnn ilemi balatt cihazn salad user-agent bilgisi. (Tarayc, versiyon, iletim sistemi bilgileri) \n  \n  \n  \n \n \n PSU-Timestamp \n ISODateTime \n HKnn ilemi balatt cihazn tarih saat ieren zaman bilgisi. \n  \n  \n  \n \n \n PSU-Device-ID \n AN5..40 \n HK ilemi mobil uygulama araclyla balattysa, kullanlan mobil uygulama ilk yklendiinde oluturulan tekil cihaz veya uygulama belirteci. HK cihaznn UUID deeri kullanlabilir. \n  \n  \n  \n \n \n PSU-Device-Data \n AN1..1024 \n HKnn ilemi balatt mobil cihaza ait veriler.  rnek alanlar:   - Platform - (Android, iOS, Windows 10 Mobile)  - Device Model   - OS Name   - OS Version - Locale - Time zone \n  \n  \n  \n \n \n PSU-Fraud-Check \n AN1..4096 \n YS\'lerin eitli gvenlik kontrollerini gerekletirerek, nemli grlen aadaki bilgileri HHS\'ler ile paylamalar gerekmektedir. Bu bilgiler nda mterinin profili oluturulmasna katk salanacaktr.   HKl ilemlerde (PSU-Initiated = E gnderildii durumlarda) gnderilmesi zorunludur.  Sistemsel yaplan API armlarmda ve HHS-YS API armlarnda gnderilmesine gerek bulunmamaktadr.  Paylalacak bilgiler u ekildedir.   FirstLoginFlag  : HK\'nn, mterilik mrnde ilgili YS sistemine (mobil ya da web uygulamas) ilk login olma sresini ifade eden deer. HK\'nn ilk yapt HBH ya da BH ilemi deil, YS sisteminde kendini aktifletirme tarih aral bilgisidir.   YS, kullancnn ilk login bilgisini tutarak sonraki ilemlerinde bu bilgiyi belirlenen format ile HHS\'ye aktaracaktr. rnein; YS\'n 7 aydr mterisi olan bir kullanc iin bu alan "5" olarak YS tarafndan beslenecektir. Burada ama; ilgili kullancnn YS\'n eski bir mterisi mi, yoksa yeni bir mterisi mi olup olmadn anlamaktr.   Gnderilmesi Zorunlu alandr. TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.   DeviceFirstLoginFlag  : HK\'nn, mterilik mrnde ilem annda kulland cihazla YS uygulamasna (web ya da uygulama tabanl) ilk login olma sresini ifade eden deer. HK cihaz deiiklii yaparsa FirstLoginFlag deeri sabit kalmal  ancak DeviceFirstLoginFlag deeri deimelidir.  FirstloginFlag deeri ile HKnn YS uygulamasna ilk login tarih bilgisi ile ilgili bilgi verilirken, DeviceFirstLoginFlag ile de HKnn YS uygulamasna farkl bir cihaz aracl ile ilk login tarihinin bilgisi verilmektedir.  rnein; HK 7 aydr YS\'n mterisi olabilir, byle bir durumda FirstLoginFlag deeri "5" olacaktr. Ancak son ilemini daha nce hi kullanmad bir cihazdan yapmtr. Yeni cihazdaki login sre aral 0-2 saat aralnda  olduu iin DeviceFirstLoginFlag deeri "1" olacaktr.FirstLoginFlag deeri yine "5" olarak kalmaya devam edecektir.Bu bilgi ile YS, ilgili HHS\'ye ilk kez geliyor olsa bile; HHS, mterinin YS\' uzun sredir kullandn ama yeni bir cihazla ilemlerine devam ettiini anlayabilecektir. Bir HK, farkl cihazlar veya platformlar zerinden YS ile etkileime girebilir.  Kullanc ve YS arasnda bir oturum balatlm ise YSn tutarl ve kalc bir kimlik (device id) atamas beklenmektedir.  Device ID: Web sitesi veya mobil uygulama kullanclar iin retilen, tarayc ya da mobil uygulama tabanl benzersiz (tekil) tanmlayc deer. Mobil uygulamalar iin HKnn ilk defa ilgili cihaza aktivasyon yapt tarih bilgisi alnmaldr.   Device ID bilgileri YS uygulama ortam (web ya da uygulama tabanl) ve HK cihaz baznda tutulmaldr. YSten balatlan ilem hangi uygulama ortamna ait ise ilgili ortamala ilikili tutulan Device IDnin ilk login tarihine baklarak gncel flag deeri hesaplanmaldr.  Gnderilmesi Zorunlu alandr. TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.   LastPasswordChangeFlag  : HK\'nn, YS (cihaz bamsz)  uygulamasna login olduu ifre bilgisinin en son deitirildii sreyi ifade eden deer. Mterinin en son ne zaman ifre deiiklii yaptn anlamak iin kullanlan alandr. Yeni mteri ve hi ifre deiiklii yapmam olabilir, byle bir durumda ilgili alan "0" olarak beslenecektir.   Gnderilmesi Zorunlu alandr. TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.   BlacklistFlag  : HK\'nn herhangi bir sebeple YS\'n sakncal mteriler listesinde bulunup bulunmadn ifade eden deer.   Burada ama herhangi bir sebeple YS tarafnda yasakl olarak kaytl olan HK bilgisinin, dolandrcl nceden tespit etmek amal HHS\'ye aktarlmas olarak aklanabilir. rnein, YS tarafndan tespit edilen dolandrc kullanclara ait device id bilgisi, bu kara listede tutulur daha sonra ayn cihazla baka bir HK ilem yapacak olsa bile bu alanda ilgili bilgi "1" deeri ile HHS\'ye aktarlr. HHS\'de olmayp YS tarafnda olan bu rnekteki sakncal mteri/cihaz bilgisinin, dolayl yoldan HHS\'ye aktarlmas amalanmaktadr.  Gnderilmesi Opsiyonel alandr. TR.OHVPS.DataCode.VarYok sral veri tipinin alabilecei deerleri alabilir.   MalwareFlag  : YS uygulamasnn alt cihaz zerindeki son 21 gne ait zararl yazlm tespit bilgisini ifade eden deer. rnein HK\'nn cihaznda zararl yazlm olduu ayn 1\'inde YS tarafndan tespit edildi. Zararl yazlm tespitinden 2 saat sonra YS zerinden login olan HK\'nn durumu,  "1" olarak iletilecektir. Bir gn sonra ayn 2\'sinde, yeni bir zararl yazlm tespiti yok ancak mevcut zararl yazlm aktifse alan "2" deeri ile iletilecektir. Sreler artarak 21 gne kadar TR.OHVPS.DataCode.ZmnAralik deerlerine gre iletilecektir.Son 21 gn iinde yeni bir tespit yoksa ayn 22\'sinden itibaren ilgili alan  "0" deeri ile beslenecektir. Not: Zararl yazlm, bankaclk ilemlerinin yapld uygulamalara girite kullanlan bilgilerin (ifre, kullanc kodu gibi) ele geirilmesi amacyla kullanlan bir uygulama ya da kod parac olabilir. Bu amalar dnda kullanlan (bankacla ynelik bir zararl yazlm olmayan) yazlm tespitleri iletilmemelidir. YS kanallarna her bir loginde, kullanlan cihazda bir zararl yazlm var m yok mu kontrol yaplmaldr.   Gnderilmesi Opsiyonel alandr. TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.   AnomallyFlag  : Dier pheli durumlarn varln ifade eden deer. Gnderilmesi Opsiyonel alandr. TR.OHVPS.DataCode.VarYok sral veri tipinin alabilecei deerleri alabilir.   UnsafeAccountFlag : HHS tarafndan aktarlan bilgi ile son 21 gn iinde HK\'nn dolandrclk maduru olmas durumunu ifade eden deer. rnein; HHS 1, ayn 1\'inde sphe veya sahtekarlk nedeniyle bir deme ilemine izin vermedii durumda, bu bilgiyi rza iptal detay kodu ile YS\'e aktarm olur. Bu bilgiyi tutan YS, ilgili mterinin 15 dakika sonra HHS 2\'de yapt ilem iin ilgili alan "1" deeri ile besler. Bylece HHS 2, HK\'nn farkl bir HHS\'de son 15 dakika iinde pheli veya sahte bir ilemi olduunu anlayabilecektir. Ayn 22\'sinde yeni bir tespit/kayt yoksa bu alan YS tarafndan "0" olarak beslenecektir. Gnderilmesi Opsiyonel alandr.TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.     Flaglar JWT claims iine key value eklinde eklenerek gnderilecektir. EK-5: Mesaj mzalama Ak\'nda belirtilen yntemle imzalanarak oluturulan JWT PSU-Fraud-Check alanna konularak YS\'ler tarafndan HHS\'ye iletilmelidir. \n K \n K \n Z \n \n \n PSU-Initiated \n AN1 \n lemin HK tarafndan balatlmas durumunda E , sistem tarafndan balatld durumda H deerini almas beklenir.   lemler servisinde yaplacak sistemsel sorgulardaki ilem limitlerini kontrol amacyla kullanlr. \n Z \n Z \n Z \n \n \n PSU-Session-ID \n AN1..100 \n stei balatan YS tarafndan belirlenen oturuma zg talep kimlii. HK\'nn YS uygulamas zerinden kimlik dorulama mekanizmas ile bilgi sistemlerine dhil olmalarndan ilemlerini tamamlayp sistemden ayrlmalarna kadar geecek tm sreci kapsayacak ekilde ayn deeri almaldr. Tek seferlik deme gibi HKnn tannmadan balatld ilemlerde bu deer bo olarak iletilmelidir. \n  \n  \n  \n \n \n Authorization \n AN1..4096 \n YS ile BKM API Gateway arasndaki otorizasyon iin kullanlan token bilgisidir.  Yekilendirme trlerinden stemci Kimlik Bilgilerini adresler. \n Z \n Z \n Z \n \n \n X-Access-Token \n AN1..4096 \n HKnn GKD srecinde dorulanmas sonrasnda kullanlan eriim simgesi. Yetkilendirme trlerinden Yetkilendirme Kodu (GKD)nu adresler. \n  \n  \n  \n \n \n X-JWS-Signature \n AN1..4096 \n Payload gvdesinin ayrlm bir JWS imzasn ieren stbilgi.  Bu baln ne zaman belirtilmesi gerektii hususu ilgili endpoint iin belirtilmitir. \n K (Kullanlan API ve methoda gre kullanlr.) \n K \n K \n 3.16. Yant Bal \n \n "Balk isimleri" yorumlanrken kk byk harfe duyarl olmamaldr. rnein "x-ReQuEsT-Id" geerli bir balk ismidir. \n "Balk deerleri" yorumlanrken ise kk byk harf duyarll olmaldr. rnein "xyz123" ile "XYZ123" deerleri farkldr. \n Balk deerlerinde ISO-8859-1 standartnda yer alan karakter kmesi kullanlmaldr. rnein "Link" deerinde "OS12" yazmak, byk "" harfinin ISO-8859-1 ierisinde yer almamasndan dolay, hataya yol aacaktr. \n \n Tablo 3: Yant Balnda Yer Alan Veriler \n \n \n \n Balk simleri \n Format \n Notlar \n Kullanm Durumu \n \n \n \n \n X-Request-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen arya zg talep kimlii. stek numaras    lgili istek balndaki bilgi geri dnlr. \n Z \n \n \n X-Group-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen ilem akna zg talep kimlii. lem grup numaras. lgili istek balndaki bu deer geri dnlr. \n Z \n \n \n X-ASPSP-Code \n AN4 \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n Z \n \n \n X-TPP-Code \n AN4 \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur \n Z \n \n \n Content-Type \n AN1..20 \n Standart HTTP Bal; Talepte salanan payloadn biimini temsil eder:  application/json \n Z \n \n \n X-JWS-Signature \n AN1..4096 \n JWS imzasn ieren stbilgi. Bu baln hangi yantlar iin kullanlmas gerektii ilgili endpoint iin belirtilmitir.  Hata durumlarnda, yant gvdesi deeri dnlyor ise imzalanmal ve imza bilgisi x-jws-signature alannda iletilmelidir.  Ancak uygulama katman tarafndan yakalanamayan dolays ile imzalanamayan hata durumlarnda x-jws-signature alan HHS\'ler tarafndan bo gnderilebilir. \n K \n \n \n X-RateLimit-Limit \n N 1..18 \n stek kst uygulanan servislerde en fazla ka adet istek yaplabileceini gsterir. Kst uygulanan servislerde bu baln dnmesi zorunludur. \n K \n \n \n X-RateLimit-Remaining \n N 1..18 \n stek kst uygulanan servislerde ka adet istek hakk kaldn gsterir. Kst uygulanan servislerde bu baln dnmesi zorunludur. \n K \n \n \n X-RateLimit-Reset \n AN 1..255 \n stek kst uygulanan servislerde arm hakk bittikten sonra yeniden denemeden nce beklemesi gereken sreyi (saniye cinsinden) gsterir. HTTP 429 durum kodu (Too Many Requests) ile dnlen yantlarn balnda dnlmesi zorunludur.  YS olarak yaptnz sistemsel sorgularda; HTTP 429 durum kodu (Too Many Requests) ile dnlen yant aldnzda tekrar sorgu yapmadan nce X-RateLimit-Reset yant baln kontrol ederek, bu balktaki sre kadar bekledikten sonra yeniden sorgulama yaplmas gerekmektedir. \n K \n \n \n x-total-count \n N 1..18 \n Hesaplar, lemler ve Bakiye servislerinde sayfalama kullanld durumda, sorgu sonucu dnecek toplam kayt says bilgisi, bu alanda HHS isteine bal olarak gnderilebilir. \n  \n \n \n Link \n 1..4096 \n Link alannn oklu sayfa yaps olmas durumunda gnderilmesi zorunludur.  Sayfalama yaps kullanldnda gelen yantta birden fazla sayfa var ise; nceki, sonraki, ilk, son sayfalara gitmek iin gerekli referanslar link headernda aadaki rnekteki gibi doldurulabilir.  x-total-count alannn gnderimi istee bal olduu iin; Link ierisindeki son sayfa bilgisi  (last) istee bal hale getirilmitir. nceki( prev) ve Sonraki (next) admlarnn uygun olan her durumda yer almas zorunludur. lk sayfada nceki seenei olmamal, son sayfada ise Sonraki seenei olmamaldr.    </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=6&syfKytSayi=100>; rel="next",  </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=4&syfKytSayi=100>; rel="prev",  </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=14&syfKytSayi=100>; rel="last",  </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=0&syfKytSayi=100>; rel="first" \n K \n 3.17. Idempotency Kurallar \n YSn aadaki durumlarda ayn istek numaras (x-request-id) ve ayn veri gvdesiyle ary tekrarlamas; HHSnin de bu durumlarda ayn yant dnmesi gereklidir. \n \n HHSnin yant kesinti/arza nedeniyle YSe ulamaz ve zaman am sz konusu olmas, \n HK, YS uygulamas zerinden ift tklama ile mkerrer defa HHS APIlerini arlmas,\n(API kontrollerinden nce YS uygulamasnn, ift tklama kontrol yapmas nerilmektedir.) \n YS, yant almasna ramen ileyemeden kaybedilmesi, \n \n durumlarnda HHS aadaki kurallar iletir: \n \n HHS gelen istek numarasn ve veri gvdesini birletirerek checksum deeri retir. \nchesksum deeri x-request-id|request.body nin hash algoritmalarndan (CRC32,MD5 vb)  geirilerek retilebilir. \n HHS bu checksum deeri ile YSe dnm olduu yant 5 dk boyunca saklar.  Saklama yntemi olarak veri taban veya nbellek aralar kullanlabilir. \n YS ayn istek numaras ve ayn veri gvdesi ile yeni bir ar yaptnda, ayn checksum deeri retilecei iin 5dk boyunca bu deere karlk gelen yant dner. \n 5 dk sonrasnda istek numaras veya veri gvdesi deimemi olsa dahi bu HHS tarafndan yeni istek olarak kabul edilir. \n \n Aadaki Public Post ilemleri iin bu kural setinin iletilmesi gerekmektedir: \n 1- deme emri rzas oluturma \n2- Eriim belirteci oluturma \n3- deme emri \n4- Hesap bilgisi rzas oluturma \n 3.18. HTTP Durum Kodlar \n RFC 2616\'da belirlenmi olan durum kodlar (status code) gnderilen istein durumunu YSa standart bir ekilde ifade eder. Eer bir hata varsa hatay, gnderilen istek baarl bir ekilde ilem grdyse ona ilikin durumu aktarr. Durum kodlar genel olarak 5 kategoridedir. \n \n 1xx Bilgi \n 2xx Baarl \n 3xx Ynlendirme \n 4xx stemci Hatas \n 5xx Sunucu Hatas \n \n errorCode Alannda Kullanlabilecek Sral Hata Tipleri : \n \n TR.OHVPS.Resource \n \n \tInvalidFormat \n \tConsentMismatch \n \tNotFound \n \tInvalidSignature \n \tMissingSignature \n \tMethodNotAllowed \n \tNotAcceptable \n \tUnsupportedMediaType \n \tConsentRevoked \n \n \n \n TR.OHVPS.Business \n \n \tInvalidContent \n \tInvalidAccount \n \n \n \n TR.OHVPS.Connection \n \n \tInvalidCertificate \n \tExceededRate \n \tInvalidTPP \n \tInvalidASPSP \n \tInvalidToken \n \tInvalidTPPRole \n \n \n \n TR.OHVPS.Server \n \n \tInternalError \n \tServiceUnavailable \n \n \n TR.OHVPS.Resource.InvalidFormat hatas alnd durumda; fieldErrors nesnesi ierisinde verilecek hata kodlar : \n \n TR.OHVPS.Field \n \n \tMissing \n \tInvalid \n \n \n Veri Tipi rnei: \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "d8bd4e5f-f094-48a6-aee1-3a800e2709d9" , \n     "timestamp" :   "2022-12-22T10:33:15+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "Validation error" , \n     "moreInformationTr" :   "ema kontrolleri baarsz" , \n     "fieldErrors" :   [ \n         { \n             "objectName" :   "odemeEmriRizasiIstegi" , \n             "field" :   "odmBsltm.islTtr.prBrm" , \n             "messageTr" :   "bo deer olamaz" , \n             "message" :   "must not be null" , \n             "code" :   "TR.OHVPS.Field.Missing" \n         } , \n         { \n             "objectName" :   "odemeEmriRizasiIstegi" , \n             "field" :   "odmBsltm.kmlk.kmlkVrs" , \n             "messageTr" :   "boyut \'1\' ile \'30\' arasnda olmal" , \n             "message" :   "size must be between 1 and 30" , \n             "code" :   "TR.OHVPS.Field.Invalid" \n         } \n     ] , \n     "errorCode" :   "TR.OHVPS.Resource.InvalidFormat" \n }  \n \n Tablo 4: HTTP Durum Kodlar \n \n \n \n HTTP Durum \n stek Sonucu ve Aklamalar \n POST \n GET \n DELETE \n \n \n \n \n 200 OK \n stek Baaryla Tamamland. Kaynak gncellemek iin yaplan (rnein, GET) ve baaryla tamamlanan isteklerinde kullanlr. \n H \n E \n H \n \n \n 201 Created \n stek Baarl Oldu. Kaynak yaratma istei (rnein, POST /deme-emri-rizasi) baaryla sonuland. \n E \n H \n H \n \n \n 204 No Content \n Silme ilemi baaryla tamamland. Kaynak silme istei (rnein,  DELETE /hesap-rizasi/{RizaNo} ) baaryla sonuland. \n H \n H \n E \n \n \n 400 Bad Request \n stekte bozuk, eksik veya uyumlu olmayan JSON gvdesi, URL parametreleri veya balk alanlar var.  stekle balatlan ilem yapsal bozukluk, eksik veya tutarsz veri veya HHS tarafndaki kontrollerin hatal sonulanmas nedeniyle hata ile sonulanr ve hataya ilikin veriler hata nesnesi ierisinde dnlr. \n E \n E \n E \n \n \n 401 Unauthorized \n Yetkilendirme bal eksik, hatal veya geersiz olduundan istek yetkilendirilmediinde ve eriim reddedildiinde http 401 kodu dnlmelidir. \n E \n E \n E \n \n \n 403 Forbidden \n Eriim belirtecinin veya rzann kapsam uyumuyor. YS bir hesaba/ilem kaynana erimeye alr ve YS, istenen kaynaa erimek iin geerli izinlere sahip bir rzas yoktur.  rnein; hesap bilgisi rzas bakiye izni almamtr ancak /bakiyeler adresinden istekte bulunmutur. \n \n \n \n \n \n 404 Not Found \n **HHS geerli bir API eriim adresini salamyorsa, o URL\'ye gelen istekler iin 404 (Bulunamad) ile yant vermelidir.**YS, uygulama esaslarnda tanmlanmayan bir kaynak iin bir URL\'ye erimeye alrsa (rnein, GET /yurtdisi-odeme), HHS, 404 (Bulunamad) ile yant vermeyi seebilir. \n E \n E \n E \n \n \n 405 Method Not Allowed \n YS, desteklenmeyen bir yntemle kaynaa erimeye alt. \n E \n E \n E \n \n \n 406 Not Acceptable \n stek, geersiz bir karakter kmesi ieriyor. \n E \n E \n E \n \n \n 415 Unsupported Media Type \n stek gvdesi hedef kaynakta bu yntem tarafndan desteklenmeyen bir biimde oluturulduu iin ilem reddedildi \n E \n H \n H \n \n \n 429 Too Many Requests \n Belirli bir sre iinde ok fazla talepte bulunulduu iin ilem reddedildi.  HHSler adil kullanm politikalarn aan talepleri kstlayabilir. \n E \n E \n E \n \n \n 500 Internal Server Error \n API sunucu / servis katmannda sorun olutu. lem baarsz.  5XX hata durumlarnda yant gvde deeri olmad iin mesaj imzalama yaplamaz ve x-jws-signature alan bo olarak iletilir.  Bu durumda x-jws-signature kontrol yaplmamaldr. \n E \n E \n E \n \n \n 503 Service Unavailable \n Hizmet srm kullanmdan kaldrld.  Bir API\'nin kullanmdan kaldrld ve artk bir HHS tarafndan operasyonel olarak desteklenmedii durumlarda, URI yolu hala etkin olabilir ve API isteklerini kabul edebilir.  Bu durumda, YS\'n API srmnn evrimd olduunun farknda olmas iin 503 Hizmet Kullanlamyor dnmesi nerilir. \n E \n E \n E \n \n \n \n Hata rnekleri: \n 400 Bad Request \n TR.OHVPS.Business.InvalidContent  hatas HHS tarafndan yaplacak i kural kontrollerinin baarsz olduu durumda verilmelidir. \n TR.OHVPS.Resource.InvalidFormat  hatas ema validasyonu, alan uzunluk ve varlk kontrollerinin baarsz olduu durumda verilmelidir. \n \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "7f115b9c-d7c2-4a2a-bc45-5a9891c79072" , \n     "timestamp" :   "2022-12-22T10:47:57+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "Validation error" , \n     "moreInformationTr" :   "ema kontrolleri baarsz" , \n     "fieldErrors" :   [ \n         { \n             "objectName" :   "odemeEmriRizasiIstegi" , \n             "field" :   "odmBsltm.alc.unv" , \n             "messageTr" :   "boyut \'3\' ile \'140\' arasnda olmal" , \n             "message" :   "size must be between 3 and 140" , \n             "code" :   "TR.OHVPS.Field.Invalid" \n         } , \n         { \n             "objectName" :   "odemeEmriRizasiIstegi" , \n             "field" :   "odmBsltm.islTtr.ttr" , \n             "messageTr" :   "bo deer olamaz" , \n             "message" :   "must not be null" , \n             "code" :   "TR.OHVPS.Field.Missing" \n         } \n     ] , \n     "errorCode" :   "TR.OHVPS.Resource.InvalidFormat" \n }  \n\n \n Zorunlu header alanlarndan biri ya da birka eksik olarak gnderilirse aadaki gibi bir hata dn gerekleebilir. \n HHS uygulamas tarafndan dnlebilecek hata rnekleri: \n \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "2005515d-f0e6-4a07-a439-0ef3b0f56011" , \n     "timestamp" :   "2022-12-22T10:39:26+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "Validation error" , \n     "moreInformationTr" :   "ema kontrolleri baarsz" , \n     "errorCode" :   "TR.OHVPS.Resource.InvalidFormat" , \n     "fieldErrors" :   [ \n         {          \n             "field" :   "X-Request-ID" , \n             "messageTr" :   "X-Request-ID deeri bo olamaz." , \n             "message" :   "X-Request-ID cannot be null." , \n             "code" :   "TR.OHVPS.Field.Invalid" \n         } \n     ] \n }  \n\n \n Business hata rnei - 1: \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "677cfd9d-77c1-4ea3-8bdf-74a6e9887177" , \n     "timestamp" :   "2022-12-22T11:05:59+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "gonUnvan wrong" , \n     "moreInformationTr" :   "Gnderen nvan hatal" , \n     "errorCode" :   "TR.OHVPS.Business.InvalidContent" \n }  \n \n Business hata rnei - 2: \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "5df3b402-3aca-4305-a35b-5af0f3184b40" , \n     "timestamp" :   "2022-12-22T11:06:47+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "Sender account is disabled or not found." , \n     "moreInformationTr" :   "Gonderen hesap aktif deil veya bulunamad." , \n     "errorCode" :   "TR.OHVPS.Business.InvalidAccount" \n }  \n \n BKM API Geidi\'nde yaplan zorunlu header kontrollerinde aadaki hatalar dnebilir: \n \n { \n     "timestamp" :   "2022-12-22T10:40:28+03:00" , \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "d4375748-6fc7-4f7e-94f3-6411cab1d59f" , \n     "moreInformationTr" :   "Geersiz HHS kodu." , \n     "errorCode" :   "TR.OHVPS.Connection.InvalidASPSP" , \n     "moreInformation" :   "Invalid ASPSP Code" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" \n }  \n \n BKM API Geidi tarafndan dnlecek hata rnei: \n \n { \n     "timestamp" :   "2022-12-22T10:40:28+03:00" , \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "d4375748-6fc7-4f7e-94f3-6411cab1d59f" , \n     "moreInformationTr" :   "Geersiz HHS kodu." , \n     "errorCode" :   "TR.OHVPS.Connection.InvalidTPP" , \n     "moreInformation" :   "Invalid TPP Code" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" \n }  \n \n BKM API Geidi tarafndan dnlecek hata rnei: \n \n { \n     "timestamp" :   "2022-12-22T11:14:05+03:00" , \n     "path" :   "/ohvps/hbh/s1.0/hesap-bilgisi-rizasi" , \n     "id" :   "ee1e3ea7-a5e5-468b-bb02-314148f84e6a" , \n     "moreInformationTr" :   "Geersiz ys rol. lgili api ars iin yetkisi yok." , \n     "errorCode" :   "TR.OHVPS.Connection.InvalidTPPRole" , \n     "moreInformation" :   "Invalid TPP Role" , \n     "httpCode" :   403 , \n     "httpMessage" :   "Forbidden" \n }  \n\n \n 401 Unauthorized \n YS, sresi dolmu bir eriim belirteci kullandnda, HHS 401 (Yetkisiz) http kodu ile aadaki hata kodunu dnmelidir.  Aadaki nedenlerden herhangi biri nedeniyle bir Eriim Belirtecinin sresi dolduunda bu durum ortaya kabilir: \n \n Rzann sresi doldu (Son Kullanma Tarihi geti) \n Eriim Belirtecinin pheli kullanm veya sahtekarlk phesi \n Rzada belirlenen gn saysnn am\nBu hata, mteriden doru izinlerle yeniden kimlik dorulamas isteyerek zlebilir. \n \n \n { \n     "path" :   "/ohvps/gkd/s1.0/erisim-belirteci" , \n     "id" :   "ed3fd667-fc58-40ad-a982-e8937faccd15" , \n     "timestamp" :   "2022-12-22T11:17:33+03:00" , \n     "httpCode" :   401 , \n     "httpMessage" :   "Unauthorized" , \n     "moreInformation" :   "Refresh token expired or not found in database" , \n     "moreInformationTr" :   "Yenileme belirteci zaman amna uram veya veri tabannda yok" , \n     "errorCode" :   "TR.OHVPS.Connection.InvalidToken" \n }  \n \n\n \n 403 Forbidden \n rn; YS yetkisi olmayan rol(BH/HBH) ile ilem yapmaya alt durumda 403 hatas alarak ileme devam edemez. \n { \n   "path" :   "/ohvps/hbh/s1.0/bakiye" , \n   "id" :   "3e48ea98-f889-48b9-aa6e-28aabc6cfb14" , \n   "timestamp" :   "2022-12-22T11:20:05+03:00" , \n   "httpCode" :   403 , \n   "httpMessage" :   "Forbidden" , \n   "moreInformation" :   "Forbidden" , \n   "moreInformationTr" :   "Bakiye Bilgileri iin HK izni bulunmamaktadr." , \n   "errorCode" :   "TR.OHVPS.Resource.Forbidden" \n }  \n \n 404 Not Found \n rn; GET /odeme-emri-rizasi/123456 ars durumunda 123456 geerli bir deme kayna deilse, HHS, 404 koduyla cevap vermelidir. \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi/123456" , \n     "id" :   "22f52b2d-d442-4a6a-8f39-d23eba45a34b" , \n     "timestamp" :   "2022-12-22T10:53:53+03:00" , \n     "httpCode" :   404 , \n     "httpMessage" :   "Not Found" , \n     "moreInformation" :   "Resource not found" , \n     "errorCode" :   "TR.OHVPS.Resource.NotFound" , \n     "moreInformationTr" :   "Kaynak bulunamad" \n }  \n\n \n 405 Method Not Allowed \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "3e5c6b28-7ee4-4469-b541-843fb4a94eec" , \n     "timestamp" :   "2022-12-22T11:35:10+03:00" , \n     "httpCode" :   405 , \n     "httpMessage" :   "Method Not Allowed" , \n     "moreInformation" :   "Method not allowed" , \n     "errorCode" :   "TR.OHVPS.Resource.MethodNotAllowed" , \n     "moreInformationTr" :   "stek yaplan URL iin izin verilmeyen metot" \n }  \n \n 406 Not Acceptable \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "3e5c6b28-7ee4-4469-b541-843fb4a94eec" , \n     "timestamp" :   "2022-12-22T11:35:10+03:00" , \n     "httpCode" :   406 , \n     "httpMessage" :   "Not Acceptable" , \n     "moreInformation" :   "Not Acceptable" , \n     "errorCode" :   "TR.OHVPS.Resource.NotAcceptable" , \n     "moreInformationTr" :   "Kabul edilmedi" \n }  \n \n 415 Unsupported Media Type \n stek balnda content-type, JSON dnda bir veri iletilirse bu hata verilebilir. \n \n { \n     "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n     "id" :   "63cc94b6-1b51-4648-9671-95e6e2e7e03d" , \n     "timestamp" :   "2022-12-22T11:37:12+03:00" , \n     "httpCode" :   415 , \n     "httpMessage" :   "Unsupported Media Type" , \n     "moreInformation" :   "Content type not supported" , \n     "errorCode" :   "TR.OHVPS.Resource.UnsupportedMediaType" , \n     "moreInformationTr" :   "Desteklenmeyen ierik tipi" \n }  \n \n 429 Too Many Requests \n { \n   "path" :   "/ohvps/hbh/s1.0/hesaplar/aef6061f-2978-4bb4-980d-b4c634c8055b/islemler" , \n   "id" :   "20473c5f-2f4f-4b2e-8b66-7978aec442f7" , \n   "timestamp" :   "2022-12-22T00:21:07+03:00" , \n   "httpCode" :   429 , \n   "httpMessage" :   "Too Many Requests" , \n   "moreInformation" :   "Exceeded rate" , \n   "moreInformationTr" :   "Eriim skl limiti am" , \n   "errorCode" :   "TR.OHVPS.Connection.ExceededRate" \n }  \n \n 500 Internal Server Error \n { \n   "id" :   "1b90c6dc-0277-4755-8b05-9297ddfab743" , \n   "path" :   "/ohvps/obh/s1.0/odeme-emri-rizasi" , \n   "timestamp" :   "2022-12-22T11:41:34+03:00" , \n   "httpCode" :   500 , \n   "httpMessage" :   "Internal Server Error" , \n   "moreInformation" :   "Unexpected condition was encountered." , \n   "moreInformationTr" :   "Beklenmeyen bir durumla karlald." , \n   "errorCode" :   "TR.OHVPS.Server.InternalError" \n }  \n\n \n 503 Service Unavailable \n \n   "timestamp" :   "2022-12-20T23:18:56+03:00" , \n   "path" :   "/ohvps/hbh/s1.0/hesap-bilgisi-rizasi/2a72678ee3d24de2be47887e4903a8c6" , \n   "id" :   "e76315b7-09f4-4295-b6d8-1f7fec632159" , \n   "moreInformationTr" :   "HHS u anda hizmet veremiyor." , \n   "errorCode" :   "TR.OHVPS.Server.ServiceUnavailable" , \n   "moreInformation" :   "HHS is currently unavailable" , \n   "httpCode" :   503 , \n   "httpMessage" :   "Service Unavailable" \n 3.19. Maskeleme Kurallar \n Maskeli olarak iletilmesi gereken verilerin maskeleme kurallar u ekildedir: \n \n IBAN verileri Hesap Numaras : lk 4 ve son 4 karakteri ak, dier karakterler maskeli olmaldr. rnek: TR54******************4812 \n Ad-Soyad / Ticari Unvan : Her kelimenin ilk 2 karakteri ak, sonraki karakterler yerine 4 adet   karakteri konumlandrlmaldr.\nrnein: FATH SERKAN EREN ifadesi FA *** SE**** ER**** eklinde gsterilmelidir. \n Tabela Unvan : Her kelimenin ilk 2 karakteri ak, sonraki karakterler yerine 4 adet   karakteri konumlandrlmaldr. rnein BANKALARARASI KART MERKEZ ANONM RKET ifadesi BA *** KA**** ME**** AN**** **** eklinde gsterilmelidir. \n YSten girilen unvan ve iban bilgileri deme emri rzas ve deme emri yantnda ak dnlr, Kolas aknda deme emri rzas yant ve deme emri istek ve yantnda maskeli tanr. \n 3.20. Fonksiyonel Olmayan Gereksinimler \n \n \n HHSlerin sunuyor olduklar servisleri en fazla 3000 ms iinde yant dnecek ekilde tasarlamaldr. \n \n \n HHS\'ler mevcut online ilem kanallarndan sunduklar eriilebilirlik ve performans kriterlerinden daha dk bir hizmet kalitesi sunmamaldr. \n \n \n HHSlerin sunuyor olduklar servislere sistemin gvenlik ve srekliliini salamak adna rate limit koyma ihtiyalar olur ise, standartlar ve ihtiyalara uygun ekilde bir konfigrasyon yapabilirler.  \n \n \n HHS rate limit tanm uyguluyor ise; YS\'ler arasnda ayrm yapmadan, adil ve makul snrlar dahilinde uygulamaldr.    \n \n \n YS tarafndan kullancnn balatmad otomatik sorgu limitleri  3.21 Otomatik Sorgular  blmnde detaylandrlmtr. HHS\'lerin bu servisler iin minimumda cevap vermesi gereken sorgu saylar belirlenmitir. Bu saylarn zerinde yaplan servis arsna yant dnmek HHS inisiyatifindedir. Dier taraftan kullancnn balatt istekler iin uygulanacak limitler, HHS\'nin online ilem kanallarndan sunulan sorgu limitlerinden daha az olmamaldr. \n \n \n HHS\'ler, arm limitlerini aan istekler iin HTTP 429 - Too Many Request hatasn dnmelidir. rnek hata mesaj  3.18 HTTP Durum Kodlar  blmnde bulunmaktadr. Rate Limit zelinde tanmlanm parametreler olan X-RateLimit-Limit, X-RateLimit-Remaining ve X-RateLimit-Reset alanlar da   3.16 Yant Bal  blmnde aklanmtr. YS\'ler de HHS\'nin belirledii rate limit kurallarna uymakla ykmldr. \n \n \n HHSler ayn zamanda servislerin ayakta olup olmadna ynelik olarak bir healthcheck servisi kurmaldr.  HHSlerin bu servis ile tm network ve veritaban ya da servislerinin ihtiya duyduklar altyapsal eriimleri modellemeli ve bu servisi BKM ile paylamalar beklenmektedir. Bu servis dzenli olarak BKM tarafndan arlarak servislerin ayakta olup olmadklarnn kontrolnn salanmas planlanmaktadr. \n \n \n Sunulan her API iin /health endpointi ile aadaki bilgileri vermeleri beklenmektedir. \n GET /{api ismi}/{versiyon}/health \n rnek: \n GET /obh/s1.0/health \n GET /hbh/s1.0/health \n GET /gkd/s1.0/health \n HHS ve YS API iin health servisleri aadaki servislerle kontrol edilebilir. \n GET /hhs-api/s1.0/health \n GET /yos-api/s1.0/health \n Baarl yantta Http 200 kodu dnlmelidir. \nBaarl Yant: \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Koullu  / stee Bal \n Aklama \n \n \n \n \n status \n status \n AN2..20 \n Z \n UP, DOWN deerlerini alabilir. \n \n \n \n Health servisinden yant alnamamas, hata almas ya da status DOWN gelmesi durumunda API Gatewayden istek HHS tarafna iletilmeyecektir. \n \n \n HVPS servisleri ile ilgili olarak HHSler, BKM tarafndan dzenli olarak sorgulanacaktr, eriilebilirlik ve kullanm oranlar takip edilecektir. \n \n \n HHSlerin servislerini eriim yzdeleri asndan yl baznda %99.75 orannda ayakta olmalarn salayacak ekilde kurgulamalar gerekmektedir. \n 3.21. Otomatik Sorgular \n YS uygulamas, HK\'nn balatt ilemler neticesinde API arm yapabilecei gibi, sistemsel bir ekilde otomatik API arm da yapabilir. \nHHS, API armnn HK\'l ya da HK\'sz olduunu istek parametreleri ierisinde yer alan PSU-Initiated parametresi ile anlar. Bu parametre E ise HKl, H ise sistemsel yaplm bir sorgu anlamna gelmektedir. \n HK YS uygulamasna giri yapt andan k yapt ana kadar yani HK oturumu boyunca yaplan API armlarnda, PSU-Initiated  deerinin "E" olmas gerekmektedir.  YS uygulamasnda HK oturumu boyunca,  HK\'nn bilgilerinden minimumda "bakiye" bilgisinin, uygulama arayzlerinde gncel deeri ile online sorgularla gsterimi YS\'n insiyatifindedir. \n HKnn balatt sorgular iin HHS tarafndan belirlenen st rate limitler dahilinde arm yaplabilir. \n YS, aadaki API\'leri sistemsel bir ekilde arabilir. \nHHS\'lerin bu servisler iin minimumda cevap vermesi gereken sorgu saylar belirlenmitir. Bu saylarn zerinde yaplan servis arsna yant dnmek HHS inisiyatifindedir. \nHHS tarafndan izin verilen sorgu saysnn zerinde yaplan bir sorgu iin HTTP 429 durum kodu (Too Many Requests) hatas dnlmelidir. Yant gvdesinde tekrar hata nesnesinin oluturulmas HHS inisiyatifindedir.  HHS yant header alannda iletilecek X-RateLimit-Reset (saniye cinsinden) deeri kadar sre sonunda\nYS\'n tekrar sorgulama yapmas beklenmektedir. \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Otomatik Sorgu Says \n \n \n \n \n 1 \n erisim-belirteci \n POST \n /erisim-belirteci \n --- \n \n \n 2 \n odeme-emri-rizasi \n GET \n /odeme-emri-rizasi/{rizaNo} \n Rza baznda gnde 4 \n \n \n 3 \n odeme-emri \n GET \n /odeme-emri/{odemeEmriNo} \n Rza baznda gnde 24 \n \n \n 4 \n hesap-bilgisi-rizasi \n GET \n /hesap-bilgisi-rizasi/{RizaNo} \n Rza baznda gnde 4 \n \n \n 5 \n hesap-bilgisi-rizasi \n DELETE \n /hesap-bilgisi-rizasi/{RizaNo} \n --- \n \n \n 6 \n hesaplar \n GET \n /hesaplar \n Bireysel gnde 4  Kurumsal gnde 4 \n \n \n 7 \n hesaplar \n GET \n /hesaplar/{hspRef} \n Bireysel gnde 4 Kurumsal gnde 4 \n \n \n 8 \n bakiye \n GET \n /hesaplar/{hspRef}/bakiye \n Bireysel gnde 24 Kurumsal HK - gnde 24 \n \n \n 9 \n bakiye \n GET \n /bakiye \n Bireysel gnde 24 Kurumsal HK - gnde 24 \n \n \n 10 \n islemler \n GET \n /hesaplar/{hspRef}/ilemler \n Bireysel gnde 4 Kurumsal HK - saatte 12 \n \n \n \n YS ve HHS son 24 saat ierisindeki sorgu saylarn toplayarak elde ettii sonularla limit kontrol yapmaldr (Pencere yntemi). \n lemler servisinin arm detaylarna  ^Blm 7.8  zerinden ulalabilir. \n Hesap bilgisi rzasnn YS tarafndan otomatik bir ekilde iptal edilmesi durumu  ^Blm 9 \'da aklanmtr. \n'},{title:"EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar",frontmatter:{},regularPath:"/v1.1.0/contents/ekler.html",relativePath:"v1.1.0/contents/ekler.md",key:"v-cc5a0b86",path:"/v1.1.0/contents/ekler.html",headers:[{level:2,title:"EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar",slug:"ek-1-istek-cevap-mesajlarnda-kullanlacak-nesne-yaplar"},{level:2,title:"EK-2: Sral Veri Trleri",slug:"ek-2-sral-veri-turleri"},{level:2,title:"EK-3: stemci Sertifikalarnn Tanm ve Ynetimi",slug:"ek-3-istemci-sertifikalarnn-tanm-ve-yonetimi"},{level:2,title:"EK-4: Sunucu Sertifikalar",slug:"ek-4-sunucu-sertifikalar"},{level:2,title:"EK-5: Mesaj mzalama Ak",slug:"ek-5-mesaj-imzalama-aks"},{level:3,title:"mzalama Kurallar (YS)",slug:"imzalama-kurallar-yos"},{level:2,title:"EK-6: HHS/YS API Mimarisi",slug:"ek-6-hhs-yos-api-mimarisi"}],content:' EK-1: stek/Cevap Mesajlarnda Kullanlacak Nesne Yaplar \n Ak Bankaclk simlatr uygulamas zerinde swagger dkmanlarnn gncel srmlerine eriim salanabilir. \n EK-2: Sral Veri Trleri \n \n \n \n Kod \n Aklama \n \n \n \n \n TR.OHVPS.DataCode.BrcAlc \n lemin hesab borlandrd ya da alacaklandrd bilgisidir. B : Bor A : Alacak \n \n \n TR.OHVPS.DataCode.EvetHayir \n E : Evet H : Hayr \n \n \n TR.OHVPS.DataCode.GkdTur \n GKD yaplmasn gerekli bulduu durumda HHS, YSn belirledii yntemi dikkate alarak kendi belirledii GKD yntemini bildirir: Y: Ynlendirmeli GKD A: Ayrk GKD \n \n \n TR.OHVPS.DataCode.HHSDurumu \n A : Ak. retim Ortamnda HHSnin aktif bir ekilde hizmet vermesi durumu.  Y : Yaygnlatrma. retim Ortamnda HHSnin kendisi tarafndan tanmlanm kstl HKya hizmet vermesi durumu.    G : Geici Hizmet Veremiyor. HHS servislerinde teknik bir sorun olmas nedeniyle HHSnin hizmet verememesi durumu.  K: Kapal. HHSnin hizmet vermeme durumu. \n \n \n TR.OHVPS.DataCode.HHSYOSSrlmKrtr \n kod : Kod unv : Unvan \n \n \n TR.OHVPS.DataCode.HspDrm \n Hesabn durumunu belirtir: AKTIF PASIF KAPALI \n \n \n TR.OHVPS.DataCode.HspTip \n Hesap eidini belirtir: VADESIZ VADELI KREDILI_MEVDUAT_HESABI POS CEK YATIRIM \n \n \n TR.OHVPS.DataCode.HspTur \n Hesabn bireysel veya ticari nitelikte olduunu belirtir: B: Bireysel T: Ticari \n \n \n TR.OHVPS.DataCode.IslemAmaci \n demenin Amacna ynelik olarak aadaki deerlerden birini alr: 01: Konut Kiras demesi 02:  yeri Kiras demesi 03: Dier Kira demesi 04: E-Ticaret demesi: Elektronik ticaret ilem amal aktarmlar 05: alan demesi: Maa, harcrah, prim gibi alan demeleri 06: Ticari deme: Ticari iletmelerin birbirlerine, kendi hesaplarna veya mterilerine demeleri, bor, ithalat, ihracat, irket satn alma, vb. kapsamnda demeler 07: Bireysel deme: zel amal (aile bireylerine, hediye, ba, bor, alveri vs.) demeler 08: Yatrm: Mevduat, menkul kymet, dviz, gayr menkul, tat, varlk alm, temett deme, tahsilat vb. gibi yatrm amal demeler 09: Finansal: Kredi, depo, repo, trev, finansal varlk alm/satm vb. demeler 10: Eitim demesi 11: Aidat demesi 12: Dier \n \n \n TR.OHVPS.DataCode.IslemTuru \n Hesap hareketleri (ilemler) sorgusunda dnlen lem Tr (islTur) parametresi aadaki deerlerden birini alabilir: HAVALE EFT FAST PARA_YATIRMA PARA_CEKME YABANCI_PARA_HAVALE YATIRIM_HESABINA_AKTARIM YATIRIM_HESABINDAN_AKTARIM KURUM_FATURA_ODEMESI CEK SENET SIGORTA_ODEMESI UCRET_KOMISYON_FAIZ SGK_ODEMESI VERGI_ODEMESI DOVIZ_ALIM DOVIZ_SATIM KREDI_ODEMESI KREDI_KULLANIM KK_ODEMESI KK_NAKIT_AVANS SANS_OYUNU UYE_ISYERI_ISLEMLERI HGS_OGS_ISLEMLERI DOGRUDAN_BORCLANDIRMA_SISTEMI DIGER \n \n \n TR.OHVPS.DataCode.IzinTur \n 01: Temel Hesap Bilgisi 02: Ayrntl Hesap Bilgisi 03: Bakiye Bilgisi 04: Temel lem (Hesap Hareketleri) Bilgisi 05: Ayrntl lem Bilgisi 06: Anlk Bakiye Bildirimi \n \n \n TR.OHVPS.DataCode.KareKodAksTur \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  01: FAST katlmcsndan dinamik dorulamal hizmet alnan iyeri demesi 02: FAST katlmcsndan statik dorulamal iyeri demesi 03: Kiiden kiiye demeler \n \n \n TR.OHVPS.DataCode.KaynakTip \n HESAP_BILGISI_RIZASI  ODEME_EMRI_RIZASI   ODEME_EMRI    BAKIYE    COKLU_ISLEM_TALEBI    HHS    YOS \n \n \n TR.OHVPS.DataCode.KimlikTur \n Kod, Tip, Format K , TCKN , N11 M , MNO , AN1..30 (HHSye zel bireysel veya kurum mteri numaras) Y , YKN , N11 P , PNO , AN7..9 \n \n \n TR.OHVPS.DataCode.KolasHspTur \n Hesabn bireysel veya ticari nitelikte olduunu belirtir: B: Bireysel T: Ticari \n \n \n TR.OHVPS.DataCode.KolasTur \n Mterinin sorgulama istedii Kolay Adres Tipi deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr: T: Telefon Numaras E: E-Posta K: TCKN V: VKN Y: YKN P: Pasaport Numaras \n \n \n TR.OHVPS.DataCode.KurumKimlikTur \n Kod, Tip, Format K , TCKN , N11 M , MNO , AN1..30 (HHSye zel bireysel veya kurum mteri numaras) V , VKN , AN10 \n \n \n TR.OHVPS.DataCode.LogoArkaPlan \n B :  Logolarn arka plannn beyaz olmas (Erkek Logo)   K : Logolarn arka plannn renkli/koyu olmas (Dii Logo) \n \n \n TR.OHVPS.DataCode.LogoFormat \n SVG :  Logonun svg formatnda olmasn ifade eder. Logonun 1:2 orannda olmas gerekmektedir.   PNG : Logonun png formatnda olmasn ifade eder. Logonun 500 X 1000 px olmas gerekmektedir. \n \n \n TR.OHVPS.DataCode.LogoTur \n FULL_LOGO   : Yaz ve ikon ekillerin bir arada olduu logo   ICON_LOGO : kon ekillerin olduu ( Sadece grsel olan-yazsz ) logo \n \n \n TR.OHVPS.DataCode.OdemeAmaci \n demenin Amacna ynelik olarak aadaki deerlerden birini alr: 01: Konut Kiras demesi 02:  yeri Kiras demesi 03: Dier Kira demesi 04: E-Ticaret demesi: Elektronik ticaret ilem amal aktarmlar 05: alan demesi: Maa, harcrah, prim gibi alan demeleri 06: Ticari deme: Ticari iletmelerin birbirlerine, kendi hesaplarna veya mterilerine demeleri, bor, ithalat, ihracat, irket satn alma, vb. kapsamnda demeler 07: Bireysel deme: zel amal (aile bireylerine, hediye, ba, bor, alveri vs.) demeler 08: Yatrm: Mevduat, menkul kymet, dviz, gayr menkul, tat, varlk alm, temett deme, tahsilat vb. gibi yatrm amal demeler 09: Finansal: Kredi, depo, repo, trev, finansal varlk alm/satm vb. demeler 10: Eitim demesi 11: Aidat demesi \n \n \n TR.OHVPS.DataCode.OdemeDurumu \n demenin durumunu gsterir. Alabilecei deerler: 01: Gerekleti (deme ilgili deme sistemine iletildi ve alc hesabna ulat.)  02: Gnderildi (deme ilgili deme sistemine iletildi ancak alc hesabna ulatna dair teyit alnmad.)lemin son durumunun teyidi iin YS sorgulama yapmaldr. 03- Gereklemedi (demenin ilgili deme sistemine iletiminde veya ilenmesi srasnda hata, zaman am, sistemin gn sonu ilemlerine balamas vb. durum olutu ve deme gereeklemedi veya iade edildi.) 04- Onayda bekliyor (deme emri alnd. oklu onay aknn tamamlanmas bekleniyor.) 05- leme Alnd ( deme emri alnd. ) YS tarafndan mteriye gsterilmeyen bir koddur. Bu kod dnldnde YS uygulamasnda HKya deme durumu 02-Gnderildi  olarak gsterilir. lemin son durumunun teyidi iin YS sorgulama yapmaldr. \n \n \n TR.OHVPS.DataCode.OdemeKaynak \n I: nternet bankaclndan gnderilen demelerde kullanlr. A: Otomatik para makineleri (ATM) ile gnderilen demelerde kullanlr. T: Telefon bankacl ile gnderilen demelerde kullanlr. K: Kiosklar araclyla gnderilen demelerde kullanlr. S: ubeden girilen demelerde kullanlr. M: Mobil uygulamadan gnderilen demelerde kullanlr. D: Yukardakiler dndaki deme kaynaklarndan gnderilen demelerde kullanlr.  O: Ak bankaclk aracl ile gnderilen demelerde kullanlr. \n \n \n TR.OHVPS.DataCode.OdemeSistemi \n lemin ynlendirildii deme Sistemine gre aadaki deerlerden birini alabilir: H: Havale F: FAST E: EFT (PS) deerlerinden birini alabilir. \n \n \n TR.OHVPS.DataCode.OhkTur \n B: Bireysel  K: Kurumsal \n \n \n TR.OHVPS.DataCode.OhkTanimTip \n TCKN: TCKN  (ohkTanimDeger N11 olarak gnderilmelidir.)  MNO:      HHSye zel bireysel veya kurum mteri numaras (OHKTanimDeger AN1..30 olarak gnderilmelidir. )   YKN:    Yabanc Kimlik Numaras (OHKTanimDeger N11 olarak gnderilmelidir.)    PNO:    Pasaport numars (ohkTanimDeger AN7..9 olarak gnderilmelidir.)    GSM:     Cep telefonu numaras (ohkTanimDeger N10 olarak gnderilmelidir.)   IBAN:   IBAN numaras (OHKTanimDeger AN26 olarak gnderilmelidir.) \n \n \n TR.OHVPS.DataCode.OlayTip \n KAYNAK_GUNCELLENDI  AYRIK_GKD_BASARILI AYRIK_GKD_BASARISIZ HHS_YOS_GUNCELLENDI \n \n \n TR.OHVPS.DataCode.YOSDurumu \n A : Ak. retim Ortamnda YSn aktif bir ekilde hizmet vermesi durumu.   G : Geici Hizmet Veremiyor. YS servislerinde teknik bir sorun olmas nedeniyle YS\'n hizmet verememesi durumu.   K: Kapal. YS\'n hizmet vermeme durumu. \n \n \n TR.OHVPS.DataCode.PSUInitiated \n E : Evet  H : Hayr   O : Olay Bildirim \n \n \n TR.OHVPS.DataCode.RizaDurumu \n B: Yetki Bekleniyor Y: Yetkilendirildi K: Yetki Kullanld E: Yetki deme Emrine Dnt S: Yetki Sonlandrld I :Yetki Iptal \n \n \n TR.OHVPS.DataCode.RizaIptDtyKod \n 01 :Yeni Rza Talebi ile ptal 02 :Kullanc stei ile HHS zerinden ptal 03 :Kullanc stei ile YS zerinden ptal 04 :Sre Am : Yetki Bekleniyor 05 :Sre Am : Yetkilendirildi 06 :Sre Am : Yetki demeye Dnmedi 07 :GKD iptali : Ayn rza no ile mkerrer arm 08 :GKD iptali : Rzano ile TCKN uyumamas 09 :GKD iptali : Uygun rn bulunmuyor 10 :GKD iptali : HHS Ak Bankaclk kanal ileme kapal 11 :GKD iptali : Hesap Yetki Sorunu 12 :GKD iptali : HK HHS kontrollerini aamad 13 :GKD iptali : HK istei ile GKDden vazgeildi 14 :GKD iptali : Fraud phesi 99 :GKD iptali : Dier \n \n \n TR.OHVPS.DataCode.RizaTip \n H: Hesap Bilgisi Rzas O: deme Emri Rzas \n \n \n TR.OHVPS.DataCode.SrlmYon \n A: Azalan deerle sralama Y: Artan deerle sralama \n \n \n TR.OHVPS.DataCode.VarYok \n 0 : Kayt Yok   1 : Kayt Var \n \n \n TR.OHVPS.DataCode.YetTip \n Alabilecei deerlere gre hangi belirtecin dneceine karar verilir. yet_kod yenileme_belirteci \n \n \n TR.OHVPS.DataCode.ZmnAralik \n 0 : Kayt Yok  1 : 0-2 saat 2 : 2 saat 1 dakika-24 saat  3 : 1-3 gn   4 : 4-15 gn\t  5 : 16 gn ve st \n EK-3: stemci Sertifikalarnn Tanm ve Ynetimi \n Tm katlmclarn GET\'e eriebilmesi iin, BKM tarafndan yaplan istemci sertifika dorulamasndan gemesi gerekmektedir. stemci sertifikas retilmeden nce katlmclarn CSR retme akn tamamlamas gerekmektedir. \n OpenSSL ile CSR (Certificate Signing Request) Oluturma \nAadaki komut ile 2048-bit RSA private key ve CSR oluturulur. \nopenssl req -new -newkey rsa:2048 -nodes -keyout PRIVATEKEY.key -out CSR.csr \n CSR ile ilgili detay bilgilerin giriinde; \nCommon Name (CN) olarak 4 karakterli hhsKod ya da yosKod deeri ile, \ndier alanlar iin de kurum bilgileriniz ile giri yaplr. \n Tm bilgilerin girilmesinden sonra oluan private key dosyas kurumunuzda saklanr.\nCSR dosyas ise istemci sertifika retmek zere kullanlr. Bu aamada takip edilmesi gereken admlar u ekildedir: \n Katlmclarn, TRIP ortam zerinden, BKM Tarafndan yetki verilmi kullanclarnn grebilecei "stemci Sertifika Talebi" men admna giri yapmalar beklenir. Alan ekranda,"CSR Dosyas Ykleme" alan ierisine, katlmcnn retmi olduu csr dosyas yklenir. Yaklak 1 dakika ierisinde kuruma zel olarak retilmi olan client sertifikas indirilmeye hazr hale gelecektir. "ndir" butonu ile client sertifika indirilir. stemci tarafnda web isteinin ilgili sertifika ile ilikilendirilerek oluturulmas gerekmektedir. \n Uzun dnemli olarak hazrlanacak olan sertifikalar sertifikasyon ve retim ortamlarnda kullanlacaktr. Sertifikalarn ilevsellii ve geerlilii bu aamalarda snanacaktr. \n GET\'in test ve retim ortamlar ayrmnda istemci sertifikalar, HHS Listeleme API eriimleri ve Sertifikasyon balantlar ekil 15-HHS/YS API Mimarisi Diagramnda resmedilmitir. \n EK-4: Sunucu Sertifikalar \n Sunucu sertifikalarnn endpoint bilgisini (Fqdn) ierecek ve global bir Certification Authority tarafndan imzalanm olarak sunulmas gerekmektedir.\nrnein; entegrasyon formu ierinde yer alan URL bilgisinin (test.xbank.com.tr) sertifika ierisinde tanml olmas ve bu sertifikann global bir CA rnein Verisign tarafndan imzalanm olarak sunulmas gerekmektedir. \n Hizmet salayc olan HHS\'ler tarafndan sunucu sertifikalar uygulanmaldr. \n EK-5: Mesaj mzalama Ak \n Dijital imzalama yaps, HVPS APIde gerekletirilen ilemlerin ve tanan verilerin btnlk ve inkr edilemezliini salamak amacyla kurgulanmtr.\nBu kapsamda imzalama ak aadaki gibi olmaldr: \n \n HHS ya da YS ncelikle zel ve ak anahtarlarn oluturmaldr. Bu anahtarlar oluturmak iin aada openssl kullanlarak oluturma rnei paylalmtr.  Bu anahtarlardan zel olan anahtar mesaj imzalamak iin kullanlacak olup, ak anahtar ise mesaj dorulamak amacyla mesajn alcs tarafndan kullanlacaktr. \n \n private_key.pem ve public_key.pem dosyasinin ierikleri kod tarafnda kullanlacaktr. \n --private.pem => zel anahtarn ismi\nopenssl genrsa -out private.pem 2048 \n --public_key.pem => Ak anahtarn ismi\nopenssl rsa -in private.pem -pubout -outform PEM -out public_key.pem \n --private_key.pem => zel anahtarn PCKS8 formatna evrilmesi (Java asndan PCKS8 formatnda olma ihtiyac nedeniyle) openssl pkcs8 -topk8 -inform PEM -in private.pem -out private_key.pem -nocrypt \n \n \n Ak ve zel anahtarlar oluturulduktan sonra Ak Anahtar BKM ile paylalr. BKM bu ak anahtar dier katlmclarn ulaabilmesi ve alabilmesi iin bir Anahtar Deposu yaklam ile bnyesinde tutar. lgili anahtar iletebilmek ve alabilmek iin kullanlacak HHS/YOS API ye eriim detaylar EK-6 blmnde detayl olarak paylalmtr.  Eer kurumun ilgili anahtar iftinin yenilenme durumu sz konusu ise yenilemenin hemen ardndan ak anahtar yeni bir imzalama yaplmadan nce mutlaka BKM ile paylalmaldr. \n \n \n mzal mesaj aacak olan kurum mesaj imzalayan kurumun ak anahtarn her sorguda yeniden almak durumunda deildir. Belirli periyodlarda kendi ortamndaki anahtar yenileyerek sistemi iletebilir. Ancak imzalayan kurum anahtar ifti yenilemesi yaptnda BKM ile ak anahtarn paylasa dahi imzal mesaj dorulayacak taraf eski ak anahtar ile dorulama yapmaya alt iin hata alacaktr. Bu ilk hata durumunda hzlca BKM zerinden yeni anahtar alp mesaj tekrar dorulamay denemelidir. Eer yine hata alyor ise dorulama ilemini hata statsne almaldr. Bu sebeple anahtar yenileyen kurum yeni ak anahtarn yeni bir mesaj imzalama yapmadan nce mutlaka BKM ile paylamaldr. \n \n \n PSU-Fraud-Check alan iin de JWT formatnda kt hazrlanmas beklenmektedir. rnek bir PSU-Fraud-Check payload deeri aadaki gibidir; \n {"AnomalyFlag": "0", \n"LastPasswordChangeFlag": "1", \n"FirstLoginFlag": "1", \n"DeviceFirstLoginFlag": "1", \n"BlacklistFlag": "0", \n"MalwareFlag": "0", \n"UnsafeAccountFlag": "0", \n"exp": 1663424479, \n"iat": 1663338079, \n"iss": "[https://apigw.bkm.com.tr|https://apigw.bkm.com.tr/]" } \n mzalama Kurallar (YS) \n Bir YS zerinden balayan ak rnek olarak paylalmtr. \n \n \n YS, mesaj imzalama gerektiren her API isteinin HTTP gvdesini (request body) kendi zel anahtar ile ifreleyerek imza bilgisini oluturur. \n \n \n Ardndan bu imza verisini, gnderecei mesajn istek balnda yer alan X-JWS-Signature alannda gndermelidir. \n \n \n X-JWS-Signature alannda gnderilecek olan bilgi aadaki yntem ile oluturulmaldr. \n \n \n Bu alana yazlacak olan bilgi JWT formatnda oluturulmaldr. \n \n \n Bir JWT, header-payload-signature alanlarndan olumaktadr. \n \n Header alannda JWTyi imzalamak iin kullanlacak algoritma belirtilmelidir.  Standartlar kapsamnda RS256 kullanlacaktr. \n Payload ksmnda zel olarak oluturulacak olan body claim alanna istek gvdesi (request body) verisinin SHA256 hash deeri karl yazlmaldr. \n JSON payload oluturulurken RFC 7519 baz alnmaldr. "iss" (Issuer) Claim, "exp" (Expiration Time) Claim, "iat" (Issued At) Claim, body Claim alanlarnn gnderilmesi zorunludur. ^RFC7519 \na.\t"iss" (Issuer) Claim : Kurumunuza zel bilgidir. \nb.\t"exp" (Expiration Time) Claim: Saniye cinsinden (Unix time) imzann son geerli olduu tarih. Bu tarih  mevcut sunucu saatinizden 60 dakika sonra olacak ekilde kullanlmaldr. \nc.\t"iat" (Issued At) Claim : Saniye cinsinden (Unix time) imzann oluturulduu tarih. Bu tarih  mevcut sunucu saatinizden 5 dakika nce olacak ekilde kullanlmaldr. \nd.\tbody Claim : istek gvdesi (request body) verisinin SHA256 hash deeri karl. \n Signature alannda da zel anahtar ile imzalanm olan imza ierii yer alacaktr. \n \n X-JWS-Signature:   JWS imzasn ieren stbilgi. Bu baln ne zaman belirtilmesi gerektii hususu ilgili endpoint iin belirtilmitir. \n rnek X-JWS-Signature Payload Deeri \n { \n"iss": "https://apigw.bkm.com.tr", \n"exp": 1646832405, \n"iat": 1646746005, \n"body": "c543072f97a761a1d891dc81acc380bc1e6f61ca6541bd93ebfdece338457922" \n} \n \n \n \n \n YS, istei gnderir. Sadece mesajn btnln ve doruluunu teyit amac ile istek gvdesi (request body) SHA256 hash deeri imzalanarak X-JWS-Signature alannda bu imza iletilir. stein gvde (request body) ksm ak ve ifresiz olarak gnderilmektedir. \n \n \n HHS, istei alr, talebi gerekletirmeden nce ald API isteklerinin imzasn dorulamaldr. X-JWS-Signature alanndaki JWT aadaki admlarla dorulanmaldr. \n \n Header ksmndaki algoritmanin RS256 olduu kontrol edilir. \n Gnderen kurumun ak anahtar ile JWT verify (dorulama) ilemi yaplr. \n Yukardaki ilemlerin doruluunun ardndan JWTnin payload ksmndaki body claim alanndaki bilginin, istein gvde verisinin SHA256 hash deerlerinin ayn olduu kontrol edilir. \n rnek checksum deeri   "a64b19f95eeb1fb0a0a3e2dbbc6e3d8472c52184d4543417ddc6d156fc5c5571" veya   "A64B19F95EEB1FB0A0A3E2DBBC6E3D8472C52184D4543417DDC6D156FC5C5571" eklinde olabilir. ki hali de ayn deere sahiptir. Kontrollerde buna dikkat edilmesi gerekmektedir. \n \n \n \n Yukardaki ilemler ile doruluu teyit edilmi olan istein talebi gerekletirir. \n \n \n Eer istek dorulanamyor ise gnderen kurumun ak ve zel anahtar ifti yenilenmi olabilir. \n \n \n BKM HHS API  zerinden ilgili kurumun bilgilerini (kurum kodu vs) kullanarak kurumun detay bilgileri eker ve kendi ortamnda yeniler. \n \n \n Ardndan imzay tekrar ak anahtar ile dorulayarak kontroller gerekletirilir. (Eer halen dorulama ilemi baarsz ise bu istek iin hata ak altrlr.  TR.OHVPS.Resource.InvalidSignature  kodu ile hata retilebilir.) \n \n \n mza bilgisinin beklendii (x-jws-signature) servislerde, bu bilginin iletilmedii durumlarda  TR.OHVPS.Resource.MissingSignature  hatas retilebilir. \n \n \n HHS istei iledikten sonra cevab olutururken de yukardaki aklar ile gnderecei cevab imzalamaldr. \n \n \n stek yant gvdesinin SHA256 checksum deeri iin hexadecimal kt kullanlacaktr. Oluacak ktnn 64 karakter olmas beklenmektedir. Kontrol iin "^[A-Fa-f0-9]{64}$" RegEx tarifini kullanabilirsiniz. \n \n \n rnek bir gvde: \n {"katilimciBlg":{"hhsKod":"8000","yosKod":"8000"},"gkd":{"yetYntm":"Y","yonAdr":"https://boss-test.bkm.com.tr/boss/ab/yosSimulator/8000?drmKod=6021de9f-55e7-454a-94be-2044866b22e1"},"kmlk":{"kmlkTur":"M","kmlkVrs":"123456","ohkTur":"B"},"hspBlg":{"iznBlg":{"iznTur":["01","02","03","04","05"],"erisimIzniSonTrh":"2022-10-12T23:59:59+03:00","hesapIslemBslZmn":"2021-10-10T00:00:00+03:00","hesapIslemBtsZmn":"2023-10-10T23:59:59+03:00"}}}\n \n Bu gvdenin checksum\': \n a64b19f95eeb1fb0a0a3e2dbbc6e3d8472c52184d4543417ddc6d156fc5c5571\n \n Bu checksum\'n iletildii x-jws-signature balk deeri: \n eyJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FwaWd3LmJrbS5jb20udHIiLCJleHAiOjE2NjU0NzU1NjIsImlhdCI6MTY2NTM4OTE2MiwiYm9keSI6ImE2NGIxOWY5NWVlYjFmYjBhMGEzZTJkYmJjNmUzZDg0NzJjNTIxODRkNDU0MzQxN2RkYzZkMTU2ZmM1YzU1NzEifQ.Q65PI_1fTEzzBMirvmJvXgVX3orhhZ4_UqujtGdHkU7me-1ymIjvPrzy3kfyER1pedFb7HDCBuPvYoqjX8eUnpiiZsxfzCiEa0McIhoFeUOggq-O8VihItp8bLr2DWwQ9JHN1-WXB2mL31KAKFAL1VY9-DXuAdT-RfE_SLYsl2ycmNy4ti4XvfDvvlE56ZsieFZ727VuwR8wi7F0kKDc6UhjaMF9xcUeAM1fxX-bmcOaOo1NZGC0vvgjNZKz_OJrN-q8VhWYnQPiJ7wY7S9IG8bHIkBImKSVf8LuOEvl8u0BZzADLH1iOBd9x2l1plyI_NLPTrnOqhWhKlljkkJBCg\n \n Eer PSU-Fraud-Check iin balk gnderilecekse, yine JWT formatnda imza retilmelidir. rnek bir psu-fraud-check balk deeri: \n eyJhbGciOiJSUzI1NiJ9.eyJBbm9tYWx5RmxhZyI6IjAiLCJMYXN0UGFzc3dvcmRDaGFuZ2VGbGFnIjoiMSIsIkZpcnN0TG9naW5GbGFnIjoiMSIsIkRldmljZUZpcnN0TG9naW5GbGFnIjoiMSIsIkJsYWNrbGlzdEZsYWciOiIwIiwiTWFsd2FyZUZsYWciOiIwIiwiVW5zYWZlQWNjb3VudEZsYWciOiIwIiwiZXhwIjoxNjY1NDc1NTU2LCJpYXQiOjE2NjUzODkxNTYsImlzcyI6Imh0dHBzOi8vYXBpZ3cuYmttLmNvbS50ciJ9.DhUh_nsXDuNIrvsQ3KOhOXdVcJg6fTDVW8K1oea8kLtmb7n-_hJHY3mWX5zzobu-Vh2VvFzIxPhHtol6gLHFktmIMiQ9TDHb_mRZFXgJB4ToNfqc3Fy9mi5bS8By2IYi1HxDaCStstaZDaunzXfHCtqybfZXyk6teDrf-iIf6lqX9Keo7GZO-Y7mP7C13-c_QwyNKrZK4TZwUQbecRqXYn1DcEHM7kukQHTar_hKBWkXPmNpScY0J2rKksr4ejR1uLhdQm-Pdwoe9y6qrNEB79vMLBkRNtbuV0vc1GYHp_YKkzBKBI_58uuB2GD9877CsrcRnHMQb88xpxiPKh6-ew\n EK-6: HHS/YS API Mimarisi \n HHS/YS API Uygulama Mimarisinde Test ve retim ortamlarnda aadaki alanda yer almaktadr. \n \n ekil 15: HHS/YS API Mimarisi \n'},{title:"Gl Kimlik Dorulama",frontmatter:{},regularPath:"/v1.1.0/contents/erisim-belirteci.html",relativePath:"v1.1.0/contents/erisim-belirteci.md",key:"v-751f6acf",path:"/v1.1.0/contents/erisim-belirteci.html",headers:[{level:2,title:"Yetkilendirme Kodu API",slug:"yetkilendirme-kodu-api"},{level:2,title:"Eriim Belirteci API",slug:"erisim-belirteci-api"}],content:' Gl Kimlik Dorulama  \n \n HK\'nn YS uygulamasndan HHS uygulamasna ynlendirilmesi ile balanan gl kimlik dorulama sreci,  Oauth 2.0 standartlar gerei ncelikle yetkod deerinin YS\'e iletilmesi ile balar ve eriim belirtecinin alnmas sonucunda baar ile sonulanm olur. \n Gl Kimlik Dorulama iin Eriim Adresleri (Endpoints) \n Etki Alan (Scope) =hesap_bilgisi  "odeme_emri" \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu (Z)/ stee Bal() \n Yetkilendirme Tr \n mzalama \n Parametre \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n yetkilendirme-kodu \n GET \n /yetkilendirme-kodu \n Z \n stemci Kimlik Bilgileri \n mzal Yant \n \n \n yetkilendirmeKodu \n \n \n 2 \n erisim-belirteci \n POST \n /erisim-belirteci \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n ErisimBelirteciIstegi \n ErisimBelirteci \n Yetkilendirme Kodu API \n GET /yetkilendirme-kodu \n Ayrk GKD srecinde kullanlacak olan Yetkilendirme Kodu API\'nin  HHS tarafndan sunulmas gerekmektedir. \n Ayrk GKD aknda; HHS, YS\'n olay dinleme servisine "AYRIK_GKD_BASARILI" olay tipi ile olay bildirimi yapar. Bylece HK\'nn kendi sistemine baar ile login olduunu ve yetKod deerinin HK ile ilikilendirildiinin bilgisini YS\'e iletmi olur.  \nHHS olay bildirimi iin retry policy sreleri kapsamnda 1 dakikada 3 kez deneme yapabilir. YS\'e olay bildirimi yaplmam ise, kendisine gelmeyen olay bildirimi iin yetkod\'un geerli olduu 5 dakika boyunca yetkilendirme-kodu endpointi ile sorgulama yaparak yetkod deerini alabilir. \n YS, "ODEME_EMRI_RIZASI" kayna iin bildirim yapld ise; GET /yetkilendirme-kodu endpointi ile yetkod sorgusu yaplr. \nrnek arm :\n GET /yetkilendirme-kodu?rizaNo=123&rizaTip=O \n YS, "HESAP_BILGISI_RIZASI" kayna iin bildirim yapld ise; GET /yetkilendirme-kodu endpointi ile yetkod sorgusu yaplr. \nrnek arm :\n GET /yetkilendirme-kodu?rizaNo=123&rizaTip=H \n STEK: \n YS, rza numarasn ve istein BH ya da HBH olmasna gre deien rza tipini parametre olarak istek talebine ekler. Rza tipinin alabilecei deerler  TR.OHVPS.DataCode.RizaTip  sral veri tiplerinde belirtilmitir. \n HHS\'nin, yetkilendirme yntemi "Ayrk Gkd" ise  rza numaras ile yetki kodu deerini dnmesi beklenmektedir. Ynlendirmeli GKD iin bu endpoint "yetKod" deerini dnmemelidir. Ynlendirmeli GKDye ait bir rza no ile yetkilendirme kodu API kullanlarak yet_kod alnmak istendiinde HHS tarafndan  TR.OHVPS.Resource.NotFound  hatas verilmelidir. \n YANIT: \n HHS yant nesnesi ierisinde, HK\'ya ait yetki kodunu, rza no ve rza durumu ile birlikte YS\'e iletir. \n \n \n \n Alan Ad \n JSON Alan Ad \n Format:Veri modeli smi \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Yetkilendirme Kodu \n yetkilendirmeKodu \n AN1..128 \n Z \n Rza nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Yetki Kodu \n yetKod \n AN1..255 \n Z \n GKD srecinde retilen yetkilendirme kodudur. Tek kullanmlk olup, ayn yetKod ile birden fazla token alnamaz. yetKod Parametresinin yaam mr 5 dakika olmaldr. \n \n \n > RzaNo \n rizaNo \n AN1..128 \n Z \n Rza nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n \n Ayrk GKD srecinde, yetkod deerini alan YS; eriim belirteci API ile GKD srecini tamamlar. \n Eriim Belirteci API \n POST /erisim-belirteci \n STEK: \n YS erisim-belirteci eriim adresini 2 amala kullanr: \n \n \n Bir nceki admdan ald rizaNo, rizaTip (deme emri balatma hizmetinde O, hesap bilgisi hizmetinde H) ve GKD sonras dnlen yetKod bilgilerini kullanarak HHS nezdinde ErisimBelirteci nesnesi oluturmak zere istekte bulunur. YSn istekte bulunabilmesi iin GKD admnn baarl bir ekilde tamamlanmas rizaDrm bilgisinin yetkilendirildi olmas gerekir. Eriim Belirteci nesnesi ile rzas nesnesi (deme Emri Rzas veya Hesap Bilgisi Rzas) arasndaki iliki rza numaras zerinden salanr. \n \n \n Ald eriim belirtecinin Geerlilik Sresinin dolduu durumda, yenileme belirteci karlnda yeni bir eriim belirteci almas gerekmektedir. \n \n \n POST /erisim-belirteci isteinin (REQUEST) gvdesinde (BODY)  ErisimBelirteciIstegi nesnesi (Tablo-23) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda ErisimBelirteci nesnesi (Tablo 24) oluturulur veya (Yenileme Belirteci iin) gncellenir. Rza durumu Yetki Kullanld olarak gncellenir. \n Eriim Belirteci POST ilemi sonucunda HTTP 200 dnlmesi gerekmektedir. \n ErisimBelirteciIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format:Veri modeli smi \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n RzaNo \n rizaNo \n AN1..128 \n Z \n Rza nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n Rza Tipi \n rizaTip \n AN1 \n Z \n O veya H (TR.OHVPS.DataCode.RizaTip) \n \n \n Yetki Tipi \n yetTip \n AN1..50 \n Z \n yet_kod yada yenileme_belirteci deerini alabilir.  (TR.OHVPS.DataCode.YetTip) \n \n \n Yetki Kodu \n yetKod \n AN1..255 \n K \n GKD ileminden dnen yetkilendirme kodudur. Tek kullanmlk olup, ayn yetKod ile birden fazla token alnamaz. yetKod Parametresinin yaam mr 5 dakika olmaldr. yetTip = yet_kod ise zorunludur. \n \n \n Yenilenme Belirteci \n yenilemeBelirteci \n AN1..4096 \n K \n Eriim belirtecinin yenilenmesi amacyla kullanlr. yetTip = yenileme_belirteci ise kullanm zorunludur. \n \n \n \n BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan erisimBelirteci nesnesinde bulunan eriim belirteci deeri deme emrinin balatlmas esnasnda kullanlr. \n "ErisimBelirteci" nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format:Veri modeli smi \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Eriim Belirteci \n erisimBelirteci \n AN1..4096 \n Z \n Yetkilendirme Kodu karlnda HHS tarafndan dnlen ve sonraki hesap bilgisi ve deme emri servislerine eriimde kullanlan bilgidir. Blm 3.6 Karakter Kodlama   blmnde aklanan karakter formatnda gnderilmesi beklenmektedir. Yenileme belirteci ile birden fazla eriim belirteci alnmas durumunda verilen tm eriim belirtelerinin sreleri bitene kadar geerli olmaldr. \n \n \n Geerlilik Sresi \n gecerlilikSuresi \n N1..9 \n Z \n Eriim Belirtecini saniye cinsinden geerlilik sresidir.  Eriim belirteci geerli olduu son tarih ; Hesap Bilgisi Rzas iin en fazla 30 gn en az ise 1 gn olmaldr.  Eriimin Geerli Olduu Son Tarih(erisimIzniSonTrh); Eriim Belirteci Geerlilik Sresi\'nden kk ise Eriimin Geerli Olduu Son Tarih deeri ile snrldr. deme Emri Rzas iin 5 dakika olmaldr. \n \n \n Yenileme Belirteci \n yenilemeBelirteci \n AN1..4096 \n Z \n Eriim belirtecinin yenilenmesi amacyla kullanlr.   Blm 3.6 Karakter Kodlama  blmnde aklanan karakter formatnda gnderilmesi beklenmektedir.  Yenileme Belirteci ile Eriim Belirteci istei yapldnda HHS\'nin dnd yant ierisindeki yenilemeBelirteci deerini kesinlikle deitirmemesi gerekmektedir.Yenileme belirteci rza sresi boyunca gncellenmemelidir. \n \n \n Yenileme Belirteci Geerlik Sresi \n yenilemeBelirteciGecerlilikSuresi \n N1..9 \n Z \n Yenileme belirtecinin saniye cinsinden geerlilik sresidir. Yenileme belirtecinin geerli olduu son tarih ; Hesap Bilgisi iin Eriimin Geerli Olduu Son Tarih ile snrl olmaldr. Bu tarih geldii zaman Hesap Bilgisi Rza Durumunu Yetki Sonlandrld statsne ekilmesi gerekir. deme Balatma iin Rza Oluturma Zamanndan 15 gn sonras olmaldr. 15 gn sresi sorgulama servislerinin armn destekleyecek ekilde uzun tutulmutur. leri vadeli ilemler bu kapsamda deildir.  deme emri 5 dakika iinde gerekletirilmelidir. Gereklemediinde 4.2.8 blmnde aktarlan rza stat gncellemesi yaplmaldr. \n \n \n \n erisim-belirteci erisim noktasndan elde edilen erisimBelirteci, ilikilendirildii nesne veya ilem iin gnderilen POST istei balnda x-access-token alannda iletilir. \n Yenilenme Belirteci (refreshToken) kullanlarak Eriim Belirteci (accessToken) alndnda, dnen yanttaki Yenileme Belirteci Geerlik Sresi (yenilemeBelirteciGecerlilikSuresi) geen sre eksiltilerek, kalan zamann saniye cinsinden hesaplanmasyla iletilmelidir. \n Eriim Belirteci API arm srasnda rza durumlar kontrol edilmelidir. Bu kontrollerin nasl yaplmas gerektii 4-Rza Durumlar blmnde aktarlmtr. \n Yenileme belirteci karlnda yeni bir eriim belirteci alnmas srasnda HHS\'nin dnd hata yantnda httpCode = 401 ve errorCode = "TR.OHVPS.Connection.InvalidToken" gelirse YS nce rzann durumu sorgulamaldr.  \nEer geerli bir rza ise; HHS veya YS tarafnda bir sorun olduu anlalmaldr. Sistem tarafndan hata retilmeli ve sorun incelenmelidir. \nEer geerli bir rza deil ise YS tarafndaki rza durumu gncellenmelidir. \n'},{title:"5.\tGl Kimlik Dorulama",frontmatter:{},regularPath:"/v1.1.0/contents/gkd.html",relativePath:"v1.1.0/contents/gkd.md",key:"v-8d4168c6",path:"/v1.1.0/contents/gkd.html",headers:[{level:2,title:"5.1.\tYnlendirmeli Gl Kimlik Dorulama",slug:"_5-1-yonlendirmeli-guclu-kimlik-dogrulama"},{level:2,title:"5.2.\tAyrk Gl Kimlik Dorulama",slug:"_5-2-ayrk-guclu-kimlik-dogrulama"},{level:3,title:"5.2.1\tStatik Model",slug:"_5-2-1statik-model"},{level:2,title:"5.3.\tYnlendirme/Bildirim Adresleri ve Durum Kodu Parametresi",slug:"_5-3-yonlendirme-bildirim-adresleri-ve-durum-kodu-parametresi"},{level:2,title:"5.4  Gl Kimlik Dorulama Kontrolleri",slug:"_5-4-guclu-kimlik-dogrulama-kontrolleri"}],content:" 5.\tGl Kimlik Dorulama \n Mteri iin gl kimlik dorulama, HKnn (mterinin) kimliinin dorulamada kullanlan ve bir bileenin ele geirilmesinin dier bileenin gvenliini tehlikeye atmayaca en az iki bileenden oluan, bu iki bileenin de mterinin bildii, sahip olduu veya biyometrik bir karakteristii olan bileen snflarndan farkl ikisine ait olacak ekilde seildii yntemi tanmlar. \n deme ve Elektronik Para Kurulularnn Bilgi Sistemleri ile deme Hizmeti Salayclarnn deme Hizmetleri Alanndaki Veri Paylam Servislerine likin Tebli uyarnca hesap bilgisi hizmetinde mterinin onaynn alnmas esnasnda ve deme emri balatma hizmetinde her bir deme emri balatma ileminde  HHS tarafndan mteriye gl kimlik dorulama (GKD) uygulanmas esastr.  Buna gre: \n \n \n Hesap bilgisi hizmetinde HKnn onaynn alnmas esnasnda  Tebliin 26 nc maddesinin 1 inci fkras uyarnca  HHS tarafndan HKya GKD uygulanr. \n \n \n deme emri balatma hizmetinde,  Tebliin 26 nc maddesinin 2 nci fkras uyarnca  HHS tarafndan HKya gl kimlik dorulama uygulanr ve ilem dorulama kodu ile HKnn onay alnr. \n \n \n deme emri balatma hizmetinde,  Tebliin 26 nc maddesinin 3 nci fkras uyarnca  HHS tarafndan HKya gl kimlik dorulama uygulanmasna ilikin istisna veya ilave gvenlik nlemleri ibu API lke ve Kurallar belgesinde tanmlanr. \n \n \n HHS, gl kimlik dorulama srecinde HKnin sahip olduu bileen snf olarak SMS OTP ya da SMS ile ilem dorulama kodu kullanabilir. \n \n \n HHS, aadaki hallerde veya  Tebliin 10 uncu maddesinin ikinci fkrasnda  belirtilen risk deerlendirmesi sonucuna gre tek bileen ile kimlik dorulama yapabilir. \n \n demenin gndereni ve alcsnn ayn olmas, \n Daha nce tanmlanm gvenli alclar listesine deme yaplmas, \n HKnin talimatna istinaden gerekletirilen dzenli bir deme olmas. \n \n \n \n Tek bileen ile kimlik dorulama yaplan bu ilemlerle ilgili olarak gerekletirilen ilemin mteri tarafndan yapldn ispat etme ykmll HHSye ait olur. \n \n \n lem Dorulamada  Tebliin 3 nc maddesinin birinci fkras  bendindeki  ilem bilgisi tanmna uygun olarak aadaki bilgiler ile  Tebliin 3 nc maddesinin birinci fkras hh bendinde  tanmlanan ileme zel retilmi ilem dorulama kodu birlikte kullanlr. \n \n Alc Unvan (Kolas aknda maskeli olarak)  (deme emri balatma hizmeti) \n Tutar (deme emri balatma hizmeti) \n Referans bilgisi (8 karakterden kk ise alann tm deeri, byk ise ilk 4 ve son 4 hanesi) \n \n leme ait yukardaki bilgilerden en az biri deitii zaman  Tebliin 3 nc maddesinin birinci fkras hh bendinde  belirtildii gibi yeni bir ilem dorulama kodu retilecek ekilde ak kurgulanmaldr. \n \n \n lem dorulama kodunun gnderilmesinden HHS sorumludur. HHS,  Tebliin 10 uncu maddesinin ikinci fkrasnda  belirtilen risk deerlendirmesi sonucuna gre ilem dorulama kodu kullanmakszn HKnn onayn alabilir. lem dorulama kodu kullanlmayan ilemlerle ilgili olarak gerekletirilen ilemin HK tarafndan yapldn ispat etme ykmll HHSye aittir. \n \n \n HVPS API lke ve Kurallar kapsamnda iki adet Gl Kimlik Dorulama (GKD) yntemi kullanlacaktr: \n \n Ynlendirmeli (Redirect) GKD Yntemi \n Ayrk (Decoupled) GKD Yntemi \n \n \n \n HHS asgari olarak tarayc tabanl Ynlendirmeli GKD yntemini desteklemek zorundadr. \n \n \n HHSnin mobil uygulamasnn bulunmas durumunda tarayc tabanl ynlendirmenin yannda uygulama tabanl ynlendirme yapmas zorunludur. Uygulama sahiplerinin uygulama tabanl ynlendirme iin uyumlanma son tarihleri 1 Ekim 2023tr. \n 5.1.\tYnlendirmeli Gl Kimlik Dorulama \n Ynlendirmeli GKD Ynteminde, mteri kimlik dorulama iin YS tarafndan HHS arayzne ynlendirilir. \n Mteri HHSye (uygulama veya web arayz vastasyla) ynlendirildikten sonra mterinin gl kimlik dorulamas adm adm ve dorudan HHS ile mteri arasnda yrtlr. GKDnin tamamlanmasndan sonra mteri tekrar YS uygulamasna ynlendirilir. \n Ynlendirmeli GKD Yntemi iin st dzey rnek i ak aadaki admlardan oluur: \n \n YS, GKD iin HHS tarafndan tanmlanan arayze (tarayc ya da uygulama) ynlendirme yapar. \n Mteri, YS arayznden ayrlr, ynlendirildii HHS arayz zerinde kimlik dorulama ilemlerini gerekletirir. \n GKD tamamlandktan sonra mteri, YS arayzne tekrar ynlendirilir ve ilem sonucu grntlenir. \n \n Ynlendirmeli GKD iin temel gereklilikler unlardr: \n \n deme hizmeti (hesap bilgisi veya deme emri balatma hizmeti) tarayc ya da uygulama tabanl bir ekilde sunulabilir. Bu nedenle,  YS ve HHSlerin Ynlendirmeli GKD iin asgari olarak tarayc tabanl ynlendirme akn desteklemeleri gerekmektedir. \n \n Tarayc Tabanl Ynlendirme \n Ynlendirmeli GKD Ynteminde; rza isteine baarl yant alndktan sonra, HK, kimlik dorulama iin YS tarafndan HHS arayzne ynlendirilir.\nYS, ynlendirme akn kendi sunucusundan karlayaca bir istek ile balatmaldr. YS web arayzndeki bu yap, 302 yant kodu ve yant balndaki Location deeri ile HK taraycsn HHS adresine ynlendirmelidir. Bu sayede GKD, HHS tarafnda balayabilir. \n YS tarafndaki ynlendirme servisi iin rnek response; \n HTTP/1.1 302 Found\nLocation: {{hhsYonAdr}}\n \n HK, HHSye (uygulama veya web arayz vastasyla) ynlendirildikten sonra HK'nin gl kimlik dorulamas HHS ile HK arasnda yrtlr. GKDnin tamamlanmasndan sonra HK tekrar YS uygulamasna ynlendirilir. \n HHS, ynlendirme akn kendi sunucusundan karlayaca bir istek ile balatmaldr. HHS web arayzndeki bu yap, HK'nin oturumunu gvenli bir ekilde kapatmaldr. Ardndan 302 yant kodu ve yant balndaki Location deeri ile HK taraycsn YS adresine ynlendirmelidir. \n HTTP/1.1 302 Found\nLocation: {{yosYonAdr}}&rizaDrm=Y&yetKod=xx&rizaNo=yy&rizaTip=O\n \n HHSnin web arayzne, \n \n HHSnin mobil uygulamasnn olmad, \n HKnn deme hizmetini (hesap bilgisi veya deme emri balatma hizmeti) sunduu mobil cihazda HHS uygulamasnn ykl olmad, \ndurumlarda ynlendirme yaplr. \n \n YSn mobil uygulamas varsa mobil cihazda uygulamadan taraycya, YSn mobil uygulamas yoksa deme hizmetinin sunduu cihazda (Kiisel Bilgisayar veya Mobil Cihaz) tarayc zerinden ynlendirme yaplr. \n Uygulama Tabanl Ynlendirme \n HKnn deme hizmetini (hesap bilgisi veya deme emri balatma hizmeti) YSn mobil uygulamas ile kullanyorsa, ayn mobil cihazda HHSnin mobil uygulamasnn yklenmi olmas durumunda, HK dorulamasnn HHS mobil uygulamas tarafndan yaplmas iin uygulama tabanl ynlendirme yaplr. Bylece HK, deme hizmetine eriim iin HHSnin mobil kanalna eriim srasnda kulland dorulama yntemini ile dorulanabilir. \n HHS'nin mobil uygulamas olmas durumunda hhsYonAdr olarak universal link kullanmas gerekmektedir. \n Tablo 5: Ynlendirmeli Gl Kimlik Dorulama Kanallar \n \n \n \n Dorulama Yntemi \n YS Olas Ortam \n HHS Olas Ortam \n \n \n \n \n Tarayc Tabanl Ynlendirme \n Kiisel Bilgisayar (masast, dizst)/Mobil Cihaz \n Kiisel Bilgisayar (masast, dizst) / Mobil Cihaz \n \n \n Uygulama Tabanl Ynlendirme \n Mobil Cihaz \n Mobil Cihaz \n 5.2.\tAyrk Gl Kimlik Dorulama \n Ayrk Gl Kimlik Dorulama, bir kullancnn kimliinin, bir ilem balatldktan sonra ayr bir ekilde doruland ynteme verilen addr. Bu GKD modelinde, kimlik dorulama ilem srecinden \"ayrtrlmtr\". Kullanclar, baka bir arayze ynlendirilmek yerine ( tarayc veya uygulama tabanl ynlendirme gibi), ayr bir kanal zerinden (telefonlarnda bir uygulama bildirimi gibi) ilemi dorulamalar iin bildirim alr.\nKullanc, ilemi tamamen ayr bir cihaz veya uygulama kullanarak dorulayabilir. \n lk fazda Ayrk GKD'de QRl modeller kullanlmayacaktr. \n Ayrk GKD uygulamalarnn farkl rnekleri bulunmaktadr. Ancak yaygn olan yaklam, bir web arayz ve bir mobil uygulamann kombinasyonunu kullanmay ierir. \n Mobil uygulamas bulunan HHS'ler iin Ayrk GKD desteklenmesi zorunludur.  HHSnin web olduu durumda Ayrk GKD ak uygulanmayacaktr. Mobil uygulamas bulunup mteri zelinde mobil aktiflik kontrol sreci HHS inisiyatifindedir. Ayrk GKD srecinde HHS tarafnda sadece mobil uygulama zerinden GKD yaplmaldr. HKnn web uygulamasna ynlendirme yapmamas gerekmektedir. \n YS rolnde Ayrk GKD aknn HKya sorularak balatlmasna gerek bulunmamakla beraber bu bilginin HKya sorulmas YS inisiyatifindedir. YS olarak, Ayrk GKD i aklar kapsamnda HKya ayrk GKD ncesi HHS mobil uygulamasnn varl sorularak (bildirim ayarlarnn ak olmas gerektii bilgisi de verilebilir) ilerlenebilir. Ayn zamanda Ayrk GKD ile rza srecinin balatlmas zorunlu deildir. Rza sreci balatlrken yetkilendirme yntemi YS inisiyatifindedir. \n rnek bir ak u ekildedir: \n \n lem Balatma (YS Web/Mobil Arayz):  HK bir ilemi YSn web/mobil arayznde balatr. YS uygulamas, HK'nn tekil bir kullanc kimliini rzaya ekleyerek bir rza balatma ilemini HHSye iletir. HHS, tekil kullanc kimliini kullanarak HK'nn mobil uygulamasna bir bildirim gnderir. \n Kimlik Dorulama stei (HHS Mobil Uygulama):  HK Mobil uygulama bildirimi alr ve mobil uygulama HK'ya  kimlik dorulama istei sunar. HHSnin BDDK tarafndan belirlenmi GKD yntemlerine uygun davranmas beklenmektedir. \n Kimlik Dorulama Onay (HHS Mobil Uygulama):  Mobil uygulama, HKnn kimlik dorulama giriimini dorular. Baarl olursa rza onay sonras mobil uygulama, 'Ayrk Yetkilendirme Baarl' olay bildirimini YSe gnderir. \n lem Onay (YS Web/Mobil Arayz):  YS,  HHS'den gelen 'Ayrk Yetkilendirme Baarl' olay bildirimine konu olan rzay kullanarak yetkilendirme koduna eriir. Bundan sonraki sre eriim belirteci alnmas servisi ile devam eder. \n \n Ayrk Gl Kimlik Dorulamann Olay Bildirim Servisleri ile olan Bamllklar \n Ayrk GKD srecinde; HHS'nin yetkilendirme kodunu YS'e iletmesi iin gerekli nkoul olan HK dorulamas admnn tamamlanmasn olay bildirimi ile YS'e yapmas gerekmektedir.\nBu nedenle YS'lerin eer Ayrk GKD srecini destekleyecek ise;  /olay-dinleme endpointini aarak olay bildirimi almas zorunludur. \n zetle: \n Ynlendirmeli GKD \n \n HHS mobil uygulamas olmas durumunda ynlendirme adresi olarak universalLink kullanmal. \n Bu link tanm  uygulama var ise uygulamay a yoksa webden devam et eklinde olmal. \n YSn mobilden mi webden mi geldii HHS asndan nemli deildir. HHS olarak YS hangi adresi yonAdr deerinde gndermi ise yetkilendirme sreci bittiinde o adrese ynlendirme yaplmaldr. \n \n Ayrk GKD \n \n Mobil uygulamas bulunan HHS'ler iin Ayrk GKD desteklenmesi zorunludur. HHSnin web olduu durumda Ayrk GKD ak uygulanmayacaktr. Mobil uygulamas bulunup mteri zelinde mobil aktiflik kontrol sreci HHS inisiyatifindedir. Ayrk GKD srecinde HHS tarafnda sadece mobil uygulama zerinden GKD yaplmaldr. HKnn web uygulamasna ynlendirme yapmamas gerekmektedir. \n HKnin Mobil uygulamasnn olmadn tespit edebildiiniz her durum iin rza oluturma aamasnda TR.OHVPS.Business.CustomerMobileApplicationNotFound hatas dlr. \n HHS, HKnn mobil uygulamasnn bulunmad bilgisine ulaamazsa kendisinin belirleyecei bildirim yntemlerinden biri ile HKye bilgilendirme yapar. Bildirim yntemi SMS ise HKya mobil uygulamasn atracak ekilde adres iletir, Web uygulamay atracak bir link iletilmemelidir. HK bu bildirimi dikkate almazsa/alamazsa veya HKda mobil uygulama yok ise bu durumda rza sre amndan iptal olur. \n HK mevcut bankaclk ilemlerinde bildirimi nasl gnderiyorsanz (rnein: Anlk bildirim gnderildi, alnmad, SMSe dnld gibi.) ayn ekilde bildirim gndererek HKnin uygulama zerinden rzay onaylamas beklenir. Buradaki ak HHSnin dier rnleri iin verdii mteri deneyimi ile paralel olmaldr. \n 5.2.1\tStatik Model \n YS'n HK'y tand ve HK'ya ait tanmlayc bilgileri HHS'ye aktarabildii durumda kullanlmaktadr. Buradaki HK'ya ait tanmlayc bilgiler TCKN, MNO , YKN, PNO, GSM, IBAN olarak belirlenmitir. \n Ak aadaki gibi kurgulanmtr: \n   \n \n \n HK, YS uygulamas zerinde ilem balatr. \n \n \n HK, YS uygulamas ierisinde, farkl bir ortam zerinden HHS dorulamasn gerekletirmek istediini belirtir. HK'y tanma tip ve deerleri YS HK'dan talep edebilecei gibi, YS sisteminde hali hazrda kaytl bilgilerle de ak devam ettirebilir.  \n \n \n HK, YS'n mterisi ve YS uygulamasna login ise tek seferlik deme ak balatamaz. \n \n \n YS tarafndan balatlan tek seferlik bir deme ileminin Ayrk GKD ile onaylanaca durumda;\nYSn ilgili kullancya ait HK Tanm Deer verisinin yannda ileme ait ve ilgili HK ile eletirilmi olan  ve sadece YS ile HKnn bilebilecei bir deerin daha HK tarafndan salanmas ve YS tarafndan kontrol edilerek eleen deme emrinin HHSye iletilmesi gerekmektedir. rnein; bu deer YS tarafnda yaplan tek seferlik deme ilemine ait fatura numaras. \n \n \n YS nyzde HK'dan ald ohkTanimTip ve ohkTanimDeger deerlerini kimlik tr ve kimlik deeri alanlarna atamamaldr. \n \n \n YS, ayrk GKD ile ilem balatabilecei HHS'lerin listesini HHS API'de yer alan \"ayrikGKD\"=\"E\" parametresi ile alabilir. \n \n \n YS, HK bilgileri ile rza oluturur. Rza nesnesi ierisinde yer alan GKD nesnesinde ilgili parametreler aadaki ekilde doldurulur: \n \n \n ohkTanimTip ve ohkTanimDeger parametreleri \nBu metodda; ayrikGkd nesnesi ierisindeki \"ohkTanimTip\" parametresi TR.OHVPS.DataCode.ohkTanimTip sral veri tiplerinden TCKN, MNO , YKN, PNO, GSM, IBAN deerlerinden birini alabilir. ohkTanimDeger parametresi de seilen tipe ait HK'ya ait deeri iermelidir.Rza balatma ak ierisinde kimlik bilgisinin olduu durumlarda; HK'ya ait kimlik verisi(kmlk.kmlkVrs) ile ayrk GKD ierisinde yer alan OHK Tanm Deer alan (ayrikGkd.ohkTanimDeger) birebir ayn olmaldr.Kimlik alan iermeyen tek seferlik deme emri aklarnda bu kural geerli deildir. GSM ve IBAN deerleri sadece tek seferlik demelerde kullanlabilir. \n YS'ten ohkTanimTip olarak gelen IBAN bilgisi sadece HK'y tanmak iin kullanlabilir. Tanm tipi IBAN ile balatlan bir ilemde HK, baka bir IBAN ile deme balatabilir. \n Kurumsal mteriler iin kmlkTur ve kmlkVrs alanlar ohkTanimTip ve ohkTanimDeger alanlarnda gnderilmelidir. \n \n \n yetYntm parametresi \nyetYntm parametresi  Ayrk GKD  akn ifade eden \"A\" deerini almaldr.  \n \n \n \n \n rnek bir istek : \nPOST/ohvps/obh/s1.1/odeme-emri-rizasi \n RizaNesnesi \n {\n...\n  \"gkd\": {\n    \"yetYntm\": \"A\",\n     \"ayrikGkd\" :{\n         \"ohkTanimTip\" : \"TCKN\" \n         \"ohkTanimDeger\": \"11232123212\"\n     }    \n  },\n...\n}\n \n \n \n YS, ayrk GKD ile ilem balatabilecei HHS'lerin listesini HHS API'de yer alan \"ayrikGKD\"=\"E\" parametresi ile alabilir.\nYS, ayrk GKD desteklemeyen HHS'ye Ayrk GKD yntemiyle rza balatma istei yapmas durumunda HHS tarafndan  TR.OHVPS.Business.DecoupledAuthenticationNotSupported  hatas iletilmelidir. YS ilgili ilemi Ynlendirmeli aka ekip sreci ilerletebilir. \n \n \n HHS tarafnda HK'nn mobil uygulamas bulunmamas durumu tespit edilebildii durumda Ayrk GKD ile balatlan rza aklarnda hata mesaj vermelidir. HHS tarafndan  TR.OHVPS.Business.CustomerMobileApplicationNotFound  hatas iletilmelidir. YS ilgili ilemi Ynlendirmeli aka ekip sreci ilerletebilir. HHS, HKnn mobil uygulamasnn bulunmad bilgisine ulaamazsa kendisinin belirleyecei bildirim yntemlerinden biri ile HKye bilgilendirme yapar. Bildirim yntemi SMS ise HKya mobil uygulamasn atracak ekilde adres iletir, Web uygulamay atracak bir link iletilmemelidir. \n \n \n HHS, YS'n AYRIK_GKD_BASARILI ve AYRIK_GKD_BASARISIZ olay tipleri iin olay aboneliinin varln kontrol eder.  YS iki olay tipine de abone olmak zorundadr. Eer olay abonelii yoksa HHS tarafndan  TR.OHVPS.Business.EventSubscriptionNotFound  hata kodu iletilmelidir. \n \n \n HHS \"gkd\" nesnesi iin alan kontrollerini gerekletirir.   \"yetYntm\" = \"A\" gnderilmi ise \"ayrikGkd\" nesnesinin dolu gnderilmesi zorunludur. Gnderilmemesi durumunda HHS tarafndan  TR.OHVPS.Resource.InvalidFormat  hata kodu iletilmelidir. \n \n \n Rza balatma ak ierisinde kimlik bilgisinin olduu durumlarda; HK'ya ait kimlik verisi(kmlk.kmlkVrs) ile ayrk GKD ierisinde yer alan OHK Tanm Deer alan (ayrikGkd.ohkTanimDeger) birebir ayn olmaldr. Ayn olmad durumda HHS tarafndan  TR.OHVPS.Business.CustomerInfoMismatch  hatas iletilmelidir.\nKimlik alan iermeyen tek seferlik deme emri aklarnda bu kural geerli deildir. GSM ve IBAN deerleri sadece tek seferlik demelerde kullanlabilir. \n \n \n Tek seferlik deme ilemlerinde \"ohkTanimTip\" = \"GSM\"/\"IBAN\" olarak gnderilmi ise, HHS sisteminde bu GSM/IBAN ile eleen mterileri taramaldr. GSM/IBAN bilgisi HK baznda tekil bir kullancya eriim imkan salamaz ise  TR.OHVPS.Business.InvalidCustomerInfo  hatasn iletmelidir. \n \n \n Kontrollerin baarl olmas durumunda HHS rzay oluturur ve HK tekil verisi ile ulat HK'ya bilgilendirme mesaj gnderir.      Bilgilendirme mesaj ksa mesaj ya da anlk bildirim mesaj olabilir. HKnn birden fazla cihazda aktivasyonu varsa HHSnin i srelerine gre mevcut durumda nasl bir bildirim sreci iletiliyorsa ayn ekilde ilerlenebilir.  \n \n \n Kurumsal mteriler iin, hangi kullacya bildirim gitmesi isteniyor ise, rza aamasnda o kii ayrikGkd nesnesinde gnderilir. HHS'nin rza ierisindeki ohkTur deerine gre,  gelen bildirime verilen cevaba uygun uygulamasn amaldr. Kurumsal HK iin rza geldi ise, kurumsal giri sayfas; bireysel HK iin rza geldi ise bireysel giri sayfas mterinin nne almaldr ve ilgili hesaplara eriime izin vermelidir. \n \n \n HK'ya bir bildirim gelmemesi durumunda, HHS kendi sisteminde GKD srecine devam edemez. 5 dakika sonunda rza durumu Yetki Bekleniyor'dan Rza ptal / Sre Am (ptal kod 04) durumuna eker. \n \n \n \n \n HK, HHS sisteminden gelen bildirim mesajn alr. HHS sistemine login olduktan sonra ileme onay verilmezse veya GKD kontrolleri baarsz olursa HHS Olay Bildirim servisleri aracl ile GKD srecinin sonlandn YS'e iletir. Olay tipi \"AYRIK_GKD_BASARISIZ\" olacak ekilde bir POST /olay-dinleme servis ars yaplr.YS kendisine gelen olay bildirimi ile\nrza sorgulamas yaparak iptal detay kodunu renebilir. \n \n \n HK, HHS sisteminde login olduktan sonra ileme onay verirse; HHS tarafndan rza ile ilikili yetkod deeri retilir.HHS, YS'e HK iin \"yetkod\" deeri retildiinin bilgisini Olay Bildirim servisleri aracl ile iletir. Olay tipi \"AYRIK_GKD_BASARILI\" olacak ekilde bir POST /olay-dinleme servis ars yaplr. \n \n \n YS kendisine gelen olay bildirimi ile \"yetkod\" deerinin HHS'de retildiinin bilgisini alr. \"yetkod\" deerini renebilmek iin HHS'yi sorgulamas gerekmektedir.  \nHHS'nin aaca   GET /yetkilendirme-kodu endpointi   ile bu bilgiye eriebilir. \n \n \n YS, \"yetkod\" ile POST /erisim-belirteci endpointinden eriim belirteci alr. Bylelikle HK'nn Ayrk GKD sreci tamamlanm olur. \n 5.3.\tYnlendirme/Bildirim Adresleri ve Durum Kodu Parametresi \n CSRF Ataklarndan korunmak iin ve YS uygulamasnn bir nceki durumunu restore edebilmesi iin; YS tarafndan iletilen ynlendirme ve bildirim adreslerine , Oauth2 standartlarndaki state parametresine edeer,   durum kodu (drmKod)  parametresinin eklenmesi gerekmektedir. Durum kodu parametresi YS tarafndan retilen, tekil ve kolay tahmin edilemeyen bir deer olmaldr. Rza istei gnderimi aamasnda oluturulmaldr. YS uygulamasnda uygun bir yerde saklanmaldr (cookie, session, local storage gibi) . \n Durum kodu, rza isteindeki ynlendirme adresine parametre olarak eklenir.  GKD sreci sonrasnda yetki kodu ile birlikte bu bilgi, HHS tarafndan YSe iletilir. YS saklad deer ile parametre olarak gelen deerin eitliini kontrol eder. Ayn ise eriim belirteci almak zere ak ilerletir. Farkl ise ilemi keser. \n 5.4  Gl Kimlik Dorulama Kontrolleri \n HK, GKD iin HHS uygulamasna ynlendirildiinde, HHSnin eitli kontroller yaparak ilemin doruluunu teyit etmesi gerekmektedir.\nYaplmas gereken kontrollere ait temel senaryolar aadaki tabloda belirtilmitir. Bu senaryolar baz alnarak HHSler tarafndan zenginletirilebilir. \n Aadaki tabloda yer alan 07-13 aras Rza ptal Detay Kodlarnn olutuu senaryolar, HHS uygulamasnda yaplan kullanc dorulama ncesi ve sonras olarak iki admda incelenmelidir. \n HHS tarafnda, kullanc dorulama ncesinde yaplan kontroller neticesinde verilemeyen rzalar iin 04 : Sre Am : Yetki Bekleniyor iptal kodu atanr. HHS'nin YS uygulamasna 04 kodunu iletmesi beklenmez. YS zaman am neticesinde rza statsn sorgulayarak renir. \nKullanc dorulandktan sonra rza verilemiyorsa ilgili hata kodunun YS'e iletilmesi beklenmektedir. Kullanc dorulama sonras YS'e iletilen rza iptal detay kodu ile HHS veri modelinde tutulan rza ile ilikili rza iptal detay kodu, ayn deeri alacak ekilde gncellenmelidir. YS, HHS tarafndan kendine iletilen rza iptal detay kodunu kendi veri modelinde gncellemelidir. \n Zorunlu olarak belirtilen hata durumlarnn HHSler tarafndan gereklenmesi ve uygun hata kodlarnn YSe iletilmesi; ileride oluabilecek mutabakatlama sorunlarn ortadan kaldrabilecek, yaplacak raporlamalar kapsamnda sistem ve sre iyiletirmelerine katk salayacak, son kullanc asndan da alnan hataya ynelik bilgilendirici ierik salayacaktr. \n Hata aklamalar; hata koduna uygun ya da uyumlu olmak kaydyla, HHS ve YS tarafndan farkl ekillerde sunulabilir. \n GKD Srasnda yaplmas gereken kontroller \n \n \n \n Rza ptal Detay Kodu \n HHS hata aklamas* \n Ys ekrannda listelenecek rnek mesaj metni* \n rnek Senaryo \n Zorunlu / Opsiyonel \n \n \n \n \n 07 \n Rza mevcut ve durumu \"Yetkilendirildi\" veya \"Yetki Kullanld\" \n Yetki Hatas \n HK,  kullanc dorulama ilemi tamamlandktan sonra  YS ekrannda ileri - geri yaparak ya da HK'nn ynlendirme adresini kopyalayarak taraycya yaptrmas ile tekrar HHS'ye ynlendirir. Bu durumda HHS bu rza iptal detay kodunu iletir. HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Zorunlu \n \n \n 08 \n Rzano ile kimlik bilgileri uyumazl. \n lem gerekletirilememitir. \n YS tarafndan balatlan rza ierisinde yer alan kimlik bilgisi (rn:TCKN) ile HHS'de baarl kimlik dorulama yaplan HK'nn bilgilerinin uyumad durumda  HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Zorunlu \n \n \n 09 \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) \n Gsterilebilecek hesap/kart bulunamamtr. \n HHS, kullanc dorulama yaptktan sonra, HK'nn uygun statl hesabnn olmad durumda  HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Zorunlu \n \n \n 10 \n HK'nn Ak Bankaclk kanal ileme kapal \n HK'nn Ak Bankaclk kanal ileme kapal \n Ak bankacl ayr bir kanal olarak tanmlam HHS'lerde,  HK kullanc dorulama yaptktan sonra yaplan kontrollerde, HK'nn ilemlerini AB kanalna kapatm olmas durumunda   HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Opsiyonel \n \n \n 11 \n HK'nn HHS'deki hesaplarnda yeterli yetkisinin olmamas \n Yetki hatas \n 1- Kurumsal firma kullanclarnn hesaplar zerinde ilem yetkisinin olmamas durumunda   2- Bireysel ortak hesaplarda hesap kst bulunuyorsa (para kna izin verilmedii durum)  HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Zorunlu \n \n \n 12 \n HHSnin,  HK zelinde yapt kontrollerin baarsz olmas \n Yetki hatas \n HHS'nin, kullanc dorulama sonras HK iin i sistemlerinde yapt kontrollerin baarsz olmas. rnein: Mterinin henz bankaclk hizmet szlemesi gibi Internet ubesi zerinde ilem yapmasn engelleyen eksikleri olmas durumunda veya kurumsal kullancda vekalet sresinin dolmas/eksik dokman olmas durumunda kanal zerinde ilem yapamad durum  HHS ve YS'ler veri modellerini bu bilgi dorultusunda gncellemelidir. \n Opsiyonel \n \n \n 13 \n HK istei ile GKDden vazgeilmesi \n Mteri ilemden vazgemitir. \n HHS ekrannda yer alan VAZGE butonuna baslmas durumu (HK,HHS uygulamasnda kullanc dorulama yaptktan sonra VAZGE butonu olabilir.) \n Zorunlu \n \n \n 14 \n GKD ptali: Fraud phesi \n lem gerekletirilememitir. \n HHS Fraud phesi nedeniyle ilemin devamna izin vermez. HHS'nin, fraud kontrollerinin deme balatma hizmeti iin yapmas ve 14- GKD ptali: Fraud phesi ile rza iptalini gerekletirmelidir. HBH servislerinde HHS'nin rza iptal kodu 14 ile ilemi kesmesi HHS'nin kendi insiyatifindedir yani opsiyoneldir. \n Koullu \n \n \n 99 \n Dier \n lem gerekletirilememitir. \n Oluabilecek dier senaryolar. \n Zorunlu \n \n \n \n GKD srasnda iletilen rza no eer HHSnin sisteminde bulunamazsa durumu gncellenecek bir rza no da olmayacaktr. HHS kendi nyznde bu duruma uygun bir mesaj gsterebilir. YSe de Dier hata kodu ile bu durumu iletebilir. \n"},{title:"7.\tHesap Bilgisi Hizmeti",frontmatter:{},regularPath:"/v1.1.0/contents/hesap-bilgisi-hizmeti.html",relativePath:"v1.1.0/contents/hesap-bilgisi-hizmeti.md",key:"v-553c6446",path:"/v1.1.0/contents/hesap-bilgisi-hizmeti.html",headers:[{level:2,title:"Genel Bilgiler",slug:"genel-bilgiler"},{level:2,title:"Hesap Bilgisi Hizmeti in Eriim Adresleri",slug:"hesap-bilgisi-hizmeti-icin-erisim-adresleri"},{level:2,title:"ADIM 0: HK'nn hesap bilgilerine eriim iin talepte bulunmas:",slug:"adim-0-ohk-nn-hesap-bilgilerine-erisim-icin-talepte-bulunmas"},{level:2,title:"7.1 ADIM 1: Hesap Bilgisi Rzasnn Hazrlanmas",slug:"_7-1-adim-1-hesap-bilgisi-rzasnn-hazrlanmas"},{level:3,title:"POST /hesap-bilgisi-rizasi",slug:"post-hesap-bilgisi-rizasi"},{level:3,title:"Baarl stek:",slug:"basarl-istek"},{level:3,title:"Baarl Yant:",slug:"basarl-yant"},{level:2,title:"zinler",slug:"izinler"},{level:2,title:"7.2 ADIM 2: Hesap Bilgisi Hizmeti Rzasnn Tesisi",slug:"_7-2-adim-2-hesap-bilgisi-hizmeti-rzasnn-tesisi"},{level:2,title:"7.3 ADIM 2.1: Hesap Bilgisi Rzasnn Sorgulanmas",slug:"_7-3-adim-2-1-hesap-bilgisi-rzasnn-sorgulanmas"},{level:2,title:"7.4 ADIM 2.2: Hesap Bilgisi Rzasnn ptali",slug:"_7-4-adim-2-2-hesap-bilgisi-rzasnn-iptali"},{level:2,title:"7.5 ADIM 3: Hesap Bilgilerinin Alnmas",slug:"_7-5-adim-3-hesap-bilgilerinin-alnmas"},{level:2,title:"7.6 ADIM 3.1 ve 3.2: Hesap Bilgilerinin Sorgulanmas",slug:"_7-6-adim-3-1-ve-3-2-hesap-bilgilerinin-sorgulanmas"},{level:2,title:"7.7 ADIM 3.3 ve 3.4: Hesap Bakiyesinin Sorgulanmas",slug:"_7-7-adim-3-3-ve-3-4-hesap-bakiyesinin-sorgulanmas"},{level:2,title:"7.8 ADIM 3.5 ve 3.6: lemlerin Sorgulanmas",slug:"_7-8-adim-3-5-ve-3-6-islemlerin-sorgulanmas"}],content:" 7.\tHesap Bilgisi Hizmeti  \n Genel Bilgiler \n Hesap bilgisi sorgulama iin HBHS tarafndan mteri rzas tesisinin HHS tamamlanm olmas gerekir. Mteri rzas tesisi tamamlandktan sonra, HBHS sorgulamak istedii hesaba ait verileri ilgili eriim adresi zerinden sorgular. \n \n \n ekil 10: Hesap Bilgisi Hizmeti st Dzey Ak \n ekil-10da sunulan hesap bilgisi hizmeti 5 temel aktan oluur: \n 0.\tMterinin hesap bilgilerine eriim iin talepte bulunmas:  HK BHS mobil uygulama ya da web sitesinden hesap bilgilerine eriim ilemini balatr. \n 1.\tHesap Bilgisi mteri rzasnn hazrlanmas: \n HBHS, hesap bilgilerine eriim iin mteri rzas tesisi amacyla HHSdeki hesap bilgisi rzas eriim adresine bir POST isteinde bulunur ve bir hesap bilgisi rzas nesnesi oluturur. HHS hesap bilgisi rzas nesnesi iin biricik tanmlayac dner (RzaNo). Hesap bilgisi rzas, mterinin HBHSnin hesap bilgilerine eriim izin verdii alanlar ierir: \n \n zinler - eriim iin izin verilen veri kmelerinin listesi. \n Eriimin Geerli Olduu Son Tarih - HBHS'nin mterinin hesap bilgilerine eriebilecei istee bal seilebilen son tarih. \n lem Sorgulama Balang Zaman  Mteri rzasnn tesisinden itibaren geriye dnk olarak HBHSnin hesap bilgilerine eriebilecei sreyi \n lem Sorgulama Biti Zaman - Mteri rzasnn tesisinden itibaren ileriye dnk olarak HBHSnin hesap bilgilerine eriebilecei sreyi \n \n 2.\tHesap bilgisi hizmeti mteri rzasnn tesisi: \n HHS, Hesap Bilgisi Rzas servisi ile HK zelinde Yetki bekleniyor statsnde bir rza nesnesi hazrlar. HHS, GKDnin baaryla tamamlanmas sonrasnda hesap bilgisi rzas nesnesinin yetkilendirildiini belirtmek iin Rza Durumunu Rza Yetkilendirildi olarak gnceller. Nesne yetkilendirildikten sonra HHS nesne ile bir eriim belirteci (access token) ilikilendirir, Rza Durumunu Yetki Kullanld yapar ve bu belirteci HBHSye geri dner.  Bylece mteri rza tesisi salanm olur. \n Hesap bilgisi iin mteri rzasna ilikin temel ilkeler unlardr: \n \n 1 HK'nn 1 YS iin 1HHS'de Yetki Bekleniyor, Yetkilendirildi, Yetki Kullanld statsnde 1 rzas olabilir. \n Mteri rzasnn ayrntlar HK ile HBHS arasnda belirlenir. Bu nedenle mteri rzasnn ayrntlar HHS ekrannda deitirilmemelidir. \n HK, hesap eriim izni ayrntlarn yalnzca bir btn olarak yetkilendirebilir veya geri alabilir. \n Mteri rzas tesisi esnasnda, mteri HHS arayznde eriim iin yetkilendirecek hesaplar seer. \n \n 2.1\tHesap bilgisi rzasnn sorgulanmas:  Mteri rzas  GET/hesap-bilgisi-rizasi/{RizaNo}  ars yaplarak sorgulanr. \n 2.2\tHesap bilgisi mteri rzasnn iptali:  Mteri rzas  DELETE/hesap-bilgisi-rizasi/{RizaNo}  ars yaplarak iptal edilir. \n 3.\tHesap bilgilerinin alnmas:  Hesap bilgileri ilgili kaynaa (hesaplar, bakiye, ilemler) GET istei yaplarak gerekletirilir. HBHS, mteri rzasnn tesisinden sonrasnda (geerli bir eriim belirticine sahip olduunda) ncelikle  GET/hesaplar  ars yapacaktr. \n Hesap Bilgisi Hizmeti in Eriim Adresleri \n Etki Alan (Scope) =hesap_bilgisi \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu / stee Bal \n Yetkilendirme Tr \n mzalama \n Parametre \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n hesap-bilgisi-rizasi \n POST \n /hesap-bilgisi-rizasi \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n HesapBilgisiRizasiIstegi \n HesapBilgisiRizasi \n \n \n 2 \n erisim-belirteci  (GKD iin) \n POST \n /erisim-belirteci \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n ErisimBelirteciIstegi \n ErisimBelirteci \n \n \n 2.1 \n hesap-bilgisi-rizasi \n GET \n /hesap-bilgisi-rizasi/{RizaNo} \n Z \n stemci Kimlik Bilgileri \n mzal Yant \n \n \n HesapBilgisiRizasi \n \n \n 2.2 \n hesap-bilgisi-rizasi \n DELETE \n /hesap-bilgisi-rizasi/{RizaNo} \n Z \n stemci Kimlik Bilgileri \n \n \n \n \n \n \n 3.1 \n hesaplar \n GET \n /hesaplar \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama \n \n HesapBilgileri(birden ok hesap) \n \n \n 3.2 \n hesaplar \n GET \n /hesaplar/{hspRef} \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n \n \n HesapBilgileri(tek  hesap) \n \n \n 3.3 \n bakiye \n GET \n /hesaplar/{hspRef}/bakiye \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n \n \n BakiyeBilgileri(tek  hesap) \n \n \n 3.4 \n bakiye \n GET \n /bakiye \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama \n \n BakiyeBilgileri(birden ok hesap) \n \n \n 3.5 \n islemler \n GET \n /hesaplar/{hspRef}/ilemler \n Z \n stemci Kimlik Bilgileri ve Yetkilendirme Kodu (GKD) \n \n Sayfalama Filtreleme \n \n IslemBilgileri (tek hesap) \n \n \n \n Tablo 11: Hesap Bilgisi Hizmeti in Eriim Adresleri \n ADIM 0: HK'nn hesap bilgilerine eriim iin talepte bulunmas: \n HK, HBHS uygulamasnda (web arayz/mobil uygulama) hesap bilgilerine eriim iin talepte bulunur. \n 7.1 ADIM 1: Hesap Bilgisi Rzasnn Hazrlanmas \n Bu API ars HBHS'nin HHS'de yeni bir HesapBilgisiRizasi nesnesi oluturmasn ve nesneye erimek iin benzersiz bir rza numaras ({RizaNo}) dnlmesini salar. \n API arsnn baaryla sonulanmas iin HBHS'nin istemci kimlik bilgileri yetkisi kullanmas yeterlidir.\nBaaryla oluturulan hesap bilgisi rza kaynann rza durumu Yetki Bekleniyor olarak dzenlenir.\nHK daha nce ald rzaya ilikin eriim tarihleri, izin trlerini ve hesap bilgilerini gncellemek isterse, HBHS nce HHS nezdindeki rzay iptal etmeli ve sonrasnda yeni bir rza talebinde bulunmaldr.\n \n \n ekil 11: Hesap Bilgisi Mteri Rzasnn Hazrlanmas \n \n POST /hesap-bilgisi-rizasi isteinin (REQUEST) gvdesinde (BODY)  HesapBilgisiRizasIstegi nesnesi (Tablo-12) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda HesapBilgisiRizasi (Tablo-13) nesnesi oluturulur. \n  POST /hesap-bilgisi-rizasi \n Baarl stek: \n STEK: \n HBHS, bu API eriim adresinden HHSye yeni bir HesapBilgisiRizasi oluturulmas iin istekte bulunur: \n \n HBHS, HKnn hesap bilgilerine ynelik rza balatma istei olduunu HHSye bildirir. \n HBHS, HKnn, HBHS arayznden verdii rzann (n Onay) bir kopyasnn HHS nezdinde mteri tarafndan onaylanmas iin HHSye gnderilmesini salar. \n HHS; istek mesajnda yer alan alanlarn API dkmannda belirtilen artlar salayacak ekilde zorunluluk ve uzunluk kontrollerini yapar. (Zorunlu) \n HHS; YS API ile alnan HBHS bilgilerinin ierisinde yer alan ynlendirme ve bildirim adresleri ile deme emri rzas nesnesi request mesajnda paylalan adreslerin uyumlu olup olmadnn kontrollerini yapar. (Zorunlu) \n HHS; kimlik bilgileri nesnesinde iletilen kimlik bilgileri ile HKnn HHS mterisi olup olmadnn kontrollerini yapar. Bu kontrol hem bireysel hem de kurumsal HKlar iin yaplmaldr.  (Zorunlu) \n Eriimin Geerli Olduu Son Tarih, lem Sorgulama Balang Zaman, lem Sorgulama Biti Zaman alanlar ile ilgili Tablo 12de belirtilen kontroller yaplmaldr. (Zorunlu) \n HHS, benzersiz RizaNo ile HesapBilgisiRizasi nesnesi oluturur ve HBHSye dner. \n HHS, HesapBilgisiRizasi oluturduu anda durumunu Yetki Bekleniyor olarak dzenler. \n \n Eriimin Geerli Olduu Son Tarih, lem Sorgulama Balang Zaman, lem Sorgulama Biti Zaman alanlarnda zaman aralklar mteri deneyimi penceresinden deerlendirilerek ay cinsinden belirtilmitir. Bu konuda aadaki gibi oluabilecek u rneklere dikkat edilmesi gerekmektedir. \n Yeni gnn balang saatinin 00:00:00 olduu kabul edilmitir. \n Bugn : 31.08.2019 \nBugn + 6 Ay : 01.03.2020 00:00:00 (29.02.2020 tm gn dahildir.) \nBugn : 30.08.2020 \nBugn + 6 Ay : 01.03.2020 00:00:00 (28.02.2021 tm gn dahildir.) \nBugn : 30.09.2022 \nBugn + 3 Ay : 01.01.2023 00:00:00 (30.12.2022 tm gn dahildir.) \nBugn : 14.07.2022 \nBugn + 3 Ay : 15.10.2022 00:00:00 (14.10.2022 tm gn dahildir.) \n Tablo 12: HesapBilgisiRizasiIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder. Hata durumunda TR.OHVPS.Connection.InvalidASPSP hata kodunu dner. \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda TR.OHVPS.Connection.InvalidTPP hata kodunu dner. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n >Yetkilendirme Yntemi \n yetYntm \n AN1 \n  \n TR.OHVPS.DataCode.GkdTur sral veri tr deerlerinden birini alr.   Yetkilendirme yntemi, HBHS tarafndan belirtilmeyebilir. \n HHS, HBHSnin belirledii yntemi dikkate alarak sreci ilgili aka uygun olarak devam ettirir. Desteklemedii yntem iin (rn: Ayrk GKD) ayrca hata mesaj verilmelidir. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu.  YSn iletecei adrestir.   Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, mteri uygulama / taraycsn bu alanda belirtilen adrese ynlendirir. \n \n \n > Ayrk GKD \n ayrikGkd \n Kompleks:AyrikGkd \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n yetYntm = A gnderilmi ise ayrikGkd nesnesinin dolu gnderilmesi zorunludur.   HHS, YS'n AYRIK_GKD_BASARILI ve AYRIK_GKD_BASARISIZ olay tipleri iin olay aboneliinin varln kontrol eder.  Bknz: Ayrk GKD \n \n \n >> OHK Tanm Tip \n ohkTanimTip \n AN8 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm tipleridir.  TR.OHVPS.DataCode.OHKTanimTip  sral veri tiplerinden birini alr. \n \n \n \n >> OHK Tanm Deer \n ohkTanimDeger \n AN1..30 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm deeridir. ohkTanimTip'i ile uyumlu deerdir. \n \n \n \n Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n > Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur sral veri tr deerlerinden birini alr.   Kurum adna yaplan(ticari) ilemlerde kurum kullancsnn bilgisi iletilmelidir. \n \n \n \n > Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr.   TR.OHVPS.DataCode.KimlikTur deerine gre uzunluk ve format deiir.   Kurum adna yaplan(ticari) ilemlerde kurum kullancsnn bilgisi iletilmelidir. \n \n \n \n > Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr.  TR.OHVPS.DataCode.KurumKimlikTur sral veri tr deerlerinden birini alr. \n \n \n \n > Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.  TR.OHVPS.DataCode.KurumKimlikTur deerine gre uzunluk ve format deiir. \n \n \n \n > deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur sral veri tr deerlerinden birini alr (B: Bireysel, K:Kurumsal) \n \n \n \n Hesap Bilgisi \n hspBlg \n Kompleks: HesapBilgisi \n Z \n \n \n \n \n >zin Bilgisi \n iznBlg \n Kompleks: IzinBilgisi \n Z \n \n \n \n \n >> zin Tr \n iznTur \n Array[AN2] \n Z \n HK tarafndan HHS nyznde belirlenen izin tipleridir. Bir istekte birden fazla deer bulunabilir, TR.OHVPS.DataCode.IzinTur sral veri tr deerlerinden birini alr. \n \n \n \n >> Eriimin Geerli Olduu Son Tarih \n erisimIzniSonTrh \n ISODateTime \n Z \n Hesap bilgisi rzasnn geerli olduu son tarih.   Mteri YS ekranndan bu deeri belirleyebilir.   Varsaylan deer : Rza verilen tarih + 6 ay   Alabilecei maksimum deer : Rza tarihi + 6 ay    Alabilecei minimum deer : Rza tarihi + 1 gn    rnein  23/09/2021de minimum 24/09/2021 seilebilir. Bu durumda yeni gnn balang saati 00:00:00 olduu kabul edildii iin; erisimIzniSonTrh deeri 2021-09-25T00:00:00+03:00 olmaldr.    rnek rza olu zaman  : 2023-02-04T21:20:20+03:00    1 gnlk rza verildiinde erisimIzniSonTrh deeri:    2023-02-06T00:00:00+03:00 (26 saat 40 sakikalk rza vermi oluyor.)    7 gnlk rza verildiinde erisimIzniSonTrh deeri:  2023-02-12T00:00:00+03:00    1 aylk rza verildiinde erisimIzniSonTrh deeri :   2023-03-05-T00:00:00+03:00 \n Bu alanda bir deer bulunmad durumda HHS hata dnmelidir. \n \n \n >> lem Sorgulama Balang Zaman \n hesapIslemBslZmn \n ISODateTime \n K \n Hesap bilgisi rzas verilmesinden gemie dnk en fazla 12 ay olabilir, daha eski olmamas gerekir.   Varsaylan deeri rza verilen tarih (ilem zaman)  12 aydr.   HK bu alana bir deer girii salam ise zaman bilgisi retilirken ekrandan girilen tarihe 00:00:00 zaman bilgisi eklenmelidir. HK deer girii salamam ise BHS varsaylan deerlerle bu alan doldurarak, HHSye iletir.   Minimum tarihi : Rzann verili tarihi  - 12 ay    Maksimum tarih: Rzann verili tarihi +  12 ay    zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur.  zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ise gnderilmemelidir. \n HK tarafndan izin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ve  lem Sorgulama Balang Zaman BHS tarafndan dolu olarak gnderilmi ise HHS tarafndan ilemin devamna izin verilmez. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmi ise; HHS bu alann alabilecei minimum ve maksimum deerlerin snrlar ierisinde olduunu kontrol eder. \n \n \n >> lem Sorgulama Biti Zaman \n hesapIslemBtsZmn \n ISODateTime \n K \n Hesap bilgisi rzas verilmesinden gelecee dnk en fazla 12 ay sonras olabilir, daha ileri bir tarih olmamas gerekir.   Varsaylan deeri: Rza verilen tarih + 12 aydr. HK bu alana bir deer girii salam ise girdii tarihe 1 gn eklenir ve yeni gnn ilk saati kabul edilen 00:00:00 saat bilgisini ekler.  HK bu alana bir deer girii salamam ise BHS varsaylan deerlerle bu alan doldurarak, HHSye iletir.  Minimum tarihi : Rzann verili tarihi   12 ay  Maksimum tarihi :  Rzann verili tarihi + 12 ay   zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur.  zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ise gnderilmemelidir. Eer dolu gnderilirse HHS tarafndan uygun hata mesaj iletilmelidir. \n HK tarafndan izin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmemi ve lem Sorgulama Biti Zaman BHS tarafndan dolu olarak gnderilmi ise HHS tarafndan ilemin devamna izin verilmez.   zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seilmi ise; HHS bu alann alabilecei minimum ve maksimum deerlerin snrlar ierisinde olduunu kontrol eder. \n Baarl Yant: \n Tablo 13: HesapBilgisiRizasi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n HesapBilgisiRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n HesapBilgisiRzas nesnesinin oluturulma zaman \n \n \n > Gncellenme Zaman \n gnclZmn \n ISODateTime \n Z \n HesapBilgisiRzas nesnesinin gncellenme zaman \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu sral veri tipini deerlerinden birini alr. rn; hesap bilgi rzasnn tesisine dair ilk istek mesajna dnte B: Yetki Bekleniyor deerini almas beklenir. \n \n \n > Rza Iptal Detay Kodu \n rizaIptDtyKod \n AN2 \n K \n Rza durumunun iptal olduu durumda zorunludur. \n \n \n Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n > Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur sral veri tr deerlerinden birini alr. \n \n \n > Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur deerine gre uzunluk ve format deiir. \n \n \n > Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr.  TR.OHVPS.DataCode.KurumKimlikTur sral veri tr deerlerinden birini alr. \n \n \n > Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.  TR.OHVPS.DataCode.KurumKimlikTur deerine gre uzunluk ve format deiir. \n \n \n > deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur sral veri tr deerlerinden birini alr (B: Bireysel, K:Kurumsal) \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n HHS, HBHSnin belirledii yntemi dikkate alarak sreci ilgili aka uygun olarak devam ettirir. Desteklemedii yntem iin (rn: Ayrk GKD) ayrca hata mesaj verilmelidir.  TR.OHVPS.DataCode.GkdTur sral veri tr deerlerinden birini alr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n HHS, mteri uygulama / taraycsn ynlendirmeli akta bu alanda belirtilen YS adresine ynlendirir. \n \n \n > Ayrk GKD \n ayrikGkd \n Kompleks:AyrikGkd \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n >> OHK Tanm Tip \n ohkTanimTip \n AN8 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm tipleridir. stek ierisindeki veri deitirilmeden iletilir. \n \n \n >> OHK Tanm Deer \n ohkTanimDeger \n AN1..30 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm deeridir. ohkTanimTip'i ile uyumlu deerdir.  stek ierisindeki veri deitirilmeden iletilir. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n Ynlendirmeli ak trnde\tGKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi. Ayrk GKD aknda bu alan dnlmemelidir. \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.  HHS tarafndan maksimum 5 dk iinde ilem tamamlanacak ekil zaman damgas oluturulur. Zaman am olduunda HHSnin GKDye izin vermeyecek ekilde hata mesaj vermesi gerekmektedir. Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n Hesap Bilgisi \n hspBlg \n Kompleks: HesapBilgisi \n Z \n \n \n \n > zin Bilgisi \n iznBlg \n Kompleks: IzinBilgisi \n Z \n \n \n \n >> zin Tr \n iznTur \n Array[AN2] \n Z \n HK tarafndan HBHS nyznde belirlenen izin tipleridir. Bir istekte birden fazla deer bulunabilir, TR.OHVPS.DataCode.IzinTur sral veri tr deerlerinden birini alr. \n \n \n >> Eriimin Geerli Olduu Son Tarih \n erisimIzniSonTrh \n ISODateTime \n Z \n Hesap bilgisi rzasnn geerli olduu son tarih \n \n \n >> lem Sorgulama Balang Zaman \n hesapIslemBslZmn \n ISODateTime \n K \n Hesap hareketlerinin sorgunabilecei balang zaman. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur. \n \n \n >> lem Sorgulama Biti Zaman \n hesapIslemBtsZmn \n ISODateTime \n K \n Hesap hareketlerinin sorgunabilecei biti zaman. zin tr Temel ilem Bilgisi ve/veya Ayrntl lem Bilgisi seildiinde bu alanlarn doldurulmas zorunludur. \n \n \n > Ayrnt Bilgi \n ayrBlg \n Kompleks: AyrintiBilgi \n  \n \n \n \n > HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n zinler \n Bir hesap bilgisi mteri rzas kayna arsna yant olarak dndrlen verileri snrlamak iin izin kodlar kullanlr: \n \n Temel Hesap Bilgisi \n Ayrntl Hesap Bilgisi \n Bakiye Bilgisi \n Temel lem (Hesap Hareketleri) Bilgisi \n Ayrntl lem Bilgisi \n Anlk Bakiye Bildirimi \n \n HKya sunulacak seimler ve kurallar aadaki gibi olmaldr. \n \n \n \n Seim \n Kural \n \n \n \n \n Temel Hesap Bilgisi \n HK seimine sunulmamaldr. Deitirilemez ekilde seili gsterilmelidir. \n \n \n Ayrntl Hesap Bilgisi \n HK seim yapabilir. \n \n \n Bakiye Bilgisi \n HK seim yapabilir. \n \n \n Temel lem (Hesap Hareketleri)  Bilgisi \n HK seim yapabilir. \n \n \n Ayrntl lem Bilgisi \n HK seim yapabilir. Ayrntl lem Bilgisi seimi Temel lem Bilgisi seimini kapsar. (Ayrntl lem bilgisi seildiinde Temel lem Bilgisi de seili olmaldr.) \n \n \n Anlk Bakiye Bildirimi \n Bakiye Bilgisi izin tr ile birlikte seilmesi gereklidir. HK, HHS'de olacak bakiye deiikliklerinden anlk haberdar olmak istiyor ise bu izin tr seimi ile rza balatmas gereklidir. \n \n \n \n Aadaki durumlarda, izin kombinasyonlarna izin verilmez. HHS, bu hesap eriim onaylarn 400 (Hatal stek) yant koduyla reddetmelidir: \n \n zin dizisinin herhangi bir izin tr iermemesi durumu, \n zin dizisinde HHS tarafndan desteklenmeyen bir izin kodunun yer almas durumu \n 7.2 ADIM 2: Hesap Bilgisi Hizmeti Rzasnn Tesisi \n \n \n ekil 12: Hesap Bilgisi HK Rzasnn Tesisi \n Rza tesisinin baaryla sonulanmas iin HBHS'nin istemci kimlik bilgileri yetkisi kullanmas ve ardndan mterinin HHS tarafndan ynlendirmeli veya ayrk GKD ile dorulanmas gerekir. HHS'de oluturulan ve rza durumu Yetki Bekleniyor olan bir hesap bilgisi rzas, GKD sonras Yetkilendirildi statsne gncellenir. HBHS, eriim salayaca hesaplar hesap bilgisi rzasnn tesisinden nce seer. \n \n \n Ynlendirmeli dorulama aknda, HBHS HKy HHSye ynlendirir. \n \n \n HBHS tarafndan ynlendirme, bir nceki admdaki RizaNoyu ierir. \n \n \n HHS, HK iin GKD srecini iletir. \n HKy dorularsa, \n \n \n HK HBHS zerinden ilem yaplmasna izin verecei hesap seimini yapar. HBHS zerinden HKnn verdii izin bilgilerini ve eriim izninin biti tarihi bilgilerini, HHS bilgilendirme amal HKya gsterir. \n \n \n HHS hesap bilgisiri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n HHS, HKy olumlu ynlendirme ak ile HBHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=Y&yetKod=xx&rizaNo=yy&rizaTip=H&drmKod=zzz\n \n \n \n HKy dorulayamazsa, \n \n \n HHS, hesap bilgisi rza kaynann durumunu Yetki ptal olarak gnceller. \n \n \n HHS, HKy olumsuz ynlendirme ak ile HBHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=I &rizaNo=yy&rizaTip=H&rizaIptDtyKod=11&drmKod=zzz\n \n \n \n \n \n \n \n Ayrk dorulama aknda, HHS, HKnn hesap bilgisi hizmetini balatt uygulamadan farkl olabilecek bir dorulama uygulamasnda ilemi dorulamasn ister. \n \n Ayrk ak HBHSnin farkl bir kanal kullanarak yetkilendirme istei gndermesiyle balatlr. \n Bu yetkilendirme istei, yetkilendirilecek hesap bilgisi rzasnn eletirilecei HKnn bulunmas iin ilgili veriyi tar. \n HHS, deme hizmeti kullancsn dorular. \n HK verdii izin tipi dahilinde bilgileri paylalacak olan hesaplar seer. \n HHS, hesap bilgisi rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n \n Baarl GKD sonrasnda (rizaDrm=Y) ilgili rza nesnesi iin (belirli bir rizaNo) yetkilendirme kodunun (yetKod) alnmasnn ardndan eriim belirteci eriim adresine POST ars yaplarak yetkilendirme kodu karlnda eriim belirteci ve yenileme belirteci alnr. POST /eriim-belirteci eriim noktas EK-3te aklanmtr. \n Eriim belirteci alndktan sonra; HHS,  hesap bilgisi rzasnn durumunu Yetki Kullanld olarak gnceller. Rza tesisi salanm olur. \n 7.3 ADIM 2.1: Hesap Bilgisi Rzasnn Sorgulanmas \n GET /hesap-bilgisi-rizasi/{RizaNo} \n HK, HHS zerinden rza iptali yapm olabilir veya HKnn verdii rza sresi dolmu olabilir.  Bu durumlarda HBHS, rza alma akna balamadan nce, daha nce oluturulmu bir HesapBilgisiRizasi kaynann durumunu, istee bal olarak alabilir. \n Servis baarl yantnda Tablo 13de belirtilen HesapBilgisiRizasi nesnesini dnmektedir. \n Durum \nHesapBilgisiRizasi kayna iin kullanlabilecek durum gstergeleri u ekildedir: \n \n Yetki Bekleniyor \n Yetkilendirildi \n Yetki Kullanld \n Yetki Sonlandrld \n Yetki ptal \n 7.4 ADIM 2.2: Hesap Bilgisi Rzasnn ptali \n \n \n \n ekil 13: Hesap Bilgisi Mteri Rzasnn Geri Alnmas \n DELETE /hesap-bilgisi-rizasi/{RizaNo} \n DELETE /hesap-bilgisi-rizasi ars, bir HBHS'nin nceden oluturulmu bir hesap eriim rzasn (yetkili olsun veya olmasn) silmesine izin verir. Mteri, rzasn HHS zerinden iptal etmek yerine, HBHS zerinden bu rzasn kaldrmak isteyebilir. \nBu API ars, mterinin HBHS zerinden hesap bilgisi rzasn iptal etmesine ve HHS nezdindeki hesap bilgisi rzas nesnesinin silinmesini salar. \nMterinin HBHSnin veri eriim iznini iptal etmesi durumunda HBHS, HHSde mevcut olan HesapBilgisiRizasi kaynan pratik olarak mmkn olan en ksa srede silmelidir. Bu ise, ilgili kaynaa \n DELETE /hesap-bilgisi-rizasi/{RizaNo} \nars aracl ile yerine getirilir. HBHS ayrca, sisteminden Hesap Eriim zni kaynaklarn da temizlemelidir. \nSz konusu silme ilemi, kaytlarn statsnn pasife ekilmesi ile gerekletirilmelidir. Sz konusu kaytlar, denetim izlerinin oluturulmas ve saklanmasna ilikin ikincil dzenleme hkmleri kapsamnda gvenli ekilde tutulmaldr. \nServis istek parametresi olarak sadece pathde iletilen Rza No bilgisine ihtiya duymaktadr. \nHK rzas baar ile silindiinde HTTP 204 response kodu ile ilem sonucu iletilir. Rza tipi I yani Yetki ptal olarak gncellenir ve gnclZmn zaman damgas vurularak gncellenir. \nHK ile rza iptali srasnda kurulacak iletiimde (e-posta, sms gibi) aadaki alanlarn iletilmesi tavsiye edilmektedir: \nYS Ad, HHS ad, Rza Oluturma Zaman, Servis Tipi Bilgisi (HBHS) \n 7.5 ADIM 3: Hesap Bilgilerinin Alnmas \n    \n \n   \n ekil 14: Hesap Bilgilerinin Alnmas \n STEK: \nMteri rzas tesis edilmi kullanc iin HBHS API eriim adresinden HHSye eriilebilir hesap bilgilerini GET istei ile sorgular: \n \n RizaDurumu Yetki Kullanld ise ileme balanr. RizaDurumu farkl bir deerde ise TR.OHVPS.Resource.ConsentMismatch hatasnn iletilmesi gerekir. \n GET verisinin modele gre kontrol yaplr (rnein: Alan kontrolleri) \n \n GET verisinin mantksal kontrolleri yaplr. \n \n \n Hesap bilgisi rzas alnm ve eriim izni devam eden hesaplar ierisinden herhangi bir hesabn kapatlmas ya da pasife alnmas durumunda YS tarafndan yaplan hesap isteine HHS tarafndan hesap bilgisi dnlmelidir. \n \n \n Kapal hesap iin TR.OHVPS.DataCode.HspDrm veri trnden KAPALI deeri ile, pasif hesap iin TR.OHVPS.DataCode.HspDrm veri trnden PASIF deeri ile dnlmelidir. \n 7.6 ADIM 3.1 ve 3.2: Hesap Bilgilerinin Sorgulanmas \n GET /hesaplar ve GET /hesaplar/{hspRef} \n Bu eriim noktalarndan tm hesaplarn veya belirli bir hesabn bilgilerinin sorgulanr. Hesap bilgisi iin daha nce tanmlanm izin trne gre (Temel Hesap Bilgisi veya Detayl Hesap Bilgisi) yantnda dnlen HesapBilgileri nesnesinin ierii deiir.  Tablo 15te HesapBilgileri nesnesinin ierii verilmitir. \n Hesap Bilgisi Sorgu rnei (Tm Hesaplar) =  /hesaplar \nHesap Bilgisi Sorgu rnei (Belirli Bir Hesap) =  /hesaplar/{hspRef} \nlem Sorgu rnei (Belirli Bir Hesap) =  /hesaplar?\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= hspRef &\nsrlmYon=A \n Tablo 14: Hesap Bilgileri Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numaras \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek kaytlarn sralama kriterini belirtir. Alabilecei deerler: { hspRef} \n Bu veri gnderildii durumda, HHS listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini hspRef olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler:  A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 15: HesapBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Rza No \n rizaNo \n AN1..128 \n Z \n HesapBilgisiRzas nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n Hesap Temel \n hspTml \n Kompleks: HesapTemel \n Z \n Temel Hesap Bilgileri (Temel Hesap Bilgisi varsaylan izin tr olduundan Hesap Temel nesnesi zorunlu olarak yantta bulunur) \n \n \n > Hesap Referans \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n > Hesap Numaras \n hspNo \n AN26 \n K \n Eer varsa deme hesabna ait IBAN bilgisi \n \n \n > Hesap Sahibi Unvan \n hspShb \n AN3..140 \n Z \n Hesap sahibi ya da hesap sahiplerinin ad-soyad, ticari unvan \n \n \n > ube Ad \n subeAdi \n AN3..50 \n K \n Eer varsa deme hesabnn bal olduu ubenin ad \n \n \n > Ksa Ad \n kisaAd \n AN3..50 \n K \n Eer hesap sahibi hesaba ait bir ad tanmladysa, tanmlanan hesap ad \n \n \n > Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi. \n \n \n > Hesap Tr \n hspTur \n AN1 \n Z \n Hesabn tr (bireysel veya ticari). TR.OHVPS.DataCode.HspTur srali veri deerlerinden birini alr. \n \n \n > Hesap Tipi \n hspTip \n AN1..32 \n Z \n Hesabn tipi (VADESZ, KREDL vb.).TR.OHVPS.DataCode.HspTip sral veri deerlerinden birini alr. \n \n \n >Hesap rn Ad \n hspUrunAdi \n AN1..140 \n  \n HHS tarafndan atanm olan rn ad bilgisidir. HBHS tarafndan HKya gsterilmesi kullanm kolayl salayacaktr. \n \n \n > Hesap Durumu \n hspDrm \n AN5..50 \n Z \n Hesabn durumunu belirtir. TR.OHVPS.DataCode.HspDrm sral veri trlerinden birini alr. \n \n \n Hesap Detay \n hspDty \n Kompleks: HesapDetay \n K \n Detay Hesap Bilgileri (Temel Hesap Bilgisine ek olarak Detay Hesap Bilgisi izin tr de seilmise Hesap Detay nesnesi koullu olarak yantta bulunur) \n \n \n > Al Tarihi \n hspAclsTrh \n ISODateTime \n Z \n Belirtilen hesabn al tarihi. \n 7.7 ADIM 3.3 ve 3.4: Hesap Bakiyesinin Sorgulanmas \n GET /bakiye ve GET /hesaplar/{hspRef}/bakiye \nBu eriim noktalarndan tm hesaplarn veya belirli bir hesabn bakiyesi sorgulanr. \nstek arsna dnlen BakiyeBilgileri nesnesi Tablo 17de verilmitir. \n Hesap Bilgisi Rzas alnm ve eriim izni devam eden hesaplar ierisinde yer alan hesaplardan kapatlm ya da pasif duruma alnm olan hesaplar iin bakiye istei yapldnda HHS tarafndan bakiye bilgisi dnlmelidir. \n Hesap bakiyelerinin gsterilmesi srasnda aada verilen rnekler gznnde bulundurulmaldr. \n rnek 1 : HK  Hesap Bakiye Tutar  0 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL. HK 1000 TL para k gerekletirdi. Bakiye API'si yant ierisinde iletilen  Kredi Dahil Gstergesi  0 deerini ieriyorsa,  Hesap Bakiye Tutar  -1000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL olmaldr. \n rnek 2 : HK  Hesap Bakiye Tutar  0 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL. HK 1000 TL para k gerekletirdi. Bakiye API'si yant ierisinde iletilen  Kredi Dahil Gstergesi  1 deerini ieriyorsa,  Hesap Bakiye Tutar  2000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL olmaldr. \n rnek 3 : HK  Hesap Bakiye Tutar  1000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL. HK 1000 TL para k gerekletirdi. Bakiye API'si yant ierisinde iletilen  Kredi Dahil Gstergesi  0 deerini ieriyorsa,  Hesap Bakiye Tutar  0 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL olmaldr. \n rnek 4 : HK  Hesap Bakiye Tutar  1000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL. HK 1000 TL para k gerekletirdi. Bakiye API'si yant ierisinde iletilen  Kredi Dahil Gstergesi  1 deerini ieriyorsa,  Hesap Bakiye Tutar  3000 TL,  Kredili Mevduat Hesab Bakiyesi  3000 TL olmaldr. \n lem Sorgu rnei (Belirli Bir Hesap)=  /bakiye?\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= hspRef &\nsrlmYon=A \n Tablo 16: BakiyeBilgileri Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numarasi \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek kaytlarn sralama kriterini belirtir. Alabilecei deerler: { hspRef} \n Bu veri gnderildii durumda, HHS listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini hspRef olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler:  A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 17: BakiyeBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Hesap Referans \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n Bakiye \n bky \n Kompleks:Bakiye \n Z \n \n \n \n > Hesap Bakiye Tutar \n bkyTtr \n AN1..25 \n Z \n Hesabn bakiyesi. Bloke tutar dlmeden iletilmelidir.   Tutar alan regex patterni u ekildedir:  '^-?\\d{1,18}$|^-?\\d{1,18}\\.\\d{1,5}$' \n \n \n > Blokeli Tutar \n blkTtr \n AN1..24 \n K \n Varsa hesapta blokeli tutar bilgisi.     Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n > Para Birimi \n prBrm \n AN3 \n Z \n Para birimi. \n \n \n > Bakiye letilme Zaman \n bkyZmn \n ISODateTime \n Z \n Bakiyenin iletildii zaman bilgisi. \n \n \n > KrediliHesap \n krdHsp \n Kompleks: KrediliHesap \n K \n \n \n \n >> Kredili Mevduat Hesab Bakiyesi \n kulKrdTtr \n AN1..24 \n Z \n Kredili mevduat tutar. Kredili bir hesap ise zorunlu.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n >> Kredi Dahil Gstergesi \n krdDhlGstr \n AN1 \n Z \n Kredili bir hesap ise zorunlu. Bakiye tutarnn kredi tutar dahil edilerek ya da edilmeden iletildiini gsterir.   0: Kredi tutar dahil edilmeden bakiye bilgisi iletilmesi durumu   1: Kredi tutar dahil edilerek bakiye bilgisi iletilmesi durumu \n 7.8 ADIM 3.5 ve 3.6: lemlerin Sorgulanmas \n GET /hesaplar/{hspRef}/islemler \n Belirli bir hesaba ilikin ilem bilgileri Tablo 1daki istek parametrelerine gre sorgulanr. \nHesap Bilgisi Rzas alnm ve eriim izni devam eden hesaplar ierisinde yer alan hesaplardan kapatlm ya da pasif duruma alnm olan hesaplar iin ilemler istei yapldnda HHS tarafndan ilemler bilgisi dnlmelidir. \nlem bilgisi iin daha nce tanmlanm izin trne gre yantta dnen IslemBilgileri nesnesinin (Temel lem Bilgisi veya Temel lem Bilgisi ve Detayl lem Bilgisi) ierii deiir. \nlemler servisi hem HKnn talebi ile YS uygulamas zerinden arlabilecei gibi, YSn HKsz balatabilecei otomatik arlar ile de yant dnebilmektedir. \nHHS, ilemin sistemsel yaplp yaplmadn, istek parametreleri ierisinde yer alan PSU-Initiated parametresi ile anlar. Bu parametre E ise HKl, H ise sistemsel yaplm bir sorgu anlamna gelmektedir.\nHKnn balatt sorgular iin HHS tarafndan belirlenen st rate limitler dahilinde arm yaplabilir. \nYS, otomatik yapaca sorgularda; \n \n Bireysel HKlar iin hesap baznda gnde en fazla 4 adet baar ile sonulanan sorgulama yapabilir. \n Kurumsal HKlar iin hesap baznda saatte en fazla 12 adet baar ile sonulanan sorgulama yapabilir. \n \n HHS, tutaca saya bilgisi ile bu saylar kontrol ederek daha fazla sorgulama yaplmasna izin vermeyebilir. \n Ayn istek parametreleri ile yaplan sorgu sonucunda dnecek toplam kayt says 100 atnda, sayfalama yntemi ile HHSnin cevap dnmesi beklenmektedir.  Her bir sayfa iin ilemler servisi tekrar arlsa da, bu arm HHSnin tuttuu saya deerini arttrmaz. HHSnin tutaca sayan kontrol parametreleri YS kodu, hesap numaras ya da referans olmaldr. Sayfa no parametresi varsa ve 1'den byk ise ilem sayacn arttrmamaldr. \n HKnn YS uygulamas zerinden tetikledii ilemlerde ise;\nbireysel HKlar  iin en fazla 1 aylk,\nkurumsal HKlar iin ise en fazla 1 haftalk bir pencere aralnda sorgulama yaplabilir. \n YS, otomatik yapaca sorgularda hem bireysel hem de kurumsal HKlar iin 24 saatlik bir pencere aralnda sorgulama yapabilir. \n Yeni gnn balang saatinin 00:00:00 olduu kabul edilmitir. \n Sorgu rnekleri aadaki gibidir:  \n 1 gnlk lem Sorgu rnei (Belirli Bir Hesap) =  /hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2020-06-01T00:00:00+03:00&\nhesapIslemBtsTrh=2020-06-02T00:00:00+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A\n \n \n 1 haftalk lem Sorgu rnei (Belirli Bir Hesap) =  /hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2020-06-01T00:00:00+03:00&\nhesapIslemBtsTrh=2020-06-08T00:00:00+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A\n \n \n 1 Aylk lem Sorgu rnei (Belirli Bir Hesap) =  /hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2020-02-01T00:00:00+03:00&\nhesapIslemBtsTrh=2020-03-01T00:00:00+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A\n \n 1 Aylk lem Sorgu rnei (Belirli Bir Hesap) =  /hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2020-01-31T00:00:00+03:00&\nhesapIslemBtsTrh=2020-02-28T00:00:00+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A\n \n 1 Aylk lem Sorgu rnei (Belirli Bir Hesap) =  /hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2020-02-28T00:00:00+03:00&\nhesapIslemBtsTrh=2020-03-28T00:00:00+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A\n \n 24 saatlik pencerede yapaca sistemsel sorgu rnei (Son sorgusunun zerine 24 saat eklenmesi)  =\n/hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2020-06-01T14:10:08+03:00&\nhesapIslemBtsTrh=2020-06-02T14:10:08+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A\n \n nyzden alnan sorgu parametreleri ile oluturulan sorgu rnei (rnek sorgu tarih aral 20.02.2023- 25.02.2023 arasndadr)  =\n/hesaplar/{hspRef}/islemler?\nhesapIslemBslTrh=2023-02-20T00:00:00+03:00&\nhesapIslemBtsTrh=2023-02-26T00:00:00+03:00&\nminIslTtr=0&\nmksIslTtr=100000&\nbrcAlc=A&\nsyfKytSayi=25&\nsyfNo=1&\nsrlmKrtr= islGrckZaman &\nsrlmYon=A\n \n Tablo 18: lem Listesi Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n lem Sorgulama Balang Zaman \n hesapIslemBslTrh \n ISODateTime \n Z \n Sorgulanacak ilemlerin balang tarihi. \n HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. HK tarafndan tetiklenen sorgularda;hesapIslemBslTrh ve hesapIslemBtsTrh aras fark bireysel HKlar iin en fazla 1 ay,kurumsal HKlar iin ise en fazla 1 hafta olabilir. YS tarafndan sistemsel yaplan sorgulamalarda hem bireysel, hem de kurumsal HKlar iin;son 24 saat sorgulanabilir. Bu yzden hesapIslemBtsTrh-24 saatten daha uzun bir aralk sorgulanamaz olmaldr. stek balnda yer alan PSU-Initiated alan E ise HKl, H ise sistemsel yaplm bir sorgu anlamna gelmektedir. \n \n \n lem Sorgulama Biti Zaman \n hesapIslemBtsTrh \n ISODateTime \n Z \n Sorgulanacak ilemlerin biti tarihi. \n HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. YS tarafndan sistemsel yaplan sorgulamalarda hem bireysel, hem de kurumsal HKlar iin;leri vadeli ilem emirleri dahil olmad iin (Srm 1.0.2 kapsamnda); lem Sorgulama Biti Zaman, her zaman, sorgulama zaman damgasn iletecek ekilde (datetime (now)) iletilebilir. \n \n \n En Dk lem Tutar \n minIslTtr \n AN1..24 \n  \n Sorgulanacak ilemlerin alabilecei en dk ilem tutar.      Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n En Yksek lem Tutar \n mksIslTtr \n AN1..24 \n  \n Sorgulanacak ilemlerin alabilecei en yksek ilem tutar.    Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n Bor Alacak Gstergesi \n brcAlc \n AN1 \n  \n TR.OHVPS.DataCode.BrcAlc sral veri tipi deerlerinden birini alr. Sorgulanacak ilemlerin bor / alacak kriteri B: Hesaba bor yaratan ilem.A: Hesaba alacak yaratan ilem.{B,A} \n Bu veri gnderildii durumda HHS ilemler listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. \n \n \n Sayfa Bana stenen Kayt Says \n syfKytSayi \n N3 \n  \n Sayfa bana istenen kayt says. Bu alanda iletilen deer 100den byk olamaz. \n Bu veri gnderildii durumda, HHS ilemler listesini bu say kadar gruplandrarak gnderir. Bu veri gnderilmediinde sayfadaki kayt says 100 olarak kullanlr. \n \n \n stenen Sayfa Numarasi \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS ilemler listesini bu sayfadaki kaytlar gnderir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gnderir. \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek ilemlerin sralama kriterini belirtir. Alabilecei deerler: {islGrckZaman} \n Bu veri gnderildii durumda, HHS ilemler listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, HHS sralama kriterini islGrckZaman olarak belirler. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler: A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS ilemler listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 19: IslemBilgileri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Hesap Referans Numaras \n hspRef \n AN5..40 \n Z \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez. \n \n \n Islemler \n isller \n Kompleks:Islem[Array] \n K \n Hesaba ilikin hareketler varsa lemler nesnesi dizisi olarak dnlr. lemler nesnesi Temel lem Bilgileri ve Detay lem Bilgileri nesnesinden meydana gelir. zin tr varsaylan olarak Temel lem Bilgilerini ierir. Detay lem Bilgileri izin tr de seildi ise Temel lem Bilgilerine ek olarak Detay lem Bilgileri de gnderilir. \n \n \n > Temel lem Bilgileri \n islTml \n Kompleks:IslemTemel \n Z \n Temel lem Bilgileri varsaylan olarak dnlr. \n \n \n >> lem Numaras \n islNo \n AN3..50 \n Z \n Hesap hareketinin oluturulmas srasnda atanan ve bor (veya alacak) hareketini tekilletiren HHS baznda tekil tanmlaycdr. Bu deer tek bana tekil olabilecei gibi birden fazla deerin bir araya getirilmesiyle de tekillii salanm olabilir. Bu deerin en azndan hesap numaras (hesNo) baznda tekil olmas beklenir. Genellikle kullanlan rnekleri; Instance_Id, Transaction_Id, Transaction_Num, Transaction_TimeStamp,dekont numaras \n \n \n >> lem Referans Numaras \n refNo \n AN3..50 \n Z \n lemi utan uca tanmlayan tekil tanmlaycdr. Bor ve alacak hareketinden oluan bir veya birden fazla ilemler btn iin atanm olan ve bu btn tekilletiren (bir biri ile ilikisini tutan) deerdir.Bu deer hem YSten gelen deer olabilir (deme ilemlerinde kullanlan kkodRef ya da refBlg alan) hem de HHS iinde takip edilmek iin retilmi bir deer olabilir. HHS sisteminde 2 deerin de bulunmas durumunda;refNo alann doldurmak iin, HHSnin YSten gelen deere ncelik vermesi beklenmektedir. YSten gelen veri rnei: Sipari Numaras, Fatura Numaras, Karekod Referans vb. HHSte retilen veri rnei: Masrafl havale ileminde hem havale ileminin hem de masraf ileminin ayn referans numarasna sahip olmas da rnek olarak gsterilebilir. \n \n \n >> lem Tutar \n islTtr \n AN1..24 \n Z \n lem tutar.    Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para birimi. \n \n \n >> lem Gerekleme Zaman \n islGrckZaman \n ISODateTime \n Z \n lemin gerekleme zaman. \n \n \n >> lem Kanal \n kanal \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeKaynak sral veri tr deerlerinden birini alr. \n \n \n >> Borlandrma Alacaklandrma Gstergesi \n brcAlc \n AN1 \n Z \n TR.OHVPS.DataCode.BrcAlc sral veri tr deerlerinden birini alr. lemin hesab bor ya da alacaklandrd bilgisidir. \n \n \n >> lem Tr \n islTur \n AN3..50 \n Z \n HHSnin ileme ait ilikilendirdii ilem tr deeri. TR.OHVPS.DataCode.IslemTuru sral veri tr deerlerinden birini alr. \n \n \n >> lem Amac \n islAmc \n AN2 \n Z \n TR.OHVPS.DataCode.IslemAmaci srali veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n \n \n >> deme Sistemi No \n odmStmNo \n AN10..50 \n K \n deme baarl balatldysa, demenin balatld sistemdeki referans numaras. Gerektiinde ilgili deme sisteminde/HHSde sz konusu demeye karlk gelen mesajla balant kurmada kullanlr.   deme Hizmeti kullancsna ilemin takibi iin gsterilebilir.  lemin ynlendirildii deme sistemi FAST ya da PS ise sistemdeki ilgili mesajn Tarih, GnderenKatilimKodu ve SorguNumarasi deerlerinin birleiminden oluur. Bu 3 alan mevcutta kullanld formatta aralarna dikey izgi (Unicode U+2223) iareti koyularak, birletirmeli ve iletilmelidir. rn : Tarih|GnderenKatilimKodu|SorguNumarasi   deme Havale/Virman ilemi ise HHSnin retmi olduu havale/virman numarasn ierir. Buradaki format da Tarih|GnderenKatilimKodu|Havale-virman numaras eklinde olmaldr. Havale/FAST/PS  deme yntemleri iin tarih alan yyyy-aa-gg formatnda 10 karakter olarak iletilmelidir. \n \n \n > Detay lem Bilgileri \n islDty \n Kompleks: IslemDetay \n K \n Detay lem Bilgileri dizi olarak gnderilmelidir. \n \n \n >> lem Aklamas \n islAcklm \n AN1..200 \n Z \n HHS tarafndan atanan ilem aklamas. HHS kendi ilem hareketlerine yanstt aklamay buraya yanstmaldr. \n \n \n >> Kar Taraf \n krsTrf \n Kompleks:  KarsiTaraf \n K \n Kullanm ilem baznda deimektedir. rnek: FAST ileminde kar taraf alcnn bilgileridir. Vergi demesinde kurum IBAN bilgisi mteriye gsterilemeyebileceinden bu alann bo gelmesi HHS insiyatifindedir. \n \n \n >>> Kar Maskeli IBAN \n krsMskIBAN \n AN26 \n K \n lgili hesap hareketinin kar tarafnn maskeli IBAN bilgisi. \n \n \n >>> Kar Unvan \n krsMskUnvan \n AN3..140 \n K \n lgili hesap hareketinin kar tarafnn ad-soyad ya da ticari unvan bilgisi. \n \n \n \n"},{title:"HHS ve YS API",frontmatter:{},regularPath:"/v1.1.0/contents/hhs-yos-api.html",relativePath:"v1.1.0/contents/hhs-yos-api.md",key:"v-9cc354c6",path:"/v1.1.0/contents/hhs-yos-api.html",headers:[{level:2,title:"HHS API",slug:"hhs-api"},{level:2,title:"YOS API",slug:"yos-api"}],content:" HHS ve YS API \n HHS API, HHSlerin detay bilgilerini sunan servistir. Bu servis ile aadaki istek/yant yaplar ile ihtiya duyulabilecek ilgili bilgiler temin edilebilir. HHS API iin hhs_read scope bilgisi kullanlr. \n Production ortamnda HHS / YOS API ierisinde sisteme dahil olmu, sertifikasyonu baar ile tamamlam paydalar listelenecektir. HHS tarafndan desteklenen API srmleri listelenecektir. \n YSler HHS APIsini sorgulayabilir ancak YS APIsini sorgulayamazlar. \nBenzer ekilde HHSler YS APIsini sorgulayabilir, HHS APIsini sorgulayamazlar. \n HHS API \n GET /hhs/{hhsKod} \n lem Sorgu rnei =  /hhs    bu sorgu yntemi ile tm HHSlerin dizi eklinde verileri listelenir. \nlem Sorgu rnei =  /hhs/2001    bu sorgu yntemi ile gnderilmi olan hhsKoduna ait bilgiler listelenir. Ya da 404 Not Found hatas alr. \nHHS ve YS API Tablo 20deki istek parametrelerine gre sorgulanabilir. \nlem Sorgu rnei (Belirli Bir Hesap) =  /hhs?srlmKrtr=kod&srlmYon=A \n Tablo 20: HHS ve YS API Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Sralama Kriteri \n srlmKrtr \n AN3..50 \n  \n Cevapta dnlecek ilemlerin sralama kriterini belirtir. Alabilecei deerler: {kod, unv} \n Bu veri gnderildii durumda, HHS ilemler listesini bu kritere gre sralayarak gnderir. Gnderilmediinde, sralama kriteri unv olarak belirlenmelidir. \n \n \n Sralama Yn \n srlmYon \n AN1 \n  \n Cevapta dnlecek ilemlerin sralama ynn belirtir. Alabilecei deerler: A: Azalan deerle sralama Y: Artan deerle sralama {A,Y} \n Bu veri gnderildii durumda, HHS ilemler listesini bu yne gre sralayarak gnderir. Gnderilmediinde, HHS sralama ynn Azalan olarak belirler. \n \n \n \n Tablo 21: HHS Bilgileri Sorgulama Yant Hhs nesnesi \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n hhs kodu \n kod \n AN4 \n Z \n HHS nin kod bilgisi \n \n \n hhs unvan \n unv \n AN3..140 \n Z \n HHS nin unvan bilgisi \n \n \n hhs markas \n marka \n AN1..140 \n Z \n HK'nn kolaylkla alglayabilecei ksa unvan bilgisi. HHS tarafndan belirlenecektir. \n \n \n Ak anahtar \n acikAnahtar \n AN1..1024 \n Z \n HHSnin mesaj imzalama iin paylat ak anahtar \n \n \n HHS Api Bilgileri \n apiBilgileri \n Kompleks: HhsApiBilgi[Array][0..N] \n Z \n Desteklenen Api ve srm bilgileri dnlecektir. \n \n \n > api \n api \n AN1..20 \n Z \n Api smi rnek :obh, hbh,gkd \n \n \n > surum \n surum \n AN1..10 \n Z \n Api Srm Kodu rnek: s1.0, s2.0 s1.0 \n \n \n Logo Bilgileri \n logoBilgileri \n Kompleks: LogoBilgisi [Array][1..N] \n Z \n HHS'ye ait logo bilgileri. \n \n \n > logoTur \n logoTur \n AN3..50 \n Z \n Logonun trn belirler. TR.OHVPS.DataCode.LogoTur sral veri tr deerlerlerinden birini alr. \n \n \n > logoAdr \n logoAdr \n AN1..255 \n Z \n HHS tarafnda tutulan ve YS'lerle paylalacak olan url adres bilgisidir.  rnek: https://via.placeholder.com/150?text=0001 \n \n \n > logoArkaPlan \n logoArkaPlan \n AN1 \n Z \n TR.OHVPS.DataCode.LogoArkaPlan sral veri tr deerlerlerinden birini alr. \n \n \n > logoFormat \n logoFormat \n AN3 \n Z \n TR.OHVPS.DataCode.LogoFormat sral veri tr deerlerlerinden birini alr. \n \n \n Ayrk GKD \n ayrikGKD \n AN1 \n Z \n HHS'nin Ayrk GKD desteklediini BKM'ye bildirmesi ile bu alan E deerini alr.  TR.OHVPS.DataCode.EvetHayir sral veri tiplerinden birini alr. \n \n \n Durum \n durum \n AN1 \n Z \n HHS'nin durum bilgisidir.  TR.OHVPS.DataCode.HHSDurumu sral veri tipinde alabilecei deerler belirtilmitir. \n \n \n \n HHS API'de; Ak, Yaygnlatrma, Geici Hizmet Veremiyor, Kapal durumlarndaki HHS'ler listelenecektir.  \nSertifikasyon onay alan HHS'ler, retim ortamna geite \"Yaygnlatrma\" durumuna sahip olabilir.  HHS'nin, hangi YS'ler ile \"Yaygnlatrma\" kontrollerini yapaca, HHS ynetiminde olacaktr. Bylece retim Ortamnda HHSnin kendisi tarafndan tanmlanm kstl HKya hizmet vermesi ve servislerini test etmesi salanabilir olacaktr. HHS'ler kendi kurum kontrollerini yapana kadar, \"Yaygnlatrma\" durumunda kalabilirler. HHS'nin BKM'ye yapaca talep ile, HHS \"Yaygnlatrma\" durumundan \"Ak\" durumuna geebilecektir. \n Aadaki durumlarda HHS'nin stats Geici Kapal olarak gncellenebilecektir: \n \n HHS'nin talebi ile uzun sreli (minimum 1 saati aan) yaanan teknik sorunlarda G statsne alnabilecektir. G statsne alnma talebinin HHS tarafndan ohvps@bkm.com.tr ye mail atarak iletilmesi beklenmektedir. \n lgili resmi kurumlardan gelen talep zerine HHS G statsne alnabilir. \n \n YS'ler hem A hem G statsnde olan HHS'leri listeleyebilir. Ancak YS uygulamasnda G statsnde olan bir HHS mteri tarafndan seilirse mteriye gerekli hata mesajnn verilmesi ve ilgili HHS'ye istek atlmamas salanmaldr. \n Hem YOS hem de HHS API iin geerli olacak; logo gnderiminde dikkat edilmesi gerekenler u ekilde tariflenmitir: \n \n Logolarn ham dosya yerine kurumun yaynlayaca bir URL zerinden sunulmas gerekmektedir. (rn: logoURL = https://kurumadi.com.tr/logo.png) Logo BKM tarafnda host edilmeyecektir. \n Logo urlin public eriilebilir url olmas gereklidir. \n Logo, yatayda veya dikeyde tama paysz tam oturacak, snr boyutlarn gemeyecek ve ortalanm yerleime sahip olmaldr. \n YS uygulamasnda gsterim esnasnda logolarn hzl yklenmesi ve dk veri tketmesi asndan; logo boyutu 250 KBn altnda olmaldr. \n HHS ve YSlerin tm logo trlerini (8 farkl tipte logoyu) zorunlu olarak dnmesi beklenmektedir. \n Circle logo kullanlmas gerektiinde ICON_LOGO logo tr kullanlmaldr. \n Logolarn gncellemek isteyen kurumlarn en az 3 i gn ncesinde BKMye bu deiiklii GET Test/retim Ortam Entegrasyon formu ile bildirmesi gereklidir.  BKM de katlmclara HHS/YS API aracl ile gncel logonun ekilmesi gerektiine dair bilgilendirme yapar. \n Logolar anlk eken katlmclarn, herhangi bir teknik nedenden dolay gncel logoyu alamad durum olabilir. Bu durumda sistemlerine kaydetmi olduu kuruma ait ikon logoyu gstermesi gereklidir. \n HHS ve YSler API aracl ile alm olduklar logolarn format zerinde deiiklik (kare, yuvarlak hale getirip resize etmek gibi) yapabilirler. Ancak logonun grsel ve yazlarn etkileyecek bir  deiiklik yapmamaldrlar. \n YS/HHS mobil uygulamasndaki dark mode ve light mode kullanmlarnda, hangi logonun kullanlacana uygulama sahibi karar verecektir. \n YOS API \n YS API, YS statsundeki kurumlarn detay bilgilerini sunan servistir. Bu servis ile aadaki istek/yant yaplar ile ihtiya duyulabilecek ilgili bilgiler temin edilebilir. YS API iin yos_read scope bilgisi kullanlr. \n YS API yantnda, listelenen ynlendirme ve bildirim adresleri bulunmaktadr. HHS, ilem annda iletilen yonAdr ya da bldrAdr alanlarnda gnderilen adreslere yetKod deerini iletmelidir. YS API ierisinde yer alan adresleri, rza isteinde gnderilen adreslerin doruluunu kontrol etme amacyla kullanlmaldr. Bu nedenle YS API ierisinde listelenen adreslerin hostname seviyesinde yer almas yeterlidir. \n YS API ierisinde yer alan YS rol bilgileri ve aktiflik/pasiflik durumlar birbiriyle ilikili deildir. \n YS'n sahip olduu bhs,hbhs rolleri iin herhangi bir fraud ya da teknik sebeplerden tr geici sreyle geri alnabilir. \n YS'lerin hizmet verememesi durumunda rollerinin geri alnmas yaplmayacaktr. YS rolleri sadece ilgili resmi kurumlardan gelen talep zerine alnabilecektir. \n YS aktifliini korurken problem zlene kadar geici olarak alnan roller(bhs,hbhs) tekrardan aktif hale getirilir. \n GET /yos/{yosKod} \n lem Sorgu rnei =  /yos    bu sorgu yntemi ile tm YS'lerin dizi eklinde verileri listelenir. \n lem Sorgu rnei =  /yos/2501    bu sorgu yntemi ile gnderilmi olan yosKoduna ait bilgiler listelenir ya da 404 Not Found hatas alr.\nYS API Tablo 20deki istek parametrelerine gre sorgulanabilir.\nlem Sorgu rnei (Belirli Bir Hesap)=  /yos?srlmKrtr=kod&srlmYon=A \n Tablo 22: YOS Bilgileri Sorgulama Yant Yos nesnesi \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Ys kodu \n kod \n AN4 \n Z \n YS'n kod bilgisi \n \n \n Ys unvan \n unv \n AN3..140 \n Z \n YS unvan bilgisi \n \n \n Ys markas \n marka \n AN1..140 \n Z \n HK'nn kolaylkla alglayabilecei ksa unvan bilgisi. YS tarafndan belirlenecektir. \n \n \n YS rolleri \n roller \n Array[AN4] \n Z \n YSun rollerini belirten deer. rnek: [ \"obhs\", \"hbhs\" ]  - obhs - deme Bilgisi Hizmet Salayc Rol  - hbhs - Hesap Bilgisi Hizmet Salayc Rol \n \n \n Adresler \n adresler \n Kompleks:Adres[Array] [1..N] \n Z \n --- \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur sral veri tr deerlerlerinden birini alr. Adres detaylarnn hangi GKD trne ait olduunu belirtir. \n \n \n > Adres Detaylar \n adresDetaylari \n adresDetaylari\tKompleks: AdresDetayi[Array] [1..N] \n Z \n \n \n \n >> Temel Adres \n tmlAdr \n AN1..1024 \n Z \n yetYntm deeri Y olarak iletildiinde Ynlendirmeli GKD srecinde HHSnin YOSe authorizasyon kodunu hangi url e gnderecei bilgisini tutar. yetYntm deeri A olarak iletildiinde Ayrk GKD srecinde HHSnin YOSe authorizasyon kodunu hangi url e gnderecei bilgisini tutar. Riza isteklerinde bu deer ile uyumluluu kontrol edilmelidir. rnek: https://example.com https://example2.com/path deepLink://example/test deepLink://example2/test \n \n \n >> Aklama \n aciklama \n AN1..1024 \n  \n YSn gnderdii adrese ynelik vermek istedii aklama rnek: WEB bireysel , WEB kurumsal  , APP \n \n \n Ak anahtar \n acikAnahtar \n AN1..1024 \n Z \n YSn mesaj imzalama iin paylat ak anahtar \n \n \n YS Api Bilgileri \n apiBilgileri \n Kompleks: YosApiBilgi[Array][0..N] \n Z \n Desteklenen Api ve srm bilgileri dnlecektir. \n \n \n > api \n api \n AN1..20 \n Z \n Api smi rnek :ods \n \n \n > surum \n surum \n AN1..10 \n Z \n Api Srm Kodu rnek: s1.0, s2.0 s1.0 \n \n \n Logo Bilgileri \n logoBilgileri \n Kompleks: LogoBilgisi [Array][1..N] \n Z \n YOSe ait logo bilgileri. \n \n \n > logoTur \n logoTur \n AN3..50 \n Z \n Logonun trn belirler. TR.OHVPS.DataCode.LogoTur sral veri tr deerlerlerinden birini alr. \n \n \n > logoAdr \n logoAdr \n AN1..255 \n Z \n YS tarafnda tutulan ve HHSlerle paylalacak olan url adres bilgisidir.  rnek: https://via.placeholder.com/150?text=0001 \n \n \n > logoArkaPlan \n logoArkaPlan \n AN1 \n Z \n TR.OHVPS.DataCode.LogoArkaPlan sral veri tr deerlerlerinden birini alr. \n \n \n > logoFormat \n logoFormat \n AN3 \n Z \n TR.OHVPS.DataCode.LogoFormat sral veri tr deerlerlerinden birini alr. \n \n \n Durum \n durum \n AN1 \n Z \n YS'n durum bilgisidir.  TR.OHVPS.DataCode.YOSDurumu sral veri tipinde alabilecei deerler belirtilmitir. \n \n \n \n"},{title:"6.\tdeme Emri Balatma Hizmeti",frontmatter:{},regularPath:"/v1.1.0/contents/odeme-emri-baslatma-hizmeti.html",relativePath:"v1.1.0/contents/odeme-emri-baslatma-hizmeti.md",key:"v-7e5b51bd",path:"/v1.1.0/contents/odeme-emri-baslatma-hizmeti.html",headers:[{level:3,title:"deme Emri Balatma Hizmeti iin Eriim Adresleri (Endpoints)",slug:"odeme-emri-baslatma-hizmeti-icin-erisim-adresleri-endpoints"},{level:2,title:"6.1.\tADIM 0 - deme Emri Balatma Istei",slug:"_6-1-adim-0-odeme-emri-baslatma-istegi"},{level:2,title:"6.2.\tADIM 1 - deme Emri Rzasnn Hazrlanmas",slug:"_6-2-adim-1-odeme-emri-rzasnn-hazrlanmas"},{level:2,title:"6.3.\tADIM 2- deme Emri Rzasnn Yetkilendirilmesi",slug:"_6-3-adim-2-odeme-emri-rzasnn-yetkilendirilmesi"},{level:2,title:"6.4.\tADIM 2.1  deme Emri Rzasnn Sorgulanmas (istee bal)",slug:"_6-4-adim-2-1-odeme-emri-rzasnn-sorgulanmas-istege-bagl"},{level:2,title:"6.5.\tADIM 3- deme Emrinin Oluturulmas",slug:"_6-5-adim-3-odeme-emrinin-olusturulmas"},{level:2,title:"6.6.\tADIM 3.1- deme Emri Sorgusu (stee bal)",slug:"_6-6-adim-3-1-odeme-emri-sorgusu-istege-bagl"},{level:3,title:"GET /odeme-emri/{odemeEmriNo}",slug:"get-odeme-emri-odemeemrino"}],content:" 6.\tdeme Emri Balatma Hizmeti \n deme emri balatma ilemi havale, FAST ya da PS demesiyle sonulanabilir. deme ileminin amac kiiden kiiye para transferi, e-ticaret demesi gibi farkl deme trleri olabilir. demenin amacna gre BHSnin iletecei veri setinde farkllamalar olabilir. \n deme Emri Balatma Hizmeti 5 temel akdan oluur: \n \n deme Emri Balatma steinin tetiklenmesi:  HK BHS mobil uygulama ya da websitesinden deme emrini balatr. \n deme Emri Rza Hazrlanmas:  BHS, deme Emri Balatma ilemi iin izin oluturulmas isteini HHSye iletir. \n deme Emri Rzasnn Yetkilendirilmesi:  HHS, gerekli grd durumlarda HKy GKD ile dorular ve deme emri rzasna eriim iin eriim belirteci tanmlanmasn temin eder. \n deme Emrinin Balatlmas:  BHS, deme emrini HHSye iletir. \n deme Emri Rza Durumu, deme Emri Durumu, deme Emri Detay Sorgular:  BHS, deme Emri Rza Durumu, deme Emri Durumu, deme Emri Detay bilgilerini istee bal olarak sorgulayabilir. \n \n \n ekil 4: deme Emri Balatma Hizmeti st Dzey  Ak \n deme Emri Balatma Hizmeti iin Eriim Adresleri (Endpoints) \n deme Emri Balatma Hizmeti in Eriim Adreslerinin Etki Alan (Scope) = odeme_emri olarak belirtilmelidir. \n Tablo 6: deme Emri Balatma Hizmeti in Eriim Adresleri \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu / stee Bal \n Yetkilendirme Tr \n mzalama \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n odeme-emri-rizasi \n POST \n /odeme-emri-rizasi \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n OdemeEmriRizasiIstegi \n OdemeEmriRizasi \n \n \n 2 \n erisim-belirteci (GKD iin) \n POST \n /erisim-belirteci \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n ErisimBelirteciIstegi \n ErisimBelirteci \n \n \n 2.1 \n odeme-emri-rizasi \n GET \n /odeme-emri-rizasi/{rizaNo} \n Z \n stemci Kimlik Bilgileri \n mzal Yant \n - \n OdemeEmriRizaYaniti \n \n \n 3 \n odeme-emri \n POST \n /odeme-emri \n Z \n stemci Kimlik Bilgileri & Yetkilendirme Kodu (GKD) \n mzal stek ve Yant \n OdemeEmriIstegi \n OdemeEmri \n \n \n 3.1 \n odeme-emri \n GET \n /odeme-emri/{odemeEmriNo} \n Z \n stemci Kimlik Bilgileri & Yetkilendirme Kodu (GKD) \n mzal Yant \n - \n OdemeEmri \n 6.1.\tADIM 0 - deme Emri Balatma Istei \n \n HK, BHS uygulamasnda (web arayz/mobil uygulama) deme emri balatma ilemine onay verir. \n Gnderen hesap detaylarnn bu aamada belirtilmesi zorunlu deildir. \n 6.2.\tADIM 1 - deme Emri Rzasnn Hazrlanmas \n   \n ekil 5: deme Emri Rzasnn Hazrlanmas \n \n \n BHS, deme hizmeti kullanc hesabnn bulunduu HHSye balanarak deme emri rza kaynann oluturulmasn (odemeEmriRizasi) salar. \n \n \n POST istei TLS protokol tesis edilen iletiim katman zerinden gerekletirilir. TLS iin nitelikli sertifikalar kullanlr. \n \n \n POST isteinin balndaki alanlar ve istemcinin sertifikasndaki zel alanlar kullanlarak istemcinin yetkilendirilmesi salanr: \n \n stekte bulunan BHS yetkilendirilmi mi? \n stekte bulunan yetkilendirilmi deme hizmeti salaycs BHS rolne sahip mi? \n stekte bulunulan HHS kodu doru mu? \n \n \n \n POST baarl olursa, HHS, deme emri iin ieride rza olup olmamasna baklmakszn yeni bir rza tanmlaycs RizaNo ieren odemeEmriRizasi  yant olarak dner. \n \n \n 1 HK'nn 1 YS iin 1HHS'de istedii kadar rzas olabilir. \n \n \n HHS tarafnda RizaDurumu deikeninin durumu Yetki Bekleniyor olarak gncellenir. \n \n \n YSn dorulama ekran olarak HKya aaca URL adresini de ilgili rza numarasna gre oluturur. Burada 2 farkl yntemle URL oluturabilir. \n \n Statik URL  : \nHHSnin base pathi/alt-dizin/{rzaNo} \nrnek hhsYonAdr : https://xbank.com.tr/ohvps/cb54834e36f742d09af3d534ece3352a \nBu adres iin ilgili dorulama sayfas nden hazrlanmal ve HKnn dorulama sayfasna eriimi iin yaynlanm olmaldr (publish edilmelidir). \n Dinamik URL : \nHHSnin base pathi/alt-dizin/GKD Karlama Ekran?rizano={rzano} \nrnek: https://xbank.com.tr/ohvps/gkd?rizano=cb54834e36f742d09af3d534ece3352a \n \n \n \n POST /odeme-emri-rizasi \n STEK: \n BHS, bu API eriim adresinden HHSye yeni bir OdemeEmriRizasi oluturulmas iin istekte bulunur: \n \n BHS, deme emri balatma istei olduunu HHSye bildirir. \n BHS, HKnn, BHS arayznden verdii rzann (n Onay) bir kopyasnn HHS nezdinde mteri tarafndan onaylanmas iin HHSye gnderilmesini salar. \n HHS; istek mesajnda yer alan alanlarn HVPS API lke ve Kurallar dkmannda belirtilen artlar salayacak ekilde zorunluluk, uzunluk ve ierik kontrollerini yapar. (Zorunlu) \n HHS; YS API ile alnan BHS bilgilerinin ierisinde yer alan ynlendirme ve bildirim adresleri ile deme emri rzas nesnesi request mesajnda paylalan adreslerin uyumlu olup olmadnn kontrollerini yapar. (Zorunlu) \n HHS; kimlik bilgileri nesnesinde eer kimlik bilgileri iletilmi ise; bu veri ile HKnn HHS mterisi olup olmadnn kontrollerini yapar. Bu kontrol hem bireysel hem de kurumsal HKlar iin yaplmaldr.  (Koullu Zorunlu) \n HHS kimlik bilgisi ile gnderen unvannn uyumlu olduunun kontrol eder. HHS'ler EFT/FAST ilemlerinde kabul ettikleri kontrol kriterleri ile ileme izin verebilirler. (Zorunlu) \n Gnderen Hesap Numaras ile ilgili Tablo7de belirtilen kontroller yaplmaldr. (Zorunlu) \n HHS, deme iin benzersiz RizaNo ile OdemeEmriRizasi nesnesi oluturur ve BHSye dner. \n HHS, OdemeEmriRizasi oluturduu anda durumunu Yetki Bekleniyor olarak dzenler. \nBu aamada HKnn HHS tarafndan tanmlanm ve istein veri alannda gnderen hesaba (borlandrlacak hesaba) ilikin bir bilgisinin olmas gerekmez. \nHesap bakiye kontrolnn rza aamasnda yaplmamas gerekmektedir. nk HK deme emri gerekleene kadar hesabna para eklemesi yapabilir. \n \n POST /odeme-emri-rizasi  isteinin (REQUEST) gvdesinde (BODY)  odemeEmriRizasiIstegi nesnesi (Tablo-7) kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda odemeEmriRizasi (Tablo-8) nesnesi oluturulur. \n Tek Seferlik deme \nTek seferlik deme ak YS'ten HHS'ye giden istekte, gnderen kimlik bilgilerinin olmad durumda gerekleir. Gnderen kimlik bilgisi olmadnda, KOLAS sorgusu yaplamayacandan tr, HHS tarafndan TR.OHVPS.Business.InvalidContent hatas dnlmelidir.  HK'nn YS'n mterisi olmad durumda tek seferlik deme balatlabilir. \nTek seferlik deme ak hem iyeri demelerinde hem de kiiden kiiye para transferlerinde kullanlabilen bir aktr. \nTek seferlik deme ak sadece bireysel mteriler iin kullanlabilir. \nTek seferlik deme aknda hem ynlendirmeli hem de ayrk GKD ak ile mteri yetkilendirmesi salanabilir. \n Aadaki senaryolar tek seferlik demeye rnek olarak gsterilebilir. \n yeri demesi ak rnei: Bir e-ticaret sitesinde, ye olmadan alveri yaplmas ve demenin YS tarafndan kimlik bilgisi olmadan balatlmas \nKiiden kiiye para transferi ak rnei: QR veya dier yntemler ile alc bilgilerinin gnderici ile paylalmas ve YS zerinden gnderici bilgileri olmadan alcya para transferi yaplmas iin rza verilmesi \n  BAARILI STEK: \n Tablo 7: OdemeEmriRizasiIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n HHS tarafndan deme emri rzas oluturulmas srasnda yaplmas gereken kontrol ve ilemler \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidASPSP  hata kodunu dner. \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder. Hata durumunda  TR.OHVPS.Connection.InvalidTPP  hata kodunu dner. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n  \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. Yetkilendirme yntemi, BHS tarafndan belirtilmeyebilir. \n HHS, HBHSnin belirledii yntemi dikkate alarak sreci ilgili aka uygun olarak devam ettirir. Desteklemedii yntem iin (rn: Ayrk GKD) ayrca hata mesaj verilmelidir. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu.  YSn iletecei adrestir.  Durum kodu(drmKod), ynlendirme adresine parametre olarak eklenmelidir. \n HHS, mteri uygulama / taraycsn bu alanda belirtilen adrese ynlendirir. \n \n \n > Ayrk GKD \n ayrikGkd \n Kompleks:AyrikGkd \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n yetYntm = A gnderilmi ise ayrikGkd nesnesinin dolu gnderilmesi zorunludur.   HHS, YS'n AYRIK_GKD_BASARILI ve AYRIK_GKD_BASARISIZ olay tipleri iin olay aboneliinin varln kontrol eder.  Bknz: Ayrk GKD \n \n \n >> OHK Tanm Tip \n ohkTanimTip \n AN8 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm tipleridir.  TR.OHVPS.DataCode.ohkTanimTip  sral veri tiplerinden birini alr. \n \n \n \n >> OHK Tanm Deer \n ohkTanimDeger \n AN1..30 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm deeridir. ohkTanimTip'i ile uyumlu deerdir. \n \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n K \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS geerli bir Kimlik Numaras Tr olduunu kontrol eder. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n K \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS, BHS tarafndan iletilmesi durumunda Kimlik Verisi zeriden apraz kontroller uygulamal ve Kimlik Verisini temel alarak GKD gerekletirmelidir.  Pasaport numarasna ilikin kontroller HHS'nin halihazrda kulland veri, ak ve tabi olduu dier dzenlemelerdeki ileyi ile ayn ekilde ele alnmaldr.  Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur.  HHS geerli bir Kurum Kimlik Numaras Tr olduunu kontrol eder. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur.  HHS, BHS tarafndan iletilmesi durumunda Kurum Kimlik Verisi zeriden apraz kontroller uygulamaldr. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n Kurum adna yaplan demelerde K deerini alr. Kurum Kimlik Tr ve Kurum Kimlik Verisi alanlarnn girilmi olduu apraz olarak kontrol edilir. \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n HHS geerli bir para birimi olduu kontrol eder. \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n  \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n K \n Gnderenin unvandr.  HHS, bu bilgiyi BHS sisteminden gelen veri yerine FASTa iletirken kendi sisteminden alabilir.  Tek seferlik deme dnda YS'n gnderen unvann gndermesi zorunludur. \n HHSnin bu veri ile kendi sistemlerindeki verinin farkl olmas ve Kimlik Numaras ile elememesi durumunda deme emri balatma istei reddedilir.  BHS verisi ile HHS verisinin farkllamas durumunun ise risk deerlendirme sistemlerine girdi olarak kullanmas tavsiye edilir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n  \n BHS'nin n yznden daha nce kayt altna alnm hesaplar arasndan setirdii veya mteriye girdii IBANdr.  BHS tarafndan iletilmedii durumda, gnderen hesap bilgisini mteri tarafndan HHSnin dijital kanalnda GKD sonrasnda seilebilir. Bu amala BHS arayznde HHS setirilmelidir.  Hesap Referans kullanlyorsa Hesap Numaras kullanlmayabilir. Hesap referans ile deme emri rzas balatlacak ise HHS hesap referans deeri ile ilikilendirilmi mevcut bir hesap bilgisi rzas var m kontrol etmelidir. Eer aktif bir rzas yok ise  TR.OHVPS.Business.InvalidContent  hatas verilmelidir. \n BHS tarafndan iletildii durumda; IBAN ierisindeki HHS kodunun istek balndaki HHS kodu ile ayn olduu (hesabn HHSye aitliinin kontrol), IBANn doruluu (kontrol basama dorulamas), Hesap numarasnn HKya ait olduu, HHSye zel deme izni verilmeyen farkl statlerin bulunmas durumu kontrol edilir.  Kontrol baarsz olduunda  TR.OHVPS.Business. InvalidAccount  hatas YSe iletilir. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n  \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez.  BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir.  Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n HspRef'e bal IBAN deitiinde yeni IBAN'n da ilgili HspRef ile ilikilendirilmesi beklenmektedir. Bu durumda, HBHS, HspRef ile sorguya geldiinde HHS'nin yeni IBAN ve hesap hareketlerini dnebilmesi mmkn olacaktr. HspRefin, IBAN deitiinde deitirilmemesi tavsiye edilmektedir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n K \n Kolay Adres Sistemi  kullanlmyorsa zorunludur.  Alcnn unvandr. BHS ekranlarndan girii yaplabilecei gibi BHSnin kaytl alclarndan yaplan seimle de doldurup gnderebildii bilgi olabilir.  FAST-TR Karekod Veri Organizasyonunda;  yeri tarafndan sunulan uzun karekod yapsnn  59:  alannda tanml yeri ad alandr, Kiiden Kiiye deme Karekod Yapsnn  07:  alannda tanml    deme Alcsnn Ad ve Soyad  alandr.  FAST-TR Karekod dndaki i yeri demelerinde; yine Unvan alannda iyeri ad bilgisi gnderilmelidir. \n \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n Alcnn Hesap Numaras (IBAN)  alandr.   Kolay Adres Sistemi  kullanlmyorsa zorunludur.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  30-01:  alannda tanml  Yeri IBAN verisi kullanlr.  Alcnn birden fazla hesabnn kullanlabilir olduu durumlarda (zellikle iyeri demelerinde HHS nezdindeki hesap (on-us havale ak) tercih edilmelidir. \n HHS (Gnderen Katlmc) tarafndan IBAN dorulamas (kontrol basama dorulamas) yaplr. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n Tek seferlik demelerde ( kimlik bilgileri bo iletildiinde) KOLAS nesnesi dolu iletiliyorsa; HHS tarafndan TR.OHVPS.Business.InvalidContent hatas dnlmelidir \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n HHS (Gnderen FAST katlmcs) tarafndan KOLAS Servisine yaplan sorguda girdi olarak kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n HHS (Gnderen FAST katlmcs) tarafndan KOLAS Servisine yaplan sorguda girdi olarak kullanlr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n TR.OHVPS.DataCode.KareKodAksTur  sral veri deerlerinden birini alr. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn  gsterir. Okunan karekodda referans deeri varsa kullanlmas zorunludur.  Karekod ilke ve kurallar belgesinde tanmland ekilde kullanlmas gerekmektedir.  Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri veri deerlerinden O deeri atanarak iletilmelidir. O deeri Ak bankaclk aracl ile gnderilen demelerde kullanlr. anlamn tamaktadr. \n HHS, YS'n API deseninde \"O\" kodunu ilettiini kontrol eder. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n HHS geerli bir deme Amac kodu olduunu kontrol eder. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarnda: Gn ierisinde HK zelinde, her ileme zel biricik olarak oluturulan referans bilgisidir.  Karekod P2P ak iin referans bilgisi (Karekod referans numaras deil, ileme zel retilecek referans bilgisidir.) YS tarafndan atanacaktr.   -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  -\tyeri demesi Karekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n YS bu deeri HKy HHSye ynlendirmeden nceki ekranda gstermeli, ve HHS bu deeri GKD iin kulland nyznde ilem dorulama kodunun bir unsuru olarak yine HKya gstermelidir. \n \n \n >> Aklama \n odmAcklm \n AN1..200 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi.  FAST/PS sistemi zerinden yaplan demeler iin aklama bilgisi girilirse boluk karakteri girilerek geilemez. En az bir alfasaysal karakter girilmesi zorunludur. \n \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda istekte yer alr.  yeri deme Bilgileri, YS uygulama nyznde HKnn bildii ve girii yaplmas beklenen bir bilgi olmamaldr. YS tarafndan sistemsel olarak doldurulmas gereklidir. \n \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir.  4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n  BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan OdemeEmriRizasi nesnesi Tablo-8deki parametrelerden oluur: \n Tablo 8: OdemeEmriRizasi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zaman \n \n \n > Gncellenme Zaman \n gnclZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin gncellenme zaman \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n > Rza Iptal Detay Kodu \n rizaIptDtyKod \n AN2 \n K \n Rza durumunun iptal olduu durumda zorunludur. Alabilecei deerler 4. Blmde detaylandrlmtr. \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr.  HHS, BHSnin belirledii yntemi dikkate alarak kendi belirledii yntemi kullanr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunlu. HHS, mteri uygulama / taraycsn ynlendirmeli akta bu alanda belirtilen YS adresine ynlendirir. \n \n \n \n \n \n \n \n \n \n > Ayrk GKD \n ayrikGkd \n Kompleks:AyrikGkd \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n >> OHK Tanm Tip \n ohkTanimTip \n AN8 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm tipleridir. stek ierisindeki veri deitirilmeden iletilir. \n \n \n >> OHK Tanm Deer \n ohkTanimDeger \n AN1..30 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm deeridir. ohkTanimTip'i ile uyumlu deerdir.  stek ierisindeki veri deitirilmeden iletilir. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n Ynlendirmeli ak trnde GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi. Ayrk GKD aknda bu alan dnlmemelidir. \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   HHS tarafndan maksimum 5 dk iinde ilem tamamlanacak ekil zaman damgas oluturulur. Zaman am olduunda HHSnin GKDye izin vermeyecek ekilde hata mesaj vermesi gerekmektedir.  Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n K \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n K \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n  \n \n \n \n >> Unvan \n unv \n AN3..140 \n K \n Gnderenin unvandr.  HHS, bu bilgiyi BHS sisteminden gelen veri yerine FASTa iletirken kendi sisteminden alabilir.   Tek seferlik deme dnda YS'n gnderen unvann gndermesi zorunludur. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n  \n BHS'nin n yznden daha nce kayt altna alnm hesaplar arasndan setirdii veya mteriye girdii IBANdr.  BHS tarafndan iletilmedii durumda, gnderen hesap bilgisini mteri tarafndan HHSnin dijital kanalnda GKD sonrasnda seilebilir. Bu amala BHS arayznde HHS setirilmelidir.   GKD sonras HHS ekrannda seilen Hesap Numaras POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir.    Hesap Referans kullanlyorsa Hesap Numaras kullanlmayabilir. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n  \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid). YS baznda farkllamas gerekmez.  BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir.   GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir.    Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolastan dnen account owner alan kullanlmaldr. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n BHS tarafndan istek mesajnda iletilip dorulanan veya Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen alc maskeli IBAN bilgisidir. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml KOLAS tarafndan ilgili sorguya zel olarak retilmi referans numarasdr. \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n TR.OHVPS.DataCode.KareKodAksTur  sral veri deerlerinden birini alr. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn  gsterir. \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden O deerini alr. O deeri Ak bankaclk aracl ile gnderilen demelerde kullanlr. anlamn tamaktadr. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. Karekod aknda, FAST Karekod Veri Organizasyonundaki 62-08: alannda tanml deme Amac verisi kullanlr. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK zelinde, her ileme zel biricik olarak oluturulan referans bilgisidir.  Karekod P2P ak iin referans bilgisi (Karekod referans numaras deil, ileme zel retilecek referans bilgisidir.) YS tarafndan atanacaktr.  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  - yeri demesi Karekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n \n \n >> Aklama \n odmAcklm \n AN1..200 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi.  FAST/PS sistemi zerinden yaplan demeler iin aklama bilgisi girilirse boluk karakteri girilerek geilemez. En az bir alfasaysal karakter girilmesi zorunludur. \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisidir. Bu alan ileri vadeli demeler iin dnlmtr. lk fazda doldurulmasna gerek olmad dnlmektedir. \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda yantta yer alr. \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n 6.3.\tADIM 2- deme Emri Rzasnn Yetkilendirilmesi \n   \n ekil 6: deme Emri Rzasnn Yetkilendirilmesi \n BHS, HKnn deme emrini yetkilendirmesi isteini iletir. deme emrinin yetkilendirilmesi, HHS tarafndan gerekletirilen Ynlendirme veya Ayrk GKD yntemiyle yaplr. \n \n \n Ynlendirmeli dorulama aknda , BHS HKy HHSye ynlendirir. \n \n BHS tarafndan ynlendirme, bir nceki admdaki RizaNoyu ierir. \n Ynlendirmenin RizaNoyu iermesi sayesinde, HHS hangi deme emriyle ilikili olarak ynlendirme yapldn ilikilendirebilir. \n HHS, HK iin GKD srecini iletir. \n \n HKy dorularsa, \n \n HK -bir nceki admda semediyse- borlu hesabn seer. \n HHS, deme emri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n HHS, HKy olumlu ynlendirme ak ile BHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n \n \n \n yonAdr?rizaDrm=Y&yetKod=xx&rizaNo=yy&rizaTip=O&drmKod=zzz\n \n HKy dorulayamazsa, \n1. HHS, deme emri rza kaynann durumunu Yetki ptal olarak gnceller. \n2. HHS, HKy olumsuz ynlendirme ak ile BHS tarafndan tanmlanan ynlendirme adresine ynlendirir: \n yonAdr?rizaDrm=I&rizaNo=yy&rizaTip=O&drmKod=zzz\n \n HHS tarafnda oluabilecek bir hata durumunun YSe aktarlmas gerektii durumlar olabilir. Bu durumda yonlendirme adresinde hata kodu parametresi zorunlu olarak iletilmelidir. \nHata aklamalarnn neler olabilecei ve YSn kendi uygulamasnda bu hatay ne ekilde gsterecei aada tariflenmitir. \n yonAdr?rizaDrm=I&rizaNo=yy&rizaTip=O&rizaIptDtyKod=11&drmKod=zzz\n \n URLde iletilen Rza ptal Detay Kodu Rza durumlar blmnde (4. Blm) belirtilen hata kodlar ile ayn olacak ekilde tasarlanmtr. GKD srasnda yaplmas gereken kontroller 5.3 blmnde detaylandrlmtr. \n \n Ayrk dorulama aknda , HHS, HKnn deme emrini balatt uygulamadan farkl olabilecek bir dorulama uygulamasnda ilemi dorulamasn ister.\n \n Ayrk ak BHSnin farkl bir kanal kullanarak yetkilendirme istei gndermesiyle balatlr. \n Bu yetkilendirme istei, yetkilendirilecek deme emri rzasnn eletirilecei HKnn bulunmas iin ilgili veriyi tar. \n HHS, HKy dorular. \n HK -bir nceki admda semediyse- borlandrlacak hesabn seer. \n HHS, deme emri rza kaynann durumunu Yetkilendirildi olarak gnceller. \n \n \n \n Baarl GKD sonrasnda (rizaDrm=Y) ilgili rza nesnesi iin (belirli bir rizaNo) yetkilendirme kodunun (yetKod) alnmasnn ardndan eriim belirteci eriim adresine POST ars yaplarak yetkilendirme kodu karlnda eriim belirteci ve yenileme belirteci alnr. POST /eriim-belirteci eriim noktas EK-3te aklanmtr. \n Eriim belirteci alndktan sonra; HHS, deme emri rza kaynann durumunu Yetki Kullanld olarak gnceller. \n 6.4.\tADIM 2.1  deme Emri Rzasnn Sorgulanmas (istee bal) \n   \n ekil 7: odemeEmriRizasi nesnesinin sorgulanmas (istee bal) \n GKD ileminin baaryla tamamlanp deme Emri Rzasnn yetkilendirilmesi esnasnda, gnderen hesap seiminin HHS ekrannda yapld durumlar olabilir. Bu durumlarda deme emri isteinde gnderen hesap bilgileri alannn zorunlu olmas nedeniyle,  OdemeEmriRizasi  nesnesi sorgulanarak gnderen hesap bilgileri (hesap numaras ve/veya hesap referans) alnmaldr. HHS,  ADIM 2 -deme Emri Rzasnn Yetkilendirilmesi  aknda HKnn hesaplar arasnda seim yapmasn ve seilen hesap bilgisinin  OdemeEmriRizasi  nesnesine iler. \n GET /odeme-emri-rizasi/{RizaNo} \n BHS, mevcut durumunu kontrol etmek iin, oluturulan bir  OdemeEmriRizasi  kaynann durumunu istee bal olarak alabilir. \n Durum \n OdemeEmriRizasi  kayna iin kullanlabilecek durum gstergeleri u ekildedir: \n \n Yetki Bekleniyor \n Yetkilendirildi \n Yetki Kullanld \n Yetki deme Emrine Dnt \n Yetki Sonlandrld \n Yetki ptal \n \n deme emri rza durum deiiklikleri 4.2 blmnde detaylandrlmtr. \n BAARILI YANIT: \n GET /odeme-emri-rizasi/{RizaNo}  yantnn (RESPONSE) gvdesinde (BODY)  OdemeEmriRizasistegi nesnesi kullanlr. stek baaryla sonulanrsa HHS kaynak sunucusunda Tablo-8de yer alan parametreleri ieren OdemeEmriRizasi oluturulur. \n Gnderen Hesap Bilgisinin, ADIM 2 (deme Emri Rzasnn Yetkilendirilmesi) sonrasnda HHS ekranndan seildii akta OdemeEmriRizasi nesnesi gncellenir ve BHS  GET /odeme-emri-rizasi/{RizaNo}  istei yaparak gncel gnderen hesap bilgisi bilgisini de ieren OdemeEmriRizasi nesnesini ekmelidir. \n ereve szleme kapsamnda olmayan tek seferlik deme ilemlerinde, Kimlik Tr ve Kimlik Verisi bilgilerinin deme emri rzas srasnda gnderimi zorunlu deildir. Baarl GKD sonras, yani eriim belirteci alndnda, deme emri olumadan nce, YSn deme emri rzasn sorgulayarak bu bilgileri almas ve deme emrini olutururken Kimlik Tr, Kimlik Verisi ve Gnderen Unvan alanlarn dolu olarak gndermesi beklenmektedir.  Ancak rza durumu Yetki Bekleniyor - B, Yetkilendirildi - Y ve Yetki ptal - I statlerinde ise, deme emri rzas sorgulamasnda, HHSnin Kimlik Tr ve Kimlik Verisi bilgisini YS ile paylamamas gerekmektedir. \n 6.5.\tADIM 3- deme Emrinin Oluturulmas \n   \n ekil 8: deme Emrinin Oluturulmas \n POST /odeme-emri \n \n HKnn Gl Kimlik Dorulama ile ilemi yetkilendirmesi sonrasnda, BHS OdemeEmri kaynan oluturur. \n deme emri (OdemeEmri) uygun deme kaynana POST istei yaplarak balatlr.\n \n POST HHS tarafndan ilenir: RizaDurumu Yetki Kullanld ise ileme balanr. \n POST /odeme-emri-rizasi ile POST /odeme-emri isteklerinde istek alanlarn ayn olmas beklenmektedir. HHS tarafndan kontrol salanmaldr.POST verisindeki Gnderen Hesap Numaras ve Alc Hesap Numarasnn ayn bankaya aitse HAVALE deilse FAST veya PS i akna geilir. \n POST verisinin modele gre kontrol yaplr (alan kontrolleri) \n POST verisinin mantksal kontrolleri yaplr (IBAN kontrol, apraz alan kontroller) \n OdemeEmriDurumu Gerekleti / Gnderildi / Gereklemedi olarak gncellenir. \n \n \n POST baarl olursa, ierisinde OdemeEmriNo ve OdemeEmriDurumu deikenleri de bulunan OdemeEmri nesnesi BHSye dner ve RizaDurumu deikenin deeri Yetki deme Emrine Dnt olarak gncellenir. \n \n BAARILI STEK: \n Tablo 9: OdemeEmriIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n HHS tarafndan deme emri oluturulmas srasnda yaplmas gereken kontrol ve ilemler \n FAST A01 PS M01 mesaj mapping \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zaman \n \n \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n HHS, hhsKodun kendisine ait olduunu ve istek balndaki x-aspsp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidASPSP  hata kodunu dner. \n Gnderen katlmc kodu (yani bankann FAST/PSteki Katlmc kodu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n HHS, yosKodun geerli bir deme Hizmeti Salaycs Kodu olduunu ve istek balndaki x-tpp-code deeri ile ayn olduunu kontrol eder.  Hata durumunda  TR.OHVPS.Connection.InvalidTPP  hata kodunu dner. \n YosKod \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n \n \n >Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. \n \n \n \n \n >Ynlendirme Adresi \n yonAdr \n AN1..1024 \n K \n Ynlendirmeli gl kimlik dorulama iin zorunludur. HHS, mteri uygulama / taraycsn ynlendirmeli akta bu alanda belirtilen YS adresine ynlendirir. \n \n \n \n \n \n \n \n \n \n \n \n \n \n >Ayrk GKD \n ayrikGkd \n Kompleks:AyrikGkd \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n yetYntm = A gnderilmi ise ayrikGkd nesnesinin dolu gnderilmesi zorunludur. yetYntm = Y iin bu nesne iletilmemelidir. \n \n \n \n >>OHK Tanm Tip \n ohkTanimTip \n AN8 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm tipleridir. stek ierisindeki veri deitirilmeden iletilir. \n \n \n \n \n >>OHK Tanm Deer \n ohkTanimDeger \n AN1..30 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm deeridir. ohkTanimTip'i ile uyumlu deerdir.  stek ierisindeki veri deitirilmeden iletilir. \n \n \n \n \n >HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n Ynlendirmeli ak trnde GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi. Ayrk GKD aknda bu alan dnlmemelidir. \n \n \n \n \n >Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kimlik Numaras Tr verisi ile ayn olmaldr. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik trnn bu alanda gnderilmesi zorunludur. \n \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n ereve szleme kapsamndaki demelerde kullanm zorunludur. HHS, BHS tarafndan iletilmesi durumunda Kimlik Verisi zeriden apraz kontroller uygulamal ve Kimlik Verisini temel alarak GKD gerekletirmelidir. deme Emri Rizas Nesnesindeki Kimlik Numaras verisi ile ayn olmaldr. Gerek kii tarafndan yaplan demelerde, 1. HHS, Gnderen Ad ve Gnderen Hesap Numarasn deme emri isteinde (Havale/FAST/PS) gnderir. - Gnderen Ad ve dier tm mteri bilgileri, Kimlik Numaras zerinden elde edillir. Pasaport numarasna ilikin kontroller HHS'nin halihazrda kulland veri, ak ve tabi olduu dier dzenlemelerdeki ileyi ile ayn ekilde ele alnmaldr. Kurum adna yaplan (ticari) demelerde, kurum adna ilem yapan kullancnn kimlik verisi bu alanda gnderilebilmesi zorunludur. \n GonKimN / Psp \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kurum Kimlik Tr verisi ile ayn olmaldr. \n \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n Kurum adna yaplan (ticari) demelerde kullanm zorunludur. deme Emri Rizas Nesnesindeki Kurum Kimlik Verisi ile ayn olmaldr. \n GonKimN / VKN \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n Kurum adna yaplan demelerde K deerini alr. Kurum Kimlik Tr ve Kurum Kimlik Verisi alanlarnn giilmi olduu apraz olarak kontrol edilir.  deme Emri Rizas Nesnesindeki HK Tr ile ayn olmaldr. \n \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n deme Emri Rizas Nesnesindeki Para Birimi verisi ile ayn olmaldr. \n \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr.   Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n deme Emri Rizas Nesnesindeki lem Tutar verisi ile ayn olmaldr. HHS ilem tutar deme mesajnda (Havale/FAST/PS) aynen tanmak durumundadr. \n Ttr \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n Z \n \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Gnderen kiinin ad soyad ya da ticari unvan bilgisi. \n HHS ve BHS verisi tutarl olmaldr.  BHS verisi ile HHS verisinin farkllamas durumunun ise risk deerlendirme sistemlerine girdi olarak kullanmas tavsiye edilir. \n GonAd \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n BHS'nin n yznden setirdii/kullancya girdii IBAN Hesap numaras ya da Hesap Referans alanlarndan en az birinin dolu olarak gelmesi gerekmektedir. \n deme Emri Rizas Yant Nesnesindeki Gnderen Hesap Numaras verisi ile ayn olmaldr. \n GonHesN \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n K \n BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme balatlabilir. GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir. Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n YSten alc ad soyad bilgisi geliyorsa ve HHS'nin kontrolnden baarl bir ekilde geti ise HHS'nin tekrar alc ad soyad bilgisi iin giri yaptrmasna gerek bulunmamaktadr. \n AlAd \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n Alcnn Hesap Numaras alandr (IBAN). Kolay Adres  sorgusunda dnlen adres kayd yaptrm olan alcnn maskeli IBAN bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen IBAN bilgisidir. Karekod aknda, FAST Karekod Veri Organizasyonundaki 30-01: alannda tanml  Yeri IBAN verisi kullanlr. \n deme Emri Rizas Yant Nesnesindeki Alc Hesap Numaras verisi ile ayn olmaldr.  Kontroller baaryla sonulanrsa, bilgi FAST/PS AlHesN alanna dorudan aktarr ve FAST/PS Alan Katlmc Kodu (AlKK) olarak Alc HHS Kodu kullanlr.  KOLAS sorgusu sonucunda deme emrinde iletilen maskeli bilgi ile HHSnin kendi deme emri rzas isteinde tuttuu KOLAS sorgusundan dnlen bilgi maskelenerek karlatrlr. Eer ayn deilse uygun hata kodu dnlerek ilem sonlandrlr. \n AlHesN \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n Mterinin sorgulamak istedii Kolay Adres Tipi deeridir.  TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n deme Emri Rizas Yant Nesnesindeki Kolay Adres Tipi verisi ile ayn olmaldr. \n \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n deme Emri Rizas Yant Nesnesindeki Kolay Adres Deeri verisi ile ayn olmaldr. \n FAST (KolasRef) \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml KOLAS tarafndan ilgili sorguya zel olarak retilmi referans numarasdr. \n \n KolasRef ( hem FAST hem de PS iin ayn) \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  Kolay Adresi Sistemi ile birlikte kullanlmaz.  01: FAST katlmcsndan dinamik dorulama hizmeti alnan iyeri demesi  02: FAST katlmcsndan statik dorulama hizmeti alnan iyeri demesi 03: Kiiden kiiye demeler \n deme Emri Rizas Nesnesindeki Kare Kod Ak Tr verisi ile ayn olmaldr. \n FAST: KrkdAksTur \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn gsterir.  Okunan karekodda referans deeri varsa kullanlmas zorunludur. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n deme Emri Rizas Nesnesindeki Karekod Referans verisi ile ayn olmaldr.  evrimii dorulama hizmeti alnmayan statik karekodlar iin Referans numarasnn bulunmad durumlarda HHS tarafndan NONREF ifadesi girilir. \n FAST: Karekod Referans (KrkdRef) \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden O deeri atanarak iletilmelidir. O deeri Ak bankaclk aracl ile gnderilen demelerde kullanlr. anlamn tamaktadr. \n deme Emri Rizas Nesnesindeki deme Kayna verisi ile ayn olmaldr. HHS tarafndan deme mesajnda (FAST/PS) aynen tanmak durumundadr. \n FAST/PS: OdmKynk \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. \n deme Emri Rizas Nesnesindeki deme Amac verisi ile ayn olmaldr. HHS tarafndan deme mesajnda (FAST/PS) aynen tanmak durumundadr. \n FAST (OdmAmc)/PS(OdmAmaci) \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK zelinde, her ileme zel biricik olarak oluturulan referans bilgisidir.  Karekod P2P ak iin referans bilgisi (Karekod referans numaras deil, ileme zel retilecek referans bilgisidir.) YS tarafndan atanacaktr.  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  -yeri demesi Karekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n deme Emri Rizas Nesnesindeki Referans Bilgisi verisi ile ayn olmaldr. \n RefBlg (Hem FAST hem de PS iin ayn) \n \n \n >> Aklama \n odmAcklm \n AN1..200 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi.  FAST/PS sistemi zerinden yaplan demeler iin aklama bilgisi girilirse boluk karakteri girilerek geilemez. En az bir alfasaysal karakter girilmesi zorunludur. \n \n FAST/PS Acklm \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n deme Emri Rizas Nesnesindeki deme Sistemi verisi ile ayn olmaldr. \n \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisi \n \n \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda istekte yer alr.  yeri deme Bilgileri, YS uygulama nyznde HKnn bildii ve girii yaplmas beklenen bir bilgi olmamaldr. YS tarafndan sistemsel olarak doldurulmas gereklidir. \n \n \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). 4 karakterden kk deerlerin bana 0 eklenerek iletilmesi gereklidir. \n \n \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n \n \n \n \n \n BAARILI YANIT: \n POST ileminin RESPONSE gvdesini (BODY) oluturan OdemeEmri nesnesi Tablo-10daki parametrelerden oluur: \n Tablo 10: OdemeEmri nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format: Veri modeli smi \n Zorunlu / Koullu / stee bal \n Aklama \n \n \n \n \n Riza Bilgileri \n rzBlg \n Kompleks: RizaBilgileri \n Z \n \n \n \n > Rza No \n rizaNo \n AN1..128 \n Z \n OdemeEmriRzasi nesnesinin oluturulmas esnasnda HHS kaynak sunucusu tarafndan atanan biricik tanmlayc \n \n \n > Oluturma Zaman \n olusZmn \n ISODateTime \n Z \n OdemeEmriRizasi nesnesinin oluturulma zamandr. \n \n \n > Rza Durumu \n rizaDrm \n AN1 \n Z \n TR.OHVPS.DataCode.RizaDurumu  sral veri tipini deerlerinden birini alr. \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n stein iletildii Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n stei gnderen Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n GKD \n gkd \n Kompleks:Gkd \n Z \n \n \n \n > Yetkilendirme Yntemi \n yetYntm \n AN1 \n Z \n TR.OHVPS.DataCode.GkdTur  sral veri tr deerlerinden birini alr. \n \n \n > Ynlenme Adresi \n yonAdr \n AN1..1024 \n Z \n Ynlendirmeli gl kimlik dorulama iin zorunlu. HHS, mteri uygulama / taraycsn ynlendirmeli akta bu alanda belirtilen YS adresine ynlendirir. \n \n \n > Ayrk GKD \n ayrikGkd \n Kompleks:AyrikGkd \n K \n Ayrk gl kimlik dorulama iin zorunlu. \n \n \n >> OHK Tanm Tip \n ohkTanimTip \n AN8 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm tipleridir. stek ierisindeki veri deitirilmeden iletilir. \n \n \n >> OHK Tanm Deer \n ohkTanimDeger \n AN1..30 \n K \n HK'nn HHS uygulamas tarafndan tannmasn salayacak tanm deeridir. ohkTanimTip'i ile uyumlu deerdir.  stek ierisindeki veri deitirilmeden iletilir. \n \n \n > HHS Ynlenme Adresi \n hhsYonAdr \n AN1..1024 \n K \n Ynlendirmeli ak trnde GKD dorulama bilgilerinin girilebilmesi iin uygulamadan alacak ynlendirme sayfasnn adresi. Ayrk GKD aknda bu alan dnlmemelidir. \n \n \n > Yetkilendirme Tamamlanma Zaman \n yetTmmZmn \n ISODateTime \n Z \n Yetkilendirme aknn tamamlanmas gereken son zaman gsterir.   Rza durumu Yetkilendirildi statsne geene kadarki sredir. \n \n \n Emir Bilgileri \n emrBlg \n Kompleks: EmirBilgileri \n Z \n \n \n \n > deme Emri Numaras \n odmEmriNo \n AN1..128 \n Z \n odemeEmri nesnesinin UID'sidir. OdemeEmrine likin sorgular bu ID zerinden yaplr. \n \n \n > deme Emri Zaman \n odmEmriZmn \n ISODateTime \n Z \n odemeEmri nesnesinin oluturulma zamandr. \n \n \n deme Balatma \n odmBsltm \n Kompleks: OdemeBaslatma \n Z \n \n \n \n > Kimlik \n kmlk \n Kompleks:Kimlik \n Z \n \n \n \n >> Kimlik Tr \n kmlkTur \n AN1 \n Z \n TR.OHVPS.DataCode.KimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kimlik Verisi \n kmlkVrs \n AN1..30 \n Z \n HHS nezdinde kullanc dorulamasnda kullanlan tanmlaycdr. TR.OHVPS.DataCode.KimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> Kurum Kimlik Tr \n krmKmlkTur \n AN1 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik trdr. TR.OHVPS.DataCode.KurumKimlikTur  sral veri tr deerlerinden birini alr. \n \n \n >> Kurum Kimlik Verisi \n krmKmlkVrs \n AN1..30 \n K \n Kurum adna yaplan demelerde HKnn altnda tanml olduu tzel kiilik iin kullanlan kurum kimlik verisidir.   TR.OHVPS.DataCode.KurumKimlikTur  deerine gre uzunluk ve format deiir. \n \n \n >> deme Hizmeti Kullancs Tr \n ohkTur \n AN1 \n Z \n TR.OHVPS.DataCode.OhkTur  sral veri tr deerlerinden birini alr  (B: Bireysel, K:Kurumsal) \n \n \n > lem Tutar \n islTtr \n Kompleks:Tutar \n Z \n \n \n \n >> Para Birimi \n prBrm \n AN3 \n Z \n Para Birimi.  Karekod aknda, FAST Karekod Veri Organizasyonundaki  53: (Para Birimi)  alannda tanml Para Birimi verisi kullanlr. \n \n \n >> Tutar \n ttr \n AN1..24 \n Z \n BHS'nin n yzde kullancdan teyit ald tutar.   Karekod aknda, FAST Karekod Veri Organizasyonundaki  54: (Tutar)  alannda tanml Tutar verisi kullanlr.    Tutar alan regex patterni u ekildedir: '^\\d{1,18}$|^\\d{1,18}\\.\\d{1,5}$' \n \n \n > Gnderen \n gon \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Gnderen kiinin ad soyad ya da ticari unvan bilgisi. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n K \n BHS tarafndan iletilip dorulanan veya HHS ekrannda seilen Gnderen Hesap Numaras dnlr. \n \n \n >> Hesap Referans \n hspRef \n AN5..40 \n K \n HHS tarafndan hesap iin atanan biricik tanmlycdr (uuid)  YS baznda farkllamas gerekmez. BHSnin ayn zamanda HBHS olduu durumda mteri rzas tesis edilmi bir hesabn referans zerinden de deme baaltlabilir. GKD sonras HHS ekrannda seilen Hesap Referans POST ileminin yantnda dnlemez ancak istee bal GET sorgusu ile dnlebilir. Hesap Numaras kullanlyorsa Hesap Referans kullanlmayabilir. \n \n \n > Alc \n alc \n Kompleks:Hesap \n Z \n \n \n \n >> Unvan \n unv \n AN3..140 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen adres kayd yaptrm olan alcnn maskeli ad-soyad veya maskeli ticari unvan bilgisidir. Kolastan dnen account owner alan kullanlmaldr. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen unvan bilgisidir. \n \n \n >> Hesap Numaras \n hspNo \n AN26 \n Z \n Alcnn Hesap Numaras alandr (IBAN). Kolay Adres  sorgusunda dnlen adres kayd yaptrm olan alcnn maskeli IBAN bilgisidir. Kolay adres deil ise BHS tarafndan istek mesajnda iletilen IBAN bilgisidir. Karekod aknda, FAST Karekod Veri Organizasyonundaki 30-01: alannda tanml  Yeri IBAN verisi kullanlr. \n \n \n >> Kolay Adres \n kolas \n Kompleks:Kolas \n K \n \n \n \n >>> Kolas Tr \n kolasTur \n AN1 \n Z \n Mterinin sorgulamak istedii Kolay Adres Tipi deeridir.  TR.OHVPS.DataCode.KolasTur  sral veri tr deerlerinden birini alr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Deeri \n kolasDgr \n AN7..50 \n Z \n Mterinin ekledii, HHS (FAST katlmcs) tarafndan dorulanm Kolay Adres deeridir. Alabilecei deerler BKM Kolay Adresleme Sistemi Uygulama Kurallar belgesinde tanmldr.  Alc Hesap Numaras girilmediyse kullanm zorunludur ve  Kolay Adres Tipi  alanyla birlikte kullanlr. \n \n \n >>> Kolas Referans Numaras \n kolasRefNo \n N12 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml KOLAS tarafndan ilgili sorguya zel olarak retilmi referans numarasdr. \n \n \n >>> Kolas Hesap Tr \n kolasHspTur \n AN1 \n Z \n Kolay Adres Alc Sorgusunda baarl sorgu sonucunda dnlen, BKM Kolay Adresleme Sistemi Uygulama Kurallarnda tanml hesap tr bilgisidir:   TR.OHVPS.DataCode.KolasHspTur  sral veri deerlerinden birini alr. \n \n \n > Karekod \n kkod \n Kompleks:Karekod \n K \n \n \n \n >> Ak Tr \n aksTur \n AN2 \n Z \n Karekod Ak Tr Karekod demesinin hangi akla gerekletirildiini gsterir.  Kolay Adresi Sistemi ile birlikte kullanlmaz.  01: FAST katlmcsndan dinamik dorulama hizmeti alnan iyeri demesi  02: FAST katlmcsndan statik dorulama hizmeti alnan iyeri demesi 03: Kiiden kiiye demeler \n \n \n >> Referans \n kkodRef \n AN1..12 \n K \n Karekod referans numarasn gsterir.  Okunan karekodda referans deeri varsa kullanlmas zorunludur. Kolay Adresi Sistemi ile birlikte kullanlmaz. \n \n \n >> retici Kodu \n kkodUrtcKod \n AN4 \n Z \n Karekod reticisinin kodu.  deme Hizmeti Salayclar ve TCMB tarafndan uygun grlen deme sistemi ileticisi TR Karekod retebilmek iin BKMye kayt bavurusu yaparak karekod retici kodu alabileceklerdir. Bankalar EFT kodlarn kullanacak olup ayrca kayt yaptrmalarna gerek bulunmamaktadr. 4 haneden ksa deerlerin sol taraf 0 karakteri ile tamamlanmaldr. \n \n \n > deme Ayrntlar \n odmAyr \n Kompleks: OdemeAyrintilari \n Z \n \n \n \n >> deme Kayna \n odmKynk \n AN1 \n Z \n demenin balatld kayna belirtir.  TR.OHVPS.DataCode.OdemeKaynak  sral veri deerlerinden O  deerini alr. O deeri Ak bankaclk aracl ile gnderilen demelerde kullanlr. anlamn tamaktadr. \n \n \n >> deme Durumu \n odmDrm \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeDurumu  sral veri deerlerinden birini alr.      deme Durumu alan ile ilgili olarak HHSler tarafndan YSlere  OdemeEmri servisi yantnda 02:Gnderildi, 04:Onayda Bekliyor,05:leme Alnd yantlar gnderilebilir.   05:leme Alnd  durumu YS tarafndan mteriye gsterilmeyen bir koddur. Bu kod dnldnde YS uygulamasnda HKya deme durumu  02:Gnderildi  olarak gsterilir. lemin son durumunun teyidi iin YS deme emri sorgulamas yapmaldr.   02:Gnderildi  durumu olutuktan sonra YS tarafndan deme emri sorgulamas yaplarak deme durumunun gncel deeri renilir. Gncel deerler  01:Gerekleti,03:Gereklemedi  durumlar olabilir. \n \n \n >> deme Amac \n odmAmc \n AN2 \n Z \n TR.OHVPS.DataCode.OdemeAmaci  sral veri deerlerinden birini alr. \n \n \n >> Referans Bilgisi \n refBlg \n AN1..140 \n K \n demeye zel  Referans Bilgisi  alandr. Karekod ilemi deil ise zorunludur.  -\tKiiden kiiye fon aktarmlarda: Gn ierisinde HK zelinde, her ileme zel biricik olarak oluturulan referans bilgisidir.  Karekod P2P ak iin referans bilgisi (Karekod referans numaras deil, ileme zel retilecek referans bilgisidir.) YS tarafndan atanacaktr.  -\tE-ticaret ilemlerinde sipari/takip numaras/mteri/abone numaras  - yeri demesi Karekod aknda, FAST Karekod Veri Organizasyonundaki  -\t62-01: alannda tanml Fatura Numaras   -\t62-06: alannda tanml Mteri Numaras   verilerinden biri kullanlr. \n \n \n >> Aklama \n odmAcklm \n AN1..200 \n  \n BHSnin HKdan ald ya da kendisinin atad ilem aklamas bilgisi.  FAST/PS sistemi zerinden yaplan demeler iin aklama bilgisi girilirse boluk karakteri girilerek geilemez. En az bir alfasaysal karakter girilmesi zorunludur. \n \n \n >> HK Mesaj Alan \n ohkMsj \n AN1..200 \n  \n HHSnin HKya gstermek zere ilettii mesaj. \n \n \n >> deme Sistemi \n odmStm \n AN1 \n Z \n TR.OHVPS.DataCode.OdemeSistemi  sral veri deerlerinden birini alr. \n \n \n >> deme Sistem Numaras \n odmStmNo \n AN10..50 \n K \n deme baarl balatldysa, demenin balatld sistemdeki referans numaras. Gerektiinde ilgili deme sisteminde/HHSde sz konusu demeye karlk gelen mesajla balant kurmada kullanlr.   deme Hizmeti kullancsna ilemin takibi iin gsterilebilir.  lemin ynlendirildii deme sistemi FAST ya da PS ise sistemdeki ilgili mesajn Tarih, GnderenKatilimKodu ve SorguNumarasi deerlerinin birleiminden oluur. Bu 3 alan mevcutta kullanld formatta aralarna dikey izgi (Unicode U+2223) iareti koyularak, birletirmeli ve iletilmelidir. rn : Tarih|GnderenKatilimKodu|SorguNumarasi   deme Havale/Virman ilemi ise HHSnin retmi olduu havale/virman numarasn ierir. Buradaki format da Tarih|GnderenKatilimKodu|Havale-virman numaras eklinde olmaldr. Havale/FAST/PS  deme yntemleri iin tarih alan yyyy-aa-gg formatnda 10 karakter olarak iletilmelidir. \n \n \n >> Beklenen deme Zaman \n bekOdmZmn \n ISODateTime \n K \n lemin ynlendirildii deme sistemi PS ise ve PS ilem saatleri dnda ise ilemin yaplabilecei ilk zaman bilgisi \n \n \n yeri deme Bilgileri \n isyOdmBlg \n Kompleks:IsyeriOdemeBilgileri \n  \n yeri demelerinde kullanlabilecek alanlardr. Karekodlu iyeri demesi aknda bu alanlar dolu geldii iin istee bal olarak gnderilebilir. isyOdmBlg alanlarnn en az birinin dolu olmas durumunda yantta yer alr. \n \n \n > yeri Kategori Kodu \n isyKtgKod \n AN4 \n  \n lemin, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). deme Amac = 06 ya da 04 olan deme ilemleri iin doldurulabilir. \n \n \n > Alt yeri Kategori Kodu \n altIsyKtgKod \n AN4 \n  \n lem alt iyerinden gerekletiriliyorsa, ISO 18245:2003 uyumlu yeri Kategori Kodudur (Merchant Category Code, MCC). \n \n \n >ye  Yeri Tekil Kimlik \n genelUyeIsyeriNo \n AN8 \n  \n yeri kayt sisteminde kaytl yeri iin BKM tarafndan retilmi olan genel iyeri numarasdr (GlobalMerchantId) 8 haneden kk gnderiminde baa 0 eklenmelidir. rnek deer 01630618 \n 6.6.\tADIM 3.1- deme Emri Sorgusu (stee bal) \n   \n ekil 9: deme Emri Sorgusu \n GET /odeme-emri/{odemeEmriNo} \n BHS, bu eriim adresi araclyla deme emrini sorgulayabilir. \n BAARILI YANIT: \n GET /odeme-emri/{odemeEmriNo} yantnn (RESPONSE) gvdesinde (BODY)  OdemeEmri nesnesi bulunur. stek baaryla sonulanrsa HHS kaynak sunucusunda Tablo-10da yer alan parametreleri ieren OdemeEmri nesnesi dner. \n"},{title:"2.Kapsam ve Dayanak",frontmatter:{},regularPath:"/v1.1.0/contents/kapsam-ve-dayanak.html",relativePath:"v1.1.0/contents/kapsam-ve-dayanak.md",key:"v-9e25e106",path:"/v1.1.0/contents/kapsam-ve-dayanak.html",content:" 2.Kapsam ve Dayanak \n 12 Kasm 2019da gncellenen  6493 sayl deme ve Menkul Kymet Mutabakat Sistemleri, deme Hizmetleri ve Elektronik Para Kurulular Hakknda Kanun un (Kanun) 12nci maddesine yeni eklenen ve  deme Hizmetleri Direktifi 2 'de (Payment Services Directive 2, PSD2) bulunan iki yeni deme hizmeti aadaki gibi tanmlanmtr (ekil-1: deme Hizmetleri Veri Paylam Servisleri): \n \n deme Emri Balatma Hizmeti : HKnn istei zerine baka bir deme hizmeti salaycsnda bulunan  deme hesabyla  ilgili sunulan deme emri balatma hizmeti [Madde 12, birinci fkra, (f) bendi] \n Hesap Bilgisi Hizmeti : HKnn onaynn alnmas kouluyla, HKnn deme hizmeti salayclar nezdinde bulunan bir veya daha fazla  deme hesabna  ilikin konsolide edilmi bilgilerin evrim ii platformlarda sunulmas hizmeti [Madde 12, birinci fkra, (g) bendi] \n \n   \n ekil 1: deme Hizmetleri Veri Paylam Servisleri (HVPS)- tantm \n Kanunun 14/A maddesinin ikinci fkrasna gre , Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetleri ile ilgili ilemlerin yrtlmesine ilikin usul ve esaslar ile taraflarca uyulmas gereken teknik ve operasyonel gereklilikler ikincil dzenlemeler uyarnca Trkiye Cumhuriyet Merkez Bankas (TCMB) tarafndan belirlenir. Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetlerinde kullanlan veri paylam servisleri  deme hizmetleri veri paylam servisleri (HVPS)  olarak adlandrlmaktadr. \n deme Hizmetleri ve Elektronik Para hrac ile deme Hizmeti Salayclar Hakknda Ynetmelikin (Ynetmelik) 59uncu maddesinin birinci fkras uyarnca hazrlanan bu belgede sz konusu deme hizmetlerini sunacak deme hizmeti salaycsnn, deme hesabnn bulunduu deme hizmeti salaycsnn, varsa ilgili dier taraflarn ve bu hizmetlerin sunulmas iin taraflar arasnda kurulacak balantnn teknik ve operasyonel gereklilikleri aklanmaktadr. \n Dzenlemeler kapsamnda yetkilendirilen nc taraf hizmet salaycs  (Yetkili deme Hizmeti Salaycs, YS) , deme hizmeti kullanclarnn  Hesap Hizmeti Salayclar (HHS)  nezdindeki deme hesaplarna ulaarak deme emri balatma ve hesap bilgisi salama hizmetlerinden (deme hizmetleri veri paylam servislerinden) faydalanmasna araclk eder. deme hizmetleri veri paylam servisleri kapsamnda iki tip YS bulunmaktadr:  1) Hesap Bilgisi Hizmeti Salaycs (HBHS) ve 2) deme Emri Balatma Hizmeti Salaycs (BHS). \n Hesap Bilgisi Hizmeti Salaycs (HBHS) HKnn farkl Hesap Hizmeti Salayclar (HHS) nezdindeki hesaplarnn bilgilerini derleyerek evrim ii platformlarda  toplu ekilde  sunar. deme Emri Balatma Hizmeti Salaycs (BHS) ise talebi zerine HKnn HHSde bulunan deme hesabndan deme ilemi balatr. \n HVPSnin st dzey gsterimi ekil-2de verilmitir. \n   \n ekil 2: deme Hizmetleri Veri Paylam Servisleri (HVPS) -st dzey gsterim \n deme Hizmetleri Veri Paylam Servislerinin HHSler tarafndan  GET  vastasyla sunulduu uygulama mimarisi ise ekil-3te sunulmutur. \n  \n ekil 3: HVPS'nin GET vastasyla sunumu \n"},{title:"10.\tOlay Bildirim",frontmatter:{},regularPath:"/v1.1.0/contents/olay-bildirim.html",relativePath:"v1.1.0/contents/olay-bildirim.md",key:"v-206455c6",path:"/v1.1.0/contents/olay-bildirim.html",headers:[{level:2,title:"Genel Bilgiler",slug:"genel-bilgiler"},{level:2,title:"Olay Abonelik Servisleri (OAS)",slug:"olay-abonelik-servisleri-oas"},{level:2,title:"ADIM 1: Olay Aboneliinin gerekletirilmesi",slug:"adim-1-olay-aboneliginin-gerceklestirilmesi"},{level:2,title:"ADIM 2: Olay Aboneliinin gncellenmesi",slug:"adim-2-olay-aboneliginin-guncellenmesi"},{level:2,title:"ADIM 3: Olay Aboneliinin sorgulanmas",slug:"adim-3-olay-aboneliginin-sorgulanmas"},{level:2,title:"ADIM 4: Olay Aboneliinin iptali",slug:"adim-4-olay-aboneliginin-iptali"},{level:2,title:"ADIM 5: Olay Aboneliinin letilemeyen Olaylar",slug:"adim-5-olay-aboneliginin-iletilemeyen-olaylar"},{level:2,title:"ADIM 6: Sistem Olay Dinleme",slug:"adim-6-sistem-olay-dinleme"},{level:2,title:"Olay Dinleme Servisleri (ODS)",slug:"olay-dinleme-servisleri-ods"},{level:2,title:"ADIM 1: Olay Dinleme",slug:"adim-1-olay-dinleme"},{level:2,title:"ADIM 2:  Sistem Olay Dinleme",slug:"adim-2-sistem-olay-dinleme"}],content:" 10.\tOlay Bildirim  \n Genel Bilgiler \n Olay Bildirim Abonelik API servisleri, HHS'lerin sunmu olduklar olay bildirimlerini takip etmek amacyla abonelik aklarn tanmlar. \n YS'ler olay bildirimlerini takip edebilmek iin talep ettikleri abonelik hizmetlerini belirterek HHS'ler zelinde bir abonelik kayd olutururlar. Bu abonelik kaydn okuyabilir, gncelleyebilir ya da silebilirler. \n Olay bildirimleri HHS'ler tarafndan 2 yntem ile salanr. lki olay bildirimlerinin anlk olarak iletilmesi, dieri ise anlk iletilemeyen olaylarn toplu olarak iletilmesidir. \n Olay Bildirimi 2 API ile ynetilecektir. \n 1 - Olay Abonelik Servisleri (OAS) \n2 - Olay Dinleme Servisleri  (ODS) \n Olay Abonelik ve Olay Dinleme API'lerinin istek ve yant balnda beklenen parametreler BH,HBH,GKD API'lerinden farkldr.\n 3.15. stek Bal  ve  3.16. Yant Bal  blmlerinde zorunlu parametreler ve aklamalar belirtilmitir. \n Olay Abonelik Servisleri (OAS) \n Olay abonelik Servisleri; HHS'ler tarafndan sunulacak olay bildirim abonelik servislerini ve iletilemeyen olaylar servisini iermektedir. \n HHS'nin sunaca bu API ile YS'ler u admlar gerekletirebilir. \n \n YS'n olay bildirimlerini dinleyebilmek iin ncelikle dinlemek istedii olaylara ait olay tipleri ve kaynak tiplerini belirlemesi gerekmektedir. \n Olay tipleri ve kaynak tiplerinin neler olaca \"Olay Tipleri ve Kaynak Tipleri likisi\" tablosunda belirtilmitir. \n YS, belirledii olaylar iin HHS'ye olay abonelik endpointi aracl ile abonelik balatr. \n YS, abonelik numaras aracl ile abonelik bilgilerini grntleyebilir, gncelleyebilir, silebilir. \n YS, olay bildirimlerini bu abonelik sayesinde kendisinin sunaca Olay Dinleme API'si ile dinler. \n HHS anlk iletemedii olaylarn biriktirerek, iletilemeyen olaylar endpointi ile YS'e sunar. \n \n HHS'ler \"Olay Tipleri ve Kaynak Tipleri likisi\" tablosunda belirlenen olay ve kaynak tiplerinin tm iin YS'lere bildirim sunmak zorundadr. \n Olay Abonelik Servislerinde Idempotency kurallarnn iletilmesine gerek bulunmamaktadr. \n YS'ler sahip olduklar rol zelinde olay abonelik servislerinden faydalanabilir. Bu yzden olay bildirim etki alan (scope) deerleri hesap_bilgisi ve/veya odeme_emri olarak belirlenmitir. \n Olay Abonelik Servisine ait API Endpointleri aadaki tabloda listelenmitir. \n Olay Abonelik Servisleri iin Eriim Adresleri (Endpoints) \n Etki Alan (Scope) =hesap_bilgisi  \"odeme_emri\" \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu (Z)/ stee Bal() \n Yetkilendirme Tr \n mzalama \n Parametre \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n olay-abonelik \n POST \n /olay-abonelik \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n OlayAbonelikstegi \n OlayAbonelik \n \n \n 2 \n olay-abonelik \n GET \n /olay-abonelik \n Z \n stemci Kimlik Bilgileri \n mzal Yant \n \n - \n OlayAbonelik \n \n \n 3 \n olay-abonelik/{olayAbonelikNo} \n PUT \n /olay-abonelik/{olayAbonelikNo} \n Z \n stemci Kimlik Bilgileri \n mzal stek ve Yant \n \n OlayAbonelik \n OlayAbonelik \n \n \n 4 \n olay-abonelik/{olayAbonelikNo} \n DELETE \n /olay-abonelik/{olayAbonelikNo} \n Z \n stemci Kimlik Bilgileri \n - \n - \n - \n - \n \n \n 5 \n olay-abonelik/{olayAbonelikNo}/iletilemeyen-olaylar \n GET \n /olay-abonelik/{olayAbonelikNo}/iletilemeyen-olaylar \n Z \n stemci Kimlik Bilgileri \n - \n Sayfalama \n \n Olaylar \n \n \n 6 \n sistem-olay-dinleme \n POST \n sistem-olay-dinleme \n Z \n stemci Kimlik Bilgileri \n - \n - \n Olaylar \n - \n ADIM 1: Olay Aboneliinin gerekletirilmesi \n POST /olay-abonelik \n HHS'nin olay abonelik hizmeti sunduu servistir.\nYS, seecei olay-kaynak tipleri iin bu servis aracl ile abone olabilir. HHS POST ilemi sonucunda, YS adna bir olay abonelik kayna oluturur ve tekil tanmlayc olan olayAbonelikNo deerini dner. olayAbonelikNo retilirken farkl YS'ler iin ayn deer kullanlamaz. olayAbonelikNo evrensel tekil olmaldr. \n1 YS'n 1 HHS'de 1 adet abonelik kayd olabilir. \nBaarl POST istei sonucu HTTP 200 cevab ile iletilmelidir. \n YS tarafndan daha nce oluturulmu olay abonelik kayd varsa \"HTTP 400 -TR.OHVPS.Business.InvalidContent -Kaynak akmas\" hatasyla uyar mesajn dner. \n Olay Abonelik kayd oluturmak isteyen YS'n ODS API tanm HHS tarafndan kontrol edilmelidir. YS'n tanm olmamas halinde \"HTTP 400-TR.OHVPS.Business.InvalidContent\" hatas verilmelidir. \n Olay Abonelik kayd oluturmak isteyen YS tarafndan olay tipi ve kaynak tipi iin iletilen deerler olmas gereken sral veri tlerinden(TR.OHVPS.DataCode.OlayTip ve TR.OHVPS.DataCode.KaynakTip) farkl ise HHS tarafndan  \"HTTP 400-TR.OHVPS.Resource.InvalidFormat\" hatas verilmelidir. \n Abonelik zerinde grntleme, gncelleme, silme ilemlerini gerekletirebilir.\nYS'n Abonelii devam ettii srece; YS'n aaca Olay Dinleme API'sine, HHS tarafndan abonelik kapsamnda olay bildirimleri iletilir. \n BKM'nin sunaca abonelik servisleri iin HHS ve YS'lerin abonelik istei yapmasna gerek bulunmamaktadr. BKM retim ortam tanmlar yaplrken katlmclar abonelik servislerine ye yapacaktr. BKM'nin sunaca abonelik servislerinin olay tipi \"HHS_YOS_GUNCELLENDI\"dir. HHS ve YS API ile sunulan bilgilerde bir deiiklik olduunda yaplacak olay bildirimlerini salar.\nrnein; HHS logo bilgilerinde yaplacak bir deiiklik sonrasnda, YS'lere yaplacak bildirim ile logo bilgisini deien HHS'nin hhsKod deerini iletir. YS, HHS API'yi  hhsKod ile ararak HHS'nin gncel bilgilerini alr. Gncel bilgiler ile kendi sistemini gnceller. \n OlayAbonelikIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n \n Abonelik Tipleri \n abonelikTipleri \n Kompleks: abonelikTipleri[Array][1..N] \n Z \n \n \n \n \n > Olay Tipi \n olayTipi \n AN1..36 \n Z \n YS abone olmak istedii olay tiplerini TR.OHVPS.DataCode.OlayTip sral veri tiplerinden deer ya da deerler ile doldurur. \n \"Olay Tipleri ve Kaynak Tipleri likisi\" tablosunda \"Olay Bildirim Yapan\" kolonu \"HHS\" olan olay tipleri ile veri giriine izin verilir. \n \n \n > Kaynak Tipi \n kaynakTipi \n AN1..36 \n Z \n Olay tiplerinin tanmlanabildii kaynak listesi bulunmaktadr. Bu listeye uygun kaynak tipleri iletilmelidir. \n HHS, YS API zerinden YS'n rollerini alarak uygun kaynak tiplerine kayt olmasn salar. \n \n \n \n OlayAbonelik nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Olay Abonelik Numaras \n olayAbonelikNo \n AN1..64 \n Z \n YS zelinde oluturulan tekil tanmlaycdr. Farkl YS'ler iin ayn deer kullanlamaz. \n \n \n Olay Abonelik Oluturulma zaman \n olusturmaZamani \n ISODateTime \n Z \n Olay Abonelik nesnesinin oluturulma zaman damgas \n \n \n Olay Abonelik Gncelleme zaman \n guncellemeZamani \n ISODateTime \n Z \n Olay Abonelik nesnesinin gncelleme zaman damgas iletilebilir. lk deeri olay abonelik oluturma zaman bilgisidir. \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n Abonelik Tipleri \n abonelikTipleri \n Kompleks: abonelikTipleri[Array][1..N] \n Z \n OlayAbonelikIstegi nesnesi ierisinde iletilen deerlerin yant ierisinde dnmesi beklenmektedir. \n \n \n > Olay Tipi \n olayTipi \n AN1..36 \n Z \n \n \n \n > Kaynak Tipi \n kaynakTipi \n AN1..36 \n Z \n \n \n \n \n Olay Tipleri ve Kaynak Tipleri likisi \n * Anlk : Olay gerekletikten sonra maksimum 5 saniye ierisindeki zaman \n \n \n \n Olay Tipleri \n YS Rol \n Kaynak Tipleri \n Olay Oluturulma durumu \n KaynakNo \n Asl verinin elde edilecei API \n Olay Bildirimini Yapan \n Olay Bildirim Zaman \n Retry Policy \n \n \n \n \n KAYNAK_GUNCELLENDI \n BH \n ODEME_EMRI \n Tm deme durum deiikliklerinde \n odemeEmriNo \n GET /odeme-emri/{odemeEmriNo} \n HHS \n Anlk \n 30 Dakika - 3 Deneme \n \n \n \n HBH \n HESAP_BILGISI_RIZASI \n Rza iptal detay kodu 02 : Kullanc stei ile HHS zerinden ptal durumunda \n RizaNo \n GET /hesap-bilgisi-rizasi/{RizaNo} \n HHS \n *Anlk \n 30 Dakika - 3 Deneme \n \n \n \n HBH \n BAKIYE \n Bakiye nesnesindeki tutarla ilgili bir bilgi deitiinde ve HBH rzas ierisinde \"06-Anlk Bakiye Bildirimi\" izin tr varsa oluturulur. Mevcutta alnm rzalar iin  bakiye kaynak tipi zelinde 06 izin tr gerektiinden; mevcut rzann yenilenmesine dair mteriye bilgilendirme yaplarak 06 izin trn kapsayan yeni rza alnmas sreci YS tarafndan gerekletirilebilir. Bloke tutar deiiklii iin olay oluturma ve bildirimi HHS inisiyatifindedir. KrdHsp ierisinde yer alan kulKrdTtr deerinin deitii durumda olay bildirim gnderilmesi gerekmektedir. \n hspRef \n GET /hesaplar/{hspRef}/bakiye \n HHS \n Maksimum 10 dakika ierisinde \n Retry policy uygulanmamaldr. lk istek gnderilemedii durumda letilemeyen Olaylara eklenmelidir. \n \n \n \n HBH \n COKLU_ISLEM_TALEBI ( bulk-data) \n lgili API lke ve kurallarna eklendiinde gncellenecektir. \n \n \n HHS \n \n 30 Dakika - 3 Deneme \n \n \n AYRIK_GKD_BASARILI \n BH \n ODEME_EMRI_RIZASI \n HHS sisteminde HK kendini doruladnda rza oluturulur. YS'e rza oluturulduuna dair bildirim yaplr. YS yetkod deerini sorgulama sonucunda elde eder. \n RizaNo \n GET /yetkilendirme-kodu?rizaNo={rizaNo}}&rizaTip=O \n HHS \n *Anlk \n 1 Dakika 3 kez \n \n \n \n HBH \n HESAP_BILGISI_RIZASI \n HHS sisteminde HK kendini doruladnda rza oluturulur. YS'e rza oluturulduuna dair bildirim yaplr. YS yetkod deerini sorgulama sonucunda elde eder. \n RizaNo \n GET /yetkilendirme-kodu?rizaNo={rizaNo}&rizaTip=H \n HHS \n *Anlk \n 1 Dakika 3 kez \n \n \n AYRIK_GKD_BASARISIZ \n BH \n ODEME_EMRI_RIZASI \n HHS sisteminde HK kendini doruladktan sonra yapt kontroller neticesinde logine izin vermez ise YS'e bildirim yaplr. YS rza durumunu sorgulayarak ilemin neden iletilmediine dair bilgi edinebilir. \n RizaNo \n GET /odeme-emri-rizasi/{RizaNo} \n HHS \n *Anlk \n 1 Dakika 3 kez \n \n \n \n HBH \n HESAP_BILGISI_RIZASI \n HHS sisteminde HK kendini doruladktan sonra yapt kontroller neticesinde logine izin vermez ise YS'e bildirim yaplr. YS rza durumunu sorgulayarak ilemin neden iletilmediine dair bilgi edinebilir. \n RizaNo \n GET /hesap-bilgisi-rizasi/{RizaNo} \n HHS \n *Anlk \n 1 Dakika 3 kez \n \n \n HHS_YOS_GUNCELLENDI \n \n \n BKM sistemi tarafndan retilecek olaylar dinlemek iin kullanlacak kaynak tipidir. YS ve HHS'lerin BKM'ye abonelik oluturmasna gerek bulunmamaktadr. BKM HHS ve YS retim ortam tanm yaparken aboneliklerini balatacaktr.   (HHS yaygnlatrma durumundayken de abonelii balatlacaktr.) \n \n \n HHS \n \n \n \n \n \n YS \n HHS \n HHS bilgilerinde deiiklik olduunda, YS'n hhsKod ile sorgulama yapmas ve deien bilgiyi gncellemesi beklenmektedir. \n hhsKod \n GET /hhs/{hhsKod} \n BKM \n *Anlk \n 5 Dakika - 3 Deneme \n \n \n \n HHS \n YOS \n YS bilgilerinde deiiklik olduunda, HHS'nin yosKod ile sorgulama yapmas ve deien bilgiyi gncellemesi beklenmektedir. \n yosKod \n GET /yos/{yosKod} \n BKM \n *Anlk \n 5 Dakika - 3 Deneme \n \n \n \n * Anlk : Olay gerekletikten sonra maksimum 5 saniye ierisindeki zaman \n ADIM 2: Olay Aboneliinin gncellenmesi \n PUT\tolay-abonelik/{olayAbonelikNo} \n YS'n olay aboneliine ait abonelik tiplerini gncelleyebildii servistir. Olay abonelii oluturulduu zaman HHS tarafndan iletilen olayAbonelikNo aracl ile gncelleme ilemi yaplr. YS abone olmak istedii olay-kayt tiplerininin son halini gncelleme servisi ile HHS'ye iletir. HHS bu bilgilerle eski abonelik tiplerinin yerini deitirir. \n Baarl PUT istei sonucu HTTP 200 cevab ile iletilmelidir. \n OlayAbonelikIstegi nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n Olay Abonelik Numaras \n olayAbonelikNo \n AN1..64 \n Z \n YS zelinde oluturulan tekil tanmlaycdr. Farkl YS'ler iin ayn deer kullanlamaz. \n HHS geerli bir olay abonelik numaras olduunun kontroln yapar. \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n \n Abonelik Tipleri \n abonelikTipleri \n Kompleks: abonelikTipleri[Array][1..N] \n Z \n HHS Sisteminde, YS'n eski abonelikleri yeni aboneliklerle gncellenmelidir. \n \n \n \n > Olay Tipi \n olayTipi \n AN1..36 \n Z \n YS abone olmak istedii olay tiplerini TR.OHVPS.DataCode.OlayTip sral veri tiplerinden deer ya da deerler ile doldurur. \n \"Olay Tipleri ve Kaynak Tipleri likisi\" tablosunda \"Olay Bildirim Yapan\" kolonu \"HHS\" olan olay tipleri ile veri giriine izin verilir.  Olay tipi AYRIK_GKD_BASARILI ve AYRIK_GKD_BASARISIZ iin, YS'n ODS API'yi sunmas zorunludur. HHS, bu olay tipleri zelinde YS API zerinden YS'n bu API'yi sunduunu kontrol eder ve eer sunmuyor ise TR.OHVPS.Business.InvalidContent hatas dnerek kayt ilemini gerekletirmez. \n \n \n > Kaynak Tipi \n kaynakTipi \n AN1..36 \n Z \n Olay tiplerinin tanmlanabildii kaynak listesi bulunmaktadr. Bu listeye uygun kaynak tipleri iletilmelidir. \n HHS, YS API zerinden YS'n rollerini alarak uygun kaynak tiplerine kayt olmasna izin verir. \n \n \n \n OlayAbonelik nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Olay Abonelik Numaras \n olayAbonelikNo \n AN1..64 \n Z \n YS zelinde oluturulan tekil tanmlaycdr. Farkl YS'ler iin ayn deer kullanlamaz. \n \n \n Olay Abonelik Oluturulma zaman \n olusturmaZamani \n ISODateTime \n Z \n Olay Abonelik nesnesinin oluturulma zaman damgas \n \n \n Olay Abonelik Gncelleme zaman \n guncellemeZamani \n ISODateTime \n Z \n Olay Abonelik nesnesinin gncelleme zaman damgas \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n Abonelik Tipleri \n abonelikTipleri \n Kompleks: abonelikTipleri[Array][1..N] \n Z \n OlayAbonelikIstegi nesnesi ierisinde iletilen deerlerin yant ierisinde dnmesi beklenmektedir. \n \n \n > Olay Tipi \n olayTipi \n AN1..36 \n Z \n OlayAbonelikIstegi nesnesi ierisinde iletilen deerlerin yant ierisinde dnmesi beklenmektedir. \n \n \n > Kaynak Tipi \n kaynakTipi \n AN1..36 \n Z \n OlayAbonelikIstegi nesnesi ierisinde iletilen deerlerin yant ierisinde dnmesi beklenmektedir. \n ADIM 3: Olay Aboneliinin sorgulanmas \n GET /olay-abonelik \n YS olay abonelik bilgilerini sorgulamak isteyebilir. HHS, YS'e ait aktif durumdaki abonelik bilgisini iletir.\nBaarl GET sonucu HTTP 200 kodu ile iletilmelidir. \n OlayAbonelik nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Olay Abonelik Numaras \n olayAbonelikNo \n AN1..64 \n Z \n YS zelinde oluturulan tekil tanmlaycdr. Farkl YS'ler iin ayn deer kullanlamaz. \n \n \n Olay Abonelik Oluturulma zaman \n olusturmaZamani \n ISODateTime \n Z \n Olay Abonelik nesnesinin oluturulma zaman damgas \n \n \n Olay Abonelik Gncelleme zaman \n guncellemeZamani \n ISODateTime \n Z \n Olay Abonelik nesnesinin gncelleme zaman damgas \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n Abonelik Tipleri \n abonelikTipleri \n Kompleks: abonelikTipleri[Array][1..N] \n Z \n YS'n abone olduu olay - kaynak listesini dner. \n \n \n > Olay Tipi \n olayTipi \n AN1..36 \n Z \n TR.OHVPS.DataCode.OlayTip sral veri tiplerinden deerler ierir. \n \n \n > Kaynak Tipi \n kaynakTipi \n AN1..36 \n Z \n TR.OHVPS.DataCode.KaynakTip sral veri tiplerinden deerler ierir. \n ADIM 4: Olay Aboneliinin iptali \n DELETE /olay-abonelik/olayAbonelikNo \n YS'n abonelik kaydn silmesi iin HHS'nin sunduu servistir.  Baarl silme ilemi sonucu HTTP 204 ile YS'e iletilir. \n ADIM 5: Olay Aboneliinin letilemeyen Olaylar \n GET /iletilemeyen-olaylar \n HHS kaynaklar zerinde oluacak olaylar YS'e POST/olay-dinleme servisi ile gnderim salamaktadr. Bu gnderim belli bir yeniden gnderim politas (retry-policy) ile yaplmaldr.  Ancak yine de iletilemeyen olaylar olursa (YS servisinden HTTP 202 alamama durumu) YS'e iletilemeyen-olaylar servisi zerinden sunulmaldr. Yani yeniden gnderim politikas sonunda gnderilemeyen olaylar bu servis ile sunulmaldr. \n Ayn kaynak numaras ile ayn olay-kaynak tipinde, 1 YSe ait, 1 adet iletilemeyen olay kayd olabilir. \n Bu serviste 1 gn ncesinden sorgu anna kadar tm kaytlarna ait iletilemeyen olaylar listelenmelidir.\nrnek sorgu zaman : 2023-04-06T15:14:00+03:00\nHHS'nin sunaca veri 2023-04-05T00:00:00+03:00  ile 2023-04-06T15:14:00+03:00 arasnda olmaldr.\nSralama yn olay tarihine gre artan ekilde olmaldr. Sayfalama 100'er kayt dnlerek yaplmaldr. \n YS tarafndan iletilemeyen olaylar istei 10 dakikada bir olacak ekilde yaplabilir. HHS bu limite uygun ilem kst uygulayabilir. \n lem Sorgu rnei GET lem Sorgu rnei  : /iletilemeyen-olaylar?syfNo=1&olyZmnBslTrh=2024-01-08T16:42:00+03:00&olyZmnBtsTrh=2024-01-09T17:09:00+03:00 \n rnein; \n olyZmnBslTrh : 07/01/2024 10:00:00+03:00\n olyZmnBtsTrh : 09/01/2024 16:00:00+03:00\n Sorgu Zaman : 09/01/2024 10:15:00+03:00 \n Yant ierisinde yer alan veriye ait tarih aral : 08/01/2024 00:00:00+03:00 - 09/01/2024 10:15:00+03:00 olmaldr. \n Balang ve biti zaman aral rnekte yer alan ekilde seilse dahi ilgili servis yant iin ncelikle sorgu zamanna baklp 1 gn ncesinden sorgu anna kadar tm kaytlarn iletilemeyen olaylar ierisinde listelenmesi salanmaldr. \n lgili tarih aralnda uygun veri olmamas halinde yant gvdesi bo olacak ekilde dnlmelidir. \n letilemeyen Olaylar Sorgulama stei Sorgu Parametreleri \n \n \n \n Alan Ad \n Parametre Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n HHS tarafndan yaplmas gereken kontrol ve ilemler \n \n \n \n \n stenen Sayfa Numarasi \n syfNo \n N3 \n  \n Cevapta dnecek sayfa numaras 1den balayarak artan deerlerle iletilmelidir. \n Bu veri gnderildii durumda, HHS letilemeyen Olaylar listesine ait bu sayfadaki kaytlar gndermelidir. Gnderilmediinde, HHS ilk sayfadaki kaytlar gndermelidir. \n \n \n Olay Zaman Balang Tarihi \n olyZmnBslTrh \n ISODateTime \n  \n Sorgulanacak Olay Zamanna ait balang tarihi \n HHS'ler iletilemeyen olaylar listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. YS tarafndan tetiklenen sorgularda; olyZmnBslTrh iletilmedii durumda ya da 1 gn ncesinin balang saatine gre daha geri bir zaman dilimi gnderildiinde, balang zaman(olyZmnBslTrh) deeri sorgu zamanndan 1 gn ncesine ait gnn balang zaman olarak kabul edilmelidir. \n \n \n Olay Zaman Biti Tarihi \n olyZmnBtsTrh \n ISODateTime \n  \n Sorgulanacak Olay Zamanna ait biti tarihi \n HHS'ler iletilemeyen olaylar listesi dnn bu kritere gre filtreleyerek iletmek zorundadr. YS tarafndan tetiklenen sorgularda; olyZmnBtsTrh iletilmedii durumda ya da sorgu zamanndan daha ileri bir zaman dilimi gnderildiinde, biti zaman(olyZmnBtsTrh) deeri sorgu zaman olarak kabul edilmelidir. \n \n \n \n Tablo 17: Olaylar nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n > Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n Olaylar \n olaylar \n Kompleks: Olaylar \n Z \n \n \n \n >Olay No \n olayNo \n AN1..64 \n Z \n Olaya ait evrensel tekil numaradr. \n \n \n >Olay Zamani \n olayZamani \n ISODateTime \n Z \n Olayn olutuu tarih bilgisidir. \n \n \n >Olay Tipi \n olayTipi \n AN1..36 \n Z \n TR.OHVPS.DataCode.OlayTip sral veri tiplerinden birini alr. \n \n \n >Kaynak Tipi \n kaynakTipi \n AN1..36 \n Z \n TR.OHVPS.DataCode.KaynakTip sral veri tiplerinden birini alr. \n \n \n >Kaynak Numaras \n kaynakNo \n AN1..128 \n Z \n Gncellenen kaynaa ait HHS sistemindeki tekil tanmlayc. \n \n \n \n Kaynak numarasnda gnderilen deer ile ilgili kayna sorgulayarak almak YS'n insiyatifindedir. \n ADIM 6: Sistem Olay Dinleme \n POST /sistem-olay-dinleme \n HHS'lerin sistem olaylarn dinleme amacyla amas gereken endpoint bilgisidir. \n YS API ierisinde yaplan deiikliklerde, BKM tarafndan HHS'lere olay bildirimlerini yaplr. \n Olaylar yant nesnesi ierisinde 1 adet kayt yer almaldr. \n Baarl POST istei sonucu HTTP 202 Accepted kodu ile dnlmelidir. \n HHS'den baarl yant alnamad durumda, 5 dakika aralklarla 3 kez deneme yaplacaktr. Hata alnmaya devam edilmesi durumunda baka bir aksiyon alnmayacaktr. \n Olay Dinleme Servisleri (ODS) \n YS sunaca Olay Dinleme Servisi ile hem HHS'den hem de BKM'den gelen olaylarn bildirimini dinleyebilir. YS'ler HHS'de yer alan olay abonelik kaytlarn iptal edebilir ancak BKM Sistem Olay Dinleme servisinin iletecei bildirimlerin alnmas zorunlu olduundan ODS API her zaman aktif olmaldr. \n HHS'den gelecek olay bildirimlerini olay-dinleme endpointi ile dinlerken, BKM'den gelecek olay bildirimlerini sistem-olay-dinleme endpointi ile dinlemelidir. \n Olay Dinleme Servislerinde Idempotency kurallarnn iletilmesine gerek bulunmamaktadr. \n Olay Dinleme Servisine ait API Endpointleri aadaki tabloda listelenmitir. \n Olay Dinleme Servisleri iin Eriim Adresleri (Endpoints) \n Etki Alan (Scope) =olay_dinleme \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Zorunlu (Z)/ stee Bal() \n Yetkilendirme Tr \n mzalama \n Parametre \n stem Nesnesi \n Yant Nesnesi \n \n \n \n \n 1 \n olay-dinleme \n POST \n /olay-dinleme \n Z \n stemci Kimlik Bilgileri \n mzal stek \n - \n Olaylar \n - \n \n \n 2 \n sistem-olay-dinleme \n POST \n /olay-dinleme \n Z \n stemci Kimlik Bilgileri \n - \n - \n Olaylar \n - \n ADIM 1: Olay Dinleme \n POST /olay-dinleme \n Olay abonelik servisi ile abone olunan olaylar, olay dinleme servisi ile YS'e iletilir.\nOlaylar yant nesnesi ierisinde en fazla 100 kayt gnderilmelidir.\nBaarl POST istei sonucu HTTP 202 Accepted ile dnlmelidir. \n HHS'nin ilem hata aldnda, baarl ilem olana kadar 3 kez deneme yaplmas gerekmektedir.\nlk istekle son istek arasnda 30 dakika olacak ekilde, zamana yayarak bu denemelerin yaplmas gerekmektedir. (Exponential backoff policy uygulanmas beklenmektedir. )\nHHS kendi sistemini yormayacak ekilde, belirleyecei kurallar dahilinde bu gelitirmeyi yapmaldr. \n Tablo 17: Olaylar nesnesi \n \n \n \n Alan Ad \n JSON Alan Ad \n Format \n Zorunlu / Koullu /  stee bal \n Aklama \n \n \n \n \n OlayIstegi \n olayIstegi \n Kompleks: olayIstegi \n Z \n \n \n \n >Katlmc Bilgisi \n katilimciBlg \n Kompleks:KatilimciBilgisi \n Z \n Katlmclara atanm kod bilgileridir. \n \n \n >>Hesap Hizmeti Salaycs Kodu \n hhsKod \n AN4 \n Z \n Hesap Hizmeti Salaycsnn kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n \n \n >> Yetkili deme Hizmeti Salaycs Kodu \n yosKod \n AN4 \n Z \n Yetkili deme Hizmeti Salaycs (YS) kodudur. \n \n \n >Olaylar \n olaylar \n Kompleks: Olaylar \n Z \n \n \n \n >>Olay Numaras \n olayNo \n AN1..64 \n Z \n Olaya ait atanm tekil kimlik numaras \n \n \n >>Olay Zaman \n olayZamani \n ISODateTime \n Z \n Olayn oluma zaman \n \n \n >>Olay Tipi \n olayTipi \n AN1..36 \n > \n TR.OHVPS.DataCode.OlayTip sral veri tiplerinden birini alr. \n \n \n >>Kaynak Tipi \n kaynakTipi \n AN1..36 \n Z \n TR.OHVPS.DataCode.KaynakTip sral veri tiplerinden birini alr. \n \n \n >>Kaynak Numaras \n kaynakNo \n AN1..128 \n Z \n Gncellenen kaynaa ait HHS sistemindeki tekil tanmlayc. \n ADIM 2:  Sistem Olay Dinleme \n POST /sistem-olay-dinleme \n YS'lerin sistem olaylarn dinleme amacyla amas gereken endpoint bilgisidir. \n HHS API ierisinde yaplan deiikliklerde, BKM tarafndan YS'lere olay bildirimlerini yaplr. \n Olaylar yant nesnesi ierisinde 1 adet kayt yer almaldr. \n Baarl POST istei sonucu HTTP 202 Accepted kodu ile dnlmelidir. \n YS'ten baarl yant alnamad durumda, 5 dakika aralklarla 3 kez deneme yaplacaktr. Hata alnmaya devam edilmesi durumunda baka bir aksiyon alnmayacaktr. \n"},{frontmatter:{},regularPath:"/v1.1.0/contents/tanim-ve-kisitlamalar.html",relativePath:"v1.1.0/contents/tanim-ve-kisitlamalar.md",key:"v-e8779b46",path:"/v1.1.0/contents/tanim-ve-kisitlamalar.html",content:"  1.\tTanm ve Ksaltmalar   \n Tablo 1: Tanm ve Ksaltmalar \n \n \n \n Ksaltma \n Tanm \n Aklama \n ngilizce Aklama \n ngilizce Ksaltma \n \n \n \n \n S \n ereve Szleme \n deme hizmeti salaycs ile mteri arasnda tekil veya sreklilik arz eden deme ilemlerinin yrtlmesine ve mmkn olan durumlarda deme hesabnn almasna ilikin usul ve esaslar belirleyen szleme \n \n \n \n \n EPK \n Elektronik Para Kuruluu \n Kanun kapsamnda elektronik para ihra etme yetkisi verilen tzel kii \n Electronic Money Institution \n EMI \n \n \n FAST \n Fonlarn Anlk ve Srekli Transferi \n TCMB tarafndan iletilen Fonlarn Anlk ve Srekli Transferi Sistemi \n \n \n \n \n FAST TR-Karekod \n FAST-TR Karekod Teknik lke ve Kurallar Rehberi \n TR Karekodun FAST Sistemi araclyla gerekleecek ilemlerde kullanlmasna ilikin detayl teknik ilke ve kurallarn ieren dokman \n \n \n \n \n GET \n BKM API Geidi \n Bankalararas Kart Merkezi (BKM) tarafndan gelitirilen ve taraflara standart Ak Bankaclk ilemleri sunulmasn salayan API Geidi uygulamas \n \n \n \n \n GKD \n Gl Kimlik Dorulama \n Kimlik dorulamada kullanlan ve bir bileenin ele geirilmesinin dier bileenin gvenliini tehlikeye atmayaca en az iki bileenden oluan, bu iki bileenin de mterinin bildii, sahip olduu veya biyometrik bir karakteristii olan bileen snflarndan farkl ikisine ait olacak ekilde seildii yntem \n Strong Customer Authentication \n SCA \n \n \n B \n lem Bilgisi \n Gerekletirilen ileme ilikin ilem zamann, ilemin niteliini ve deme ilemi iin deme emrinin masraf, komisyon ve cretler de dahil hesabn borlandrlaca toplam tutarn ve demenin gndereni ile alcsn veya toplu deme emrinin masraf, komisyon ve cretler de dahil hesabn borlandrlaca toplam tutarn ve gndereni ile alclarn ieren bilgi \n \n \n \n \n DK \n lem Dorulama Kodu \n Kimlik dorulama yntemlerinden biriyle kendisini sisteme tantan bir mterinin gerekletirmek istedii ileme zg olmak ve belirli bir geerlilik sresi iinde ilem onaynda kullanlmak zere oluturulan, finansal sonu dorunan ilemlerde kiiye onay annda ilgili ilem bilgisi (B) ile birlikte gsterilen, alc veya tutarn deimesiyle geersiz hale gelen bilgi \n Authentication Code \n AC \n \n \n KOLAS \n Kolay Adresleme Servisi \n Fon transferlerinde hesap numaras ile ad soyad yerine kullanlan ve belirli bir hesap ile eletirilmi telefon numaras, e-posta adresi, T.C. Kimlik Numaras (TCKN), Vergi Kimlik Numaras (VKN), Yabanc Kimlik Numaras veya Pasaport Numaras gibi Kolay Adres bilgilerinin kaydedilmesini, gncellenmesini ve sorgulamasn salayan katman servis \n \n \n \n \n HBHS \n Hesap Bilgisi Hizmeti Salaycs \n Kanunun 12 inci maddesinin birinci fkrasnn (g) bendinde tanmlanan deme hizmetini (hesap bilgisi hizmetini) sunan tzel kii \n Account Information Service Provider \n AISP \n \n \n HHS \n Hesap Hizmeti Salaycs \n Nezdinde deme hesab bulunan deme hizmeti salaycs \n Account Servicing Payment Service Provider \n ASPSP \n \n \n BHS \n deme Emri Balatma Hizmeti Salaycs \n Kanunun 12 inci maddesinin birinci fkrasnn (f) bendinde tanmlanan deme hizmetini (deme emri balatma hizmetini) sunan tzel kii \n Payment Initiation Service Provider \n PISP \n \n \n DK \n deme Kuruluu \n deme hizmeti salamak ve gerekletirmek iin Kanun kapsamnda yetkilendirilmi tzel kii \n Payment Institution \n PI \n \n \n H \n deme Hesab \n deme hizmeti kullancs adna alan ve deme ileminin yrtlmesinde kullanlan hesap \n Payment Account \n PA \n \n \n HK \n deme Hizmeti Kullancs (Mteri) \n Gnderen, alc veya her ikisi sfatyla belirli bir deme hizmetinden faydalanan gerek veya tzel kii \n Payment Service User \n PSU \n \n \n HS \n deme Hizmeti Salaycs \n 5411 sayl Kanun kapsamndaki bankalar, EPK, DK ve Posta ve Telgraf Tekilat Anonim irketi(PTT) \n Payment Service Provider \n PSP \n \n \n HVPS \n deme Hizmetleri Veri Paylam Servisleri \n Kanunun 12nci maddesinin birinci fkrasnn (f) veya (g) bentlerinde yer alan deme hizmetlerinde kullanlan veri paylam servisleri \n \n \n \n \n PS \n Perakende deme Sistemi \n TCMB tarafndan iletilen, ilemlerin Trk Liras zerinden gerekletii Mteriler Aras Trk Liras Aktarm Sistemi \n \n \n \n \n TR-Karekod \n TR-Karekod lke ve Kurallar \n Ulusal karekod (TR Karekod) ilke ve kurallarnn belirlendii belge \n \n \n \n \n YS \n Yetkili deme Hizmeti Salaycs \n deme emri balatma hizmeti ve/veya hesap bilgisi hizmeti sunan tzel kii \n Third Party Payment Service Providers \n TPP \n \n \n \n"},{title:"4. Rza Durumlar",frontmatter:{},regularPath:"/v1.1.0/contents/riza-durumlari.html",relativePath:"v1.1.0/contents/riza-durumlari.md",key:"v-3358815e",path:"/v1.1.0/contents/riza-durumlari.html",headers:[{level:2,title:"4.1.\tHesap Bilgisi Hizmeti Rza durum deiiklikleri",slug:"_4-1-hesap-bilgisi-hizmeti-rza-durum-degisiklikleri"},{level:2,title:"4.2.\tdeme Bilgisi Hizmeti Rza Durum Deiiklikleri",slug:"_4-2-odeme-bilgisi-hizmeti-rza-durum-degisiklikleri"}],content:" 4. Rza Durumlar \n HK, deme Emri Balatma Hizmetine ya da Hesap Bilgisi Hizmetine mteri rzasnn tesisi ile balar. HKnn YS uygulamas zerinden yapt ilemler neticesinde rza durumlar deiebilir.\nRzann alabilecei durum kodlar u ekilde belirlenmitir. \n B: Yetki Bekleniyor   lk rza talebinde \n Y: Yetkilendirildi   Baarl GKD sonras yetKod retildiinde \n K: Yetki Kullanld   Eriim Belirteci alndnda \n E: Yetki deme emrine dnt   BHS iin \n S: Yetki Sonlandrld \nHBHS iin : Eriimin Geerli Olduu Son Tarih geldiinde \nBHS iin : Yenileme belirteci Son Tarihi geldiinde \n I :Yetki ptal \nRza iptal durumu ise gerek raporlama gerekse mteri deneyimi perspektifinden doru   bilgilendirmeler yaplabilmesi asndan aadaki gibi detay kodlar ile zenginletirilmitir: \n \n Rza ptal Detay Kodu: \n \n \n \n 01 :\tYeni Rza Talebi ile ptal \n 02 :\tKullanc stei ile HHS zerinden ptal \n 03 :\tKullanc stei ile YS zerinden ptal \n 04 :\tSre Am : Yetki Bekleniyor \n 05 :\tSre Am : Yetkilendirildi \n 06 :\tSre Am : Yetki demeye Dnmedi \n 07 :\tGKD iptali : Ayn rza no ile mkerrer arm \n 08 :\tGKD iptali : Rzano ile kimlik bilgileri uyumamas \n 09 :\tGKD iptali : Uygun rn bulunmuyor \n 10 :\tGKD iptali : HHS Ak Bankaclk kanal ileme kapal \n 11 :\tGKD iptali : Hesap Yetki Sorunu \n 12 :\tGKD iptali : HK HHS kontrollerini aamad \n 13 :\tGKD iptali : HK istei ile GKDden vazgeildi \n 14 :\tGKD iptali : Fraud phesi \n 99 :\tGKD iptali : Dier \n \n \n 4.1 ve 4.2 blmlerinde detaylandrlan rza durum deiikliklerinde rza iptal detay kodlar kullanlmtr. \n rnein B I/01 denildiinde Yetki Bekleniyor rza durumundan Yetki ptal rza durumuna Rza ptal Detay Kodu da 01 yani Yeni Rza Talebi ile ptal olarak gncellenmelidir ifade edilmitir. \n HK verdii rza srasnda setii hesaplarndan biri kapatlrsa, dier hesaplara ait bilgileri grmeye devam eder. Ancak HKnn hesabna ait bilgilerinin YS'e iletilmesini istemedii durumda, rzasn tamamen iptal ederek yeni hesap listesi ile yeni rza vermesi gerekmektedir. Yani hesap kapanmas nedeniyle rza geerliliini yitirmez. HK'nn proaktif olarak bu hesab rzadan karmas durumunda rza iptali olur. \n Rza iptal edilmedii ve geerli olduu srece kapal hesaplar iin dier evrimii kanallarda uygulanan yntem izlenmelidir. Dier evrimii kanallarda kapal hesaplara ilikin bilgi dnlmyor ise HVPS'den de dn yaplmaz. HKnn rza onay verdii ak hesaplarnn tm HHS tarafnda kapatld durumda, yine ayn ekilde HHS evrimii kanallarnda koyduu kurallara gre bu hesaplarnn YS uygulamasnda gsterilmesine karar verir. \n Hesap kapama ve ticari kullanclarn hesaplar zerindeki yetki deiiklikleri HHS'nin i sistemleri tarafndan yaplan kontrollerle ynetilir. Buradaki deiiklikler ile HHS sistemsel olarak rza iptali gerekletiremez. HK izni ve onay dahilinde rza iptal gerekletirilmesi gerekmektedir. \n HHS'ler sunmu olduklar Rza ptal ekrann (sadece Hesap Bilgisi Rzas iin), hangi ortamlardan GKD yaplmasna izin veriliyorsa (web/mobil) ayn ortamdan HK'ya sunmaldr.  rnein bir HHS bireysel mterileri iin web ve mobil, kurumsal mteriler iin web zerinden GKD imkan sunuyor ise, minimumda bireysel mteriler iin web ve mobil ortamlarndan, kurumsal mteriler iin web ortamndan Rza ptal ekran aracl ile rza iptaline izin vermelidir. Bunun dnda ar merkezi ya da ube gibi ortamlardan sunaca Rza ptal imkan HHS inisiyatifindedir. Bahsi geen zorunluluk deme Emri Rza ptal ekran iin geerli deildir. \n Benzer ekilde YS'ler hangi ortamlardan (web/mobil) hizmet veriyorsa, ayn ortam zerinden Rza ptal ekrann sunmaldr. \n 4.1.\tHesap Bilgisi Hizmeti Rza durum deiiklikleri \n Kural : Bir HK'nn, bir YS iin, bir HHS'de Y, K, B rza durumlarnda tek bir rzas olabilir.\nBir HK hem kiisel olarak hem de bir kurumun kullancs olabilir. Bu durumda kurum ve kiisel rza ayn anda mevcut olabilmelidir. Rza nesneleri, HHS tarafndan uygun ekilde ynetilmelidir. \n \n \n Hesap Bilgisi Rzas istei HHSye iletilir. \na.\tHHS HK'ya ait ieride rza var m kontrol eder. Eer yoksa  Yetki Bekleniyor - B  rza durumu ile yeni rza oluturur. \nb.\tEer ieride rza varsa \n i. Rza durumu Yetki Bekleniyor - B ise; \n    HHS, sistemde Yetki Bekleniyor - B rza durumuna sahip kayt olduu iin, ncelikle eski kayd Yetki ptal - I durumuna getirir.  Rza ptal Detay Kodu Yeni Rza Talebi ile iptal olmaldr.  B  I / 01  Sonrasnda,  Yetki Bekleniyor - B  rza durumu ile yeni rza oluturur. \n  ii. Rza durumu Yetkilendirildi - Y veya Yetki Kullanld - K ise; \nHK'nn halihazrda verilmi bir rzas vardr. HHS, nce mevcut rzann iptalinin yaplmas gerektiine dair   TR.OHVPS.Resource.ConsentMismatch  hatasn dner. YS, HHS ya da YS uygulamas zerinden bu rzann iptal edilmesi gerektiine dair HK'ya bilgilendirme yapar. \n  iii.\tRza durumu Yetki Sonlandrld - S  ise Yetki Bekleniyor - B durumunda yeni rza no oluturur. \n  iv.\tRza durumu Yetki ptal - I ise  Yetki Bekleniyor - B  durumunda yeni rza no oluturur. \n \n \n GKD baarl bir ekilde tamamlandnda Rza durumu Yetki Bekleniyordan Yetkilendirildiye gncellenir.  B  Y \n \n \n GKD'nin gereklemedii durumlardan HHS haberdar olmayabilir. \n HK GKD yapmadan ayrlm olabilir. (R: Taraycy kapatm olabilir) Rza Yetki Bekleniyor - B rza durumunda kalr.  5 dakika ierisinde sistem tarafndan Yetki Bekleniyor - B rza durumundaki kaytlar Yetki ptal  : Yetki Bekleniyor Sre Am olarak gncellenir.   B  I / 04  Bkz. 9. Madde. \n \n \n GKD'nin gereklemedii durumlardan HHS haberdardr. HHS yonlendirme adresinin query parametrelerine  rizaIptDtyKod  deerini ekleyerek bu durumu YSe bildirmek zorundadr. \n \n \n Rza durumunun  Yetkilendirildi\" , Yetki Kullanld olduu durum.  Yetki Bekleniyor  Yetki ptal   B   I / 07 \n \n \n Rzano ile kimlik bilgileri uyumazl.  Yetki Bekleniyor  Yetki ptal  B  I / 08 \n \n \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) Yetki Bekleniyor  Yetki ptal   B  I / 09 \n \n \n Ak bankaclk kanalnz ileme kapaldr.Yetki Bekleniyor  Yetki ptal  B  I / 10 \n \n \n Kullancnn HHS'deki hesaplarnda yeterli yetkisinin olmama durumu  Yetki Bekleniyor  Yetki ptal  B  I / 11 \n \n \n HHSnin HK iin yapt kontrollerin baarsz olduu durum Yetki Bekleniyor  Yetki ptal   B  I / 12 \n \n \n HK istei ile GKDden vazgeildii durum Yetki Bekleniyor  Yetki ptal  B  I / 13 \n \n \n Fraud phesi Yetki Bekleniyor  Yetki ptal  B  I / 14 \n \n \n Dier Yetki Bekleniyor   Yetki ptal   B   I / 99 \n \n \n \n \n \n \n HK, hesaplarnda/izin trlerinde/Eriimin Geerli Olduu Son Tarih bilgilerinden bir ya da birden fazlasnda gncelleme yapmak iin YS ekranna girer. \n \n \n a.\tYS nce Rza ptal API'sini arr. Sonra yeni deerlerle yeni bir rza isteinde bulunur. Tekrar GKD gerekir. \n b.\tYS rza iptal yapmadan yeni rza alma akna balarsa 1.b ak devreye girer. \n c.\tRza gncelleme ilerleyen srmlerde ele alnacaktr. \n \n \n Eriim Belirteci API \n a. Eriim Belirteci'nin yetkilendirme kodu ile arm yapldnda; \n  i. Rza durumu Yetki ptal - I ya da Yetki Sonlandrld - S ise   TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n ii. Rza durumu Yetki Bekleniyor - B ya da Yetki Kullanld - K  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iii. Rza durumu Yetkilendirildi - Y olduunda eriim belirteci tahsis edilir.\nEriim belirteci alndnda rza durumu K: Yetki Kullanld yaplr.  Y K \n b. Yenileme belirteci karl eriim belirteci alnmas srasnda; yenileme belirteci kontrol ve sonrasnda rza kontrol yaplmaldr. \n  i. ncelikle Yenileme Belirteci Geerlik Sresi kontrol yaplmaldr. Geerli bir Yenileme Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n ii. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n iii. Rza durumu Yetki Bekleniyor - B ya da Yetkilendirildi - Y  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iv. Rza durumu Yetki Kullanld - K olduunda, yenileme belirteci karl eriim belirteci tahsis edilir. \n \n \n Sorgulama: HBHS, rza alma akna balamadan nce, daha nce oluturulmu bir hesap bilgisi-rizasi kaynann durumunu, istee bal olarak alabilir. Rza numaras ile sorgulama yaplr. \n \n \n Hesap Bilgisi Rzasnn ptali: HBHS zerinden ya da HHS zerinden yaplan rza iptallerinde Rza durumu  Yetki ptal - I olarak gncellenir. Rza numaras ile iptal salanr. \n a. HHS zerinden rza iptali yapm olabilir.  Rza durumu sorgulanr. \n Rza numaras Yetki Bekleniyor - B ve Yetkilendirildi - Y ve Yetki Kullanld - K durumlarnda ise Yetki ptal durumuna getirilir. Rza gnclzmn timestamp ile gncellenir.\nHHS, Rza iptalinde ayn zamanda eriim belirtecini de invalid hale getirmelidir. \n B  I / 02 \n Y  I / 02 \n K  I / 02 \n b.\tYS zerinden yaplacak iptal ileminde yine Y ve B ve K rza durumlarnda ise iptal edilebilir. \n B  I / 03 \n Y  I / 03 \n K  I / 03 \n Rza durumu Yetki Sonlandrld - S  ise iptal gereklemez. Rza durumunuz iptal etmeye uygun deildir. hatas HK'ya yanstlr.  TR.OHVPS.Resource.ConsentRevoked \n \n \n HKnn verdii rza sresi dolmu olabilir.\nEriimin Geerli Olduu Son Tarih geldiinde Rza durumu Yetki Kullanlddan Yetki Sonlandrld durumuna ekilmelidir.   K  S \n \n \n Hesaplar, Bakiye ve lemler servislerinde eriim belirteci kontrol ve sonrasnda rza kontrol yaplmaldr.\nGeerli bir eriim belirteci yok ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n YS'n; Rza ptal - I ya da Yetki Sonlandrld - S rza durumlarnda Hesaplar, Bakiye ve lemler servislerini armamas beklenir. HHS'nin bu rza durumlar ile yaplm arlar olduunda  TR.OHVPS.Resource.ConsentRevoked  hatasn dnmesi gereklidir. \n Rza durumu Yetki Kullanld - K dnda ise  TR.OHVPS.Resource.ConsentMismatch  hatas verilmelidir. \n Rza durumu Yetki Kullanld - K ise servis aklarna devam edilir. \n Rza sorgulama API'sinde ilgili rza kayd bulunamaz veya sorgulayan kurumun yetkisi yoksa (rn : YSn farkl bir YSe ait rza noyu sorgulamas) \n TR.OHVPS.Resource.NotFound hatas  verilmelidir. \n \n \n HHS/YS tarafnda rza bilgileri belirli aralklarla sistem kullancs tarafndan taranr:\n5 dakikadan uzun sredir Yetki Bekleniyor durumunda kalan kaytlarn durumlar gncellenir.\nYetki Bekleniyor   Rza ptal  / Sre Am : Yetki Bekleniyor  B  I / 04 \n 5 dakikadan uzun sredir Yetkilendirildi durumunda kalan kaytlar gncellenir.\nYetkilendirildi      Rza ptal / Sre Am: Yetkilendirildi  B  I / 05 \nYukarda bahsedilen, YS Sre Am nedeniyle rza iptal durum gncellemelerini yapmadan nce HHSyi sorgulayarak rza durumunu renmeli ve sre am dnda bir kodu varsa ayn kodla kendi sistemini gncellemelidir. \nEriimin Geerli Olduu Son Tarih geldiinde rza durumu Yetki Kullanlddan Yetki Sonlandrldya gncellenir.  K  S \n 4.2.\tdeme Bilgisi Hizmeti Rza Durum Deiiklikleri \n Kural : Bir HK'nn bir YS iin bir HHS'de istedii kadar rzas olabilir. \n Kurum ve kiisel rza ayn anda mevcut olabilmelidir. Rza nesneleri, HHS tarafndan uygun ekilde ynetilmelidir. \n \n \n deme Emri Rzas istei HHSye iletilir. eride rza olup olmamasna baklmakszn  Yetki Bekleniyor - B  rza durumu ile yeni rza no oluturur. \n \n \n GKD baarl bir ekilde tamamlandnda rza durumu Yetki Bekleniyordan Yetkilendirildiye gncellenir.   B  Y \n \n \n GKD'nin gereklemedii durumlardan HHS haberdar olmayabilir. \n HK GKD yapmadan ayrlm olabilir. (R: Browser kapatm olabilir)\nRza durumu Yetki Bekleniyor'dur. 5 dakika ierisinde sistem tarafndan Yetki Bekleniyor - B durumundaki kaytlar Rza ptal : Yetki Bekleniyor Sre Am olarak gncellenir. Bkz. 8. Madde. \n \n \n GKD'nin gereklemedii durumlardan HHS haberdardr. HHS yonlendirme adresinin query parametrelerine rizaIptDtyKod deerini ekleyerek bu durumu YSe bildirmek zorundadr. \n \n \n Rza durumunun  Yetkilendirildi\" , Yetki Kullanld olduu durum.  Yetki Bekleniyor  Yetki ptal   B   I / 07 \n \n \n Rzano ile kimlik bilgileri uyumazl.  Yetki Bekleniyor  Yetki ptal  B  I / 08 \n \n \n HK'nn HHS'de ilgili rnnn olmad durum (hesap/kart) Yetki Bekleniyor  Yetki ptal   B  I / 09 \n \n \n Ak bankaclk kanalnz ileme kapaldr.Yetki Bekleniyor  Yetki ptal  B  I / 10 \n \n \n Kullancnn HHS'deki hesaplarnda yeterli yetkisinin olmama durumu  Yetki Bekleniyor  Yetki ptal  B  I / 11 \n \n \n HHSnin HK iin yapt kontrollerin baarsz olduu durum Yetki Bekleniyor  Yetki ptal   B  I / 12 \n \n \n HK istei ile GKDden vazgeildii durum Yetki Bekleniyor  Yetki ptal  B  I / 13 \n \n \n Fraud phesi Yetki Bekleniyor  Yetki ptal  B  I / 14 \n \n \n Dier Yetki Bekleniyor   Yetki ptal   B   I / 99 \n \n \n \n \n \n \n GKD muafiyeti olduunda YS HHSden arka planda onay alr. Bu onay srasnda rza durumu  Yetkilendirildi  yaplr.  B  Y \n \n \n Eriim Belirteci API \na. Eriim Belirteci'nin yetkilendirme kodu ile arm yapldnda; \n  i. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise   TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n ii. Rza durumu Yetki Bekleniyor - B , Yetki Kullanld - K  ya da Yetki deme emrine dnt - E  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iii. Rza durumu Yetkilendirildi - Y olduunda eriim belirteci tahsis edilir.\nEriim belirteci alndnda rza durumu K: Yetki Kullanld yaplr.  Y K \n b. Yenileme belirteci karl eriim belirteci alnmas srasnda; yenileme belirteci kontrol ve sonrasnda rza kontrol yaplmaldr. \n  i. ncelikle Yenileme Belirteci Geerlik Sresi kontrol yaplmaldr. Geerli bir Yenileme Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n ii. Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n iii. Rza durumu Yetki Bekleniyor - B ya da Yetkilendirildi - Y  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n iv. Rza durumu Yetki Kullanld - K veya Yetki deme Emrine Dnt  E olduunda, yenileme belirteci karl eriim belirteci tahsis edilir. \n \n \n deme Balatma API nce eriim belirteci ve sonrasnda rza kontol yaplarak gerekletirilmelidir \n \n ncelikle Eriim Belirteci kontrol yaplmaldr. Geerli bir Eriim Belirteci olmad grlr ise  TR.OHVPS.Connection.InvalidToken  hatas dnlmelidir. \n Rza durumu Yetki ptal - I  ya da Yetki Sonlandrld - S ise  TR.OHVPS.Resource.ConsentRevoked  hatas dnlmelidir. \n Rza durumu Yetki Bekleniyor - B , Yetkilendirildi - Y, Yetki deme Emrine Dnt - E  ise  TR.OHVPS.Resource.ConsentMismatch  hatas dnlmelidir. \n Rza durumu Yetki Kullanld - K olduunda deme emri gerekletirilir.  Rza durumu Yetki Kullanld - K'dan Yetki deme Emrine Dnt  E yaplmaldr.   K E \n \n \n \n Sorgulama: GKD ileminin baaryla tamamlanp deme Emri Rzasnn yetkilendirilmesi esnasnda, gnderen hesap seiminin HHS ekrannda yapld durumlarda, deme emri isteinde gnderen hesap bilgileri alannn zorunlu olmas nedeniyle, demeEmriRizasi nesnesi sorgulanarak gnderen hesap bilgileri (hesap numaras ve/veya hesap referans) alnmaldr.\nRza sorgulama, deme Emri Sorgulama API'lerinde ilgili rza kayd bulunamaz veya sorgulayan kurumun yetkisi yoksa (rn : YSn farkl bir YSe ait rza noyu sorgulamas) \n TR.OHVPS.Resource.NotFound  hatas verilmelidir. \n \n \n deme Emri Rzasnn ptali bulunmamaktadr. \n \n \n HHS/YS tarafnda rza bilgileri belirli aralklarla sistem kullancs tarafndan taranr:\n5 dakikadan uzun sredir Yetki Bekleniyor'da kalan kaytlarn durumlar gncellenir.\nYetki Bekleniyor  Rza ptal / Sre Am : Yetki Bekleniyor  B  I / 04 \n 5 dakikadan uzun sredir Yetkilendirildi'de kalan kaytlar durumlar gncellenir.\nYetkilendirildi      Rza ptal / Sre Am : Yetkilendirildi  B  I / 05 \n 5 dakikadan uzun sredir Yetki kullanld'da kalan kaytlar durumlar gncellenir.\nYetki kullanld  Rza ptal / Sre Am : Yetki demeye Dnmedi  B  I / 06 \n Yenileme belirteci Son Tarih geldiinde rza durumu Yetki deme emrine dntden Yetki Sonlandrld'ya gncellenir. \n E  S \n \n \n GKD muafiyeti sadece deme balatma servislerinde bulunmaktadr. \n \n \n"},{title:"3. Temel Prensipler",frontmatter:{},regularPath:"/v1.1.0/contents/temel-prensipler.html",relativePath:"v1.1.0/contents/temel-prensipler.md",key:"v-2fcc3a95",path:"/v1.1.0/contents/temel-prensipler.html",headers:[{level:2,title:"3.1 Genel",slug:"_3-1-genel"},{level:2,title:"3.2.\tstem (ar) ve Oturum",slug:"_3-2-istem-cagr-ve-oturum"},{level:2,title:"3.3.\tRESTful API",slug:"_3-3-restful-api"},{level:2,title:"3.4.\tSrm Ynetimi",slug:"_3-4-surum-yonetimi"},{level:2,title:"3.5.\tKaynak URI Yol Yaps",slug:"_3-5-kaynak-uri-yol-yaps"},{level:2,title:"3.6.\tKarakter Kodlama",slug:"_3-6-karakter-kodlama"},{level:2,title:"3.7.\tVeri Format",slug:"_3-7-veri-format"},{level:2,title:"3.8.\tstemci Sertifika Ynetimi",slug:"_3-8-istemci-sertifika-yonetimi"},{level:2,title:"3.9.\tYetkilendirme Trleri",slug:"_3-9-yetkilendirme-turleri"},{level:2,title:"3.10. stek/Cevap Mesajlarnda Kullanlan Nesne Yaplar",slug:"_3-10-istek-cevap-mesajlarnda-kullanlan-nesne-yaplar"},{level:2,title:"3.11. Sayfalandrma ve Filtreleme",slug:"_3-11-sayfalandrma-ve-filtreleme"},{level:2,title:"3.12. Mesaj mzalama",slug:"_3-12-mesaj-imzalama"},{level:2,title:"3.13. Durum Kodu",slug:"_3-13-durum-kodu"},{level:2,title:"3.14. Gereksinimlerinin Snflandrlmas",slug:"_3-14-gereksinimlerinin-snflandrlmas"},{level:2,title:"3.15. stek Bal",slug:"_3-15-istek-baslg"},{level:2,title:"3.16. Yant Bal",slug:"_3-16-yant-baslg"},{level:2,title:"3.17. Idempotency Kurallar",slug:"_3-17-idempotency-kurallar"},{level:2,title:"3.18. HTTP Durum Kodlar",slug:"_3-18-http-durum-kodlar"},{level:2,title:"3.19. Maskeleme Kurallar",slug:"_3-19-maskeleme-kurallar"},{level:2,title:"3.20. Fonksiyonel Olmayan Gereksinimler",slug:"_3-20-fonksiyonel-olmayan-gereksinimler"},{level:2,title:"3.21. Otomatik Sorgular",slug:"_3-21-otomatik-sorgular"}],content:' 3. Temel Prensipler  \n Bu blmde deme Hizmetleri Veri Paylam Servisleri (Hesap Bilgisi Hizmeti, deme Emri Balatma Hizmeti) iin tanmlanan temel prensipler aklanmaktadr. \n 3.1 Genel \n \n \n HHSler Ynetmeliin 59. maddesinin beinci fkras ve deme ve Elektronik Para Kurulularnn Bilgi Sistemleri ile deme Hizmeti Salayclarnn deme Hizmetleri Alanndaki Veri Paylam Servislerine likin Tebliin (Tebli) 23. maddesinin birinci fkras uyarnca, deme hizmetleri veri paylam servislerini GET araclyla HBHS ve BHSye sunmakla ykmldr. \n \n \n Tebliin 23. maddesinin ikinci fkras uyarnca deme emri balatma hizmetinde ak iletiim servisinin taraflar BHS ile HHSdir. \n \n \n Tebliin 23. maddesinin nc fkras uyarnca hesap bilgisi hizmetinde ak iletiim servisinin taraflar HBHS ile HHSdir. \n \n \n Ynetmeliin 60. maddesinin birinci fkras uyarnca mteri, deme emri balatma hizmetini  deme hesabnn evrim ii olarak eriilebilir olduu durumlarda , kullanmay tercih edebilir. \n \n \n Ynetmeliin 61. maddesinin birinci fkras uyarnca mteri, hesap bilgisi hizmetini  deme hesabnn evrim ii olarak eriilebilir olduu durumlarda , kullanmay tercih edebilir. \n \n \n Tebliin 25. maddesi uyarnca HHS ve YS (BHS ve HBHS) arasnda balant utan uca gvenli bir ekilde salanr. Bu amala iletim katmannda TLS (asgari 1.2 srm) ile ifreli iletiim salanr. \n \n \n Tebliin 23. maddesinin drdnc fkras uyarnca HHS tarafndan sunulan deme hizmetleri veri paylam servislerini kullanan yetkilendirilmi deme hizmeti salayclarnn TCMB tarafndan ilgili deme hizmeti iin yetkilendirilmi olduu kontrol edilir. \n \n \n Tebliin 25. maddesinin beinci fkras uyarnca zaman damgas, 15/1/2004 tarihli 5070 sayl Elektronik mza Kanunu kapsamnda tanmlanan zaman damgasna dayanr. \n \n \n API alan isimleri Trke olarak tanmlanmtr. Ancak API bal (header) alanndaki alan isimleri zelinde, API Geitleri tarafndan otomatik olarak tannabilmesi gzetilerek, ngilizce isimlendirme tercih edilmitir. \n \n \n HK halihazrda deme hesaplarna, evrim ii (mobil bankaclk, internet bankacl vb.) eriebilir durumda ise, HHS\'nin varsa Ak Bankaclk kanal veya yetki tanmn varsaylan deeri AIK olacak ekilde sunmas gerekmektedir. HHSnin, Bireysel/Kurumsal/Ticari mteri ayrm yapmakszn tm mterileri iin, evrim ii kanallarda hesap hareketlerine eriim ve deme yapabilme yetkisi bulunmas durumunda, yine ayn ekilde Ak Bankaclk kanal veya yetki tanmn da varsaylan deeri AIK olacak ekilde sunmas gerekmektedir. \n \n \n 5411 Sayl Kanun kapsamndaki bankalar, HHS API ierisinde Aktif durumda listelenmemiken, YS API ierisinde listelenemezler. \n 3.2.\tstem (ar) ve Oturum \n \n \n Her istek tekil istek numaras ve HKl ilemler iin zaman damgas (PSU-Timestamp) ierir. Birden fazla istek ieren ilem YS tarafndan belirlenen arya zg talep kimlii (istek numaras: X-Request-ID) ve rza srecine zg talep kimlii (ilem grup numaras: X-Group-ID) deerleri kullanlmaldr. Ayn rza noya ait tm isteklerde ayn X-Group-ID bilgisi deeri gnderilmelidir. \n \n \n Oturum takibi ise PSU-Session-ID ile yaplr. Oturum numaras (PSU-Session-ID) HKl ilemler iin zaman damgas (PSU-Timestamp) ile birlikte ilgili tm ilem verilerini ierecek ekilde kayt altna alnr. \n \n \n rnein, bir deme emri balatma ilemi birden fazla istekten oluur. Her istek yukarda belirtildii gibi biricik istek numaras ve HKl ilemler iin zaman damgas (PSU-Timestamp) ierir. Ancak ilemin oturum btnl PSU-Session-ID ile salanr. \n \n \n Taraflar atklar oturumu ilem btnln salayacak sre ierisinde ak tutar ve ilem biter bitmez kapatr. \n 3.3.\tRESTful API \n APIler, dnya leinde yaygn bir ekilde kullanlan Temsili Durum Transferi (Representational State Transfer, REST) mimari tarz ve JavaScript Nesne Notasyonu (JavaScript Object Notation, JSON) veri formatlarna uygun olarak gelitirilir. En st seviye Veri Tanmlama Dili (Data Description Language) ve en iyi uygulama rnekleri iin  ^JSON emas  temel alnr. \n stek ve yant mesajlarnda, istee bal veya koullu bir alan, deer iermiyorsa, bu alan JSON payloadunda yer almamaldr. \n rnek kod blou. \n "rzBlg":{\n         "rizaNo":"aa9bd7e7-0ccd-4edc-9639-5a358dbf2335",\n         "olusZmn":"2022-11-28T12:00:21+03:00",\n         "gnclZmn":null,    --\x3e hatal\n         "rizaDrm":"K",\n         "rizaIptDtyKod":"" --\x3e hatal \n      },\n \n rnek kod blou: \n \n         "alc":{\n            "hspNo": "TR800800004162387689546019",\n            "unv": "AHMET YILMAZ", \n            "kolas":{}  --\x3e nesne gnderimi hatal\n         },\n 3.4.\tSrm Ynetimi \n API sonraki aamalarda doabilecek gereksinimleri ve daha karmak kullanm durumlarn karlamak iin srmler halinde gelitirilir ve bu durum tasarm srasnda gz nnde bulundurulur. \n API v1.0.2 srmnde ; \n \n Kapsamdaki deme hesaplar : Vadesiz TL, yabanc para hesaplar (gerek ve tzel kiilere ait deme hesaplar), Kredili Mevduat Hesab \n Tekil deme (Virman/Havale/FAST/Mterileraras TL Aktarm Sistemi)\n \n Virman ve havale ilemleri kapsamnda yabanc para transferi yaplabilir. \n \n \n Hesap bilgisi hizmetleri\n \n Temel veya ayrntl hesap bilgisi \n Bakiye \n Gerekleen ilemler iin Hesap hareketleri \n \n \n Karekodlu demelerdeki 01, 02 ve 03 ak trleri\nyer almaktadr. \n \n API v1.1.0 srmnde ; \n \n API v1.0.2 srmne ek Olay Bildirim ve Ayrk GKD zellikleri eklenmitir. Srelerin daha iyi ilemesi iin eitli gncellemeler yaplmtr. \n \n Her srm deiikliinde bir nceki srm belirli bir sre desteklenecektir. Dier bir ifadeyle, sadece belirli bir sre iin mevcut ve bir nceki srm ayn anda eriilebilir olacaktr. \n 3.5.\tKaynak URI Yol Yaps \n YSlerin balatt arlarda URI yolu aadaki yapy takip eder: \n [hhs-yol-n-eki]/ohvps/ [kaynak-grubu]/ [srm]/ [kaynak]/[kaynak-no]/[alt-kaynak] \n Bu, aadaki unsurlardan oluur: \n \n [hhs-yol-n-eki] \nstee bal, HHS\'ye zg yol n ekini ifade eder. \nGET zerinden yaplan arlarda BKM tarafndan belirlenen sistem ad ve yol n eki kullanlr. \n ohvps \nSabit metin ohvps (deme Hizmetleri Veri Paylam Servisleri ksaltmas) \n [kaynak-grubu] \nKaynak grubu, APIye erimek iin kullanlan deme hizmetine (HBH, BH) gre eriim adresi (end point) grubunu tanmlar (hbh veya obh). \n [srm] \nAPI srmn ifade eder (/s[ana-srm].[alt-srm]/). \n [kaynak]/[kaynak-no] \nKaynak detaylarn ifade eder. \n [alt-kaynak] \nAlt kaynak detaylarn ifade eder. \n \n HHS, tm kaynaklar iin ayn katlmc yolu n ekini ve sistem adn kullanmaldr. \n BKM APIlerine erimek isteyen uygulamalarn yetkilerine gre aadaki APIlere abone olmalar gerekmektedir: \n OBH: \n https://gecit.api-preprod.bkm.com.tr/ohvps/obh/s1.1/odeme-emri-rizasi \n https://gecit.api-preprod.bkm.com.tr/ohvps/obh/s1.1/odeme-emri \nHBH: \n https://gecit.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesap-bilgisi-rizasi \n https://gecit.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesaplar \n https://gecit.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesaplar/1234/islemler \n https://gecit.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesaplar/1234/bakiye \nGKD \n https://gecit.api-preprod.bkm.com.tr/ohvps/gkd/s1.1/erisim-belirteci \nHHS  YS API \n https://gecit.api-preprod.bkm.com.tr/hhs-api/s1.1/hhs \n https://gecit.api-preprod.bkm.com.tr/hhs-api/s1.1/hhs/1234 \n https://gecit.api-preprod.bkm.com.tr/yos-api/s1.1/yos \n https://gecit.api-preprod.bkm.com.tr/yos-api/s1.1/yos/1234 \n HHSlerin salayacaklar APIlerdeki URI evrimi rnekleri aadaki gibidir. \n \n https://xbank.com.tr/api-portal/ohvps/obh/s1.1/odeme-emri \n https://gecit.api-preprod.bkm.com.tr/ohvps/obh/s1.1/odeme-emri  (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesap-bilgisi-rizasi \n https://gecit.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesap-bilgisi-rizasi  (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesaplar \n https://gecit.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesaplar   (BKM API) \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesaplar/1234 \n https://gecit.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesaplar/1234  (BKM API) \n \n GET zerinden yaplan arlarda, istek balnda bulunan x-aspsp-code (istein iletildii Hesap Hizmeti Salaycsnn kodu) deerine gre HHS APIde standart olarak tanmlanm olan basePath bilgisine servis uzants eklenerek HHSye ynlendirme yaplr. \n rnein, istek balnda  xbank n kodu varsa, YS tarafndan yaplan \n https://gecit.api-preprod.bkm.com.tr/ohvps/hbh/s1.1/hesap-bilgisi-rizasi \nars GET tarafndan karlanarak \n https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesap-bilgisi-rizasi \nadresine ynlendirilir. \n Bu rnekte,  https://xbank.com.tr/api-portal  basePath bilgisi HHS tarafndan HHS APIye girilen deerdir. \n NEML :  URI Query parametreleri GET ile iletilirken deerlerde url-encode yaplmaldr. rnek bir API istei; \nGET /ohvps/hbh/s1.1/hesaplar/xxx/islemler?hesapIslemBslTrh=2023-02-07T16:42:38%2B03:00&hesapIslemBtsTrh=2023-02-07T17:09:18%2B03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfKytSayi=10&syfNo=1 \n Burada \'+\' karakterinin boluk olarak alglanmamas iin %2B deeri ile iletilmitir. \n 3.6.\tKarakter Kodlama \n API istekleri ve yantlarnn  Balk  parametrelerinde ISO-8859-1 standartnda yer alan karakter kmesi kullanlmaldr.  3.15. stek Bal  blmnde detaylandrlmtr. \n API istekleri ve yantlarnda  Gvde  parametrelerinde UTF-8 karakter kodlamas kullanlr. Bu, JSON iin varsaylan karakter kodlamasdr. \n Ancak, bir HHS\'nin kendi uygulamalar ve deme balatt deme sistemi (Havale vb.) baz UTF-8 karakterlerini kabul etmeyebilir. HHS, UTF-8 kodlamas ieren bir mesaj ileyemez ve reddederse, HTTP 400 (Hatal stek) durum kodu ile yant vermelidir. \n Gvde parametrelerinde desteklenen UTF-8 karakter kmesi aada listelenmitir. \n \n \n \n Karakter \n UTF 8   Hex. \n Karakter \n UTF 8   Hex. \n Karakter \n UTF 8   Hex. \n Karakter \n UTF 8   Hex. \n \n \n \n \n \n 20 \n = \n 3d \n X \n 58 \n r \n 72 \n \n \n ! \n 21 \n ? \n 3f \n Y \n 59 \n s \n 73 \n\n 23 \n @ \n 40 \n Z \n 5a \n t \n 74 \n \n \n % \n 25 \n A \n 41 \n [ \n 5b \n u \n 75 \n \n \n & \n 26 \n B \n 42 \n \\ \n 5c \n v \n 76 \n \n \n \' \n 27 \n C \n 43 \n ] \n 5d \n w \n 77 \n \n \n ( \n 28 \n D \n 44 \n ^ \n 5e \n x \n 78 \n \n \n ) \n 29 \n E \n 45 \n _ \n 5f \n y \n 79 \n \n \n * \n 2a \n F \n 46 \n a \n 61 \n z \n 7a \n \n \n + \n 2b \n G \n 47 \n b \n 62 \n { \n 7b \n \n \n , \n 2c \n H \n 48 \n c \n 63 \n } \n 7d \n \n \n - \n 2d \n I \n 49 \n d \n 64 \n  \n c3 \n \n \n . \n 2e \n J \n 4a \n e \n 65 \n  \n c3 \n \n \n / \n 2f \n K \n 4b \n f \n 66 \n  \n c3 \n \n \n 0 \n 30 \n L \n 4c \n g \n 67 \n  \n c3 \n \n \n 1 \n 31 \n M \n 4d \n h \n 68 \n  \n c3 \n \n \n 2 \n 32 \n N \n 4e \n i \n 69 \n  \n c3 \n \n \n 3 \n 33 \n O \n 4f \n j \n 6a \n  \n c4 \n \n \n 4 \n 34 \n P \n 50 \n k \n 6b \n  \n c4 \n \n \n 5 \n 35 \n Q \n 51 \n l \n 6c \n  \n c4 \n \n \n 6 \n 36 \n R \n 52 \n m \n 6d \n  \n c4 \n \n \n 7 \n 37 \n S \n 53 \n n \n 6e \n  \n c5 \n \n \n 8 \n 38 \n T \n 54 \n o \n 6f \n  \n c5 \n \n \n 9 \n 39 \n U \n 55 \n p \n 70 \n \n \n \n \n : \n 3a \n V \n 56 \n q \n 71 \n \n \n \n \n ; \n 3b \n W \n 57 \n \n \n \n \n \n \n \n Ancak  Eriim belirteci, Yenileme belirteci ve Authorization  parametreleri daha dar bir karakter kmesi ile doldurulmaldr. \n Bearer HTTP Authorization emas RFC 6750\'de tanmlanmtr.  https://www.rfc-editor.org/rfc/rfc6750#section-2.1  blmnde izin verilen karakterlerin gnderilmesi beklenmektedir. Buradaki standartn her 3 parametre iin de uygulanmasna karar verilmitir. \n RFC 6750 ierisinde bearer token format u ekildedir : 1*( ALPHA / DIGIT / "-" / "." / "_" / "~" / "+" / "/" ) *"=" \nAugmented BNF for Syntax Specifications (ABNF) ile ifade edilen bu formatta token en az 1 adet alfanumerik karakter veya zel karakter ("-", "." , "_" , "~" , "+" , "/")  iermeli ve 0 ya da daha ok sayda "=" karakteri ile bitmelidir. \n ALPHA = A-Z / a-z aralndaki harflerdir. \nDIGIT = 0-9 aralndaki rakamlardr. \n 3.7.\tVeri Format \n \n Ak bankaclk kapsamndaki zaman damgas, ISO 8601 standartna uygun olarak yerel saat bilgisini ve timezone bilgisini de ierecek ekilde " yyyy-MM-ddTHH:mm:ssXXX " formattaki haliyle hazrlanmaldr. \n \n rnek:  "timestamp": "2021-05-30T20:34:15+03:00" \nyyyy : 4 hane yl \nMM : Baa 0 eklenmi, toplam 2 hane ay \ndd    : Baa 0 eklenmi, toplam 2 hane gn \nHH    : Baa 0 eklenmi, toplam 2 hane saat (0-23 aras deer alabilir.) \nmm : Baa 0 eklenmi, toplam 2 hane dakika \nss    : Baa 0 eklenmi, toplam 2 hane saniye \nXXX : ISO 8601 Time zone \n \n \n Zaman damgas hesaplamalarnda, yeni gnn balang saatinin 00:00:00 olduu kabul edilmitir. \n \n \n JWT veri paketlerinde kullanlan zaman damgalar, 1 Ocak 1970 Saat 00:00:00 (UTC) anndan itibaren geen saniye says deerini (Unix Time) kullanmaldr. \n \n \n Bir HHS, tarihi yanl biimlendirilmi bir istek aldnda, 400 (Hatal stek) durum kodu ve ilgili hata kodu ile yant vermelidir. \n \n \n ISO 4217 Standartnda para birimleri ve ka basamak ondalk deer ierebilecekleri belirlenmitir. \n https://www.iso.org/iso-4217-currency-codes.html   adresinden cretsiz olarak listeye eriilebilir.  \nAPI Standartlarnda da para birimleri  ISO 4217de tanmlanm olan 3 harfli kodlarla iletilir.   Tm tutar alanlar ISO 4217\'de tanmlanm para birimlerinin ondalk basamak deerleri de gz nnde bulundurularak iletilmelidir. Tutar alanlar art ya da eksi deer alabilecei iin API deseninde tanmlanm regular expressionlar dikkate alnmaldr. \nrnein; Bakiye API\'sindeki "Kredili Mevduat Hesab Bakiyesi" alan "-100.25" ve "Para Birimi" alan "TRY" olarak iletildiinde 25 deerinin kuru olduu anlalmaldr. \ndeme Emri Rzas API\'sinde yer alan "lem Tutar" alan "104.75" TRY olarak iletildiinde "75" deerinin kuru olduu anlalmaldr. \n"12000" Japon Yeni iin, ISO 4217de JPY para biriminin ondalk ksm olmadndan "lem Tutar" alannda "12000" ve "Para Birimi" alannda "JPY" deeri  iletilmelidir. \n \n \n Altn para birimi zelinde ISO 4217ye uygun olarak "XAU" cinsinde ve 2 basamak ondalk rakam ierecek ekilde iletilmelidir. rnein ierisinde "13,50 gr" altn olan hesap iin bakiye "13.50", para birimi "XAU" olarak gnderilmelidir. \n \n \n Dier madenlerde ondalk basamak ISO 4217 standartnda tanmland gibi olmaldr. \n \n \n Sral veri tipleri byk kk harfe duyarl olmaldr. \n 3.8.\tstemci Sertifika Ynetimi \n HVPS kapsamnda YS ve HHSlerin gvenli bir ekilde tanmlanmas amacyla elektronik sertifikalar kullanlr. \n HVPS kapsamnda taraflarn gvenli bir ekilde tanmlamas, utan uca gvenli iletiim, mesaj ifreleme ve mesaj imzalama ilevleri 15/1/2004 tarihli ve 5070 sayl Elektronik mza Kanununda aklanan elektronik sertifikalar kullanlarak salanr. Elektronik sertifikada Trkiye Cumhuriyet Merkez Bankas tarafndan verilen kurulu kodu ve kuruluun trne dair bilgiler bulunur. \n GET zerinden yaplan eriimlerde YS ve HHSlere nceden datlm olan istemci sertifikalar kullanlarak taraflarn (sunucu) kimliklerinin dorulanmas salanacaktr. stemci sertifikalar hem test hem de retim ortamnda kullanlacaktr. Sertifikalarn ilevsellii ve geerlilii sertifikasyon srecinde de snanacaktr. Sz konusu sertifikalarn datm prosedrleri ve kullanmlara ynelik aklamalar EK-3te yer verilmitir. \n 3.9.\tYetkilendirme Trleri \n GET zerinden yaplan arlarda iki temel yetkilendirme tr kullanlr: \n 1.\tstemci Kimlik Bilgileri:  Mteri onaynn gerekmedii, sadece YSn tanmlanp doruland API arlarnda kullanlr. YSn yetkilendirilmi olduu ve faaliyet izninin yapt hizmet arsna uygun olduu kontrol edilir.  Bu amala, YSlere clientId ve clientSecret tahsis edilecektir. YSler ilgili clientId ve clientSecret ile sadece yetkilendirilmi olduklar servislere eriebileceklerdir. YSler kendilerine BKM tarafndan sunulacak APIyi, kendi clientID ve clientSecret deerleri ile sorgulayarak stemci Kimlik Bilgileri belirtecini (access token) elde edeceklerdir.\nHHSler de GET zerindeki YS APIsini sorgulama maksad ile GET\'e geldiklerinde, kendilerine atanm olan clientID ve clientSecret bilgileri ile yetki kontrolleri yaplr.\nHHSler kendilerinden alnacak username ve password deerleri kullanlarak oluturulacak basic authentication metodu ile servislerini sunacaklardr. \n 2.\tYetkilendirme Kodu:  YSn dorulanmasnn yansra mterinin GKD ile dorulanmas gereken API arlarnda kullanlr. Mteri dorulanarak yetkilendirme kodu oluturulmas HHSnin yetkilendirme arayzne ynlendirilir. GKDnin baaryla tamamlanmas sonrasnda yetkilendirme kodu YSe dnlr. YS daha sonra HHSnin  eriim belirteci  (access token) eriim adresini (EK-3: POST /erisim-belirteci) armak suretiyle yetkilendirme kodunu bir eriim belirteci (access token) ile deitirerek ilgili kaynaklar kullanabilir. \n deme emri balatma ve hesap bilgisi hizmetlerinde hangi yetkilendirme trlerinin kullanlaca bilgisi, ilgili balklardaki eriim adresleri (endpoints) tablolarnda yer almaktadr. \n erisim-belirteci  erisim noktasndan elde edilen  erisimBelirteci  ilikilendirildii nesne veya ilem iin gnderilen POST istei balnda  x-access-token  alannda iletilir.\nBelirli bir sre iin tanmlanan eriim belirteci (access token) deerinin yenileme belirteci (refresh token) ile yenilenmesi gerekir. \n Eriim adreslerinde kullanlan yetkilendirme tr ilgili eriim adresi tablolarnda belirtilmitir. \n 3.10. stek/Cevap Mesajlarnda Kullanlan Nesne Yaplar \n stek ve Cevap mesajlarnda kullanlacak olan nesneler tm elemanlarn kapsayacak ekilde Ek-1 de listelenmitir. Tm listelenen elemanlar asndan (U nokta mesaj yaplarnn belirtildii tablolarda belirtildii zere) alann Zorunlu (z) veya stee Bal () olma durumlarna gre baz alanlar gnderilebilir veya gnderilmeyebilir. \n 3.11. Sayfalandrma ve Filtreleme \n Sayfalandrma \n arya dnlen kaynak nesnesi ierisindeki kaytlar bir sayfalandrma yaps ile arlacak ekilde istek oluturulur. \n Oluturulacak istein ierisinde parametreler ile filtreleme, sayfa bana gsterilecek kayt says ve hangi sayfann nyzde gsterilecei bilgileri eriim noktasna iletilir ve ilgili kaytlar cevap olarak alnr. \n Filtreleme \n HHS, birden ok kayt dnlmesi gereken GET arlarnda snrl filtreleme destei salamaldr. Filtre parametreleri her zaman kaynak nesnesinin belirli alanlarna zgdr ve nesne iin tanmlanan kurallara uymaldr. \n 3.12. Mesaj mzalama \n Elektronik imzalar, HVPS APIde gerekletirilen ilemlerin ve tanan verilerin btnlk ve inkr edilemezliini destekler. mzalarn kaynak baznda hangi istek ve yantlara uyguland belirlidir. \n API yalnzca TLS\'ye dayanrsa, dijital kaytlar ve inkr edilemezlik kantlarn tutmak zor olur. Bu nedenle, TLS\'ye dayanmayan bir inkr edilemezlik zm olarak API isteinin HTTP balnda bir JWS kullanlarak salanabilir. \n HTTP isteinin gvdesinin hash fonksiyonu (SHA256) ile zeti alnacaktr. Elde edilen zet, asimetrik anahtarlar destekleyen bir algoritma kullanlarak imzalanacak ve JWS elde edilecektir. \n Bir istek, YS\'nin zel anahtar ile imzalanacak ve bu istee karlk gelen yant, HHS\'nin zel anahtar tarafndan imzalanacaktr. \n Tm API istekleri ve yantlar imzalanmaz. Mesaj imzalamann zorunlu olup olmad, desteklenip desteklenmedii her API zelinde belirlenir. \n Anahtar Deposu \n HHS\'ler ve YS\'ler tarafndan gvenilen bir Gven Otoritesi (Trust Anchor), taraflar iin bir genel anahtar deposu salamaktan sorumludur. \n Gven Otoritesi, taraflardan herhangi birisinin oluturduu bir anahtar iftinin ak blmn saklayan merkezi bir dizin (BKM tarafndan tutulan merkezi kayt sistemi vb.) olacaktr. \n Mesajlar dorulamak iin taraflarn genel anahtarlarnn paylalmas iin BKM bir servis salayacaktr. HHS API olarak adlandrlm olan bu servis ile HHS ve YS listelerine ulalabildii gibi dorulama ilemi iin ihtiya duyulacak olan genel anahtarlara da bu servis zerinden eriilebilinecektir. \n lgili Mesaj ifreleme iin genel ak, Ek-5 blmnde detaylaryla paylalmaktadr. \n 3.13. Durum Kodu \n APIler, iki farkl amaca hizmet eden iki durum kodu kullanr: \n \n HTTP Durum Kodu, API arsnn (kaynaktaki HTTP ilemi) sonucunu yanstr. \n Baz kaynak payloadlarndaki Durum alan, kaynaklarn durumunu yanstr. \n 3.14. Gereksinimlerinin Snflandrlmas \n Eriim adreslerinin ve alanlarn kullanm Zorunlu(Z), stee Bal() veya Koullu(K) olabilir. Kullanmlara ilikin durumlar ve kullanmn (K) koullu olduu duruma ilikin aklamalar ilgili tablolarda belirtilmitir. \n HVPS API\'lerinin (HBH,BH,GKD) istek ve yantta kullanlacak balk isimleri, ilgili RFC dokmanlarnda ve aadaki tabloda yer ald ekilde kullanlacaktr.  Uygulamaya zellemi balklar "X-" ile balayacaktr. Balk isimlerinde yer alacak ksaltmalar (rn. PSU, ASPSP gibi) tamam byk harfle yazlacak ekilde tanmlanacaktr. Balk isimleri byk  kk harfe duyarl olmamaldr. rnein x-request-id ya da X-Request-ID olarak gnderilmi olan bir istek bal deikeni, sunucu tarafnda hata vermeyecek ekilde ilenebilmelidir. \n 3.15. stek Bal \n \n "Balk isimleri" yorumlanrken kk byk harfe duyarl olmamaldr. rnein "x-ReQuEsT-Id" geerli bir balk ismidir. \n "Balk deerleri" yorumlanrken ise kk byk harf duyarll olmaldr. rnein "xyz123" ile "XYZ123" deerleri farkldr. \n Balk deerlerinde ISO-8859-1 standartnda yer alan karakter kmesi kullanlmaldr. rnein "PSU-Device-Data" deerinde "OS12" yazmak, byk "" harfinin ISO-8859-1 ierisinde yer almamasndan dolay, hataya yol aacaktr. \n stek ve Yant balnda yer alan alanlarn; POST GET DELETE methodlarnda, OBH,HBH,GKD,OAS,ODS API\'leri baznda Zorunlu/Koullu/stee Bal kullanm durumlar aadaki tabloda listelenmitir. \n \n Tablo 2: stek Balnda Yer Alan Veriler \n \n \n \n Balk simleri \n Format \n Notlar \n POST \n GET \n DELETE \n POST \n GET \n DELETE \n \n \n \n \n \n \n \n OBH HBH GKD \n OBH HBH GKD \n OBH HBH GKD \n OAS ODS \n OAS ODS \n OAS ODS \n \n \n X-Request-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen arya zg talep kimlii. stek numaras.   rnek: deme emri balatma i aknn her admda farkl x-request-id deeri kullanlr.   arlarn ayn yant dnmesinin beklendii durumlarda (idempotent ilemlerde) ayn deer ile ar yaplr. \n Z \n Z \n Z \n Z \n Z \n Z \n \n \n X-Group-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen ilem akna zg talep kimlii. lem grup numaras.  Ayn rza noya ait tm isteklerde ayn x-group-id bilgisi deeri gnderilmelidir. rnek: deme emri balatma/hesap bilgisi i aknn her admnda ayn x-group-id deeri kullanlr. \n Z \n Z \n Z \n - \n - \n - \n \n \n Content-Type \n AN1..20 \n Standart HTTP Bal; Talepte salanan payloadn biimini temsil eder. Bu deerin application/json olarak gnderilmesi gerekmektedir. Hata durumlarnda application/problem+json da iletilebilir.  (Baka bir deere ayarlanrsa, HHS, 415 Desteklenmeyen Ortam Tr (Unsupported Media Type) ile yant vermelidir) \n Z \n - \n - \n Z \n - \n - \n \n \n X-ASPSP-Code \n AN4 \n Hesap Hizmeti Salaycsnn (HHS) kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n Z \n Z \n Z \n Z \n Z \n Z \n \n \n X-TPP-Code \n AN4 \n Yetkili deme Hizmeti Salaycs (YS) kodudur \n Z \n Z \n Z \n Z \n Z \n Z \n \n \n PSU-Auth-Date \n ISODateTime \n HKnn YS zerinde en son oturum at saat. [RFC7231] rnein:  auth-date: Tue, 11 Sep 2012 19:43:31 GMT \n  \n  \n  \n - \n - \n - \n \n \n PSU-IP-Address \n AN7..15 \n HK YS zerinde oturum amsa, ilemi balatt cihazn IP adresi. \n  \n  \n  \n - \n - \n - \n \n \n PSU-IP-Port \n AN1..5 \n HK YS zerinde oturum amsa, ilemi balatt cihazn Port adresi. \n  \n  \n  \n - \n - \n - \n \n \n PSU-GEO-Location \n AN1..36 \n HKnn ilemi balatt cihazn konum bilgisi. RFC2426 standartna uygun olarak paylalmaldr. rnein  GEO:"<enlem >, <boylam>GEO:52.506931,13.144558 \n  \n  \n  \n - \n - \n - \n \n \n PSU-User-Agent \n AN 1.. 255 \n HKnn ilemi balatt cihazn salad user-agent bilgisi. (Tarayc, versiyon, iletim sistemi bilgileri) \n  \n  \n  \n - \n - \n - \n \n \n PSU-Timestamp \n ISODateTime \n HKnn ilemi balatt cihazn tarih saat ieren zaman bilgisi. \n  \n  \n  \n - \n - \n - \n \n \n PSU-Device-ID \n AN5..40 \n HK ilemi mobil uygulama araclyla balattysa, kullanlan mobil uygulama ilk yklendiinde oluturulan tekil cihaz veya uygulama belirteci. HK cihaznn UUID deeri kullanlabilir. \n  \n  \n  \n - \n - \n - \n \n \n PSU-Device-Data \n AN1..1024 \n HKnn ilemi balatt mobil cihaza ait veriler.  rnek alanlar:   - Platform - (Android, iOS, Windows 10 Mobile)  - Device Model   - OS Name   - OS Version - Locale - Time zone \n  \n  \n  \n - \n - \n - \n \n \n PSU-Fraud-Check \n AN1..4096 \n YS\'lerin eitli gvenlik kontrollerini gerekletirerek, nemli grlen aadaki bilgileri HHS\'ler ile paylamalar gerekmektedir. Bu bilgiler nda mterinin profili oluturulmasna katk salanacaktr.   HKl ilemlerde (PSU-Initiated = E gnderildii durumlarda) gnderilmesi zorunludur.  Sistemsel yaplan API armlarmda, Olay Bildirim Servis armlarnda ve HHS-YS API armlarnda gnderilmesine gerek bulunmamaktadr.  Paylalacak bilgiler u ekildedir.   FirstLoginFlag  : HK\'nn, mterilik mrnde ilgili YS sistemine (mobil ya da web uygulamas) ilk login olma sresini ifade eden deer. HK\'nn ilk yapt HBH ya da BH ilemi deil, YS sisteminde kendini aktifletirme tarih aral bilgisidir.   YS, kullancnn ilk login bilgisini tutarak sonraki ilemlerinde bu bilgiyi belirlenen format ile HHS\'ye aktaracaktr. rnein; YS\'n 7 aydr mterisi olan bir kullanc iin bu alan "5" olarak YS tarafndan beslenecektir. Burada ama; ilgili kullancnn YS\'n eski bir mterisi mi, yoksa yeni bir mterisi mi olup olmadn anlamaktr.   Gnderilmesi Zorunlu alandr. TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.   DeviceFirstLoginFlag  : HK\'nn, mterilik mrnde ilem annda kulland cihazla YS uygulamasna (web ya da uygulama tabanl) ilk login olma sresini ifade eden deer. HK cihaz deiiklii yaparsa FirstLoginFlag deeri sabit kalmal  ancak DeviceFirstLoginFlag deeri deimelidir.  FirstloginFlag deeri ile HKnn YS uygulamasna ilk login tarih bilgisi ile ilgili bilgi verilirken, DeviceFirstLoginFlag ile de HKnn YS uygulamasna farkl bir cihaz aracl ile ilk login tarihinin bilgisi verilmektedir.  rnein; HK 7 aydr YS\'n mterisi olabilir, byle bir durumda FirstLoginFlag deeri "5" olacaktr. Ancak son ilemini daha nce hi kullanmad bir cihazdan yapmtr. Yeni cihazdaki login sre aral 0-2 saat aralnda  olduu iin DeviceFirstLoginFlag deeri "1" olacaktr.FirstLoginFlag deeri yine "5" olarak kalmaya devam edecektir.Bu bilgi ile YS, ilgili HHS\'ye ilk kez geliyor olsa bile; HHS, mterinin YS\' uzun sredir kullandn ama yeni bir cihazla ilemlerine devam ettiini anlayabilecektir. Bir HK, farkl cihazlar veya platformlar zerinden YS ile etkileime girebilir.  Kullanc ve YS arasnda bir oturum balatlm ise YSn tutarl ve kalc bir kimlik (device id) atamas beklenmektedir.  Device ID: Web sitesi veya mobil uygulama kullanclar iin retilen, tarayc ya da mobil uygulama tabanl benzersiz (tekil) tanmlayc deer. Mobil uygulamalar iin HKnn ilk defa ilgili cihaza aktivasyon yapt tarih bilgisi alnmaldr.   Device ID bilgileri YS uygulama ortam (web ya da uygulama tabanl) ve HK cihaz baznda tutulmaldr. YSten balatlan ilem hangi uygulama ortamna ait ise ilgili ortamala ilikili tutulan Device IDnin ilk login tarihine baklarak gncel flag deeri hesaplanmaldr.  Gnderilmesi Zorunlu alandr. TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.   LastPasswordChangeFlag  : HK\'nn, YS (cihaz bamsz)  uygulamasna login olduu ifre bilgisinin en son deitirildii sreyi ifade eden deer. Mterinin en son ne zaman ifre deiiklii yaptn anlamak iin kullanlan alandr. Yeni mteri ve hi ifre deiiklii yapmam olabilir, byle bir durumda ilgili alan "0" olarak beslenecektir.   Gnderilmesi Zorunlu alandr. TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.   BlacklistFlag  : HK\'nn herhangi bir sebeple YS\'n sakncal mteriler listesinde bulunup bulunmadn ifade eden deer.   Burada ama herhangi bir sebeple YS tarafnda yasakl olarak kaytl olan HK bilgisinin, dolandrcl nceden tespit etmek amal HHS\'ye aktarlmas olarak aklanabilir. rnein, YS tarafndan tespit edilen dolandrc kullanclara ait device id bilgisi, bu kara listede tutulur daha sonra ayn cihazla baka bir HK ilem yapacak olsa bile bu alanda ilgili bilgi "1" deeri ile HHS\'ye aktarlr. HHS\'de olmayp YS tarafnda olan bu rnekteki sakncal mteri/cihaz bilgisinin, dolayl yoldan HHS\'ye aktarlmas amalanmaktadr.  Gnderilmesi Opsiyonel alandr. TR.OHVPS.DataCode.VarYok sral veri tipinin alabilecei deerleri alabilir.   MalwareFlag  : YS uygulamasnn alt cihaz zerindeki son 21 gne ait zararl yazlm tespit bilgisini ifade eden deer. rnein HK\'nn cihaznda zararl yazlm olduu ayn 1\'inde YS tarafndan tespit edildi. Zararl yazlm tespitinden 2 saat sonra YS zerinden login olan HK\'nn durumu,  "1" olarak iletilecektir. Bir gn sonra ayn 2\'sinde, yeni bir zararl yazlm tespiti yok ancak mevcut zararl yazlm aktifse alan "2" deeri ile iletilecektir. Sreler artarak 21 gne kadar TR.OHVPS.DataCode.ZmnAralik deerlerine gre iletilecektir.Son 21 gn iinde yeni bir tespit yoksa ayn 22\'sinden itibaren ilgili alan  "0" deeri ile beslenecektir. Not: Zararl yazlm, bankaclk ilemlerinin yapld uygulamalara girite kullanlan bilgilerin (ifre, kullanc kodu gibi) ele geirilmesi amacyla kullanlan bir uygulama ya da kod parac olabilir. Bu amalar dnda kullanlan (bankacla ynelik bir zararl yazlm olmayan) yazlm tespitleri iletilmemelidir. YS kanallarna her bir loginde, kullanlan cihazda bir zararl yazlm var m yok mu kontrol yaplmaldr.   Gnderilmesi Opsiyonel alandr. TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.   AnomalyFlag  : Dier pheli durumlarn varln ifade eden deer. Gnderilmesi Opsiyonel alandr. TR.OHVPS.DataCode.VarYok sral veri tipinin alabilecei deerleri alabilir.   UnsafeAccountFlag : HHS tarafndan aktarlan bilgi ile son 21 gn iinde HK\'nn dolandrclk maduru olmas durumunu ifade eden deer. rnein; HHS 1, ayn 1\'inde sphe veya sahtekarlk nedeniyle bir deme ilemine izin vermedii durumda, bu bilgiyi rza iptal detay kodu ile YS\'e aktarm olur. Bu bilgiyi tutan YS, ilgili mterinin 15 dakika sonra HHS 2\'de yapt ilem iin ilgili alan "1" deeri ile besler. Bylece HHS 2, HK\'nn farkl bir HHS\'de son 15 dakika iinde pheli veya sahte bir ilemi olduunu anlayabilecektir. Ayn 22\'sinde yeni bir tespit/kayt yoksa bu alan YS tarafndan "0" olarak beslenecektir. Gnderilmesi Opsiyonel alandr.TR.OHVPS.DataCode.ZmnAralik sral veri tipinin alabilecei deerleri alabilir.     Flaglar JWT claims iine key value eklinde eklenerek gnderilecektir. EK-5: Mesaj mzalama Ak\'nda belirtilen yntemle imzalanarak oluturulan JWT PSU-Fraud-Check alanna konularak YS\'ler tarafndan HHS\'ye iletilmelidir. \n K \n K \n Z \n - \n - \n - \n \n \n PSU-Initiated \n AN1 \n lemin HK tarafndan balatlmas durumunda E , sistem tarafndan balatld durumda H deerini almas beklenir.  Olay bildirim servislerinin armnda O gnderilmelidir.   lemler servisinde yaplacak sistemsel sorgulardaki ilem limitlerini kontrol amacyla kullanlr. \n Z \n Z \n Z \n - \n - \n - \n \n \n PSU-Session-ID \n AN1..100 \n stei balatan YS tarafndan belirlenen oturuma zg talep kimlii. HK\'nn YS uygulamas zerinden kimlik dorulama mekanizmas ile bilgi sistemlerine dhil olmalarndan ilemlerini tamamlayp sistemden ayrlmalarna kadar geecek tm sreci kapsayacak ekilde ayn deeri almaldr. Tek seferlik deme gibi HKnn tannmadan balatld ilemlerde bu deer bo olarak iletilmelidir. \n  \n  \n  \n - \n - \n - \n \n \n Authorization \n AN1..4096 \n Katlmc ile GET arasndaki otorizasyon iin kullanlan token bilgisidir.  Yekilendirme trlerinden stemci Kimlik Bilgilerini adresler.    Blm 3.6 Karakter Kodlama  blmnde aklanan karakter formatnda gnderilmesi beklenmektedir. \n Z \n Z \n Z \n Z \n Z \n Z \n \n \n X-Access-Token \n AN1..4096 \n HKnn GKD srecinde dorulanmas sonrasnda kullanlan eriim simgesi. Yetkilendirme trlerinden Yetkilendirme Kodu (GKD)nu adresler.  Blm 3.6 Karakter Kodlama  blmnde aklanan karakter formatnda gnderilmesi beklenmektedir. \n  \n  \n  \n - \n - \n - \n \n \n X-JWS-Signature \n AN1..4096 \n Payload gvdesinin ayrlm bir JWS imzasn ieren stbilgi.  Bu baln ne zaman belirtilmesi gerektii hususu ilgili endpoint iin belirtilmitir.  Mesaj imzalama kullanlan API ve methoda gre gnderimi zorunludur. \n K \n K \n K \n K \n - \n - \n 3.16. Yant Bal \n \n "Balk isimleri" yorumlanrken kk byk harfe duyarl olmamaldr. rnein "x-ReQuEsT-Id" geerli bir balk ismidir. \n "Balk deerleri" yorumlanrken ise kk byk harf duyarll olmaldr. rnein "xyz123" ile "XYZ123" deerleri farkldr. \n Balk deerlerinde ISO-8859-1 standartnda yer alan karakter kmesi kullanlmaldr. rnein "Link" deerinde "OS12" yazmak, byk "" harfinin ISO-8859-1 ierisinde yer almamasndan dolay, hataya yol aacaktr. \n \n Tablo 3: Yant Balnda Yer Alan Veriler \n \n \n \n Balk simleri \n Format \n Notlar \n Kullanm Durumu  OBH HBH GKD \n Kullanm Durumu  OAS ODS \n \n \n \n \n X-Request-ID \n AN1..36 \n YS tarafndan belirlenen arya zg talep kimlii. stek numaras    lgili istek balndaki bilgi geri dnlr. \n Z \n Z \n \n \n X-Group-ID \n AN1..36 \n stei balatan YS tarafndan belirlenen ilem akna zg talep kimlii. lem grup numaras. lgili istek balndaki bu deer geri dnlr. \n Z \n - \n \n \n X-ASPSP-Code \n AN4 \n Hesap Hizmeti Salaycsnn (HHS) kodudur. (Nezdinde H bulunduran kurulu kodu. rnein, Banka, Elektronik Para Kuruluu ve deme Kuruluu) \n Z \n Z \n \n \n X-TPP-Code \n AN4 \n Yetkili deme Hizmeti Salaycs (YS) kodudur \n Z \n Z \n \n \n Content-Type \n AN1..20 \n Standart HTTP Bal; Talepte salanan payloadn biimini temsil eder:  application/json \n Z \n Z \n \n \n X-JWS-Signature \n AN1..4096 \n JWS imzasn ieren stbilgi. Bu baln hangi yantlar iin kullanlmas gerektii ilgili endpoint iin belirtilmitir.  Hata durumlarnda, yant gvdesi deeri dnlyor ise imzalanmal ve imza bilgisi x-jws-signature alannda iletilmelidir.  Ancak uygulama katman tarafndan yakalanamayan dolays ile imzalanamayan hata durumlarnda x-jws-signature alan HHS\'ler tarafndan bo gnderilebilir. \n K \n K \n \n \n X-RateLimit-Limit \n N 1..18 \n stek kst uygulanan servislerde en fazla ka adet istek yaplabileceini gsterir. Kst uygulanan servislerde bu baln dnmesi zorunludur. \n K \n - \n \n \n X-RateLimit-Remaining \n N 1..18 \n stek kst uygulanan servislerde ka adet istek hakk kaldn gsterir. Kst uygulanan servislerde bu baln dnmesi zorunludur. \n K \n - \n \n \n X-RateLimit-Reset \n AN 1..255 \n stek kst uygulanan servislerde arm hakk bittikten sonra yeniden denemeden nce beklemesi gereken sreyi (saniye cinsinden) gsterir. HTTP 429 durum kodu (Too Many Requests) ile dnlen yantlarn balnda dnlmesi zorunludur.  YS olarak yaptnz sistemsel sorgularda; HTTP 429 durum kodu (Too Many Requests) ile dnlen yant aldnzda tekrar sorgu yapmadan nce X-RateLimit-Reset yant baln kontrol ederek, bu balktaki sre kadar bekledikten sonra yeniden sorgulama yaplmas gerekmektedir. \n K \n - \n \n \n x-total-count \n N 1..18 \n Hesaplar, lemler, Bakiye, letilemeyen Olaylar servislerinde sayfalama kullanld durumda, sorgu sonucu dnecek toplam kayt says bilgisi, bu alanda HHS isteine bal olarak gnderilebilir.   Kayt says 0 olduu durumda gnderimi zorunludur. \n K \n K \n \n \n Link \n 1..4096 \n Link alannn  Hesap Bilgisi Hizmeti iin Eriim Adresleri    tablosundaki parametre  = Sayfalama olan APIlerde ve letilemeyen Olaylar API\'sinde gnderim yaplmas zorunludur.  Sayfalama yaps kullanldnda gelen yantta birden fazla sayfa var ise; nceki, sonraki, ilk, son sayfalara gitmek iin gerekli referanslar link headernda aadaki rnekteki gibi doldurulabilir.  x-total-count alannn gnderimi kayt says 0 olduu durum dnda istee bal olduu iin; Link ierisindeki son sayfa bilgisi  (last) istee bal hale getirilmitir. nceki( prev) ve Sonraki (next) admlarnn uygun olan her durumda yer almas zorunludur. lk sayfada nceki seenei olmamal, son sayfada ise Sonraki seenei olmamaldr.    </ohvps/hbh/s1.1/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=6&syfKytSayi=100>; rel="next",  </ohvps/hbh/s1.1/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=4&syfKytSayi=100>; rel="prev",  </ohvps/hbh/s1.1/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=14&syfKytSayi=100>; rel="last",  </ohvps/hbh/s1.1/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=0&syfKytSayi=100>; rel="first"    Hi hesap hareketinin olmad durumda dnen yant balnzn u ekilde olmas beklenmektedir.  Response body: [] Response header: Link: </ohvps/hbh/s1.1/hesaplar?srlmKrtr=hspRef&srlmYon=A&syfNo=1&syfKytSayi=100>; rel="last",</ohvps/hbh/s1.1/hesaplar?srlmKrtr=hspRef&srlmYon=A&syfNo=1&syfKytSayi=100>; rel="first"  x-total-count alan da 0 olarak iletilmelidir. \n K \n K \n 3.17. Idempotency Kurallar \n YSn aadaki durumlarda ayn istek numaras (x-request-id) ve ayn veri gvdesiyle ary tekrarlamas; HHSnin de bu durumlarda ayn yant dnmesi gereklidir. \n \n HHSnin yant kesinti/arza nedeniyle YSe ulamaz ve zaman am sz konusu olmas, \n HK, YS uygulamas zerinden ift tklama ile mkerrer defa HHS APIlerini arlmas,\n(API kontrollerinden nce YS uygulamasnn, ift tklama kontrol yapmas nerilmektedir.) \n YS, yant almasna ramen ileyemeden kaybedilmesi, \n \n durumlarnda HHS aadaki kurallar iletir: \n \n HHS gelen istek numarasn ve veri gvdesini birletirerek checksum deeri retir. \nchesksum deeri x-request-id|request.body nin hash algoritmalarndan (CRC32,MD5 vb)  geirilerek retilebilir. \n HHS bu checksum deeri ile YSe dnm olduu yant 5 dk boyunca saklar.  Saklama yntemi olarak veri taban veya nbellek aralar kullanlabilir. \n YS ayn istek numaras ve ayn veri gvdesi ile yeni bir ar yaptnda, ayn checksum deeri retilecei iin 5dk boyunca bu deere karlk gelen yant dner. \n 5 dk sonrasnda istek numaras veya veri gvdesi deimemi olsa dahi bu HHS tarafndan yeni istek olarak kabul edilir. \n \n Aadaki Public Post ilemleri iin bu kural setinin iletilmesi gerekmektedir: \n 1- deme emri rzas oluturma \n2- Eriim belirteci oluturma \n3- deme emri \n4- Hesap bilgisi rzas oluturma \n 3.18. HTTP Durum Kodlar \n RFC 2616\'da belirlenmi olan durum kodlar (status code) gnderilen istein durumunu YSa standart bir ekilde ifade eder. Eer bir hata varsa hatay, gnderilen istek baarl bir ekilde ilem grdyse ona ilikin durumu aktarr. Durum kodlar genel olarak 5 kategoridedir. \n \n 1xx Bilgi \n 2xx Baarl \n 3xx Ynlendirme \n 4xx stemci Hatas \n 5xx Sunucu Hatas \n \n errorCode Alannda Kullanlabilecek Sral Hata Tipleri : \n \n TR.OHVPS.Resource \n \n \tInvalidFormat \n \tConsentMismatch \n \tNotFound \n \tInvalidSignature \n \tMissingSignature \n \tMethodNotAllowed \n \tNotAcceptable \n \tUnsupportedMediaType \n \tConsentRevoked \n \n \n \n TR.OHVPS.Business \n \n \tInvalidContent \n \tInvalidAccount \n \n \n \n TR.OHVPS.Connection \n \n \tInvalidCertificate \n \tExceededRate \n \tInvalidTPP \n \tInvalidASPSP \n \tInvalidToken \n \tInvalidTPPRole \n \n \n \n TR.OHVPS.Server \n \n \tInternalError \n \tServiceUnavailable \n \n \n TR.OHVPS.Resource.InvalidFormat hatas alnd durumda; fieldErrors nesnesi ierisinde verilecek hata kodlar : \n \n TR.OHVPS.Field \n \n \tMissing \n \tInvalid \n \n \n Veri Tipi rnei: \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "d8bd4e5f-f094-48a6-aee1-3a800e2709d9" , \n     "timestamp" :   "2022-12-22T10:33:15+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "Validation error" , \n     "moreInformationTr" :   "ema kontrolleri baarsz" , \n     "fieldErrors" :   [ \n         { \n             "objectName" :   "odemeEmriRizasiIstegi" , \n             "field" :   "odmBsltm.islTtr.prBrm" , \n             "messageTr" :   "bo deer olamaz" , \n             "message" :   "must not be null" , \n             "code" :   "TR.OHVPS.Field.Missing" \n         } , \n         { \n             "objectName" :   "odemeEmriRizasiIstegi" , \n             "field" :   "odmBsltm.kmlk.kmlkVrs" , \n             "messageTr" :   "boyut \'1\' ile \'30\' arasnda olmal" , \n             "message" :   "size must be between 1 and 30" , \n             "code" :   "TR.OHVPS.Field.Invalid" \n         } \n     ] , \n     "errorCode" :   "TR.OHVPS.Resource.InvalidFormat" \n }  \n \n Tablo 4: HTTP Durum Kodlar \n \n \n \n HTTP Durum \n stek Sonucu ve Aklamalar \n POST \n GET \n DELETE \n \n \n \n \n 200 OK \n stek Baaryla Tamamland. Kaynak gncellemek iin yaplan (rnein, GET) ve baaryla tamamlanan isteklerinde kullanlr. \n H \n E \n H \n \n \n 201 Created \n stek Baarl Oldu. Kaynak yaratma istei (rnein, POST /deme-emri-rizasi) baaryla sonuland. \n E \n H \n H \n \n \n 204 No Content \n Silme ilemi baaryla tamamland. Kaynak silme istei (rnein,  DELETE /hesap-rizasi/{RizaNo} ) baaryla sonuland. \n H \n H \n E \n \n \n 400 Bad Request \n stekte bozuk, eksik veya uyumlu olmayan JSON gvdesi, URL parametreleri veya balk alanlar var.  stekle balatlan ilem yapsal bozukluk, eksik veya tutarsz veri veya HHS tarafndaki kontrollerin hatal sonulanmas nedeniyle hata ile sonulanr ve hataya ilikin veriler hata nesnesi ierisinde dnlr. \n E \n E \n E \n \n \n 401 Unauthorized \n Yetkilendirme bal eksik, hatal veya geersiz olduundan istek yetkilendirilmediinde ve eriim reddedildiinde http 401 kodu dnlmelidir. \n E \n E \n E \n \n \n 403 Forbidden \n Eriim belirtecinin veya rzann kapsam uyumuyor. YS bir hesaba/ilem kaynana erimeye alr ve YS, istenen kaynaa erimek iin geerli izinlere sahip bir rzas yoktur.  rnein; hesap bilgisi rzas bakiye izni almamtr ancak /bakiyeler adresinden istekte bulunmutur. \n \n \n \n \n \n 404 Not Found \n **HHS geerli bir API eriim adresini salamyorsa, o URL\'ye gelen istekler iin 404 (Bulunamad) ile yant vermelidir.**YS, uygulama esaslarnda tanmlanmayan bir kaynak iin bir URL\'ye erimeye alrsa (rnein, GET /yurtdisi-odeme), HHS, 404 (Bulunamad) ile yant vermeyi seebilir. \n E \n E \n E \n \n \n 405 Method Not Allowed \n YS, desteklenmeyen bir yntemle kaynaa erimeye alt. \n E \n E \n E \n \n \n 406 Not Acceptable \n stek, geersiz bir karakter kmesi ieriyor. \n E \n E \n E \n \n \n 415 Unsupported Media Type \n stek gvdesi hedef kaynakta bu yntem tarafndan desteklenmeyen bir biimde oluturulduu iin ilem reddedildi \n E \n H \n H \n \n \n 429 Too Many Requests \n Belirli bir sre iinde ok fazla talepte bulunulduu iin ilem reddedildi.  HHSler adil kullanm politikalarn aan talepleri kstlayabilir. \n E \n E \n E \n \n \n 500 Internal Server Error \n API sunucu / servis katmannda sorun olutu. lem baarsz.  5XX hata durumlarnda yant gvde deeri olmad iin mesaj imzalama yaplamaz ve x-jws-signature alan bo olarak iletilir.  Bu durumda x-jws-signature kontrol yaplmamaldr. \n E \n E \n E \n \n \n 503 Service Unavailable \n Hizmet srm kullanmdan kaldrld.  Bir API\'nin kullanmdan kaldrld ve artk bir HHS tarafndan operasyonel olarak desteklenmedii durumlarda, URI yolu hala etkin olabilir ve API isteklerini kabul edebilir.  Bu durumda, YS\'n API srmnn evrimd olduunun farknda olmas iin 503 Hizmet Kullanlamyor dnmesi nerilir. \n E \n E \n E \n \n \n \n Hata rnekleri: \n 400 Bad Request \n TR.OHVPS.Business.InvalidContent  hatas HHS tarafndan yaplacak i kural kontrollerinin baarsz olduu durumda verilmelidir. \n TR.OHVPS.Resource.InvalidFormat  hatas ema validasyonu, alan uzunluk ve varlk kontrollerinin baarsz olduu durumda verilmelidir. \n \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "7f115b9c-d7c2-4a2a-bc45-5a9891c79072" , \n     "timestamp" :   "2022-12-22T10:47:57+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "Validation error" , \n     "moreInformationTr" :   "ema kontrolleri baarsz" , \n     "fieldErrors" :   [ \n         { \n             "objectName" :   "odemeEmriRizasiIstegi" , \n             "field" :   "odmBsltm.alc.unv" , \n             "messageTr" :   "boyut \'3\' ile \'140\' arasnda olmal" , \n             "message" :   "size must be between 3 and 140" , \n             "code" :   "TR.OHVPS.Field.Invalid" \n         } , \n         { \n             "objectName" :   "odemeEmriRizasiIstegi" , \n             "field" :   "odmBsltm.islTtr.ttr" , \n             "messageTr" :   "bo deer olamaz" , \n             "message" :   "must not be null" , \n             "code" :   "TR.OHVPS.Field.Missing" \n         } \n     ] , \n     "errorCode" :   "TR.OHVPS.Resource.InvalidFormat" \n }  \n\n \n Zorunlu header alanlarndan biri ya da birka eksik olarak gnderilirse aadaki gibi bir hata dn gerekleebilir. \n HHS uygulamas tarafndan dnlebilecek hata rnekleri: \n \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "2005515d-f0e6-4a07-a439-0ef3b0f56011" , \n     "timestamp" :   "2022-12-22T10:39:26+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "Validation error" , \n     "moreInformationTr" :   "ema kontrolleri baarsz" , \n     "errorCode" :   "TR.OHVPS.Resource.InvalidFormat" , \n     "fieldErrors" :   [ \n         {          \n             "field" :   "X-Request-ID" , \n             "messageTr" :   "X-Request-ID deeri bo olamaz." , \n             "message" :   "X-Request-ID cannot be null." , \n             "code" :   "TR.OHVPS.Field.Invalid" \n         } \n     ] \n }  \n\n \n Business hata rnei - 1: \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "677cfd9d-77c1-4ea3-8bdf-74a6e9887177" , \n     "timestamp" :   "2022-12-22T11:05:59+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "gonUnvan wrong" , \n     "moreInformationTr" :   "Gnderen nvan hatal" , \n     "errorCode" :   "TR.OHVPS.Business.InvalidContent" \n }  \n \n Business hata rnei - 2: \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "5df3b402-3aca-4305-a35b-5af0f3184b40" , \n     "timestamp" :   "2022-12-22T11:06:47+03:00" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" , \n     "moreInformation" :   "Sender account is disabled or not found." , \n     "moreInformationTr" :   "Gonderen hesap aktif deil veya bulunamad." , \n     "errorCode" :   "TR.OHVPS.Business.InvalidAccount" \n }  \n \n GET\'te yaplan zorunlu header kontrollerinde aadaki hatalar dnebilir: \n \n { \n     "timestamp" :   "2022-12-22T10:40:28+03:00" , \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "d4375748-6fc7-4f7e-94f3-6411cab1d59f" , \n     "moreInformationTr" :   "Geersiz HHS kodu." , \n     "errorCode" :   "TR.OHVPS.Connection.InvalidASPSP" , \n     "moreInformation" :   "Invalid ASPSP Code" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" \n }  \n \n GET tarafndan dnlecek hata rnei: \n \n { \n     "timestamp" :   "2022-12-22T10:40:28+03:00" , \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "d4375748-6fc7-4f7e-94f3-6411cab1d59f" , \n     "moreInformationTr" :   "Geersiz HHS kodu." , \n     "errorCode" :   "TR.OHVPS.Connection.InvalidTPP" , \n     "moreInformation" :   "Invalid TPP Code" , \n     "httpCode" :   400 , \n     "httpMessage" :   "Bad Request" \n }  \n \n GET tarafndan dnlecek hata rnei: \n \n { \n     "timestamp" :   "2022-12-22T11:14:05+03:00" , \n     "path" :   "/ohvps/hbh/s1.1/hesap-bilgisi-rizasi" , \n     "id" :   "ee1e3ea7-a5e5-468b-bb02-314148f84e6a" , \n     "moreInformationTr" :   "Geersiz ys rol. lgili api ars iin yetkisi yok." , \n     "errorCode" :   "TR.OHVPS.Connection.InvalidTPPRole" , \n     "moreInformation" :   "Invalid TPP Role" , \n     "httpCode" :   403 , \n     "httpMessage" :   "Forbidden" \n }  \n\n \n 401 Unauthorized \n YS, sresi dolmu bir eriim belirteci kullandnda, HHS 401 (Yetkisiz) http kodu ile aadaki hata kodunu dnmelidir.  Aadaki nedenlerden herhangi biri nedeniyle bir Eriim Belirtecinin sresi dolduunda bu durum ortaya kabilir: \n \n Rzann sresi doldu (Son Kullanma Tarihi geti) \n Eriim Belirtecinin pheli kullanm veya sahtekarlk phesi \n Rzada belirlenen gn saysnn am\nBu hata, mteriden doru izinlerle yeniden kimlik dorulamas isteyerek zlebilir. \n \n \n { \n     "path" :   "/ohvps/gkd/s1.1/erisim-belirteci" , \n     "id" :   "ed3fd667-fc58-40ad-a982-e8937faccd15" , \n     "timestamp" :   "2022-12-22T11:17:33+03:00" , \n     "httpCode" :   401 , \n     "httpMessage" :   "Unauthorized" , \n     "moreInformation" :   "Refresh token expired or not found in database" , \n     "moreInformationTr" :   "Yenileme belirteci zaman amna uram veya veri tabannda yok" , \n     "errorCode" :   "TR.OHVPS.Connection.InvalidToken" \n }  \n \n\n \n 403 Forbidden \n rn; YS yetkisi olmayan rol(BH/HBH) ile ilem yapmaya alt durumda 403 hatas alarak ileme devam edemez. \n { \n   "path" :   "/ohvps/hbh/s1.1/bakiye" , \n   "id" :   "3e48ea98-f889-48b9-aa6e-28aabc6cfb14" , \n   "timestamp" :   "2022-12-22T11:20:05+03:00" , \n   "httpCode" :   403 , \n   "httpMessage" :   "Forbidden" , \n   "moreInformation" :   "Forbidden" , \n   "moreInformationTr" :   "Bakiye Bilgileri iin HK izni bulunmamaktadr." , \n   "errorCode" :   "TR.OHVPS.Resource.Forbidden" \n }  \n \n 404 Not Found \n rn; GET /odeme-emri-rizasi/123456 ars durumunda 123456 geerli bir deme kayna deilse, HHS, 404 koduyla cevap vermelidir. \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi/123456" , \n     "id" :   "22f52b2d-d442-4a6a-8f39-d23eba45a34b" , \n     "timestamp" :   "2022-12-22T10:53:53+03:00" , \n     "httpCode" :   404 , \n     "httpMessage" :   "Not Found" , \n     "moreInformation" :   "Resource not found" , \n     "errorCode" :   "TR.OHVPS.Resource.NotFound" , \n     "moreInformationTr" :   "Kaynak bulunamad" \n }  \n\n \n 405 Method Not Allowed \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "3e5c6b28-7ee4-4469-b541-843fb4a94eec" , \n     "timestamp" :   "2022-12-22T11:35:10+03:00" , \n     "httpCode" :   405 , \n     "httpMessage" :   "Method Not Allowed" , \n     "moreInformation" :   "Method not allowed" , \n     "errorCode" :   "TR.OHVPS.Resource.MethodNotAllowed" , \n     "moreInformationTr" :   "stek yaplan URL iin izin verilmeyen metot" \n }  \n \n 406 Not Acceptable \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "3e5c6b28-7ee4-4469-b541-843fb4a94eec" , \n     "timestamp" :   "2022-12-22T11:35:10+03:00" , \n     "httpCode" :   406 , \n     "httpMessage" :   "Not Acceptable" , \n     "moreInformation" :   "Not Acceptable" , \n     "errorCode" :   "TR.OHVPS.Resource.NotAcceptable" , \n     "moreInformationTr" :   "Kabul edilmedi" \n }  \n \n 415 Unsupported Media Type \n stek balnda content-type, JSON dnda bir veri iletilirse bu hata verilebilir. \n \n { \n     "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n     "id" :   "63cc94b6-1b51-4648-9671-95e6e2e7e03d" , \n     "timestamp" :   "2022-12-22T11:37:12+03:00" , \n     "httpCode" :   415 , \n     "httpMessage" :   "Unsupported Media Type" , \n     "moreInformation" :   "Content type not supported" , \n     "errorCode" :   "TR.OHVPS.Resource.UnsupportedMediaType" , \n     "moreInformationTr" :   "Desteklenmeyen ierik tipi" \n }  \n \n 429 Too Many Requests \n { \n   "path" :   "/ohvps/hbh/s1.1/hesaplar/aef6061f-2978-4bb4-980d-b4c634c8055b/islemler" , \n   "id" :   "20473c5f-2f4f-4b2e-8b66-7978aec442f7" , \n   "timestamp" :   "2022-12-22T00:21:07+03:00" , \n   "httpCode" :   429 , \n   "httpMessage" :   "Too Many Requests" , \n   "moreInformation" :   "Exceeded rate" , \n   "moreInformationTr" :   "Eriim skl limiti am" , \n   "errorCode" :   "TR.OHVPS.Connection.ExceededRate" \n }  \n \n 500 Internal Server Error \n { \n   "id" :   "1b90c6dc-0277-4755-8b05-9297ddfab743" , \n   "path" :   "/ohvps/obh/s1.1/odeme-emri-rizasi" , \n   "timestamp" :   "2022-12-22T11:41:34+03:00" , \n   "httpCode" :   500 , \n   "httpMessage" :   "Internal Server Error" , \n   "moreInformation" :   "Unexpected condition was encountered." , \n   "moreInformationTr" :   "Beklenmeyen bir durumla karlald." , \n   "errorCode" :   "TR.OHVPS.Server.InternalError" \n }  \n\n \n 503 Service Unavailable \n \n   "timestamp" :   "2022-12-20T23:18:56+03:00" , \n   "path" :   "/ohvps/hbh/s1.1/hesap-bilgisi-rizasi/2a72678ee3d24de2be47887e4903a8c6" , \n   "id" :   "e76315b7-09f4-4295-b6d8-1f7fec632159" , \n   "moreInformationTr" :   "HHS u anda hizmet veremiyor." , \n   "errorCode" :   "TR.OHVPS.Server.ServiceUnavailable" , \n   "moreInformation" :   "HHS is currently unavailable" , \n   "httpCode" :   503 , \n   "httpMessage" :   "Service Unavailable" \n 3.19. Maskeleme Kurallar \n Maskeli olarak iletilmesi gereken verilerin maskeleme kurallar u ekildedir: \n \n IBAN verileri Hesap Numaras : lk 4 ve son 4 karakteri ak, dier karakterler maskeli olmaldr. rnek: TR54******************4812 \n Ad-Soyad / Ticari Unvan : Her kelimenin ilk 2 karakteri ak, sonraki karakterler yerine 4 adet   karakteri konumlandrlmaldr.\nrnein: FATH SERKAN EREN ifadesi FA *** SE**** ER**** eklinde gsterilmelidir. \n Tabela Unvan : Her kelimenin ilk 2 karakteri ak, sonraki karakterler yerine 4 adet \' \' karakteri konumlandrlmaldr. rnein BANKALARARASI KART MERKEZ ANONM RKET ifadesi BA *** KA**** ME**** AN**** **** eklinde gsterilmelidir. \n YSten girilen alc unvan ve IBAN bilgileri deme emri rzas ve deme emri yantnda ak dnlr, Kolas aknda deme emri rzas yant ve deme emri istek ve yantnda maskeli tanr. \n 3.20. Fonksiyonel Olmayan Gereksinimler \n \n \n HHSlerin sunuyor olduklar servisleri en fazla 3000 ms iinde yant dnecek ekilde tasarlamaldr. \n \n \n HHS\'ler mevcut online ilem kanallarndan sunduklar eriilebilirlik ve performans kriterlerinden daha dk bir hizmet kalitesi sunmamaldr. \n \n \n HHSlerin sunuyor olduklar servislere sistemin gvenlik ve srekliliini salamak adna rate limit koyma ihtiyalar olur ise, standartlar ve ihtiyalara uygun ekilde bir konfigrasyon yapabilirler.  \n \n \n HHS rate limit tanm uyguluyor ise; YS\'ler arasnda ayrm yapmadan, adil ve makul snrlar dahilinde uygulamaldr.    \n \n \n YS tarafndan kullancnn balatmad otomatik sorgu limitleri  3.21 Otomatik Sorgular  blmnde detaylandrlmtr. HHS\'lerin bu servisler iin minimumda cevap vermesi gereken sorgu saylar belirlenmitir. Bu saylarn zerinde yaplan servis arsna yant dnmek HHS inisiyatifindedir. Dier taraftan kullancnn balatt istekler iin uygulanacak limitler, HHS\'nin online ilem kanallarndan sunulan sorgu limitlerinden daha az olmamaldr. \n \n \n HHS\'ler, arm limitlerini aan istekler iin HTTP 429 - Too Many Request hatasn dnmelidir. rnek hata mesaj  3.18 HTTP Durum Kodlar  blmnde bulunmaktadr. Rate Limit zelinde tanmlanm parametreler olan X-RateLimit-Limit, X-RateLimit-Remaining ve X-RateLimit-Reset alanlar da   3.16 Yant Bal  blmnde aklanmtr. YS\'ler de HHS\'nin belirledii rate limit kurallarna uymakla ykmldr. \n 3.21. Otomatik Sorgular \n YS uygulamas, HK\'nn balatt ilemler neticesinde API arm yapabilecei gibi, sistemsel bir ekilde otomatik API arm da yapabilir. \nHHS, API armnn HK\'l ya da HK\'sz olduunu istek parametreleri ierisinde yer alan PSU-Initiated parametresi ile anlar. Bu parametre E ise HKl, H ise sistemsel yaplm bir sorgu anlamna gelmektedir. \n HK YS uygulamasna giri yapt andan k yapt ana kadar yani HK oturumu boyunca yaplan API armlarnda, PSU-Initiated  deerinin "E" olmas gerekmektedir.  YS uygulamasnda HK oturumu boyunca,  HK\'nn bilgilerinden minimumda "bakiye" bilgisinin, uygulama arayzlerinde gncel deeri ile online sorgularla gsterimi YS\'n insiyatifindedir. \n HKnn balatt sorgular iin HHS tarafndan belirlenen st rate limitler dahilinde arm yaplabilir. \n YS, aadaki API\'leri sistemsel bir ekilde arabilir. \nHHS\'lerin bu servisler iin minimumda cevap vermesi gereken sorgu saylar belirlenmitir. Bu saylarn zerinde yaplan servis arsna yant dnmek HHS inisiyatifindedir. \nHHS tarafndan izin verilen sorgu saysnn zerinde yaplan bir sorgu iin HTTP 429 durum kodu (Too Many Requests) hatas dnlmelidir. Yant gvdesinde tekrar hata nesnesinin oluturulmas HHS inisiyatifindedir.  HHS yant header alannda iletilecek X-RateLimit-Reset (saniye cinsinden) deeri kadar sre sonunda\nYS\'n tekrar sorgulama yapmas beklenmektedir. \n \n \n \n No \n Kaynak \n HTTP ilemi \n Eriim Adresi \n Otomatik Sorgu Says \n \n \n \n \n 1 \n erisim-belirteci \n POST \n /erisim-belirteci \n --- \n \n \n 2 \n odeme-emri-rizasi \n GET \n /odeme-emri-rizasi/{rizaNo} \n Rza baznda gnde 4 \n \n \n 3 \n odeme-emri \n GET \n /odeme-emri/{odemeEmriNo} \n Rza baznda gnde 24 \n \n \n 4 \n hesap-bilgisi-rizasi \n GET \n /hesap-bilgisi-rizasi/{RizaNo} \n Rza baznda gnde 4 \n \n \n 5 \n hesap-bilgisi-rizasi \n DELETE \n /hesap-bilgisi-rizasi/{RizaNo} \n --- \n \n \n 6 \n hesaplar \n GET \n /hesaplar \n Bireysel gnde 4  Kurumsal gnde 4 \n \n \n 7 \n hesaplar \n GET \n /hesaplar/{hspRef} \n Bireysel gnde 4 Kurumsal gnde 4 \n \n \n 8 \n bakiye \n GET \n /hesaplar/{hspRef}/bakiye \n Bireysel gnde 24 Kurumsal HK - gnde 24 \n \n \n 9 \n bakiye \n GET \n /bakiye \n Bireysel gnde 24 Kurumsal HK - gnde 24 \n \n \n 10 \n islemler \n GET \n /hesaplar/{hspRef}/ilemler \n Bireysel gnde 4 Kurumsal HK - saatte 12 \n \n \n \n YS ve HHS son 24 saat ierisindeki sorgu saylarn toplayarak elde ettii sonularla limit kontrol yapmaldr (Pencere yntemi). \n lemler servisinin arm detaylarna  ^Blm 7.8  zerinden ulalabilir. \n Hesap bilgisi rzasnn YS tarafndan otomatik bir ekilde iptal edilmesi durumu  ^Blm 9\'da  aklanmtr. \n Olay Bildirim Servis armlar     \nOlay bildirime bal servis armlarnda (PSU-Initiated=O), yaplan her istee HHS\'nin yant vermesi gereklidir. Otomatik sorgularda uygulanan st limitler, olay bildirim servislerinde geerli deildir.  \nOlay bildirim servislerini kullanmak istemeyen YS\'ler otomatik sorgular kullanarak sistemlerini gncellemeye devam edebilirler. \n'},{frontmatter:{},regularPath:"/v1.1.0/deneyalani/hesap-bilgisi-api.html",relativePath:"v1.1.0/deneyalani/hesap-bilgisi-api.md",key:"v-3637769d",path:"/v1.1.0/deneyalani/hesap-bilgisi-api.html",content:" \n   \n "},{frontmatter:{},regularPath:"/v1.1.0/deneyalani/hhs-yos-api.html",relativePath:"v1.1.0/deneyalani/hhs-yos-api.md",key:"v-3ee390dd",path:"/v1.1.0/deneyalani/hhs-yos-api.html",content:" \n   \n "},{frontmatter:{},regularPath:"/v1.1.0/deneyalani/genel-bilgiler.html",relativePath:"v1.1.0/deneyalani/genel-bilgiler.md",key:"v-70a6dc4e",path:"/v1.1.0/deneyalani/genel-bilgiler.html",content:" GENEL BiLGLER: \n HVPS API lke ve Kurallar dokmanna istinaden gelitirmelerini yapan/yapacak olan katlmclar gelitirdikleri srme ait APIlerin nasl altklarn grmek istediklerinde Deney Alan zerinden gzlem yapabilirler. Bu kapsamda, Deney Alan katlmclara tarayc zerinden statik verilerle ilem balatarak, dnen yant inceleme imkan sunar. \n Deney Alan ile sunulan imkanlar u ekildedir: \n \n Servisler durum bilgisi iermeyecek ekilde (stateless) olarak sunulmaktadr. \n Gl Kimlik Dorulama aklarnda kurum zelinde oluturulan yetkilendirme kimlik bilgilerine ihtiya duyulmamaktadr. \n Yant veri kmesi statiktir. Servislere yaplan istekler, her zaman ayn yant dnmektedir. \n Yeni oluturma, gncelleme, silme ilemleri kaynak veri zerinde deiiklik yapmamaktadr. \n Deney alan genelin kullanmna aktr. yelik kayd olmakszn Deney Alan zerinden API incelemeleri gerekletirilebilmektedir. \n API dokmannda yaplacak minor deiiklikler deney alanna yanstlmayacaktr. \n \n Not: Deney Alannn kapsam geniletilmi versiyonu  BKM HVPS Simlatr uygulamas hem HHS hem de YS katlmclarnn; test uygulamalarn utan uca test edebilebilecei bir ortamdr. Simlatr uygulamas zerinden dinamik veri girii yaparak, gelitirilen servisler ile zorunlu senaryolarn tmnn simlasyonu gerekletirilebilir. Simlatr ortamndaki APIler, retim ortamnn bir kopyas olacak ekilde oluturulmutur ve kurumlarn retim ortamna hazr hale gelmelerine araclk eder. Bu uygulama, przsz bir retim ortam geii imkan salar ve HVPS BKM Teknik Sertifikasyonu gemek iin koulmas gereken sertifikasyon senaryolar BKM HVPS Simlatr zerinden sunulmaktadr. BKM Simlatr kullanm iin ayr bir sre iletilmekte olup daha fazla detayl bilgi almak iin ohvps@bkm.com.tr adresine taleplerinizi iletmeniz gerekmektedir. \n deme Emri Balatma API Deney Alan \n"},{frontmatter:{},regularPath:"/v1.1.0/deneyalani/odeme-emri-api.html",relativePath:"v1.1.0/deneyalani/odeme-emri-api.md",key:"v-6480bcc7",path:"/v1.1.0/deneyalani/odeme-emri-api.html",content:" \n   \n "},{frontmatter:{},regularPath:"/v1.1.0/deneyalani/olay-bildirim-api.html",relativePath:"v1.1.0/deneyalani/olay-bildirim-api.md",key:"v-642a7506",path:"/v1.1.0/deneyalani/olay-bildirim-api.html",content:" \n   \n "},{frontmatter:{},regularPath:"/v1.1.0/deneyalani/test.html",relativePath:"v1.1.0/deneyalani/test.md",key:"v-68ac6685",path:"/v1.1.0/deneyalani/test.html",content:" \n   \n "}],themeConfig:{searchMaxSuggestions:20,footer:'\n      &copy; <a href="https://github.com/Renovamen" target="_blank">Renovamen</a> 2018-2021\n      <br>\n      Powered by <a href="https://vuepress.vuejs.org" target="_blank">VuePress</a> &\n      <a href="https://github.com/Renovamen/vuepress-theme-gungnir" target="_blank">Gungnir</a>\n    ',sidebar:[{title:"SRM 1.1.0 - Aktif Srm",path:"/v1.1.0/contents/tanim-ve-kisitlamalar",children:[{title:"1. Tanmlar ve Kstlamalar",path:"/v1.1.0/contents/tanim-ve-kisitlamalar"},{title:"2. Kapsam ve Dayanak",path:"/v1.1.0/contents/kapsam-ve-dayanak"},{title:"3. Temel Prensipler",path:"/v1.1.0/contents/temel-prensipler"},{title:"4. Rza Durumlar",path:"/v1.1.0/contents/riza-durumlari"},{title:"5. Gl Kimlik Dorulama",path:"/v1.1.0/contents/gkd"},{title:"6. deme Emri Balatma Hizmeti",path:"/v1.1.0/contents/odeme-emri-baslatma-hizmeti"},{title:"7. Hesap Bilgisi Hizmeti",path:"/v1.1.0/contents/hesap-bilgisi-hizmeti"},{title:"8. HHS ve YS API",path:"/v1.1.0/contents/hhs-yos-api"},{title:"9. Gl Kimlik Dorulama API",path:"/v1.1.0/contents/erisim-belirteci"},{title:"10. Olay Bildirim",path:"/v1.1.0/contents/olay-bildirim"},{title:"11. Ekler",path:"/v1.1.0/contents/ekler"},{title:"12. Deney Alan",path:"/v1.1.0/deneyalani/genel-bilgiler",children:[{title:"1. deme Emri Balatma API",path:"/v1.1.0/deneyalani/odeme-emri-api"},{title:"2. Hesap Bilgisi API",path:"/v1.1.0/deneyalani/hesap-bilgisi-api"},{title:"3. HHS - YS API",path:"/v1.1.0/deneyalani/hhs-yos-api"},{title:"4. Olay Bildirim",path:"/v1.1.0/deneyalani/olay-bildirim-api"}]}]},{title:"Dijital Czdanlardan TR Karekod ile deme",path:"/dijital-cuzdan"},{title:"Srm Ynetimi",path:"/surum-yonetimi"},{title:"HVPS Uyum Tarihleri",path:"/uyum-tarihleri"},{title:"SRM 1.0.1",path:"/v1.0.1/contents/tanim-ve-kisitlamalar",children:[{title:"1. Tanmlar ve Kstlamalar",path:"/v1.0.1/contents/tanim-ve-kisitlamalar"},{title:"2. Kapsam ve Dayanak",path:"/v1.0.1/contents/kapsam-ve-dayanak"},{title:"3. Temel Prensipler",path:"/v1.0.1/contents/temel-prensipler"},{title:"4. Rza Durumlar",path:"/v1.0.1/contents/riza-durumlari"},{title:"5. Gl Kimlik Dorulama",path:"/v1.0.1/contents/gkd"},{title:"6. deme Emri Balatma Hizmeti",path:"/v1.0.1/contents/odeme-emri-baslatma-hizmeti"},{title:"7. Hesap Bilgisi Hizmeti",path:"/v1.0.1/contents/hesap-bilgisi-hizmeti"},{title:"8. HHS ve YS API",path:"/v1.0.1/contents/hhs-yos-api"},{title:"9. Eriim Belirteci API",path:"/v1.0.1/contents/erisim-belirteci"},{title:"10. Ekler",path:"/v1.0.1/contents/ekler"}]},{title:"SRM 1.0.2",path:"/v1.0.2/contents/tanim-ve-kisitlamalar",children:[{title:"1. Tanmlar ve Kstlamalar",path:"/v1.0.2/contents/tanim-ve-kisitlamalar"},{title:"2. Kapsam ve Dayanak",path:"/v1.0.2/contents/kapsam-ve-dayanak"},{title:"3. Temel Prensipler",path:"/v1.0.2/contents/temel-prensipler"},{title:"4. Rza Durumlar",path:"/v1.0.2/contents/riza-durumlari"},{title:"5. Gl Kimlik Dorulama",path:"/v1.0.2/contents/gkd"},{title:"6. deme Emri Balatma Hizmeti",path:"/v1.0.2/contents/odeme-emri-baslatma-hizmeti"},{title:"7. Hesap Bilgisi Hizmeti",path:"/v1.0.2/contents/hesap-bilgisi-hizmeti"},{title:"8. HHS ve YS API",path:"/v1.0.2/contents/hhs-yos-api"},{title:"9. Eriim Belirteci API",path:"/v1.0.2/contents/erisim-belirteci"},{title:"10. Ekler",path:"/v1.0.2/contents/ekler"}]}],logo:"/assets/TCMB_logo.svg.png"}};i(235);a.default.component("BodyBox",()=>Promise.all([i.e(0),i.e(1),i.e(2),i.e(6),i.e(31)]).then(i.bind(null,630))),a.default.component("GetBox",()=>Promise.all([i.e(0),i.e(41)]).then(i.bind(null,631))),a.default.component("DeleteBox",()=>Promise.all([i.e(0),i.e(40)]).then(i.bind(null,632))),a.default.component("Gkd",()=>Promise.all([i.e(0),i.e(35)]).then(i.bind(null,633))),a.default.component("HesapBilgisiV11",()=>Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(17)]).then(i.bind(null,621))),a.default.component("HhsYosAPIV11",()=>Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(15)]).then(i.bind(null,622))),a.default.component("KeyValueGrid",()=>Promise.all([i.e(1),i.e(2),i.e(3),i.e(6),i.e(32)]).then(i.bind(null,634))),a.default.component("OdemeEmriAPIv11",()=>Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(18)]).then(i.bind(null,623))),a.default.component("OlayDinlemeAPIV11",()=>Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(16)]).then(i.bind(null,624))),a.default.component("PostBox",()=>Promise.all([i.e(0),i.e(42)]).then(i.bind(null,635))),a.default.component("ProcessButton",()=>Promise.all([i.e(1),i.e(50)]).then(i.bind(null,636))),a.default.component("PutBox",()=>Promise.all([i.e(0),i.e(44)]).then(i.bind(null,637))),a.default.component("ProcessTitle",()=>Promise.all([i.e(0),i.e(43)]).then(i.bind(null,638))),a.default.component("Request",()=>i.e(58).then(i.bind(null,350))),a.default.component("Response",()=>Promise.all([i.e(1),i.e(2),i.e(3),i.e(51)]).then(i.bind(null,639))),a.default.component("RizaOnay",()=>Promise.all([i.e(0),i.e(45)]).then(i.bind(null,640))),a.default.component("RizaOnayHesapBilgisi",()=>Promise.all([i.e(0),i.e(46)]).then(i.bind(null,641))),a.default.component("TitleBox",()=>Promise.all([i.e(0),i.e(47)]).then(i.bind(null,642))),a.default.component("Badge",()=>Promise.all([i.e(0),i.e(9)]).then(i.bind(null,643))),a.default.component("CodeBlock",()=>Promise.all([i.e(0),i.e(10)]).then(i.bind(null,626))),a.default.component("CodeGroup",()=>Promise.all([i.e(0),i.e(11)]).then(i.bind(null,627)));i(236);var Dn=[({Vue:e,options:n,router:i,siteData:a})=>{a.pages=a.pages.reverse().map(e=>(e.regularPath.includes("content")?e.title=`${e.title} -> ${e.regularPath.split("/")[1]}`:e.title=""+e.title,e))},{},({Vue:e})=>{e.mixin({computed:{$dataBlock(){return this.$options.__data__block__}}})},{},{}],En=[];class Gn extends class{constructor(){this.store=new a.default({data:{state:{}}})}$get(e){return this.store.state[e]}$set(e,n){a.default.set(this.store.state,e,n)}$emit(...e){this.store.$emit(...e)}$on(...e){this.store.$on(...e)}}{}Object.assign(Gn.prototype,{getPageAsyncComponent:mn,getLayoutAsyncComponent:un,getAsyncComponent:on,getVueComponent:kn});var Cn={install(e){const n=new Gn;e.$vuepress=n,e.prototype.$vuepress=n}};function Zn(e,n){const i=n.toLowerCase();return e.options.routes.some(e=>e.path.toLowerCase()===i)}var Mn={props:{pageKey:String,slotKey:{type:String,default:"default"}},render(e){const n=this.pageKey||this.$parent.$page.key;return cn("pageKey",n),a.default.component(n)||a.default.component(n,mn(n)),a.default.component(n)?e(n):e("")}},_n={functional:!0,props:{slotKey:String,required:!0},render:(e,{props:n,slots:i})=>e("div",{class:["content__"+n.slotKey]},i()[n.slotKey])},Vn={computed:{openInNewWindowTitle(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},xn=(i(237),i(238),Object(Pn.a)(Vn,(function(){var e=this._self._c;return e("span",[e("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[e("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),e("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),e("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports),Fn={functional:!0,render(e,{parent:n,children:i}){if(n._isMounted)return i;n.$once("hook:mounted",()=>{n.$forceUpdate()})}};a.default.config.productionTip=!1,a.default.use(Le),a.default.use(Cn),a.default.mixin(function(e,n,i=a.default){!function(e){e.locales&&Object.keys(e.locales).forEach(n=>{e.locales[n].path=n});Object.freeze(e)}(n),i.$vuepress.$set("siteData",n);const r=new(e(i.$vuepress.$get("siteData"))),l=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(r)),t={};return Object.keys(l).reduce((e,n)=>(n.startsWith("$")&&(e[n]=l[n].get),e),t),{computed:t}}(e=>class{setPage(e){this.__page=e}get $site(){return e}get $themeConfig(){return this.$site.themeConfig}get $frontmatter(){return this.$page.frontmatter}get $localeConfig(){const{locales:e={}}=this.$site;let n,i;for(const a in e)"/"===a?i=e[a]:0===this.$page.path.indexOf(a)&&(n=e[a]);return n||i||{}}get $siteTitle(){return this.$localeConfig.title||this.$site.title||""}get $canonicalUrl(){const{canonicalUrl:e}=this.$page.frontmatter;return"string"==typeof e&&e}get $title(){const e=this.$page,{metaTitle:n}=this.$page.frontmatter;if("string"==typeof n)return n;const i=this.$siteTitle,a=e.frontmatter.home?null:e.frontmatter.title||e.title;return i?a?a+" | "+i:i:a||"VuePress"}get $description(){const e=function(e){if(e){const n=e.filter(e=>"description"===e.name)[0];if(n)return n.content}}(this.$page.frontmatter.meta);return e||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}get $lang(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}get $localePath(){return this.$localeConfig.path||"/"}get $themeLocaleConfig(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}get $page(){return this.__page?this.__page:function(e,n){for(let i=0;i<e.length;i++){const a=e[i];if(a.path.toLowerCase()===n.toLowerCase())return a}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}},In)),a.default.component("Content",Mn),a.default.component("ContentSlotsDistributor",_n),a.default.component("OutboundLink",xn),a.default.component("ClientOnly",Fn),a.default.component("Layout",un("Layout")),a.default.component("NotFound",un("NotFound")),a.default.prototype.$withBase=function(e){const n=this.$site.base;return"/"===e.charAt(0)?n+e.slice(1):e},window.__VUEPRESS__={version:"1.9.10",hash:"be74ed5"},async function(e){const n="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:In.routerBase||In.base,i=new Le({base:n,mode:"history",fallback:!1,routes:Nn,scrollBehavior:(e,n,i)=>i||(e.hash?!a.default.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(e.hash)}:{x:0,y:0})});!function(e){e.beforeEach((n,i,a)=>{if(Zn(e,n.path))a();else if(/(\/|\.html)$/.test(n.path))if(/\/$/.test(n.path)){const i=n.path.replace(/\/$/,"")+".html";Zn(e,i)?a(i):a()}else a();else{const i=n.path+"/",r=n.path+".html";Zn(e,r)?a(r):Zn(e,i)?a(i):a()}})}(i);const r={};try{await Promise.all(Dn.filter(e=>"function"==typeof e).map(n=>n({Vue:a.default,options:r,router:i,siteData:In,isServer:e})))}catch(e){console.error(e)}return{app:new a.default(Object.assign(r,{router:i,render:e=>e("div",{attrs:{id:"app"}},[e("RouterView",{ref:"layout"}),e("div",{class:"global-ui"},En.map(n=>e(n)))])})),router:i}}(!1).then(({app:e,router:n})=>{n.onReady(()=>{e.$mount("#app")})})}]);