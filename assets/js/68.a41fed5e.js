(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{652:function(a,e,r){"use strict";r.r(e);var t=r(15),n=Object(t.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"_3-temel-prensipler"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-temel-prensipler"}},[a._v("#")]),a._v(" 3. Temel Prensipler ")]),a._v(" "),e("p",[a._v("Bu bölümde Ödeme Hizmetleri Veri Paylaşım Servisleri (Hesap Bilgisi Hizmeti, Ödeme Emri Başlatma Hizmeti) için tanımlanan temel prensipler açıklanmaktadır.")]),a._v(" "),e("h2",{attrs:{id:"_3-1-genel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-genel"}},[a._v("#")]),a._v(" 3.1 Genel")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("HHS’ler Yönetmeliğin 59. maddesinin beşinci fıkrası ve Ödeme ve Elektronik Para Kuruluşlarının Bilgi Sistemleri ile Ödeme Hizmeti Sağlayıcılarının Ödeme Hizmetleri Alanındaki Veri Paylaşım Servislerine İlişkin Tebliğin (Tebliğ) 23. maddesinin birinci fıkrası uyarınca, ödeme hizmetleri veri paylaşım servislerini BKM API Geçidi aracılığıyla HBHS ve ÖBHS’ye sunmakla yükümlüdür.")])]),a._v(" "),e("li",[e("p",[a._v("Tebliğin 23. maddesinin ikinci fıkrası uyarınca ödeme emri başlatma hizmetinde açık iletişim servisinin tarafları ÖBHS ile HHS’dir.")])]),a._v(" "),e("li",[e("p",[a._v("Tebliğin 23. maddesinin üçüncü fıkrası uyarınca hesap bilgisi hizmetinde açık iletişim servisinin tarafları HBHS ile HHS’dir.")])]),a._v(" "),e("li",[e("p",[a._v("Yönetmeliğin 60. maddesinin birinci fıkrası uyarınca müşteri, ödeme emri başlatma hizmetini "),e("strong",[a._v("ödeme hesabının çevrim içi olarak erişilebilir olduğu durumlarda")]),a._v(", kullanmayı tercih edebilir.")])]),a._v(" "),e("li",[e("p",[a._v("Yönetmeliğin 61. maddesinin birinci fıkrası uyarınca müşteri, hesap bilgisi hizmetini "),e("strong",[a._v("ödeme hesabının çevrim içi olarak erişilebilir olduğu durumlarda")]),a._v(", kullanmayı tercih edebilir.")])]),a._v(" "),e("li",[e("p",[a._v("Tebliğin 25. maddesi uyarınca HHS ve YÖS (ÖBHS ve HBHS) arasında bağlantı uçtan uca güvenli bir şekilde sağlanır. Bu amaçla iletim katmanında TLS (asgari 1.2 sürümü) ile şifreli iletişim sağlanır.")])]),a._v(" "),e("li",[e("p",[a._v("Tebliğin 23. maddesinin dördüncü fıkrası uyarınca HHS tarafından sunulan ödeme hizmetleri veri paylaşım servislerini kullanan yetkilendirilmiş ödeme hizmeti sağlayıcılarının TCMB tarafından ilgili ödeme hizmeti için yetkilendirilmiş olduğu kontrol edilir.")])]),a._v(" "),e("li",[e("p",[a._v("Tebliğin 25. maddesinin beşinci fıkrası uyarınca zaman damgası, 15/1/2004 tarihli 5070 sayılı Elektronik İmza Kanunu kapsamında tanımlanan zaman damgasına dayanır.")])]),a._v(" "),e("li",[e("p",[a._v("API alan isimleri Türkçe olarak tanımlanmıştır. Ancak API başlığı (header) alanındaki alan isimleri özelinde, API Geçitleri tarafından otomatik olarak tanınabilmesi gözetilerek, İngilizce isimlendirme tercih edilmiştir.")])])]),a._v(" "),e("h2",{attrs:{id:"_3-2-istem-cagrı-ve-oturum"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-istem-cagrı-ve-oturum"}},[a._v("#")]),a._v(" 3.2.\tİstem (Çağrı) ve Oturum")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("Her istek biricik istek numarası ve ÖHK’lı işlemler için zaman damgası içerir. Birden fazla istek içeren işlem YÖS tarafından belirlenen çağrıya özgü talep kimliği (istek numarası: x-request-id) ve işlem akışına özgü talep kimliği (işlem grup numarası: x-group-id) değerleri kullanılarak HHS tarafından bir oturum yaklaşımı ile sürdürülür (Bknz. 3.15 İstek Başlığı).")])]),a._v(" "),e("li",[e("p",[a._v("Oturum takibi ise işlem grup numarası ile yapılır. İşlem grup numarası da ÖHK’lı işlemler için zaman damgası ile birlikte ilgili tüm işlem verilerini içerecek şekilde kayıt altına alınır.")])]),a._v(" "),e("li",[e("p",[a._v("Örneğin, bir ödeme emri başlatma işlemi birden fazla istekten oluşur. Her istek yukarıda belirtildiği gibi biricik istek numarası ve ÖHK’lı işlemler için zaman damgası içerir. Ancak işlemin oturum bütünlüğü işlem grup numarası ile sağlanır.")])]),a._v(" "),e("li",[e("p",[a._v("Taraflar açtıkları oturumu işlem bütünlüğünü sağlayacak süre içerisinde açık tutar ve işlem biter bitmez kapatır.")])])]),a._v(" "),e("h2",{attrs:{id:"_3-3-restful-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-restful-api"}},[a._v("#")]),a._v(" 3.3.\tRESTful API")]),a._v(" "),e("p",[a._v("API’ler, dünya ölçeğinde yaygın bir şekilde kullanılan Temsili Durum Transferi (Representational State Transfer, REST) mimari tarzı ve JavaScript Nesne Notasyonu (JavaScript Object Notation, JSON) veri formatlarına uygun olarak geliştirilir. En üst seviye Veri Tanımlama Dili (Data Description Language) ve en iyi uygulama örnekleri için "),e("a",{attrs:{href:"http://json-schema.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("^JSON Şeması"),e("OutboundLink")],1),a._v(" temel alınır.")]),a._v(" "),e("h2",{attrs:{id:"_3-4-surum-yonetimi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-surum-yonetimi"}},[a._v("#")]),a._v(" 3.4.\tSürüm Yönetimi")]),a._v(" "),e("p",[a._v("API sonraki aşamalarda doğabilecek gereksinimleri ve daha karmaşık kullanım durumlarını karşılamak için sürümler halinde geliştirilir ve bu durum tasarım sırasında göz önünde bulundurulur.")]),a._v(" "),e("p",[a._v("API v1.0 sürümünde ;")]),a._v(" "),e("ul",[e("li",[a._v("Kapsamdaki ödeme hesapları : Vadesiz TL, yabancı para hesapları (gerçek ve tüzel kişilere ait ödeme hesapları), Kredili Mevduat Hesabı")]),a._v(" "),e("li",[a._v("Tekil ödeme (Virman/Havale/FAST/Müşterilerarası TL Aktarım Sistemi)\n"),e("ul",[e("li",[a._v("Virman ve havale işlemleri kapsamında yabancı para transferi yapılabilir.")])])]),a._v(" "),e("li",[a._v("Hesap bilgisi hizmetleri\n"),e("ul",[e("li",[a._v("Temel veya ayrıntılı hesap bilgisi")]),a._v(" "),e("li",[a._v("Bakiye")]),a._v(" "),e("li",[a._v("Gerçekleşen işlemler için Hesap hareketleri")])])]),a._v(" "),e("li",[a._v("Karekodlu ödemelerdeki 01, 02 ve 03 akış türleri\nyer almaktadır.")])]),a._v(" "),e("p",[e("strong",[a._v("Her sürüm değişikliğinde bir önceki sürüm belirli bir süre desteklenecektir. Diğer bir ifadeyle, sadece belirli bir süre için mevcut ve bir önceki sürüm aynı anda erişilebilir olacaktır.")])]),a._v(" "),e("h2",{attrs:{id:"_3-5-kaynak-uri-yol-yapısı"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-kaynak-uri-yol-yapısı"}},[a._v("#")]),a._v(" 3.5.\tKaynak URI Yol Yapısı")]),a._v(" "),e("p",[a._v("YÖS’lerin başlattığı çağrılarda URI yolu aşağıdaki yapıyı takip eder:")]),a._v(" "),e("p",[e("strong",[a._v("[hhs-yol-ön-eki]/ohvps/ [kaynak-grubu]/ [sürüm]/ [kaynak]/[kaynak-no]/[alt-kaynak]")])]),a._v(" "),e("p",[a._v("Bu, aşağıdaki unsurlardan oluşur:")]),a._v(" "),e("ul",[e("li",[a._v("[hhs-yol-ön-eki]"),e("br"),a._v("\nİsteğe bağlı, HHS'ye özgü yol ön ekini ifade eder."),e("br"),a._v("\nBKM API geçidi üzerinden yapılan çağrılarda BKM tarafından belirlenen sistem adı ve yol ön eki kullanılır.")]),a._v(" "),e("li",[a._v("ohvps"),e("br"),a._v("\nSabit metin “ohvps” (Ödeme Hizmetleri Veri Paylaşım Servisleri kısaltması)")]),a._v(" "),e("li",[a._v("[kaynak-grubu]"),e("br"),a._v("\nKaynak grubu, API’ye erişmek için kullanılan ödeme hizmetine (HBH, ÖBH) göre erişim adresi (end point) grubunu tanımlar (“hbh” veya “obh”).")]),a._v(" "),e("li",[a._v("[sürüm]"),e("br"),a._v("\nAPI sürümünü ifade eder (“/s[ana-sürüm].[alt-sürüm]/”).")]),a._v(" "),e("li",[a._v("[kaynak]/[kaynak-no]"),e("br"),a._v("\nKaynak detaylarını ifade eder.")]),a._v(" "),e("li",[a._v("[alt-kaynak]"),e("br"),a._v("\nAlt kaynak detaylarını ifade eder.")])]),a._v(" "),e("p",[a._v("HHS, tüm kaynakları için aynı katılımcı yolu ön ekini ve sistem adını kullanmalıdır.")]),a._v(" "),e("p",[a._v("BKM API’lerine erişmek isteyen uygulamaların yetkilerine göre aşağıdaki API’lere abone olmaları gerekmektedir:")]),a._v(" "),e("p",[a._v("OBH:"),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/obh/s1.0/odeme-emri-rizasi")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/obh/s1.0/odeme-emri")]),e("br"),a._v("\nHBH:"),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesap-bilgisi-rizasi")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesaplar")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesaplar/1234/islemler")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesaplar/1234/bakiye")]),e("br"),a._v("\nGKD"),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/gkd/s1.0/erisim-belirteci")]),e("br"),a._v("\nHHS – YÖS API"),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/hhs-api/s1.0/hhs")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/hhs-api/s1.0/hhs/1234")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/yos-api/s1.0/yos")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/yos-api/s1.0/yos/1234")])]),a._v(" "),e("p",[a._v("HHS’lerin sağlayacakları API’lerdeki URI çevrimi örnekleri aşağıdaki gibidir.")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:""}},[a._v("https://xbank.com.tr/api-portal/ohvps/obh/s1.0/odeme-emri")])]),a._v(" "),e("li",[e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/obh/s1.0/odeme-emri")]),a._v(" (BKM API)")]),a._v(" "),e("li",[e("a",{attrs:{href:""}},[a._v("https://xbank.com.tr/api-portal/ohvps/hbh/s1.0/hesap-bilgisi-rizasi")])]),a._v(" "),e("li",[e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesap-bilgisi-rizasi")]),a._v(" (BKM API)")]),a._v(" "),e("li",[e("a",{attrs:{href:""}},[a._v("https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesaplar")])]),a._v(" "),e("li",[e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.1/hesaplar")]),a._v("  (BKM API)")]),a._v(" "),e("li",[e("a",{attrs:{href:""}},[a._v("https://xbank.com.tr/api-portal/ohvps/hbh/s1.1/hesaplar/1234")])]),a._v(" "),e("li",[e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.1/hesaplar/1234")]),a._v(" (BKM API)")])]),a._v(" "),e("p",[a._v("BKM API Geçidi üzerinden yapılan çağrılarda, istek başlığında bulunan “x-aspsp-code” (isteğin iletildiği Hesap Hizmeti Sağlayıcısının kodu) değerine göre HHS API’de standart olarak tanımlanmış olan “basePath” bilgisine servis uzantısı eklenerek HHS’ye yönlendirme yapılır.")]),a._v(" "),e("p",[a._v("Örneğin, istek başlığında "),e("strong",[a._v("xbank")]),a._v("’ın kodu varsa, YÖS tarafından yapılan"),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://apigw-prod.bkm.com.tr/api/main/ohvps/hbh/s1.0/hesap-bilgisi-rizasi")]),e("br"),a._v("\nçağrısı BKM API Geçidi tarafından karşılanarak"),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("https://xbank.com.tr/api-portal/ohvps/hbh/s1.0/hesap-bilgisi-rizasi")]),e("br"),a._v("\nadresine yönlendirilir.")]),a._v(" "),e("p",[a._v("Bu örnekte, "),e("a",{attrs:{href:""}},[a._v("https://xbank.com.tr/api-portal")]),a._v(" basePath bilgisi HHS tarafından HHS API’ye girilen değerdir.")]),a._v(" "),e("h2",{attrs:{id:"_3-6-karakter-kodlama"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-karakter-kodlama"}},[a._v("#")]),a._v(" 3.6.\tKarakter Kodlama")]),a._v(" "),e("p",[a._v("API istekleri ve yanıtlarında UTF-8 karakter kodlaması kullanılır. Bu, JSON için varsayılan karakter kodlamasıdır.")]),a._v(" "),e("p",[a._v("Ancak, bir HHS'nin kendi uygulamaları ve ödeme başlattığı ödeme sistemi (FAST vb.)  bazı UTF-8 karakterlerini kabul etmeyebilir. HHS, UTF-8 kodlaması içeren bir mesajı işleyemez ve reddederse, HTTP 400 (Hatalı İstek) durum kodu ile yanıt vermelidir.")]),a._v(" "),e("h2",{attrs:{id:"_3-7-veri-formatı"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-veri-formatı"}},[a._v("#")]),a._v(" 3.7.\tVeri Formatı")]),a._v(" "),e("ul",[e("li",[a._v('Açık bankacılık kapsamındaki zaman damgası, ISO 8601 standartına uygun olarak yerel saat bilgisini ve timezone bilgisini de içerecek şekilde " yyyy-MM-dd’T’HH:mm:ssXXX " formattaki haliyle hazırlanmalıdır.')])]),a._v(" "),e("p",[a._v('Örnek:  "timestamp": "2021-05-30T20:34:15+03:00"'),e("br"),a._v("\nyyyy : 4 hane yıl"),e("br"),a._v("\nMM : Başa ‘0’ eklenmiş, toplam 2 hane ay"),e("br"),a._v("\ndd    : Başa ‘0’ eklenmiş, toplam 2 hane gün"),e("br"),a._v("\nHH    : Başa ‘0’ eklenmiş, toplam 2 hane saat (0-23 arası değer alabilir.)"),e("br"),a._v("\nmm : Başa ‘0’ eklenmiş, toplam 2 hane dakika"),e("br"),a._v("\nss    : Başa ‘0’ eklenmiş, toplam 2 hane saniye"),e("br"),a._v("\nXXX : ISO 8601 Time zone")]),a._v(" "),e("ul",[e("li",[a._v("JWT veri paketlerinde kullanılan zaman damgaları, 1 Ocak 1970 Saat 00:00:00 (UTC) anından itibaren geçen saniye sayısı değerini (Unix Time) kullanır.")]),a._v(" "),e("li",[a._v("Bir HHS, tarihi yanlış biçimlendirilmiş bir istek aldığında, 400 (Hatalı İstek) durum kodu ve ilgili hata kodu ile yanıt verir.")]),a._v(" "),e("li",[a._v("Tüm tutar alanları tam sayı olarak, para birimleri ise ISO4217’deki 3 harfli kodla iletilir. Tutar alanı, tutara ilişkin para biriminin ISO4217’de tanımlı olan tam sayıdan sonraki uzunluğuna göre formatlanarak okunmalıdır. Örneğin 1,20 TRY için tutar alanında “120” değeri iletilir, para birimi TRY olduğu için son iki basamağın kuruş olduğu sonucuna ulaşılacaktır. 12000 Japon Yeni için, ISO4217’de JPY para biriminin ondalık kısmı olmadığından tutar alanında 12000 değeri iletilir.")]),a._v(" "),e("li",[a._v("Sıralı veri tipleri büyük küçük harfe duyarlıdır.")]),a._v(" "),e("li",[a._v('Altın para birimi ISO4217’ye uygun biçimde “XAU” cinsinde ve virgülden sonra 2 basamak olacak şekilde iletilmelidir. Örneğin içerisinde "13,5 gr" altın olan hesap için bakiye 1350 gönderilmelidir.')])]),a._v(" "),e("h2",{attrs:{id:"_3-8-istemci-sertifika-yonetimi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-istemci-sertifika-yonetimi"}},[a._v("#")]),a._v(" 3.8.\tİstemci Sertifika Yönetimi")]),a._v(" "),e("p",[a._v("ÖHVPS kapsamında YÖS ve HHS’lerin güvenli bir şekilde tanımlanması amacıyla elektronik sertifikalar kullanılır.")]),a._v(" "),e("p",[a._v("ÖHVPS kapsamında tarafların güvenli bir şekilde tanımlaması, uçtan uca güvenli iletişim, mesaj şifreleme ve mesaj imzalama işlevleri 15/1/2004 tarihli ve 5070 sayılı Elektronik İmza Kanunu’nda açıklanan elektronik sertifikalar kullanılarak sağlanır. Elektronik sertifikada Türkiye Cumhuriyet Merkez Bankası tarafından verilen kuruluş kodu ve kuruluşun türüne dair bilgiler bulunur.")]),a._v(" "),e("p",[a._v("BKM API Geçidi üzerinden yapılan erişimlerde YÖS ve HHS’lere önceden dağıtılmış olan istemci sertifikaları kullanılarak tarafların (sunucu) kimliklerinin doğrulanması sağlanacaktır. İstemci sertifikaları hem test hem de üretim ortamında kullanılacaktır. Sertifikaların işlevselliği ve geçerliliği sertifikasyon sürecinde de sınanacaktır. Söz konusu sertifikaların dağıtım prosedürleri ve kullanımlara yönelik açıklamalar EK-3’te yer verilmiştir.")]),a._v(" "),e("h2",{attrs:{id:"_3-9-yetkilendirme-turleri"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-9-yetkilendirme-turleri"}},[a._v("#")]),a._v(" 3.9.\tYetkilendirme Türleri")]),a._v(" "),e("p",[a._v("BKM API Geçidi üzerinden yapılan çağrılarda iki temel yetkilendirme türü kullanılır:")]),a._v(" "),e("p",[e("strong",[a._v("1.\tİstemci Kimlik Bilgileri:")]),a._v(" Müşteri onayının gerekmediği, sadece YÖS’ün tanımlanıp doğrulandığı API çağrılarında kullanılır. YÖS’ün yetkilendirilmiş olduğu ve faaliyet izninin yaptığı hizmet çağrısına uygun olduğu kontrol edilir.  Bu amaçla, YÖS’lere clientId ve clientSecret tahsis edilecektir. YÖS’ler ilgili clientId ve clientSecret ile sadece yetkilendirilmiş oldukları servislere erişebileceklerdir. YÖS’ler kendilerine BKM tarafından sunulacak API’yi, kendi clientID ve clientSecret değerleri ile sorgulayarak “İstemci Kimlik Bilgileri” belirtecini (access token) elde edeceklerdir.\nHHS’ler de BKM API geçidi üzerindeki YÖS API’sini sorgulama maksadı ile BKM API Geçidine geldiklerinde, kendilerine atanmış olan clientID ve clientSecret bilgileri ile yetki kontrolleri yapılır.\nHHS’ler kendilerinden alınacak username ve password değerleri kullanılarak oluşturulacak basic authentication metodu ile servislerini sunacaklardır.")]),a._v(" "),e("p",[e("strong",[a._v("2.\tYetkilendirme Kodu:")]),a._v(" YÖS’ün doğrulanmasının yanısıra müşterinin GKD ile doğrulanması gereken API çağrılarında kullanılır. Müşteri doğrulanarak yetkilendirme kodu oluşturulması HHS’nin yetkilendirme arayüzüne yönlendirilir. GKD’nin başarıyla tamamlanması sonrasında yetkilendirme kodu YÖS’e dönülür. YÖS daha sonra HHS’nin "),e("strong",[a._v("erişim belirteci")]),a._v(" (access token) erişim adresini (EK-3: POST /erisim-belirteci) çağırmak suretiyle yetkilendirme kodunu bir erişim belirteci (access token) ile değiştirerek ilgili kaynakları kullanabilir.")]),a._v(" "),e("p",[a._v("Ödeme emri başlatma ve hesap bilgisi hizmetlerinde hangi yetkilendirme türlerinin kullanılacağı bilgisi, ilgili başlıklardaki erişim adresleri (endpoints) tablolarında yer almaktadır.")]),a._v(" "),e("p",[e("strong",[a._v("erisim-belirteci")]),a._v(" erisim noktasından elde edilen "),e("strong",[a._v("erisimBelirteci")]),a._v(" ilişkilendirildiği nesne veya işlem için gönderilen POST isteği başlığında "),e("strong",[a._v("x-access-token")]),a._v(" alanında iletilir.\nBelirli bir süre için tanımlanan erişim belirteci (access token) değerinin yenileme belirteci (refresh token) ile yenilenmesi gerekir.")]),a._v(" "),e("p",[a._v("Erişim adreslerinde kullanılan yetkilendirme türü ilgili erişim adresi tablolarında belirtilmiştir.")]),a._v(" "),e("h2",{attrs:{id:"_3-10-istek-cevap-mesajlarında-kullanılan-nesne-yapıları"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-istek-cevap-mesajlarında-kullanılan-nesne-yapıları"}},[a._v("#")]),a._v(" 3.10. İstek/Cevap Mesajlarında Kullanılan Nesne Yapıları")]),a._v(" "),e("p",[a._v("İstek ve Cevap mesajlarında kullanılacak olan nesneler tüm elemanlarını kapsayacak şekilde Ek-1 de listelenmiştir. Tüm listelenen elemanlar açısından (Uç nokta mesaj yapılarının belirtildiği tablolarda belirtildiği üzere) alanın Zorunlu (z) veya İsteğe Bağlı (İ) olma durumlarına göre bazı alanlar gönderilebilir veya gönderilmeyebilir.")]),a._v(" "),e("h2",{attrs:{id:"_3-11-sayfalandırma-ve-filtreleme"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-11-sayfalandırma-ve-filtreleme"}},[a._v("#")]),a._v(" 3.11. Sayfalandırma ve Filtreleme")]),a._v(" "),e("p",[e("strong",[a._v("Sayfalandırma")])]),a._v(" "),e("p",[a._v("Çağrıya dönülen kaynak nesnesi içerisindeki kayıtlar bir sayfalandırma yapısı ile çağrılacak şekilde istek oluşturulur.")]),a._v(" "),e("p",[a._v("Oluşturulacak isteğin içerisinde parametreler ile filtreleme, sayfa başına gösterilecek kayıt sayısı ve hangi sayfanın önyüzde gösterileceği bilgileri erişim noktasına iletilir ve ilgili kayıtlar cevap olarak alınır.")]),a._v(" "),e("p",[e("strong",[a._v("Filtreleme")])]),a._v(" "),e("p",[a._v("HHS, birden çok kayıt dönülmesi gereken GET çağrılarında sınırlı filtreleme desteği sağlamalıdır. Filtre parametreleri her zaman kaynak nesnesinin belirli alanlarına özgüdür ve nesne için tanımlanan kurallara uymalıdır.")]),a._v(" "),e("h2",{attrs:{id:"_3-12-mesaj-imzalama"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-12-mesaj-imzalama"}},[a._v("#")]),a._v(" 3.12. Mesaj İmzalama")]),a._v(" "),e("p",[a._v("Elektronik imzalar, ÖHVPS API’de gerçekleştirilen işlemlerin ve taşınan verilerin bütünlük ve inkâr edilemezliğini destekler. İmzaların kaynak bazında hangi istek ve yanıtlara uygulandığı belirlidir.")]),a._v(" "),e("p",[a._v("API yalnızca TLS'ye dayanırsa, dijital kayıtları ve inkâr edilemezlik kanıtlarını tutmak zor olur. Bu nedenle, TLS'ye dayanmayan bir inkâr edilemezlik çözümü olarak API isteğinin HTTP başlığında bir JWS kullanılarak sağlanabilir.")]),a._v(" "),e("p",[a._v("HTTP isteğinin gövdesinin hash fonksiyonu (SHA256) ile özeti alınacaktır. Elde edilen özet, asimetrik anahtarları destekleyen bir algoritma kullanılarak imzalanacak ve JWS elde edilecektir.")]),a._v(" "),e("p",[a._v("Bir istek, YÖS'nin özel anahtarı ile imzalanacak ve bu isteğe karşılık gelen yanıt, HHS'nin özel anahtarı tarafından imzalanacaktır.")]),a._v(" "),e("p",[a._v("Tüm API istekleri ve yanıtları imzalanmaz. Mesaj imzalamanın zorunlu olup olmadığı, desteklenip desteklenmediği her API özelinde belirlenir.")]),a._v(" "),e("p",[e("strong",[a._v("Anahtar Deposu")])]),a._v(" "),e("p",[a._v("HHS'ler ve YÖS'ler tarafından güvenilen bir Güven Otoritesi (Trust Anchor), taraflar için bir genel anahtar deposu sağlamaktan sorumludur.")]),a._v(" "),e("p",[a._v("Güven Otoritesi, taraflardan herhangi birisinin oluşturduğu bir anahtar çiftinin açık bölümünü saklayan merkezi bir dizin (BKM tarafından tutulan merkezi kayıt sistemi vb.) olacaktır.")]),a._v(" "),e("p",[a._v("Mesajları doğrulamak için tarafların genel anahtarlarının paylaşılması için BKM bir servis sağlayacaktır. HHS API olarak adlandırılımış olan bu servis ile HHS ve YÖS listelerine ulaşılabildiği gibi doğrulama işlemi için ihtiyaç duyulacak olan genel anahtarlara da bu servis üzerinden erişilebilinecektir.")]),a._v(" "),e("p",[a._v("İlgili Mesaj şifreleme için genel akış, Ek-5 bölümünde detaylarıyla paylaşılmaktadır.")]),a._v(" "),e("h2",{attrs:{id:"_3-13-durum-kodu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-13-durum-kodu"}},[a._v("#")]),a._v(" 3.13. Durum Kodu")]),a._v(" "),e("p",[a._v("API’ler, iki farklı amaca hizmet eden iki durum kodu kullanır:")]),a._v(" "),e("ul",[e("li",[a._v("HTTP Durum Kodu, API çağrısının (kaynaktaki HTTP işlemi) sonucunu yansıtır.")]),a._v(" "),e("li",[a._v("Bazı kaynak payload’larındaki Durum alanı, kaynakların durumunu yansıtır.")])]),a._v(" "),e("h2",{attrs:{id:"_3-14-gereksinimlerinin-sınıflandırılması"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-14-gereksinimlerinin-sınıflandırılması"}},[a._v("#")]),a._v(" 3.14. Gereksinimlerinin Sınıflandırılması")]),a._v(" "),e("p",[a._v("Erişim adreslerinin ve alanların kullanımı Zorunlu(Z), İsteğe Bağlı(İ) veya Koşullu(K) olabilir. Kullanımlara ilişkin durumlar ve kullanımın (K) koşullu olduğu duruma ilişkin açıklamalar ilgili tablolarda belirtilmiştir.")]),a._v(" "),e("p",[a._v('İstek ve yanıtta kullanılacak başlık isimleri, ilgili RFC dokümanlarında ve aşağıdaki tabloda yer aldığı şekilde kullanılacaktır.  Uygulamaya özelleşmiş başlıklar "X-" ile başlayacaktır. Başlık isimlerinde yer alacak kısaltmalar (örn. PSU, ASPSP gibi) tamamı büyük harfle yazılacak şekilde tanımlanacaktır. Başlık isimleri büyük – küçük harfe duyarlı olmamalıdır. Örneğin x-request-id ya da X-Request-ID olarak gönderilmiş olan bir istek başlığı değişkeni, sunucu tarafında hata vermeyecek şekilde işlenebilmelidir.')]),a._v(" "),e("h2",{attrs:{id:"_3-15-istek-baslıgı"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-15-istek-baslıgı"}},[a._v("#")]),a._v(" 3.15. İstek Başlığı")]),a._v(" "),e("p",[e("strong",[a._v("Tablo 2: İstek Başlığında Yer Alan Veriler")])]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("Başlık İsimleri")]),a._v(" "),e("th",[a._v("Format")]),a._v(" "),e("th",[a._v("Notlar")]),a._v(" "),e("th",[a._v("POST")]),a._v(" "),e("th",[a._v("GET")]),a._v(" "),e("th",[a._v("DELETE")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[a._v("X-Request-ID")]),a._v(" "),e("td",[a._v("AN1..36")]),a._v(" "),e("td",[a._v("İsteği başlatan YÖS tarafından belirlenen çağrıya özgü talep kimliği. İstek numarası. "),e("br"),a._v(" Örnek: Ödeme emri başlatma iş akışının her adımda farklı “x-request-id” değeri kullanılır. "),e("br"),a._v(" Çağrıların aynı yanıtı dönmesinin beklendiği durumlarda (idempotent işlemlerde) aynı değer ile çağrı yapılır.")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("X-Group-ID")]),a._v(" "),e("td",[a._v("AN1..36")]),a._v(" "),e("td",[a._v("İsteği başlatan YÖS tarafından belirlenen işlem akışına özgü talep kimliği. İşlem grup numarası."),e("br"),a._v(" Aynı rıza no’ya ait tüm isteklerde aynı x-group-id bilgisi değeri gönderilmelidir."),e("br"),a._v("Örnek: Ödeme emri başlatma/hesap bilgisi iş akışının her adımında aynı “x-group-id” değeri kullanılır.")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("Content-Type")]),a._v(" "),e("td",[a._v("AN1..20")]),a._v(" "),e("td",[a._v("Standart HTTP Başlığı; Talepte sağlanan payload’ın biçimini temsil eder: application/json"),e("br"),a._v(" (Başka bir değere ayarlanırsa, HHS, 415 Desteklenmeyen Ortam Türü (Unsupported Media Type) ile yanıt vermelidir)")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("-")]),a._v(" "),e("td",[a._v("-")])]),a._v(" "),e("tr",[e("td",[a._v("X-ASPSP-Code")]),a._v(" "),e("td",[a._v("AN4")]),a._v(" "),e("td",[a._v("İsteğin iletildiği Hesap Hizmeti Sağlayıcısının kodudur. (Nezdinde ÖH bulunduran kuruluş kodu. Örneğin, Banka, Elektronik Para Kuruluşu ve Ödeme Kuruluşu)")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("X-TPP-Code")]),a._v(" "),e("td",[a._v("AN4")]),a._v(" "),e("td",[a._v("İsteği gönderen Yetkili Ödeme Hizmeti Sağlayıcısı (YÖS) kodudur")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-Auth-Date")]),a._v(" "),e("td",[a._v("ISODateTime")]),a._v(" "),e("td",[a._v("ÖHK’nın YÖS üzerinde en son oturum açtığı saat. [RFC7231] Örneğin:  auth-date: Tue, 11 Sep 2012 19:43:31 GMT")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-IP-Adress")]),a._v(" "),e("td",[a._v("AN7..15")]),a._v(" "),e("td",[a._v("ÖHK YÖS üzerinde oturum açmışsa, işlemi başlattığı cihazın IP adresi.")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-IP-Port")]),a._v(" "),e("td",[a._v("AN1..5")]),a._v(" "),e("td",[a._v("ÖHK YÖS üzerinde oturum açmışsa, işlemi başlattığı cihazın Port adresi.")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-GEO-Location")]),a._v(" "),e("td",[a._v("AN1..36")]),a._v(" "),e("td",[a._v('ÖHK’nın işlemi başlattığı cihazın konum bilgisi. RFC2426 standartına uygun olarak paylaşılmalıdır. Örneğin  GEO:"<enlem >, <boylam>GEO:52.506931,13.144558')]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-User-Agent")]),a._v(" "),e("td",[a._v("AN 1.. 255")]),a._v(" "),e("td",[a._v("ÖHK’nın işlemi başlattığı cihazın sağladığı user-agent bilgisi. (Tarayıcı, versiyon, işletim sistemi bilgileri)")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-Timestamp")]),a._v(" "),e("td",[a._v("ISODateTime")]),a._v(" "),e("td",[a._v("ÖHK’nın işlemi başlattığı cihazın tarih saat içeren zaman bilgisi.")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-Device-ID")]),a._v(" "),e("td",[a._v("AN5..40")]),a._v(" "),e("td",[a._v("ÖHK işlemi mobil uygulama aracılığıyla başlattıysa, kullanılan mobil uygulama ilk yüklendiğinde oluşturulan tekil cihaz veya uygulama belirteci. ÖHK cihazının UUID değeri kullanılabilir.")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-Device-Data")]),a._v(" "),e("td",[a._v("AN1..1024")]),a._v(" "),e("td",[a._v("ÖHK’nın işlemi başlattığı mobil cihaza ait veriler. "),e("br"),a._v("Örnek alanlar: "),e("br"),a._v(" - Platform - (Android, iOS, Windows 10 Mobile)"),e("br"),a._v(" - Device Model "),e("br"),a._v(" - OS Name "),e("br"),a._v(" - OS Version"),e("br"),a._v("- Locale"),e("br"),a._v("- Time zone")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("PSU-Initiated")]),a._v(" "),e("td",[a._v("AN1")]),a._v(" "),e("td",[a._v("İşlemin ÖHK tarafından başlatılması durumunda E , sistem tarafından başlatıldığı durumda H değerini alması beklenir. "),e("br"),a._v(" İşlemler servisinde yapılacak sistemsel sorgulardaki işlem limitlerini kontrol amacıyla kullanılır.")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("Authorization")]),a._v(" "),e("td",[a._v("AN1..4096")]),a._v(" "),e("td",[a._v("YÖS ile BKM API Gateway arasındaki otorizasyon için kullanılan token bilgisidir. "),e("br"),a._v("Yekilendirme türlerinden İstemci Kimlik Bilgileri’ni adresler.")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("X-Access-Token")]),a._v(" "),e("td",[a._v("AN1..4096")]),a._v(" "),e("td",[a._v("ÖHK’nın GKD sürecinde doğrulanması sonrasında kullanılan erişim simgesi. Yetkilendirme türlerinden Yetkilendirme Kodu (GKD)’nu adresler.")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("X-JWS-Signature")]),a._v(" "),e("td",[a._v("AN1..4096")]),a._v(" "),e("td",[a._v("Payload gövdesinin ayrılmış bir JWS imzasını içeren üstbilgi."),e("br"),a._v(" Bu başlığın ne zaman belirtilmesi gerektiği hususu ilgili endpoint için belirtilmiştir.")]),a._v(" "),e("td",[a._v("K (Kullanılan API ve methoda göre kullanılır.)")]),a._v(" "),e("td",[a._v("K")]),a._v(" "),e("td",[a._v("K")])])])]),a._v(" "),e("h2",{attrs:{id:"_3-16-yanıt-baslıgı"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-16-yanıt-baslıgı"}},[a._v("#")]),a._v(" 3.16. Yanıt Başlığı")]),a._v(" "),e("p",[e("strong",[a._v("Tablo 3: Yanıt Başlığında Yer Alan Veriler")])]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("Başlık İsimleri")]),a._v(" "),e("th",[a._v("Format")]),a._v(" "),e("th",[a._v("Notlar")]),a._v(" "),e("th",[a._v("Kullanım Durumu")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[a._v("X-Request-ID")]),a._v(" "),e("td",[a._v("AN1..36")]),a._v(" "),e("td",[a._v("İsteği başlatan YÖS tarafından belirlenen çağrıya özgü talep kimliği. İstek numarası "),e("br"),a._v(" "),e("strong",[a._v("İlgili istek başlığındaki bilgi geri dönülür.")])]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("X-Group-ID")]),a._v(" "),e("td",[a._v("AN1..36")]),a._v(" "),e("td",[a._v("İsteği başlatan YÖS tarafından belirlenen işlem akışına özgü talep kimliği. İşlem grup numarası."),e("br"),e("strong",[a._v("İlgili istek başlığındaki bu değer geri dönülür.")])]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("X-ASPSP-Code")]),a._v(" "),e("td",[a._v("AN4")]),a._v(" "),e("td",[a._v("İsteğin iletildiği Hesap Hizmeti Sağlayıcısının kodudur. (Nezdinde ÖH bulunduran kuruluş kodu. Örneğin, Banka, Elektronik Para Kuruluşu ve Ödeme Kuruluşu)")]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("X-TPP-Code")]),a._v(" "),e("td",[a._v("AN4")]),a._v(" "),e("td",[a._v("İsteği gönderen Yetkili Ödeme Hizmeti Sağlayıcısı (YÖS) kodudur")]),a._v(" "),e("td",[a._v("Z")])]),a._v(" "),e("tr",[e("td",[a._v("Content-Type")]),a._v(" "),e("td",[a._v("AN1..20")]),a._v(" "),e("td",[a._v("Standart HTTP Başlığı; Talepte sağlanan payload’ın biçimini temsil eder: "),e("strong",[a._v("application/json")])]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("X-JWS-Signature")]),a._v(" "),e("td",[a._v("AN1..4096")]),a._v(" "),e("td",[a._v("JWS imzasını içeren üstbilgi. Bu başlığın hangi yanıtlar için kullanılması gerektiği ilgili endpoint için belirtilmiştir.")]),a._v(" "),e("td",[a._v("K")])]),a._v(" "),e("tr",[e("td",[a._v("Retry-After")]),a._v(" "),e("td",[a._v("AN 1..255")]),a._v(" "),e("td",[a._v("YÖS’ün bir isteği yeniden denemeden önce beklemesi gereken süreyi (saniye cinsinden) gösterir. HHS, 429 HTTP durum kodu (Too Many Requests) ile döndüğü yanıtların başlığında bu bilgiyi dönmelidir.")]),a._v(" "),e("td",[a._v("K")])]),a._v(" "),e("tr",[e("td",[a._v("x-total-count")]),a._v(" "),e("td",[a._v("N 1..18")]),a._v(" "),e("td",[a._v("Hesaplar, İşlemler ve Bakiye servislerinde sayfalama kullanıldığı durumda, sorgu sonucu dönecek toplam kayıt sayısı bilgisi, bu alanda HHS isteğine bağlı olarak gönderilebilir.")]),a._v(" "),e("td",[a._v("İ")])]),a._v(" "),e("tr",[e("td",[a._v("Link")]),a._v(" "),e("td",[a._v("1..4096")]),a._v(" "),e("td",[a._v("“Link” alanının çoklu sayfa yapısı olması durumunda gönderilmesi zorunludur."),e("br"),a._v(" Sayfalama yapısı kullanıldığında gelen yanıtta birden fazla sayfa var ise; önceki, sonraki, ilk, son sayfalara gitmek için gerekli referanslar link headerında aşağıdaki örnekteki gibi doldurulabilir. "),e("br"),a._v("x-total-count alanının gönderimi isteğe bağlı olduğu için; Link içerisindeki son sayfa bilgisi  (last) isteğe bağlı hale getirilmiştir. “Önceki”( prev) ve “Sonraki” (next) adımlarının uygun olan her durumda yer alması zorunludur."),e("br"),a._v("İlk sayfada “Önceki” seçeneği olmamalı, son sayfada ise “Sonraki” seçeneği olmamalıdır. "),e("br"),e("br"),a._v(" "),e("strong",[a._v('</ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=6&syfKytSayi=100>; rel="next",'),e("br"),a._v(' </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=4&syfKytSayi=100>; rel="prev",'),e("br"),a._v(' </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=14&syfKytSayi=100>; rel="last",'),e("br"),a._v(' </ohvps/hbh/s1.0/hesaplar/hspref/islemler?hesapIslemBslTrh=2022-01-01T00:00:00+03:00&hesapIslemBtsTrh=2023-12-12T23:59:59+03:00&srlmKrtr=islGrckZaman&srlmYon=Y&syfNo=0&syfKytSayi=100>; rel="first"')])]),a._v(" "),e("td",[a._v("K")])])])]),a._v(" "),e("h2",{attrs:{id:"_3-17-idempotency-kuralları"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-17-idempotency-kuralları"}},[a._v("#")]),a._v(" 3.17. Idempotency Kuralları")]),a._v(" "),e("p",[a._v("YÖS’ün aşağıdaki durumlarda aynı istek numarası (x-request-id) ve aynı veri gövdesiyle çağrıyı tekrarlaması; HHS’nin de bu durumlarda aynı yanıtı dönmesi gereklidir.")]),a._v(" "),e("ul",[e("li",[a._v("HHS’nin yanıtı kesinti/arıza nedeniyle YÖS’e ulaşmaz ve zaman aşımı söz konusu olması,")]),a._v(" "),e("li",[a._v("ÖHK, YÖS uygulaması üzerinden çift tıklama ile mükerrer defa HHS API’lerini çağırılması,\n(API kontrollerinden önce YÖS uygulamasının, çift tıklama kontrolü yapması önerilmektedir.)")]),a._v(" "),e("li",[a._v("YÖS, yanıt almasına rağmen işleyemeden kaybedilmesi,")])]),a._v(" "),e("p",[a._v("durumlarında HHS aşağıdaki kuralları işletir:")]),a._v(" "),e("ul",[e("li",[a._v("HHS gelen istek numarasını ve veri gövdesini birleştirerek checksum değeri üretir."),e("br"),a._v("\nchesksum değeri x-request-id|request.body ‘nin hash algoritmalarından (CRC32,MD5 vb)  geçirilerek üretilebilir.")]),a._v(" "),e("li",[a._v("HHS bu checksum değeri ile YÖS’e dönmüş olduğu yanıtı 5 dk boyunca saklar.  Saklama yöntemi olarak veri tabanı veya önbellek araçları kullanılabilir.")]),a._v(" "),e("li",[a._v("YÖS aynı istek numarası ve aynı veri gövdesi ile yeni bir çağrı yaptığında, aynı checksum değeri üretileceği için 5dk boyunca bu değere karşılık gelen yanıtı döner.")]),a._v(" "),e("li",[a._v("5 dk sonrasında istek numarası veya veri gövdesi değişmemiş olsa dahi bu HHS tarafından yeni istek olarak kabul edilir.")])]),a._v(" "),e("p",[a._v("Aşağıdaki Public Post işlemleri için bu kural setinin işletilmesi gerekmektedir:")]),a._v(" "),e("p",[a._v("1- Ödeme emri rızası oluşturma"),e("br"),a._v("\n2- Erişim belirteci oluşturma"),e("br"),a._v("\n3- Ödeme emri"),e("br"),a._v("\n4- Hesap bilgisi rızası oluşturma")]),a._v(" "),e("h2",{attrs:{id:"_3-18-http-durum-kodları"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-18-http-durum-kodları"}},[a._v("#")]),a._v(" 3.18. HTTP Durum Kodları")]),a._v(" "),e("p",[a._v("RFC 2616'da belirlenmiş olan durum kodları (status code) gönderilen isteğin durumunu YÖS’a standart bir şekilde ifade eder. Eğer bir hata varsa hatayı, gönderilen istek başarılı bir şekilde işlem gördüyse ona ilişkin durumu aktarır. Durum kodları genel olarak 5 kategoridedir.")]),a._v(" "),e("ul",[e("li",[a._v("1xx Bilgi")]),a._v(" "),e("li",[a._v("2xx Başarılı")]),a._v(" "),e("li",[a._v("3xx Yönlendirme")]),a._v(" "),e("li",[a._v("4xx İstemci Hatası")]),a._v(" "),e("li",[a._v("5xx Sunucu Hatası")])]),a._v(" "),e("p",[e("strong",[a._v("Sıralı (Enumarated) Hata Tipleri:")])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("TR.OHVPS.Resource")])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("⇨\tInvalidFormat")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tConsentMismatch")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tNotFound")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tInvalidSignature")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tMissingSignature")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tMethodNotAllowed")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tNotAcceptable")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tUnsupportedMediaType")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tConsentRevoked")])])])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("TR.OHVPS.Business")])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("⇨\tInvalidContent")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tInvalidAccount")])])])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("TR.OHVPS.Connection")])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("⇨\tInvalidCertificate")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tExceededRate")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tInvalidTPP")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tInvalidASPSP")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tInvalidToken")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tInvalidTPPRole")])])])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("TR.OHVPS.Server")])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("⇨\tInternalError")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tServiceUnavailable")])])])]),a._v(" "),e("p",[a._v("TR.OHVPS.Resource.InvalidFormat hatası alındığı durumda; fieldErrors nesnesi içerisinde verilecek hata kodları :")]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("TR.OHVPS.Field")])]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("⇨\tMissing")]),e("br"),a._v(" "),e("strong",[a._v("⇨\tInvalid")])])])]),a._v(" "),e("p",[e("strong",[a._v("Veri Tipi Örneği:")])]),a._v(" "),e("div",{staticClass:"language-JSON extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2b5f0fb2-730b-11e8-adc0-fa7ae01bbebc"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"path"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/ohvps/s1.1/obh/odeme-emri-rizasi"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"timestamp"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2020-06-13T18:24:38"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"httpCode"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("400")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"httpMessage"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Bad Request"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"moreInformation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Resource Schema validation error"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"moreInformationTr"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Şema kontrolleri başarısız"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n   "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"errorCode"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Resource.InvalidFormat"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n   \n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"fieldErrors"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n           "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                 "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"objectName"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"odemeEmriRizasi"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                 "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"field"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kmlkNo"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                 "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"messageTr"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"boyut '6' ile '30' arasında olmalı\"")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                 "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"message"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"size must be between '6' and '30'\"")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                 "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Field.Invalid"')]),a._v("\n              "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n              "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                 "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"objectName"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"odemeEmriRizasi"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"field"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"prBrm"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"messageTr"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"boş değer olamaz"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"message"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"must not be null"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Field.Missing"')]),a._v("\n              "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[e("strong",[a._v("Veri Tipi Örneği:")])]),a._v(" "),e("p",[a._v("Zorunlu header alanlarından biri ya da birkaçı eksik olarak gönderilirse aşağıdaki gibi bir hata dönüşü gerçekleşebilir.")]),a._v(" "),e("div",{staticClass:"language-JSON extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"httpCode"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"400"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"httpMessage"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Bad Request"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"moreInformation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"One or more required API parameters are missing in the API request."')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n")])])]),e("p",[e("strong",[a._v("Tablo 4: HTTP Durum Kodları")])]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("HTTP Durum")]),a._v(" "),e("th",[a._v("İstek Sonucu ve Açıklamalar")]),a._v(" "),e("th",[a._v("POST")]),a._v(" "),e("th",[a._v("GET")]),a._v(" "),e("th",[a._v("DELETE")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[a._v("200 OK")]),a._v(" "),e("td",[e("strong",[a._v("İstek Başarıyla Tamamlandı.")]),e("br"),a._v("Kaynak güncellemek için yapılan (örneğin, PUT) ve başarıyla tamamlanan isteklerinde kullanılır.")]),a._v(" "),e("td",[a._v("H")]),a._v(" "),e("td",[a._v("H")]),a._v(" "),e("td",[a._v("H")])]),a._v(" "),e("tr",[e("td",[a._v("201 Created")]),a._v(" "),e("td",[e("strong",[a._v("İstek Başarılı Oldu.")]),e("br"),a._v("Kaynak yaratma isteği (örneğin, POST /ödeme-emri-rizasi) başarıyla sonuçlandı.")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("H")]),a._v(" "),e("td",[a._v("H")])]),a._v(" "),e("tr",[e("td",[a._v("204 No Content")]),a._v(" "),e("td",[e("strong",[a._v("Silme işlemi başarıyla tamamlandı.")]),e("br"),a._v("Kaynak silme isteği (örneğin, "),e("strong",[a._v("DELETE /hesap-rizasi/{RizaNo}")]),a._v(") başarıyla sonuçlandı.")]),a._v(" "),e("td",[a._v("H")]),a._v(" "),e("td",[a._v("H")]),a._v(" "),e("td",[a._v("E")])]),a._v(" "),e("tr",[e("td",[a._v("400 Bad Request")]),a._v(" "),e("td",[e("strong",[a._v("İstekte bozuk, eksik veya uyumlu olmayan JSON gövdesi, URL parametreleri veya başlık alanları var.")]),a._v(" İstekle başlatılan işlem yapısal bozukluk, eksik veya tutarsız veri veya HHS tarafındaki kontrollerin hatalı sonuçlanması nedeniyle hata ile sonuçlanır ve hataya ilişkin veriler hata nesnesi içerisinde dönülür.")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")])]),a._v(" "),e("tr",[e("td",[a._v("401 Unauthorized")]),a._v(" "),e("td",[e("strong",[a._v("Yetkilendirme başlığı eksik, hatalı veya geçersiz olduğundan istek yetkilendirilmediğinde ve erişim reddedildiğinde http 401 kodu dönülmelidir.")])]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")])]),a._v(" "),e("tr",[e("td",[a._v("403 Forbidden")]),a._v(" "),e("td",[e("strong",[a._v("Erişim belirtecinin veya rızanın kapsamı uyuşmuyor.")]),e("br"),a._v("YÖS bir hesaba/işlem kaynağına erişmeye çalışır ve YÖS, istenen kaynağa erişmek için geçerli izinlere sahip bir rızası yoktur. "),e("br"),a._v("Örneğin; hesap bilgisi rızası bakiye izni almamıştır ancak /bakiyeler adresinden istekte bulunmuştur.")]),a._v(" "),e("td"),a._v(" "),e("td"),a._v(" "),e("td")]),a._v(" "),e("tr",[e("td",[a._v("404 Not Found")]),a._v(" "),e("td",[a._v("**HHS geçerli bir API erişim adresini sağlamıyorsa, o URL'ye gelen istekler için 404 (Bulunamadı) ile yanıt vermelidir.**YÖS, uygulama esaslarında tanımlanmayan bir kaynak için bir URL'ye erişmeye çalışırsa (örneğin, GET /yurtdisi-odeme), HHS, 404 (Bulunamadı) ile yanıt vermeyi seçebilir.")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")])]),a._v(" "),e("tr",[e("td",[a._v("405 Method Not Allowed")]),a._v(" "),e("td",[e("strong",[a._v("YÖS, desteklenmeyen bir yöntemle kaynağa erişmeye çalıştı.")])]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")])]),a._v(" "),e("tr",[e("td",[a._v("406 Not Acceptable")]),a._v(" "),e("td",[e("strong",[a._v("İstek, geçersiz bir karakter kümesi içeriyor.")])]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")])]),a._v(" "),e("tr",[e("td",[a._v("415 Unsupported Media Type")]),a._v(" "),e("td",[e("strong",[a._v("İstek gövdesi hedef kaynakta bu yöntem tarafından desteklenmeyen bir biçimde oluşturulduğu için işlem reddedildi")])]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("H")]),a._v(" "),e("td",[a._v("H")])]),a._v(" "),e("tr",[e("td",[a._v("429 Too Many Requests")]),a._v(" "),e("td",[e("strong",[a._v("Belirli bir süre içinde çok fazla talepte bulunulduğu için işlem reddedildi.")]),a._v(" HHS’ler adil kullanım politikalarını aşan talepleri kısıtlayabilir.")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")])]),a._v(" "),e("tr",[e("td",[a._v("500 Internal Server Error")]),a._v(" "),e("td",[e("strong",[a._v("API sunucu / servis katmanında sorun oluştu. İşlem başarısız.")])]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")])]),a._v(" "),e("tr",[e("td",[a._v("503 Service Unavailable")]),a._v(" "),e("td",[e("strong",[a._v("Hizmet sürümü kullanımdan kaldırıldı.")]),a._v(" Bir API'nin kullanımdan kaldırıldığı ve artık bir HHS tarafından operasyonel olarak desteklenmediği durumlarda, URI yolu hala etkin olabilir ve API isteklerini kabul edebilir.  Bu durumda, YÖS'ün API sürümünün çevrimdışı olduğunun farkında olması için 503 Hizmet Kullanılamıyor dönmesi önerilir.")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")]),a._v(" "),e("td",[a._v("E")])])])]),a._v(" "),e("p",[e("strong",[a._v("Hata Örnekleri:")])]),a._v(" "),e("p",[e("ins",[e("strong",[a._v("400 Bad Request")])])]),a._v(" "),e("p",[e("strong",[a._v("TR.OHVPS.Business.InvalidContent")]),a._v(" hatası HHS tarafından yapılacak iş kuralı kontrollerinin başarısız olduğu durumda verilmelidir."),e("br"),a._v(" "),e("strong",[a._v("TR.OHVPS.Resource.InvalidFormat")]),a._v(" hatası şema validasyonu, alan uzunluk ve varlık kontrollerinin başarısız olduğu durumda verilmelidir.")]),a._v(" "),e("div",{staticClass:"language-JSON extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("400")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Bad Request”\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Resource Schema validation error”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Şema Kontrolleri Başarısız” \nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Resource.InvalidFormat"')]),a._v("\n\nfieldErrors"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("  \n         code"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Field.Invalid"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Field.Missing"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n")])])]),e("p",[a._v("Örn; GET /odeme-emri/22289 çağrısı durumunda 22289 geçerli bir ödeme kaynağı değilse, HHS, 400 koduyla cevap vermelidir.")]),a._v(" "),e("div",{staticClass:"language-JSON extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2b5f0fb2-730b-11e8-adc0-fa7ae01bbebc"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"path"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/ohvps/s1.1/obh/odeme-emri-rizasi"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"timestamp"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2020-06-13T18:24:38"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"httpCode"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("400")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"httpMessage"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Bad Request"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"moreInformation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Resource Schema validation error"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"moreInformationTr"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Şema kontrolleri başarısız"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n   "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"errorCode"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Resource.InvalidFormat"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n   \n  "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"fieldErrors"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"objectName"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"odemeEmriRizasi"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"field"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kmlkNo"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"messageTr"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"boyut '6' ile '30' arasında olmalı\"")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"message"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"size must be between '6' and '30'\"")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Field.Invalid"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"objectName"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"odemeEmriRizasi"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"field"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"prBrm"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"messageTr"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"boş değer olamaz"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"message"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"must not be null"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Field.Missing"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Connection.InvalidTPP"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Invalid TPP Code”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Geçersiz Yös Kodu” \n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Connection.InvalidASPSP"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Invalid ASPSP Code”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Geçersiz HHS Kodu” \n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Connection. InvalidTPPRole"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Invalid TPP Role” \nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Hatalı Yös Rolü” \n")])])]),e("p",[e("ins",[e("strong",[a._v("401 Unauthorized")])])]),a._v(" "),e("p",[e("strong",[a._v("YÖS, süresi dolmuş bir erişim belirteci kullandığında, HHS 401 (Yetkisiz) http kodu ile aşağıdaki hata kodunu dönmelidir.")]),a._v(" Aşağıdaki nedenlerden herhangi biri nedeniyle bir Erişim Belirtecinin süresi dolduğunda bu durum ortaya çıkabilir:")]),a._v(" "),e("ul",[e("li",[a._v("Rızanın süresi doldu (Son Kullanma Tarihi geçti)")]),a._v(" "),e("li",[a._v("Erişim Belirtecinin şüpheli kullanımı veya sahtekarlık şüphesi")]),a._v(" "),e("li",[a._v("Rızada belirlenen gün sayısının aşımı\nBu hata, müşteriden doğru izinlerle yeniden kimlik doğrulaması isteyerek çözülebilir.")])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("errorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('" TR.OHVPS.Connection.InvalidToken "')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Invalid Token”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Geçersiz Token” \n")])])]),e("p",[e("ins",[e("strong",[a._v("403 Forbidden")])])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("403")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Forbidden”\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Resource.Forbidden"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Insufficient rights”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “İzin verilmedi.”\n")])])]),e("p",[e("ins",[e("strong",[a._v("404 Not Found")])])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("404")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Not Found”\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Resource.NotFound"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Resource not found”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Kayıt bulunamadı”\n")])])]),e("p",[e("ins",[e("strong",[a._v("405 Method Not Allowed")])])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("405")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Method  Not Found”\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Resource.MethodNotAllowed"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Method Not Allowed”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “İstek yapılan URL için izin verilmeyen metot” \n")])])]),e("p",[e("ins",[e("strong",[a._v("406 Not Acceptable")])])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("406")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Not Acceptable”\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('" TR.OHVPS.Resource.NotAcceptable"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Accept Headers not supported”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Desteklenmeyen kabul başlıkları” \n")])])]),e("p",[e("ins",[e("strong",[a._v("415 Unsupported Media Type")])])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("415")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Unsupported Media Type”\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('" TR.OHVPS.Resource.UnsupportedMediaType"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Content type not supported”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Desteklenmeyen içerik tipi” \n")])])]),e("p",[e("ins",[e("strong",[a._v("429 Too Many Requests")])])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("429")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Too Many Requests”\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('" TR.OHVPS.Connection.ExceededRate"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “The rate limit has been exceeded for the plan or operation being used”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Planda tanımlanmış olan çağrı limiti aşıldı”\n")])])]),e("p",[e("ins",[e("strong",[a._v("500 Internal Server Error")])])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("500")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Internal Server Error”\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Server.InternalError"')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Unexpected condition was encountered”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Beklenmedik bir durumla karşılaşıldı.” \n")])])]),e("p",[e("ins",[e("strong",[a._v("503 Service Unavailable")])])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("httpCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("503")]),a._v("\nhttpMessage"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “Service Unavailable”\n\nerrorCode"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TR.OHVPS.Server.ServiceUnavailable "')]),a._v("\nmoreInformation"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “API is currently unable to handle the request”\nmoreInformationTr"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" “API şu anda isteği işleyemiyor” \n")])])]),e("h2",{attrs:{id:"_3-19-maskeleme-kuralları"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-19-maskeleme-kuralları"}},[a._v("#")]),a._v(" 3.19. Maskeleme Kuralları")]),a._v(" "),e("p",[a._v("Maskeli olarak iletilmesi gereken verilerin maskeleme kuralları şu şekildedir:")]),a._v(" "),e("ul",[e("li",[a._v("IBAN verileri Hesap Numarası : İlk 4 ve son 4 karakteri açık, diğer karakterler maskeli olmalıdır. Örnek: TR54******************4812")]),a._v(" "),e("li",[a._v("Ad-Soyadı / Ticari Unvan : Her kelimenin ilk 2 karakteri açık, sonraki karakterler yerine 4 adet ‘"),e("em",[a._v("’ karakteri konumlandırılmalıdır.\nÖrneğin: “FATİH SERKAN EREN” ifadesi “FA")]),a._v("*** SE**** ER****” şeklinde gösterilmelidir.")]),a._v(" "),e("li",[a._v("Tabela Unvanı : Her kelimenin ilk 2 karakteri açık, sonraki karakterler yerine 4 adet ‘"),e("em",[a._v("’ karakteri konumlandırılmalıdır. Örneğin “BANKALARARASI KART MERKEZİ ANONİM ŞİRKETİ” ifadesi “BA")]),a._v("*** KA**** ME**** AN**** Şİ****” şeklinde gösterilmelidir.")]),a._v(" "),e("li",[a._v("YÖS’ten girilen unvan ve iban bilgileri ödeme emri rızası ve ödeme emri yanıtında açık dönülür, Kolas akışında ödeme emri rızası yanıtı ve ödeme emri istek ve yanıtında maskeli taşınır.")])]),a._v(" "),e("h2",{attrs:{id:"_3-20-fonksiyonel-olmayan-gereksinimler"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-20-fonksiyonel-olmayan-gereksinimler"}},[a._v("#")]),a._v(" 3.20. Fonksiyonel Olmayan Gereksinimler")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("HHS’lerin sunuyor oldukları servisleri en fazla 3000 ms içinde yanıt dönecek şekilde tasarlamalıdır.")])]),a._v(" "),e("li",[e("p",[a._v("YÖS tarafından kullanıcının başlatmadığı otomatize sorgular için aşağıdaki limitler belirlenmiştir.")]),a._v(" "),e("ul",[e("li",[a._v("YÖS, Bireysel ÖHK’lar için hesap bazında günde en fazla 4 adet sorgulama yapabilir.")]),a._v(" "),e("li",[a._v("YÖS, Kurumsal ÖHK’lar için hesap bazında saatte en fazla 12 adet sorgulama yapabilir"),e("br"),a._v("\nDiğer taraftan kullanıcının başlattığı Hesap Bilgisi Hizmeti kapsamındaki sorgular HHS tarafından belirlenen üst rate limitler dahilinde tanımlanabilir.")])])]),a._v(" "),e("li",[e("p",[a._v("HHS’lerin sunuyor oldukları servislere sistemin güvenlik ve sürekliliğini sağlamak adına rate limit koyma ihtiyaçları olur ise, standartlar ve ihtiyaçlara uygun şekilde bir konfigürasyon yapabilirler. Ör: YÖS - Kullanıcı bazında günde X sorgu v.b.\nİsteğin kullanıcı tarafından başlatıldığı Request Header içerisinde yer alan Payment Service User (PSU) alanlarından anlaşılabilir.")])]),a._v(" "),e("li",[e("p",[a._v("HHS’ler aynı zamanda servislerin ayakta olup olmadığına yönelik olarak bir healthcheck servisi kurmalıdır.  HHS’lerin bu servis ile tüm network ve veritabanı ya da servislerinin ihtiyaç duydukları altyapısal erişimleri modellemeli ve bu servisi BKM ile paylaşmaları beklenmektedir. Bu servis düzenli olarak BKM tarafından çağırılarak servislerin ayakta olup olmadıklarının kontrolünün sağlanması planlanmaktadır.")])])]),a._v(" "),e("p",[a._v("Sunulan her API için /health endpointi ile aşağıdaki bilgileri vermeleri beklenmektedir.")]),a._v(" "),e("p",[e("a",{attrs:{href:""}},[a._v("GET /{api ismi}/{versiyon}/health")])]),a._v(" "),e("p",[e("strong",[a._v("Örnek:")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("GET /obh/s1.0/health")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("GET /hbh/s1.0/health")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("GET /gkd/s1.0/health")])]),a._v(" "),e("p",[a._v("HHS ve YÖS API için health servisleri aşağıdaki servislerle kontrol edilebilir.")]),a._v(" "),e("p",[e("a",{attrs:{href:""}},[a._v("GET /hhs-api/s1.0/health")]),e("br"),a._v(" "),e("a",{attrs:{href:""}},[a._v("GET /yos-api/s1.0/health")])]),a._v(" "),e("p",[a._v("Başarılı yanıtta Http 200 kodu dönülmelidir."),e("br"),a._v("\nBaşarılı Yanıt:")]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("Alan Adı")]),a._v(" "),e("th",[a._v("JSON Alan Adı")]),a._v(" "),e("th",[a._v("Format")]),a._v(" "),e("th",[a._v("Koşullu  / İsteğe Bağlı")]),a._v(" "),e("th",[a._v("Açıklama")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[a._v("status")]),a._v(" "),e("td",[a._v("status")]),a._v(" "),e("td",[a._v("AN2..20")]),a._v(" "),e("td",[a._v("Z")]),a._v(" "),e("td",[a._v("“UP”, “DOWN” değerlerini alabilir.")])])])]),a._v(" "),e("p",[a._v("Health servisinden yanıt alınamaması, hata alması ya da status DOWN gelmesi durumunda API Gatewayden istek HHS tarafına iletilmeyecektir.")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("ÖHVPS servisleri ile ilgili olarak HHS’ler, BKM tarafından düzenli olarak sorgulanacaktır, erişilebilirlik ve kullanım oranları takip edilecektir.")])]),a._v(" "),e("li",[e("p",[a._v("HHS’lerin servislerini erişim yüzdeleri açısından yıl bazında %99.75 oranında ayakta olmalarını sağlayacak şekilde kurgulamaları gerekmektedir.")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);